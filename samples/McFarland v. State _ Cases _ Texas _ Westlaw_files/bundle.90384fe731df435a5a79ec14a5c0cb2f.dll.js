var bundle_90384fe731df435a5a79ec14a5c0cb2f;(()=>{var e={68:(e,t,n)=>{e.exports=n(4507)(40116)},170:(e,t,n)=>{e.exports=n(4507)(10270)},219:(e,t,n)=>{e.exports=n(4507)(81837)},356:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>se});var i=n(6669),o=n.n(i),r=n(9912),a=n(1422),s=n(5024),l=n(3434),d=n(1235),c=n(7617),u=n(966),f=n(5293),h=n(3364),p=n(7718),m=n(2065),g=n(9417),y=n(8286),v=n(4159),C=n(8497),b=n(3607),_=n(9191),S=n.n(_),N=n(8260),E=n(3602),A=n(68),w=n(6183),x=n(8230),T=n(2656);function I(){const e=(0,x.GetAllCachedHighlightIds)();for(let t=0;t<e.length;++t){const n=(0,x.GetCachedHighlightData)(e[t]),i=T["default"].GetInstanceIdClass(e[t]);if(n.createdByCurrentUser){if([...document.querySelectorAll(`.${i}`)].some((e=>e.classList.contains("co_hlShared"))))return!0}}return!1}var D=n(6123),k=n(7875),M=n(762),R=n(9762),H=n(219),O=n(1118);class L{constructor(e){this.item=e;this.domElement=e.domElement;this.disabled=e.isDisabled;this.selected=e.isSelected;this.type=e.type;this.next=null;this.prev=null}}class P{constructor(){this.head=null;this.tail=null;this.current=null;this.length=0;this.selectedItems=[]}setFirstNodeAsCurrent(){this.setCurrentNode(this.getFirstItem())}setSelected(e){e.selected=!0;this.setCurrentNode(e);this.selectedItems.push(e)}removeSelected(e){e.selected=!1;const t=this.selectedItems.findIndex((t=>t.domElement===e.domElement));this.selectedItems.splice(t,1)}setCurrentNode(e){this.current=e}getFirstItem(){return this.head}getLastItem(){return this.tail}getCurrentItem(){return this.current||this.head}getNextItem(){return this.getCurrentItem().next||this.head}getPreviousItem(){return this.getCurrentItem().prev||this.tail}getCount(){return this.length}append(e){const t=new L(e);if(this.head){t.prev=this.tail;this.tail.next=t;this.tail=t}else{this.head=t;this.tail=t}this.length++}addItemAt(e,t){if(t<0||t>this.length)return null;const n=new L(e);let i=this.head;if(0===this.length){this.head=n;this.tail=n}else if(0===t){n.next=i;i.prev=n;this.head=n}else if(t===this.length){i=this.tail;i.next=n;n.prev=i;this.tail=n}else{let e,o=0;for(;o<t;){e=i;i=i.next;o++}n.next=i;e.next=n;i.prev=n;n.prev=e}this.length++}removeItem(e){if(e<0||e>=this.length)return null;let t=this.head;if(0===e){this.head=t.next;this.head?this.head.prev=null:this.tail=null}else if(e===this.length-1){t=this.tail;this.tail=t.prev;this.tail?this.tail.next=null:this.head=null}else{let n,i=0;for(;i<e;){n=t;t=t.next;i++}n.next=t.next;t.next.prev=n}this.length--;return t.item}getItem(e){if(e<0||e>=this.length)return null;let t=this.head,n=0;for(;n!==e;){t=t.next;n++}return t}forEach(e){let t=this.head,n=0;if(!e)return;for(;t;){e(t,n);t=t.next;n++}}}class B{constructor(e){this.opts=Object.assign({},R.MenuDefaults,e);this.itemsList=new P;this.menus=[];this._initializeEventHandlers();this._draw()}getFirstMenuItem(){return this.itemsList.getFirstItem().domElement}getLastMenuItem(){return this.itemsList.getLastItem().domElement}getFirstSelectedItem(){return(this.getSelectedMenuItems()[0]??this.itemsList.getFirstItem()).domElement}getDOMElement(){return this.menuContainer}getItem(e){if(this.getCount())return this.itemsList.getItem(e);return null}getCount(){return this.itemsList.getCount()}getSelectedItems(){const e=[];this.itemsList.forEach((t=>{t.selected&&e.push(t.domElement[0])}));return e}getSelectedMenuItems(){const e=[];this.itemsList.forEach((t=>{t.selected&&e.push(t)}));return e}_draw(){const{id:e,ariaLabelForMenuContainer:t,itemsContainerClass:n,groups:i}=this.opts,o=`.${R.MenuDefaults.itemClass}`,r=document.createElement("div");r.classList.add(R.MenuDefaults.itemsContainerClass,...n.trim().split(" "));r.setAttribute("role","menu");r.setAttribute("aria-label",t);e&&(r.id=e);this.menuContainer=r;i.forEach(((e,t)=>{const{subheaderText:n,subheaderClass:o,subheaderId:r,separatorClass:a,separatorId:s}=e,l=this._getGroup(e);this.addItems(l,e.items);this.menuContainer.append(l);if(t!==i.length-1){const e=this._getSeparator(a,s);this.menuContainer.append(e)}if(n){const e=document.createElement("li");e.textContent=n;e.setAttribute("role","presentation");o&&e.classList.add(o);r&&e.setAttribute("id",r);l.setAttribute("aria-label",n);l.before(e)}}));this.dropdownItems=Array.from(this.getDOMElement()?.querySelectorAll(o)).filter((function(e){return"separator"!==e.getAttribute("role")}))}_getGroup(e){const{type:t,ariaLabel:n,id:i,itemsContainerClass:o}=e,r=document.createElement("ul");t===R.ItemTypes.menu?r.setAttribute("role","menu"):r.setAttribute("role","group");o&&(r.className=o);n&&r.setAttribute("aria-label",n);i&&r.setAttribute("id",i);k.ElementStorage.put(r,"type",t);return r}addItems(e,t,n=null){const i=this._getArrayOfObjects(t),o=k.ElementStorage.get(e,"type");null!==n&&n>=0?this._addItemsAtIndex(e,i,o,n):this._appendItems(e,i,o);this._attachEventListeners()}_addItemsAtIndex(e,t,n,i){t.forEach(((t,o)=>{const r=this._initializeMenuItem(t,n);this.itemsList.addItemAt(r.itemObject,i+o);i+o<e.children.length?e.insertBefore(r.$menuItem[0],e.children[i+o]):e.appendChild(r.$menuItem[0])}))}_appendItems(e,t,n){t.forEach((t=>{const i=this._initializeMenuItem(t,n);this.itemsList.append(i.itemObject);e.appendChild(i.$menuItem[0]);if(t.subMenu){i.$menuItem[0].appendChild(t.subMenu.getDOMElement());i.$menuItem[0].classList.add("FlyoutArrow");this.menus.push(t.subMenu);t.subMenu._setParentMenu(this);t.subMenu._collapseMenu()}}))}_setParentMenu(e){this.parentMenu=e;this.menuContainer.classList.add("FlyoutContainer")}_expandMenu(e=!1){const t=this.getSelectedMenuItems()[0]??this.itemsList.getFirstItem(),n=this.opts.useFlexContainer?"flex":"block";this.getDOMElement()&&(this.getDOMElement().style.display=n);this._updateDisabledItems();this.itemsList.setCurrentNode(t);e&&t?.domElement?.focus()}_collapseMenu(){this.getDOMElement()&&(this.getDOMElement().style.display="none");this.menus.length&&this.menus.forEach((e=>{e._collapseMenu()}))}_isCollapsed(){return"none"===this.getDOMElement().style.display}_attachEventListeners(){this.getDOMElement()?.removeEventListener("click",this._handleClickOnDropdownItems);this.getDOMElement()?.removeEventListener("keydown",this._handleKeydownOnDropdownItems);this.getDOMElement()?.removeEventListener("keyup",this._handleKeyupOnDropdownItems);this.getDOMElement()?.addEventListener("click",this._handleClickOnDropdownItems);this.getDOMElement()?.addEventListener("keydown",this._handleKeydownOnDropdownItems);this.getDOMElement()?.addEventListener("keyup",this._handleKeyupOnDropdownItems)}_initializeMenuItem(e,t){let n;const{itemClass:i,selectedItemClass:o,disabledItemClass:r,itemTextClass:a}=this.opts,s={itemClass:i,selectedItemClass:o,disabledItemClass:r,itemTextClass:a};e.type=t;n=e.iconClass?new O["default"](e,s,t).render():new H["default"](e,s,t).render();if(t===R.ItemTypes.navigation){const t=n.find("a");e.domElement=t}else e.domElement=n;return{$menuItem:n,itemObject:e}}_handleClickOnDropdownItems(e){if(e.target.closest(`.${R.MenuDefaults.itemsContainerClass}`)===this.menuContainer){let t;const n=e.target.closest("li"),i=e=>e.disabled||this._isItemDisabled(n),o=e=>e&&!i(e)&&!(e.type===R.ItemTypes.navigation);this.itemsList.forEach((e=>{e.domElement[0]===n&&(t=e)}));if(o(t)){this.itemsList.setCurrentNode(t);this.menus.forEach((e=>{e._isCollapsed()||e._collapseMenu()}));this._handleSelectMenuItem(e);e.preventDefault()}}}_handleKeydownOnDropdownItems(e){const{itemsList:t}=this,n=t.getCurrentItem(),i=t.getFirstItem(),o=t.getLastItem(),r=t.getNextItem(),a=t.getPreviousItem(),s=n.disabled||this._isItemDisabled(n.domElement[0]);if(e.target.closest(`.${R.MenuDefaults.itemsContainerClass}`)===this.menuContainer)switch(e.which){case M["default"].ENTER:case M["default"].SPACE:if(!s){e.preventDefault();this.keydownRegistered=!0;t.setCurrentNode(n)}break;case M["default"].UP:e.preventDefault();a.domElement.focus();t.setCurrentNode(a);break;case M["default"].DOWN:e.preventDefault();r.domElement.focus();t.setCurrentNode(r);break;case M["default"].ESCAPE:this._processEscapeKeydown(e);break;case M["default"].HOME:e.preventDefault();i.domElement.focus();t.setCurrentNode(i);break;case M["default"].END:e.preventDefault();o.domElement.focus()
;t.setCurrentNode(o);break;case M["default"].TAB:this._processTabKeydown(e);break;case M["default"].RIGHT:s||this._processRightKeydown(n)}else switch(e.which){case M["default"].LEFT:this._processLeftKeydown(n,e);break;case M["default"].ESCAPE:this._processEscapeKeydownForChild(n,e)}}_handleKeyupOnDropdownItems(e){if(this.keydownRegistered){this._handleSelectMenuItem(e);this.keydownRegistered=!1}}_handleSelectMenuItem(e){const t=this.itemsList.getCurrentItem(),n=t?.item?.subMenu;if(n){n._expandMenu(this.keydownRegistered);return}const i=t.type===R.ItemTypes.radio&&e.keyCode===M["default"].SPACE;this._selectMenuItem();this.opts.collapseOnSelect&&!i&&this._triggerEvent("collapse")}_selectMenuItem(){const e=this.itemsList.getCurrentItem(),{type:t,domElement:n,item:i}=e,o={domElement:n,item:i};this._selectMenuItemByType(t,n);this._triggerEvent("select",o);if(this.parentMenu)this.parentMenu._selectMenuItem();else{if(e.type===R.ItemTypes.navigation)return;const t=k.ElementStorage.get(n[0],"item"),i=t.textForButton||t.content;this._triggerEvent("changeButtonLabel",{label:i})}}_selectMenuItemByType(e,t){this.itemsList.forEach((n=>{if(n.type!==e)return;switch(e){case R.ItemTypes.menu:this._selectPlainMenuItem(n,t);break;case R.ItemTypes.radio:this._selectRadioMenuItem(n,t);break;case R.ItemTypes.checkbox:this._selectCheckboxMenuItem(n,t)}}))}_selectPlainMenuItem(e,t){const{opts:n}=this;e.domElement===t?e.domElement.addClass(n.selectedItemClass).addClass(R.MenuDefaults.selectedItemClass):e.domElement.removeClass(n.selectedItemClass).removeClass(R.MenuDefaults.selectedItemClass)}_selectRadioMenuItem(e,t){if(e.domElement!==t)return;const{domElement:n}=e,{selectedItemClass:i,itemClass:o}=R.MenuDefaults,r=`.${o}[aria-checked='true'][role='menuitemradio']`,a=this.getDOMElement()?.querySelectorAll(r);if("false"===n.attr("aria-checked")){a?.forEach((e=>{e?.setAttribute("aria-checked","false");e?.classList.remove(this.opts.selectedItemClass,i)}));n.addClass(this.opts.selectedItemClass).addClass(i);n.attr("aria-checked","true");this.getSelectedMenuItems().forEach((e=>{"radio"===e.type&&(e.selected=!1)}));e.selected=!0}}_selectCheckboxMenuItem(e,t){const{opts:n}=this;if(e.domElement===t)if("false"===e.domElement.attr("aria-checked")){e.domElement.addClass(n.selectedItemClass).addClass(R.MenuDefaults.selectedItemClass);e.domElement.attr("aria-checked","true")}else{e.domElement.attr("aria-checked","false");e.domElement.removeClass(this.opts.selectedItemClass).removeClass(R.MenuDefaults.selectedItemClass)}}_triggerEvent(e,t){switch(e){case"select":this.getDOMElement().dispatchEvent(new CustomEvent("menu-item-selected",{bubbles:!0,detail:t}));break;case"collapse":this.getDOMElement().dispatchEvent(new CustomEvent("dropdown-collapsed",{bubbles:!0}));break;case"changeButtonLabel":this.getDOMElement().dispatchEvent(new CustomEvent("changeButtonLabel",{bubbles:!0,detail:t}))}}_processEscapeKeydown(e){if(null==this.parentMenu){this.opts.shouldPreventEscapePropagation&&e.stopPropagation();this._triggerEvent("collapse")}}_processEscapeKeydownForChild(e,t){if(e.item.subMenu){t.stopPropagation();e.item.subMenu._collapseMenu();e.domElement.focus()}}_processTabKeydown(e){e.shiftKey&&e.preventDefault();this._triggerEvent("collapse");if(this.opts.nextTabbableElement&&!e.shiftKey){e.preventDefault();this.opts.nextTabbableElement.focus()}}_processRightKeydown(e){const t=e?.item?.subMenu;t&&t._expandMenu(!0)}_processLeftKeydown(e,t){const n=e?.item?.subMenu;if(n){t.stopPropagation();e.domElement.focus();n._collapseMenu()}}_initializeEventHandlers(){this._handleClickOnDropdownItems=this._handleClickOnDropdownItems.bind(this);this._handleKeydownOnDropdownItems=this._handleKeydownOnDropdownItems.bind(this);this._handleKeyupOnDropdownItems=this._handleKeyupOnDropdownItems.bind(this)}_getArrayOfObjects(e){let t=[];Array.isArray(e)?t=e:t.push(e);return t}_getSeparator(e,t){const{itemClass:n}=this.opts,i={itemClass:n},o=new H["default"]({},i,R.ItemTypes.separator).render()[0];e&&o.classList.add(e);t&&o.setAttribute("id",t);return o}_isItemDisabled(e){return e?.classList.contains(R.MenuDefaults.disabledItemClass)||e?.classList.contains(this.opts.disabledItemClass)}_updateDisabledItems(){this.dropdownItems?.forEach((e=>{e.classList.contains(this.opts.disabledItemClass)?e.setAttribute("aria-disabled","true"):e.removeAttribute("aria-disabled")}))}focusSelectedItem(){const e=this.getFirstSelectedItem();setTimeout((()=>e.focus()),250)}selectItemByIndex(e){const t=this.getItem(e);if(t){this.itemsList.setCurrentNode(t);this._selectMenuItem(t)}}getSelectedIndices(){const e=this.getSelectedItems(),t=[];e.forEach((e=>{const n=this._findItemIndex(e);-1!==n&&t.push(n)}));return t}_findItemIndex(e){for(let t=0;t<this.itemsList.getCount();t++)if(this.itemsList.getItem(t).domElement[0]===e)return t;return-1}setMenuContainerLabel(e){this.getDOMElement()?.setAttribute("aria-label",e)}removeItem(e){if(!this.itemsList)return null;const t=[];this.itemsList.forEach(((e,n)=>{e.domElement[0]&&!e.domElement[0].classList.contains(R.MenuDefaults.selectAllOptionClass)&&t.push({item:e,itemIndex:n})}));const n=t[e];if(n){const{item:e,itemIndex:t}=n,i=e.domElement[0];this.itemsList.removeItem(t);i?.remove();return i}return null}updateItem(e,t){if(!this.itemsList)return null;const n=[];this.itemsList.forEach(((e,t)=>{e.domElement[0]&&!e.domElement[0].classList.contains(R.MenuDefaults.selectAllOptionClass)&&n.push({item:e,itemIndex:t})}));const i=n[e];if(i){const{item:n,itemIndex:o}=i,r=n.domElement[0].parentNode;this.addItems(r,[t],e);this.removeItem(o+1);return r.children[e]}return null}}var F=n(2114);const{texts:G}=y["default"],U={allNotesCount:0,myNotesCount:0,shouldDisplayShareAll:!0,shouldDisplayUnshareAll:!0,shouldDisplayMyAnnotations:!0,shouldHideShareOptions:!1},W={dropdownContainer:"#co_docToolbarAddNoteWidget",labelForButton:`<span class="icon25 icon_note-blue">${G.notesButtonLabel}</span>`,idForButton:"co_annotationsMenuButton",expandedContainerClass:"expanded",iconClass:"icon25 icon_downMenu-gray",iconAfterText:!0},$={itemsContainerClass:"a11yDropdown-menu--right",selectedItemClass:"checked",disabledItemClass:"disabled",collapsedContainerClass:"co_dropdownBoxCollapsed",expandedContainerClass:"co_dropdownBoxExpanded",ariaLabelForMenuContainer:G.notesMenuLabel},z={content:G.addNoteLabel,id:"co_noteMenu_addNew",iconClass:"icon25 icon_annotationAdd-blue"},V=e=>({content:G.shareAnnotationsLabel,id:"co_noteMenu_shareAllNotes",iconClass:"icon25 icon_people",isDisabled:!e}),q=e=>({content:G.stopSharingAnnotationsLabel,id:"co_noteMenu_unShareAllNotes",iconClass:"icon25 icon_personStop-blue",isDisabled:!e}),j=e=>({content:G.hideNotesLabel,id:"co_hideAllAnnotations",isSelected:e}),K=e=>G.showAllNotesLabel(e),Y=e=>G.showMyNotesLabel(e),J=(e,t=0)=>({content:K(t),id:"co_allAnnotations",iconClass:"icon25 icon_annotationShow-blue",isSelected:e===G.ALL_NOTES}),X=(e,t=0,n)=>({content:Y(t),id:"co_myAnnotations",iconClass:"icon25 icon_annotation-blue",isSelected:e===G.MY_NOTES,isDisabled:!n}),Q=e=>({content:G.hideAllNotesLabel,id:"co_hideAllAnnotations",iconClass:"icon25 icon_annotationHide-blue",isSelected:e===G.HIDE_NOTES}),Z=e=>({content:G.showMineHighlighting,id:"co_myAnnotations",iconClass:"icon25 icon_annotation-blue",isSelected:e===G.MY_NOTES}),ee=e=>{const{notesSubheader:t,notesButtonLabel:n}=y["default"].texts,{userPreference:i,allNotesCount:o,myNotesCount:r,shouldDisplayMyAnnotations:a,shouldDisplayShareAll:s,shouldDisplayUnshareAll:l}=e;return[{type:"menu",items:[z,V(s),q(l)],ariaLabel:n,itemsContainerClass:"co_dropDownMenuList"},{type:"radio",items:[J(i,o),X(i,r,a),Q(i)],subheaderText:t,subheaderClass:"co_dropDownMenuLabel",itemsContainerClass:"co_dropDownMenuList checkmarks"}]},te=e=>{const{notesButtonLabel:t}=y["default"].texts;let n;n=e.allNotesCount>0?(e=>{const{notesSubheader:t,notesButtonLabel:n}=y["default"].texts,{userPreference:i,allNotesCount:o}=e;return[{type:"menu",items:[z],ariaLabel:n,itemsContainerClass:"co_dropDownMenuList"},{type:"radio",items:[J(i,o),Q(i)],subheaderText:t,subheaderClass:"co_dropDownMenuLabel",itemsContainerClass:"co_dropDownMenuList checkmarks"}]})(e):[{type:"menu",items:[z],
ariaLabel:t,itemsContainerClass:"co_dropDownMenuList"}];return n},ne=e=>{const{areSharedAnnotationsAllowed:t,areSharedNotesAllowed:n,shouldHideShareOptions:i,isInfiniteScroll:o,showAnnotationsPreference:r,userPreference:a}=e;let s;s=i?te(e):t?o?(e=>{const{notesSubheader:t,notesButtonLabel:n}=y["default"].texts,{userPreference:i,allNotesCount:o,myNotesCount:r,shouldDisplayMyAnnotations:a,shouldDisplayShareAll:s,shouldDisplayUnshareAll:l}=e;var d;return[{type:"menu",items:[z,V(s),q(l)],ariaLabel:n,itemsContainerClass:"co_dropDownMenuList"},{type:"radio",items:[(d=i,{content:G.showAllHighlighting,id:"co_allAnnotations",iconClass:"icon25 icon_annotationShow-blue",isSelected:d===G.ALL_NOTES}),Z(i),Q(i)],subheaderText:t,subheaderClass:"co_dropDownMenuLabel",itemsContainerClass:"co_dropDownMenuList checkmarks"}]})(e):n?(e=>{const{notesButtonLabel:t}=y["default"].texts;let n;n=e.allNotesCount>0?ee(e):[{type:"menu",items:[z],ariaLabel:t,itemsContainerClass:"co_dropDownMenuList"}];return n})(e):(e=>{const{notesSubheader:t,notesButtonLabel:n}=y["default"].texts;return[{type:"menu",items:[z],ariaLabel:n,itemsContainerClass:"co_dropDownMenuList"},{type:"radio",items:[J(e),X(e),Q(e)],subheaderText:t,itemsContainerClass:"co_dropDownMenuList checkmarks"}]})(a):(e=>{const{notesButtonLabel:t}=y["default"].texts,n=!!e;var i;return[{type:"menu",items:[z],ariaLabel:t,itemsContainerClass:"co_dropDownMenuList"},{type:"radio",items:[(i=n,{content:G.displayAnnotationsLabel,id:"co_annotationsToggle",isSelected:i}),j(!n)]}]})(r);return s};class ie{constructor(e){this.opts={...U,...e};this.buttonOpts=W;this.menuOpts=$}draw(e){const t={...this.opts,...e};this.removeMenu();this.menuOpts.groups=ne(t);this.dropdownContainer=document.querySelector(this.buttonOpts.dropdownContainer);this.menu=new B(this.menuOpts);this.menuButton=new F["default"](this.menu,this.buttonOpts);this.menuButton.draw();this._addTooltip();this._addEventListeners()}removeMenu(){if(this.dropdownContainer){this.dropdownContainer.replaceChildren();this.dropdownContainer=null}}_addEventListeners(){this.menu.getDOMElement()?.addEventListener("menu-item-selected",(e=>{switch(e.detail.item.id){case"co_noteMenu_addNew":this.opts.addNoteCallback();this.draw();break;case"co_noteMenu_shareAllNotes":this.opts.shareAllCallback();break;case"co_noteMenu_unShareAllNotes":this.opts.unshareAllCallback();break;case"co_allAnnotations":this.opts.showAllAnnotationsCallback();break;case"co_myAnnotations":this.opts.showMyAnnotationsCallback();break;case"co_hideAllAnnotations":this.opts.hideAllAnnotationsCallback();break;case"co_annotationsToggle":this.opts.toggleNotes(e.detail.item.isSelected)}}));this.menuButton.getDOMElement().addEventListener("dropdown-expanded",(()=>{this.opts.updateCallback()}))}updateAllNotesCount(e,t){this.opts.allNotesCount=e;if(this.shouldShowAllOpts!==t){this.shouldShowAllOpts=t;this.draw()}else{const t=K(e);(document.querySelector("#co_allAnnotations .a11yDropdown-itemText")??{}).textContent=t}}updateMyNotesCount(e,t){const{shouldDisplayMyAnnotations:n,shouldDisplayShareAll:i,shouldDisplayUnshareAll:o}=t;this.opts.shouldDisplayUnshareAll=o;this.opts.shouldDisplayShareAll=i;this.opts.shouldDisplayMyAnnotations=n;if(this.opts.myNotesCount!==e){this.opts.myNotesCount=e;this.draw()}}_addTooltip(){const{notesButtonLabel:e}=y["default"].texts,t=this.menuButton.getDOMElement();t.setAttribute("aria-label",e);new D["default"](t,e).render()}}var oe=n(4682);var re=n(2842);function ae(e){this.opts=e}ae.prototype={Draw:function(){this._createA11yMenu()},SetParent:function(e){this._parentEl=e},GetAnnotationsContainer:function(){return this._annotationsContainer},SetAnnotationsContainer:function(e){this._annotationsContainer=e},Destroy:function(){this._overlay?.Destroy();if(this._addHighlightEventSubscription){a["default"].Unsubscribe("Cobalt.Document.Highlighting.AnnotationAdded");delete this._addHighlightEventSubscription}ae.a11yMenu?.removeMenu()}};ae.IsSharedNoteCountsUpToDate=!0;ae.prototype.GetDocumentGuid=function(){return this._documentGuid?this._documentGuid:N["default"].ViewData.DocumentGuid};ae.prototype.SetDocumentGuid=function(e){this._documentGuid=e};ae.prototype.findElement=function(e){if(this._menuContainer)return this._menuContainer.find(`#${e}`);return S()(`#${e}`)};ae.prototype.getAddNoteElement=function(){this.$addNote||(this.$addNote=this.findElement("co_noteMenu_addNew"));return this.$addNote};ae.prototype.getShareAllElement=function(){this.$shareAll||(this.$shareAll=this.findElement("co_noteMenu_shareAllNotes"));return this.$shareAll};ae.prototype.getUnshareAllElement=function(){this.$unshareAll||(this.$unshareAll=this.findElement("co_noteMenu_unShareAllNotes"));return this.$unshareAll};ae.prototype.getAllAnnotationsElement=function(){this.$allAnnotations||(this.$allAnnotations=this.findElement("co_allAnnotations"));return this.$allAnnotations};ae.prototype.getAllAnnotationsTextElement=function(){this.$allAnnotationsText||(this.$allAnnotationsText=this.findElement("allNotes"));return this.$allAnnotationsText};ae.prototype.getMyAnnotationsElement=function(){this.$myAnnotations||(this.$myAnnotations=this.findElement("co_myAnnotations"));return this.$myAnnotations};ae.prototype.getMyAnnotationsTextElement=function(){this.$myAnnotationsText||(this.$myAnnotationsText=this.findElement("myNotes"));return this.$myAnnotationsText};ae.prototype.getHideAnnotationsElement=function(){this.$hideAnnotationsText||(this.$hideAnnotationsText=this.findElement("co_hideAllAnnotations"));return this.$hideAnnotationsText};ae.prototype.toggleShowAll=function(e){this.getAllAnnotationsElement().toggleClass("checked",e)};ae.prototype.toggleShowMy=function(e){this.getMyAnnotationsElement().toggleClass("checked",e)};ae.prototype.toggleHideAll=function(e){this.getHideAnnotationsElement().toggleClass("checked",e)};ae.prototype._getIsShared=function(){const e="folders"===h["default"].Instance.ContainerType,t=p["default"][0]&&p["default"][0].DocGuid;return!(e&&!t)};ae.prototype.AreSharedHighlightsAllowed=function(){return m["default"].AreSharedHighlightsAllowed()};ae.prototype._createHTMLStructure=function(){let e,t,n,i;if(this.AreSharedAnnotationsAllowed()){try{var l="",d="",c="",h=r["default"].lookup("SC.Foldering.NoteMenu.ViewOptions","View Options"),p=r["default"].format("SC.Foldering.NoteMenu.ShowAllNotes",{Count:0},"Show All Annotations (0)"),m=r["default"].format("SC.Foldering.NoteMenu.ShowMine",{Count:0},"Show My Annotations (0)"),g=r["default"].lookup("SC.Foldering.NoteMenu.HideAllNotes","Hide All Annotations");n=u["default"].Get("ADC",oe["default"].SHARING_ANNOTATIONS_PREFERENCE_KEY);i=r["default"].lookup("SC.Foldering.Note.AddNote","Add Note");if(v["default"].IsInfiniteScroll){p=r["default"].lookup("SC.Foldering.NoteMenu.InfiniteScroll.ShowAllNotes","Show All Annotations");m=r["default"].lookup("SC.Foldering.NoteMenu.InfiniteScroll.ShowMine","Show My Annotations")}if(this.AreSharedHighlightsAllowed()){e=r["default"].lookup("SC.Foldering.NoteMenu.ShareAllAnnotations","Share All My Annotations");t=r["default"].lookup("SC.Foldering.NoteMenu.UnShareAllAnnotations","Stop Sharing My Annotations")}else{e=r["default"].lookup("SC.Foldering.NoteMenu.ShareAllNotes","Share All My Notes");t=r["default"].lookup("SC.Foldering.NoteMenu.UnShareAllNotes","Stop Sharing My Notes")}}catch(e){f["default"].ConsoleMessage("Error: "+e,f["default"].Level.Error,"Cobalt.Foldering.NoteMenu._createHTMLStructure")}const C=y["default"].events.displayAllNotes;if(n===oe["default"].SHARING_ANNOTATIONS_PREFERENCE_VALUE_HIDENOTES){c="checked";a["default"].Publish("Cobalt.Foldering.NoteMenu.HideAnnotationsEvent",new s["default"]({},{},C,"1.0"));this._hideAnnotationsContainer()}else if(n===oe["default"].SHARING_ANNOTATIONS_PREFERENCE_VALUE_MYNOTES){d="checked";a["default"].Publish("Cobalt.Foldering.NoteMenu.ShowMyAnnotationsEvent",new s["default"]({},{},C,"1.0"))}else{l="checked";a["default"].Publish("Cobalt.Foldering.NoteMenu.ShowMyAnnotationsEvent",new s["default"]({},{},C,"1.0"));this._showAnnotationsContainer()}
this.opts?.shouldHideShareOptions?this._menuContainer=S()(o().template('<div class="co_dropdownBoxContentRight">\n    <ul>\n        <li id="co_noteMenu_addNew">\n            <button type="button"><%-addNote%></button>\n        </li>\n    </ul>\n    <h3 id="co_folderingNoteMenuLabel" class="co_dropDownMenuLabel"><%-viewOptions%></h3>\n    <ul id="co_folderingNoteMenuList" class="co_dropDownMenuList checkmarks">\n        <li id="co_allAnnotations" class="<%-allNotes%>">\n            <button id="allNotes" type="button"><%-showAll%></button>\n        </li>\n        <li id="co_hideAllAnnotations" class="<%-hideNotes%>">\n            <button type="button"><%-hideAll%></button>\n        </li>\n    </ul>\n</div>\n')({addNote:i,allNotes:l,hideNotes:c,viewOptions:h,showAll:p,hideAll:g})):this.AreSharedNotesAllowed()?this._menuContainer=S()(o().template('\n<div class="co_dropdownBoxContentRight">\n    <ul>\n        <li id="co_noteMenu_addNew">\n            <a href="javascript:void(0)"><%-addNote%></a>\n        </li>\n        <li id="co_noteMenu_shareAllNotes">\n            <span class="icon25 icon_people"></span>\n            <a href="javascript:void(0)"><%-ShareAllNotes%></a>\n        </li>\n        <li id="co_noteMenu_unShareAllNotes">\n            <span class="icon25 icon_close active"></span>\n            <a href="javascript:void(0)"><%-UnShareAllNotes%></a>\n        </li>\n    </ul>\n    <h3 id="co_folderingNoteMenuLabel" class="co_dropDownMenuLabel"><%-viewOptions%></h3>\n    <ul id="co_folderingNoteMenuList" class="co_dropDownMenuList checkmarks">\n        <li id="co_allAnnotations" class="<%-allNotes%>">\n            <a id="allNotes" href="javascript:void(0)"><%-showAll%></a>\n        </li>\n        <li id="co_myAnnotations" class="<%-myNotes%>">\n            <a id="myNotes" href="javascript:void(0)"><%-showMine%></a>\n        </li>\n        <li id="co_hideAllAnnotations" class="<%-hideNotes%>">\n            <a href="javascript:void(0)"><%-hideAll%></a>\n        </li>\n    </ul>\n</div>\n')({addNote:i,ShareAllNotes:e,UnShareAllNotes:t,allNotes:l,myNotes:d,hideNotes:c,viewOptions:h,showAll:p,showMine:m,hideAll:g})):this._menuContainer=S()(o().template('\n<div class="co_dropdownBoxContentRight">\n    <ul>\n        <li id="co_noteMenu_addNew">\n            <a href="javascript:void(0)"><%-addNote%></a>\n        </li>\n    </ul>\n    <h3 id="co_folderingNoteMenuLabel" class="co_dropDownMenuLabel"><%-viewOptions%></h3>\n    <ul id="co_folderingNoteMenuList" class="co_dropDownMenuList checkmarks">\n        <li id="co_allAnnotations" class="<%-allNotes%>">\n            <a id="allNotes" href="javascript:void(0)"><%-showAll%></a>\n        </li>\n        <li id="co_myAnnotations" class="<%-myNotes%>">\n            <a id="myNotes" href="javascript:void(0)"><%-showMine%></a>\n        </li>\n        <li id="co_hideAllAnnotations" class="<%-hideNotes%>">\n            <a href="javascript:void(0)"><%-hideAll%></a>\n        </li>\n    </ul>\n</div>\n')({addNote:i,ShareAllNotes:e,allNotes:l,myNotes:d,hideNotes:c,viewOptions:h,showAll:p,showMine:m,hideAll:g}))}else{n=u["default"].Get("Foldering",oe["default"].SHOW_ANNOTATIONS_PREFERENCE_KEY);let e="";i=r["default"].lookup("SC.Foldering.Note.AddNote","Add Note");const t=r["default"].lookup("SC.Foldering.NoteMenu.ShowAnnotations","Show Annotations");if(n===oe["default"].SHOW_ANNOTATIONS_PREFERENCE_VALUE_CHECKED){e="co_checked";this._showAnnotationsContainer()}else this._hideAnnotationsContainer();this._menuContainer=S()(o().template('<div class="co_dropdownBoxContentRight">\n    <ul>\n        <li id="co_noteMenu_addNew">\n            <a href="javascript:void(0)" role="button"><%- addNote %></a>\n        </li>\n        <li id="co_annotationsToggle" class="<%- checked %>">\n            <a href="javascript:void(0)" role="button"><%- displayAnnotations %></a>\n        </li>\n    </ul>\n</div>')({addNote:i,checked:e,displayAnnotations:t}))}this._overlay?.AddContentToBody(this._menuContainer[0])};ae.prototype._createA11yMenu=function(){const e=u["default"].Get("ADC",oe["default"].SHARING_ANNOTATIONS_PREFERENCE_KEY),t=ae.prototype.AreSharedNotesAllowed(),n={userPreference:e,areSharedNotesAllowed:t,showAnnotationsPreference:u["default"].Get("Foldering",oe["default"].SHOW_ANNOTATIONS_PREFERENCE_KEY),addNoteCallback:()=>this._processAddNote(),shareAllCallback:()=>this._shareAllCallback(),unshareAllCallback:()=>this._unshareAllCallback(),showMyAnnotationsCallback:()=>this._updateMyAnnotations(),showAllAnnotationsCallback:()=>this._processShowAllShared(),hideAllAnnotationsCallback:()=>this._processHideAll(),toggleNotes:()=>this._processToggleNotes(),areSharedAnnotationsAllowed:ae.prototype.AreSharedAnnotationsAllowed(),areSharedHighlightsAllowed:ae.prototype.AreSharedHighlightsAllowed(),isInfiniteScroll:v["default"].IsInfiniteScroll,updateCallback:()=>ae._enableOrDisableStopSharingMyAnnotationsTextInDropdown(),...this.opts};ae.a11yMenu=new ie(n);ae.a11yMenu.draw();this._updateNotesDisplay(e,t)};ae.prototype._updateNotesDisplay=function(e,t){const{displayAllNotes:n}=y["default"].events;if(t)switch(e){case oe["default"].SHARING_ANNOTATIONS_PREFERENCE_VALUE_HIDENOTES:a["default"].Publish("Cobalt.Foldering.NoteMenu.HideAnnotationsEvent",new s["default"]({},{}));this._hideAnnotationsContainer();break;case oe["default"].SHARING_ANNOTATIONS_PREFERENCE_VALUE_MYNOTES:a["default"].Publish("Cobalt.Foldering.NoteMenu.ShowMyAnnotationsEvent",new s["default"]({},{},n));break;default:a["default"].Publish("Cobalt.Foldering.NoteMenu.ShowMyAnnotationsEvent",new s["default"]({},{},n));this._showAnnotationsContainer()}else e===oe["default"].SHOW_ANNOTATIONS_PREFERENCE_VALUE_CHECKED||e===oe["default"].SHARING_ANNOTATIONS_PREFERENCE_VALUE_ALLNOTES?this._showAnnotationsContainer():this._hideAnnotationsContainer()};ae.prototype.AreSharedNotesAllowed=function(){return(0,g.AreSharedNotesAllowed)()};ae.prototype.AreSharedAnnotationsAllowed=function(){return(0,g.AreSharedAnnotationsAllowed)()&&this._getIsShared()};ae.prototype.ShowAllShared=function(){this._overlay?.HideWidget(!0);this.toggleShowAll(!0);this.toggleShowMy(!1);this.toggleHideAll(!1);this._processShowAllShared()};ae.prototype._processShowAllShared=function(){this._checkAnnotations();this._updateUserPreferenceSharingAnnotations(oe["default"].SHARING_ANNOTATIONS_PREFERENCE_KEY,oe["default"].SHARING_ANNOTATIONS_PREFERENCE_VALUE_ALLNOTES);this._updateAnnotationUserPreference(oe["default"].SHOW_ANNOTATIONS_PREFERENCE_KEY,oe["default"].SHOW_ANNOTATIONS_PREFERENCE_VALUE_CHECKED);this.UpdateNoteCounts();this.AreSharedHighlightsAllowed()&&b["default"].DisplayAllHighlights();this._publishEvent("Cobalt.Foldering.NoteMenu.ShowAnnotationsEvent")};ae.prototype.ToggleNotes=function(){this._overlay?.HideWidget(!0);if(this._menuContainer.find("li#co_annotationsToggle").hasClass("co_checked")){this._uncheckAnnotations();this._updateUserPreferenceSharingAnnotations(oe["default"].SHOW_ANNOTATIONS_PREFERENCE_KEY,oe["default"].SHOW_ANNOTATIONS_PREFERENCE_VALUE_UNCHECKED);this._publishEvent("Cobalt.Foldering.NoteMenu.HideAnnotationsEvent")}else{this._checkAnnotations();this._updateUserPreferenceSharingAnnotations(oe["default"].SHOW_ANNOTATIONS_PREFERENCE_KEY,oe["default"].SHOW_ANNOTATIONS_PREFERENCE_VALUE_CHECKED);this._publishEvent("Cobalt.Foldering.NoteMenu.ShowAnnotationsEvent")}};ae.prototype._processToggleNotes=function(e){if(e){this._updateUserPreferenceSharingAnnotations(oe["default"].SHOW_ANNOTATIONS_PREFERENCE_KEY,oe["default"].SHOW_ANNOTATIONS_PREFERENCE_VALUE_UNCHECKED);this._publishEvent("Cobalt.Foldering.NoteMenu.HideAnnotationsEvent")}else{this._updateUserPreferenceSharingAnnotations(oe["default"].SHOW_ANNOTATIONS_PREFERENCE_KEY,oe["default"].SHOW_ANNOTATIONS_PREFERENCE_VALUE_CHECKED);this._publishEvent("Cobalt.Foldering.NoteMenu.ShowAnnotationsEvent")}};ae.prototype.HideAllNotes=function(){this._overlay?.HideWidget(!0);this.toggleShowAll(!1);this.toggleShowMy(!1);this.toggleHideAll(!0);this._processHideAll()};ae.prototype._processHideAll=function(){this._uncheckAnnotations()
;this._updateUserPreferenceSharingAnnotations(oe["default"].SHARING_ANNOTATIONS_PREFERENCE_KEY,oe["default"].SHARING_ANNOTATIONS_PREFERENCE_VALUE_HIDENOTES);this._updateAnnotationUserPreference(oe["default"].SHOW_ANNOTATIONS_PREFERENCE_KEY,oe["default"].SHOW_ANNOTATIONS_PREFERENCE_VALUE_UNCHECKED);this.AreSharedHighlightsAllowed()&&b["default"].DisplayNoHighlights();this._publishEvent("Cobalt.Foldering.NoteMenu.HideAnnotationsEvent")};ae.prototype._attachMenuActionEvents=function(){this.getAddNoteElement().click(this._addNoteCallback.bind(this));this.getShareAllElement().click(this._shareAllCallback.bind(this));this.getUnshareAllElement().click(this._unshareAllCallback.bind(this));this.AreSharedAnnotationsAllowed()?this.getAllAnnotationsElement().click(this.ShowAllShared.bind(this)):this._menuContainer.find("li#co_annotationsToggle").click(this.ToggleNotes.bind(this));this.getHideAnnotationsElement().click(this.HideAllNotes.bind(this));this.getMyAnnotationsElement().click(this._showMyAnnotationsCallback.bind(this));this._menuContainer[0]?.addEventListener("keydown",A["default"]);this._menuContainer[0]?.addEventListener("keydown",(e=>{e.code===w["default"].Escape&&this._overlay?.HideWidget(!0)}))};ae.prototype._addNoteCallback=function(){this._overlay?.HideWidget(!0);this._checkAnnotations();if(this.AreSharedAnnotationsAllowed()){this.toggleShowAll(!0);this.toggleShowMy(!1);this.toggleHideAll(!1)}this._processAddNote()};ae.prototype._processAddNote=function(){if(this.AreSharedAnnotationsAllowed()){this.UpdateNoteCounts();this._updateUserPreferenceSharingAnnotations(oe["default"].SHARING_ANNOTATIONS_PREFERENCE_KEY,oe["default"].SHARING_ANNOTATIONS_PREFERENCE_VALUE_ALLNOTES);this.AreSharedHighlightsAllowed()&&b["default"].DisplayAllHighlights();this._publishEvent("Cobalt.Foldering.NoteMenu.ShowAnnotationsEvent")}else this._updateUserPreferenceSharingAnnotations(oe["default"].SHOW_ANNOTATIONS_PREFERENCE_KEY,oe["default"].SHOW_ANNOTATIONS_PREFERENCE_VALUE_CHECKED);this._publishEvent("Cobalt.Foldering.NoteMenu.AddDocumentNoteEvent")};ae.prototype._unshareAllCallback=function(){this._publishEvent("Cobalt.Foldering.NoteMenu.UnShareAllNotesEvent")};ae.prototype._shareAllCallback=function(){this._publishEvent("Cobalt.Foldering.NoteMenu.ShareAllNotesEvent")};ae.prototype._showMyAnnotationsCallback=function(){this._overlay?.HideWidget(!0);this.toggleShowAll(!1);this.toggleShowMy(!0);this.toggleHideAll(!1);this._updateMyAnnotations()};ae.prototype._updateMyAnnotations=function(){this._checkAnnotations();this._updateUserPreferenceSharingAnnotations(oe["default"].SHARING_ANNOTATIONS_PREFERENCE_KEY,oe["default"].SHARING_ANNOTATIONS_PREFERENCE_VALUE_MYNOTES);this._updateAnnotationUserPreference(oe["default"].SHOW_ANNOTATIONS_PREFERENCE_KEY,oe["default"].SHOW_ANNOTATIONS_PREFERENCE_VALUE_CHECKED);this.UpdateNoteCounts();this.AreSharedHighlightsAllowed()&&b["default"].DisplayMyHighlights();this._publishEvent("Cobalt.Foldering.NoteMenu.ShowMyAnnotationsEvent")};ae._enableOrDisableStopSharingMyAnnotationsTextInDropdown=function(e,t=v["default"].currentDocGuid){let n,i;if(v["default"].IsInfiniteScroll){n=S()(`#documentContainer_${t}`);const e=n.find('div.co_noteContainer[notetype="myNote"]');i=e.find(".sharedWithInactive").length||e.find("#sharedWith").length||e.find(".icon25.icon_people").length}else{n=S()(document);i=n.find(".sharedWithInactive").length||I()||n.find("#sharedWith").length||n.find('div.co_noteContainer[notetype="myNote"] .icon25.icon_people').length}if(e||i){document.getElementById("co_noteMenu_unShareAllNotes")?.classList.remove("disabled");const e=document.getElementById("co_noteMenu_unShareAllNotes");e&&(e.style.pointerEvents="auto")}else{document.getElementById("co_noteMenu_unShareAllNotes")?.classList.add("disabled");const e=document.getElementById("co_noteMenu_unShareAllNotes");e&&(e.style.pointerEvents="none")}};ae.prototype._updateUserPreferenceSharingAnnotations=function(e,t){this._getIsShared();this.AreSharedAnnotationsAllowed()?u["default"].Set("ADC",e,t,(function(){}),(function(){})):u["default"].Set("Foldering",e,t,(function(){}),(function(){}))};ae.prototype._updateAnnotationUserPreference=function(e,t){this.AreSharedAnnotationsAllowed()&&u["default"].Set("Foldering",e,t,(function(){}),(function(){}))};ae.prototype._checkAnnotations=function(){this._showAnnotationsContainer();this.AreSharedAnnotationsAllowed()||S()(this._menuContainer).find("li#co_annotationsToggle").addClass("co_checked")};ae.prototype._uncheckAnnotations=function(){this._hideAnnotationsContainer();this.AreSharedAnnotationsAllowed()||S()(this._menuContainer).find("li#co_annotationsToggle").removeClass("co_checked")};ae.prototype._subscribeCobaltEvents=function(){var e=this;this._addHighlightEventSubscription=a["default"].Subscribe("Cobalt.Document.Highlighting.AnnotationAdded",(function(){e._checkAnnotations()}))};ae.prototype._publishEvent=function(e){var t=new s["default"]({},{},e,"1.0");a["default"].Publish(e,t)};ae.prototype._hideAnnotationsContainer=function(){this._annotationsContainer?.classList.add("co_hideAnnotations")};ae.prototype._showAnnotationsContainer=function(){this._annotationsContainer?.classList.remove("co_hideAnnotations")};ae.prototype.InitialNoteCounts=function(){ae.prototype.GetAnnotationsCount(this.GetDocumentGuid())};ae.prototype.UpdateNoteCounts=function(){if(v["default"].IsInfiniteScroll)return;var e=this,t=0,n=0,i=0,o=0,r=!1;if(!ae.IsSharedNoteCountsUpToDate&&this.AreSharedNotesAllowed()){const t=function(t){const s=t.documentLevelNotes.length,l=t.documentLevelNotes.filter((e=>e.createdByCurrentUser)).length,d=s-l,c=t.inlineHighlightsAndNotes.length,f=t.inlineHighlightsAndNotes.filter((e=>e.createdByCurrentUser)).length,h=e.AreSharedHighlightsAllowed()?c-f:t.inlineHighlightsAndNotes.filter((e=>!e.createdByCurrentUser&&e.noteText)).length,p=t.orphanHighlightsAndNotes.length,m=t.orphanHighlightsAndNotes.filter((e=>e.createdByCurrentUser)).length,g=l+f+m,y=d+h+(p-m);r=g&&I();ae.prototype.UpdateNoteCount(g+y);ae.prototype.UpdateMyNoteCount(g,r);const v=u["default"].Get("ADC",oe["default"].SHARING_ANNOTATIONS_PREFERENCE_KEY);n=s;i=l;v===oe["default"].SHARING_ANNOTATIONS_PREFERENCE_VALUE_ALLNOTES?o(n):o(i);if(v===oe["default"].SHARING_ANNOTATIONS_PREFERENCE_VALUE_MYNOTES&&0===g&&0!==y){e.AreSharedAnnotationsAllowed()&&e._updateUserPreferenceSharingAnnotations(oe["default"].SHARING_ANNOTATIONS_PREFERENCE_KEY,oe["default"].SHARING_ANNOTATIONS_PREFERENCE_VALUE_ALLNOTES);e.toggleShowAll(!0);e.toggleShowMy(!1);e.toggleHideAll(!1);(document.querySelector(".co_noteIcon_count")??{}).textContent=n;e._publishEvent("Cobalt.Foldering.NoteMenu.ShowAnnotationsEvent")}ae.IsSharedNoteCountsUpToDate=!0;a["default"].Publish("Cobalt.Foldering.NoteMenu.UpdateNotesCount",t)},o=function(t){v["default"].IsInfiniteScroll?(document.querySelector(`#documentContainer_${e.GetDocumentGuid()} .co_noteIcon_count`)??{}).textContent=t:(document.querySelector(".co_noteIcon_count")??{}).textContent=t};if(C["default"].allNotesData)t(C["default"].allNotesData);else{var s=e.GetDocumentGuid();E["default"].CreateAnnotationsProvider(s,{contextualInfo:null}).GetNotesAndHighlights(s,c["default"].GetUserNameEncoded(),u["default"].Get("Global","TimeZone"),t,null,null,null,null)}}if(this.AreSharedNotesAllowed()){var l=document.getElementById("co_docToolbarAddNoteWidget");l&&l.addEventListener("click",(function(){ae._enableOrDisableStopSharingMyAnnotationsTextInDropdown()}))}else{var d=document.getElementById("co_documentNotes"),f=d?.querySelectorAll(".co_noteContainer");f?.forEach((e=>{t++;"myNote"===e.getAttribute("noteType")&&i++;n++}));var h=document.getElementById("co_inlineNotes");f=h?.querySelectorAll(".co_noteContainer");f?.forEach((e=>{t++;"myNote"===e.getAttribute("noteType")&&o++}));ae.prototype.UpdateNoteCount(t);ae.prototype.UpdateMyNoteCount(i+o)}};ae.prototype.GetAnnotationsCount=function(e){d["default"].Post({vertical:l["default"].Document,relativeUrl:"/Document/v2/UserDocuments/Annotations/Filter/createdByCurrentUser/Count",responseIsJson:!0,contentType:"application/json",jsonObject:{documentGuids:[e]},timeoutMillisecs:18e4,successCallback:t=>{let n=0
;t.length>0&&(n+=t[0].annotationsCount||0);this.UpdateMyNoteCount(n);d["default"].Post({vertical:l["default"].Document,relativeUrl:"/Document/v2/UserDocuments/Annotations/Filter/sharedWithCurrentUser/Count",responseIsJson:!0,contentType:"application/json",jsonObject:{documentGuids:[e]},timeoutMillisecs:18e4,successCallback:e=>{e.length>0&&(n+=e[0].annotationsCount||0);this.UpdateNoteCount(n)}})}})};ae.prototype.UpdateNoteCount=function(e){const t=e>0;ae.a11yMenu&&ae.a11yMenu.updateAllNotesCount(e,t);this.updateAllNoteText(e);this.enableDisableMenuAndShareUnshare(t)};ae.prototype.updateAllNoteText=function(e){this.getAllAnnotationsTextElement().html(r["default"].format("SC.Foldering.NoteMenu.ShowAllNotes",{Count:e},`Show All Annotations (${e})`))};ae.prototype.enableDisableMenuAndShareUnshare=function(e){const t=document.getElementById("co_folderingNoteMenuList"),n=document.getElementById("co_folderingNoteMenuLabel");(0,re.toggleVisibility)(t,e);(0,re.toggleVisibility)(n,e);if(this.AreSharedNotesAllowed()){const n=e?"auto":"none";if(t){t.classList.toggle("disabled",!e);t.style.pointerEvents=n}this.getShareAllElement().toggle(e);this.getUnshareAllElement().toggle(e)}};ae.prototype.UpdateMyNoteCount=function(e,t){this.updateMyNoteText(e);const n=0!==e||!this.AreSharedHighlightsAllowed()&&document.getElementById("sharedWith"),i={shouldDisplayMyAnnotations:0!==e,shouldDisplayShareAll:e>0||!this.AreSharedHighlightsAllowed&&document.querySelector(".co_noteContainer")&&document.querySelector(".IsCreatedByCurrentUser"),shouldDisplayUnshareAll:n};ae.a11yMenu&&ae.a11yMenu.updateMyNotesCount(e,i);this.enableDisableElements(i);this.AreSharedHighlightsAllowed()&&e>0&&ae._enableOrDisableStopSharingMyAnnotationsTextInDropdown(t)};ae.prototype.updateMyNoteText=function(e){this.getMyAnnotationsTextElement().html(r["default"].format("SC.Foldering.NoteMenu.ShowMine",{Count:e},"Show My Annotations ("+e+")"))};ae.prototype.enableDisableElements=function(e){const{shouldDisplayMyAnnotations:t,shouldDisplayShareAll:n,shouldDisplayUnshareAll:i}=e,o=this.getMyAnnotationsElement(),r=this.getShareAllElement(),a=this.getUnshareAllElement(),s=e=>e?"auto":"none";o.toggleClass("disabled",!t);r.toggleClass("disabled",!n);a.toggleClass("disabled",!i);o.css("pointer-events",s(t));r.css("pointer-events",s(n));a.css("pointer-events",s(i))};const se=ae},365:(e,t,n)=>{e.exports=n(4507)(28139)},519:(e,t,n)=>{e.exports=n(4507)(32798)},581:(e,t,n)=>{e.exports=n(4507)(74130)},615:e=>{"use strict";e.exports=bundle_2c5aa376dba4a1cf52bea918531163de},669:(e,t,n)=>{e.exports=n(4507)(9596)},721:(e,t,n)=>{"use strict";n.r(t);n.d(t,{drawKeyboardInstructions:()=>r,getCloseButtonA11yLabel:()=>a});var i=n(9912),o=n(9520);const r=(e,t)=>{if(!e||!t)return;const n=document.createElement("button");n.classList.add("TextEditor-KeyboardInstructionsButton","co_tbButton");n.type="button";n.textContent=i["default"].lookup("SC.PLCCore.Widgets.TextEditor.KeyboardInstructions","Keyboard instructions");n.addEventListener("click",(e=>{(e=>{const t=new o["default"],n=i["default"].lookup("SC.PLCCore.Widgets.TextEditor.KeyboardInstructions","Keyboard instructions");t.SetTitle(n);t.SetId("TextEditor-KeyboardInstructionsContainer");const r=()=>{t.Remove()};t.SetCloseLinkObject({id:"TextEditor-CloseButton",alt:i["default"].lookup("SC.PLCCore.Widgets.TextEditor.Close","Close"),onclick:r});t.GetContentDomElement().innerHTML=`<p>${e}</p>`;const a=document.createElement("button");a.classList.add("co_primaryBtn");a.textContent=i["default"].lookup("SC.PLCCore.Widgets.TextEditor.Ok","OK");a.addEventListener("click",(()=>{r()}));t.GetFooterDomElement().append(a);t.SetUseOptionalEventHandling(!0);t.Draw()})(t);e.preventDefault();e.stopPropagation()}));e.append(n)},a=()=>i["default"].lookup("SC.PLCCore.Widgets.TextEditor.InsertLinkDialog.Close.Label","Close dialog")},762:(e,t,n)=>{e.exports=n(4507)(44899)},966:(e,t,n)=>{e.exports=n(4507)(29159)},983:(e,t,n)=>{e.exports=n(4507)(90892)},999:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=new Map},1045:(e,t,n)=>{e.exports=n(4507)(12192)},1118:(e,t,n)=>{e.exports=n(4507)(17226)},1235:(e,t,n)=>{e.exports=n(4507)(21022)},1312:(e,t,n)=>{e.exports=n(4507)(94900)},1369:(e,t,n)=>{e.exports=n(4507)(27912)},1385:(e,t,n)=>{e.exports=n(4507)(54943)},1401:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>m});var i=n(8286),o=n(3839),r=n(2065),a=n(6246),s=n(7955),l=n(5578),d=n(9796),c=n(2453),u=n(7617),f={region:document.getElementById(i["default"].ids.document),guid:null,metaInfo:null,annotationOptions:{regions:[`#${i["default"].ids.document}`],excluded:[`.${i["default"].classes.highlightingExcludeAnnotations}`]},addSelectedTextToDock:function(e){if(f.metaInfo){var t;(t=o["default"].isIacOn("iac-oldhighlightingoff")?{}:l["default"].GetRangeInformation(s["default"].SelectedRange,f.region)).guid=f.guid;t.starPage=f.getPrimaryStarPageNumberRange(f.getStarPageNumberRanges(f.metaInfo));s["default"].DetermineSelectionEndPoints();t.selectedText=s["default"].NewData.ClearText;t.selectedHtml=s["default"].NewData.HTML;t.folderOptions=e;o["default"].isIacOn("iac-oldhighlightingoff")&&(t.location={startPoint:s["default"].NewData.Startpoint,endPoint:s["default"].NewData.Endpoint});r["default"].publishHubEvent(i["default"].events.snippetAdd,null,t,f.metaInfo)}},getStarPageNumberRanges:function(e){var t=[],n=r["default"].GetMetadataFromDom(i["default"].ids.starPageMetadata);if(n&&n.citations){var o=s["default"].SelectedRange,l=a["default"].determineNearestStarpagesOfSelection(n,o);for(var d in n.citations){var c=n.citations[d],u=l.nearestBeginningStarpages[d],f=l.nearestEndingStarpages[d];null!=u&&(u=u.replace(/\*/g,""));if(null!=f){f=f.replace(/\*/g,"");if(null==u){u=f;f=null}}t.push({citation:c,beginningStarPage:u,endingStarPage:f,primaryCite:c==e.Cite})}}return t},getPrimaryStarPageNumberRange:function(e){var t=null;for(var n in e)if(e[n].primaryCite){t={beginningStarPage:e[n].beginningStarPage,endingStarPage:e[n].endingStarPage};break}return t},addSelectedTextToOutline:function(){const e=f.getSelectionDataForOutline();e&&r["default"].publishHubEvent(i["default"].events.addSelectionToOutline,null,e,f.metaInfo);s["default"].Unselect()},getSelectionDataForOutline:function(){let e;if(f.metaInfo){e=l["default"].GetRangeInformation(s["default"].SelectedRange,f.region);e.guid=f.guid;s["default"].DetermineSelectionEndPoints();e.selectedText=s["default"].NewData.ClearText;e.selectedHtml=s["default"].NewData.HTML}return e},addSelectedTextToCompare:function(e,t){try{if(f.metaInfo){s["default"].DetermineSelectionEndPoints();const n={documentGuid:f.guid,itemType:d["default"].itemTypes.userSelectedText,text:s["default"].NewData.HTML,textType:e},i=o["default"].isFeatureEnabled("SNIPPET COMPARE"),r=f.metaInfo.metaInformation;if(i&&r){n.titleText=f.metaInfo.TitleText;n.contentType=f.metaInfo.ContentType;n.jurisdiction=f.metaInfo.metaInformation.jurisdictionText;n.clientId=u["default"].ClientId}c["default"].AddToCompare(n,t)}}catch(e){c["default"].EnableRedlineLinks()}},getAnnotationOptions:function(){return this.annotationOptions},canAnnotateSelection:function(e){if(!e)return!1;if(!f.selectionWithinAllowedRegion(e))return!1;if(!f.selectionContainsContent(e))return!1;return!0},selectionWithinAllowedRegion:function(e){const t=this.getSelectionContainers(e);if(!t)return!1;const n=e=>t=>t.closest(e),i=this.getAnnotationOptions(),o=i.regions.join(",");if(!t.every(n(o)))return!1;const r=i.excluded.join(",");if(t.some(n(r)))return!1;return!0},selectionContainsContent:function(e){const t=s["default"].GetPlainTextFromRange(e);if(!t)return!1;if(t&&!/^[\s\u200B]*$/gi.test(t))return!0;return!!s["default"].GetHtmlTextFromRange(e)},getSelectionContainers:function(e){if(e.startContainer){const{startContainer:t,endContainer:n}=e,i=1===t.nodeType?t:t.parentNode,o=1===n.nodeType?n:n.parentNode;return i===o?[i]:[i,o]}if(e.parentElement)return[e.parentElement()];return}};const h=f;h.plcAnnotationOptions={regions:["#"+i["default"].ids.documentContentBody,"#"+i["default"].ids.documentContentHeader,".co_docContentBody_chunk"],
excluded:["."+i["default"].classes.highlightingExcludeAnnotations,"."+i["default"].classes.disableHighlightFeatures,".co_editNote",".mce-container"]};h.getAnnotationOptions=function(){return this.plcAnnotationOptions};const p=h;p.getAnnotationOptions=function(){return r["default"].isPracticalLawUsDocument()?this.plcAnnotationOptions:this.annotationOptions};const m=p},1422:(e,t,n)=>{e.exports=n(615)(6761)},1424:(e,t,n)=>{e.exports=n(4507)(98580)},1434:(e,t,n)=>{e.exports=n(4507)(30049)},1446:(e,t,n)=>{e.exports=n(4507)(94133)},1460:(e,t,n)=>{"use strict";n.r(t);n.d(t,{arrow:()=>S,autoPlacement:()=>C,autoUpdate:()=>i.autoUpdate,computePosition:()=>i.computePosition,detectOverflow:()=>i.detectOverflow,flip:()=>y,getOverflowAncestors:()=>o.getOverflowAncestors,hide:()=>b,inline:()=>_,limitShift:()=>g,offset:()=>p,platform:()=>i.platform,shift:()=>m,size:()=>v,useFloating:()=>f});var i=n(9256),o=n(9346),r=n(1446),a=n(1312),s="undefined"!=typeof document?r.useLayoutEffect:r.useEffect;function l(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;let n,i,o;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){n=e.length;if(n!==t.length)return!1;for(i=n;0!=i--;)if(!l(e[i],t[i]))return!1;return!0}o=Object.keys(e);n=o.length;if(n!==Object.keys(t).length)return!1;for(i=n;0!=i--;)if(!{}.hasOwnProperty.call(t,o[i]))return!1;for(i=n;0!=i--;){const n=o[i];if("_owner"===n&&e.$$typeof)continue;if(!l(e[n],t[n]))return!1}return!0}return e!=e&&t!=t}function d(e){if("undefined"==typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function c(e,t){const n=d(e);return Math.round(t*n)/n}function u(e){const t=r.useRef(e);s((()=>{t.current=e}));return t}function f(e){void 0===e&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:o=[],platform:f,elements:{reference:h,floating:p}={},transform:m=!0,whileElementsMounted:g,open:y}=e,[v,C]=r.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[b,_]=r.useState(o);l(b,o)||_(o);const[S,N]=r.useState(null),[E,A]=r.useState(null),w=r.useCallback((e=>{if(e!==D.current){D.current=e;N(e)}}),[]),x=r.useCallback((e=>{if(e!==k.current){k.current=e;A(e)}}),[]),T=h||S,I=p||E,D=r.useRef(null),k=r.useRef(null),M=r.useRef(v),R=null!=g,H=u(g),O=u(f),L=u(y),P=r.useCallback((()=>{if(!D.current||!k.current)return;const e={placement:t,strategy:n,middleware:b};O.current&&(e.platform=O.current);(0,i.computePosition)(D.current,k.current,e).then((e=>{const t={...e,isPositioned:!1!==L.current};if(B.current&&!l(M.current,t)){M.current=t;a.flushSync((()=>{C(t)}))}}))}),[b,t,n,O,L]);s((()=>{if(!1===y&&M.current.isPositioned){M.current.isPositioned=!1;C((e=>({...e,isPositioned:!1})))}}),[y]);const B=r.useRef(!1);s((()=>{B.current=!0;return()=>{B.current=!1}}),[]);s((()=>{T&&(D.current=T);I&&(k.current=I);if(T&&I){if(H.current)return H.current(T,I,P);P()}}),[T,I,P,H,R]);const F=r.useMemo((()=>({reference:D,floating:k,setReference:w,setFloating:x})),[w,x]),G=r.useMemo((()=>({reference:T,floating:I})),[T,I]),U=r.useMemo((()=>{const e={position:n,left:0,top:0};if(!G.floating)return e;const t=c(G.floating,v.x),i=c(G.floating,v.y);if(m)return{...e,transform:"translate("+t+"px, "+i+"px)",...d(G.floating)>=1.5&&{willChange:"transform"}};return{position:n,left:t,top:i}}),[n,m,G.floating,v.x,v.y]);return r.useMemo((()=>({...v,update:P,refs:F,elements:G,floatingStyles:U})),[v,P,F,G,U])}const h=e=>({name:"arrow",options:e,fn(t){const{element:n,padding:o}="function"==typeof e?e(t):e;if(n&&(r=n,{}.hasOwnProperty.call(r,"current"))){if(null!=n.current)return(0,i.arrow)({element:n.current,padding:o}).fn(t);return{}}var r;if(n)return(0,i.arrow)({element:n,padding:o}).fn(t);return{}}}),p=(e,t)=>({...(0,i.offset)(e),options:[e,t]}),m=(e,t)=>({...(0,i.shift)(e),options:[e,t]}),g=(e,t)=>({...(0,i.limitShift)(e),options:[e,t]}),y=(e,t)=>({...(0,i.flip)(e),options:[e,t]}),v=(e,t)=>({...(0,i.size)(e),options:[e,t]}),C=(e,t)=>({...(0,i.autoPlacement)(e),options:[e,t]}),b=(e,t)=>({...(0,i.hide)(e),options:[e,t]}),_=(e,t)=>({...(0,i.inline)(e),options:[e,t]}),S=(e,t)=>({...h(e),options:[e,t]})},1583:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(1422),o=n(8286),r=n(519);const a={current:null,SetActiveNoteDesignation:function(e){if(this.current!==e){this.RemoveActiveNoteDesignation();r["default"].AddClass(e,"co_noteHolderActive");this.current=e;i["default"].Publish(o["default"].events.noteActiveDesignationSet,{noteContainer:e})}},RemoveActiveNoteDesignation:function(){if(this.current){r["default"].RemoveClass(this.current,"co_noteHolderActive");this.current=null}}}},1594:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>s});var i=n(4341),o=n(9912),r=n(9520),a={notesCount:null,isAnnotationsLimitExceeded:function(){if(!a.isAnnotationsLimitEnabled())return!1;return a.notesCount>=i["default"].PageData.DocumentTabView.DisplayOptions.PracticalLawAnnotationNotesLimit},isAnnotationsLimitEnabled:function(){return i["default"].PageData.DocumentTabView&&i["default"].PageData.DocumentTabView.DisplayOptions&&i["default"].PageData.DocumentTabView.DisplayOptions.IsAnnotationsLimitEnabled&&i["default"].PageData.DocumentTabView.DisplayOptions.isNewDocumentView},drawAnnotationsLimitLightBox:function(){var e=new r["default"];e.SetTitle(o["default"].lookup("SC.Website.Annotaions.LimitLightbox.Title","Warning!"));e.SetClass("co_overlayBox_outofPlan");e.SetCloseLinkObject({alt:o["default"].lookup("SC.Website.Confirmation.Cancel.Default","Cancel"),onclick:function(){e.Remove()}});var t=document.createElement("INPUT");t.value=o["default"].lookup("SC.Website.Confirmation.Action.Button.Text.Default","OK");t.type="button";t.className="co_primaryBtn";t.addEventListener("click",(function(){e.Remove()}));e.GetFooterDomElement().appendChild(t);e.GetContentDomElement().textContent=o["default"].lookup("SC.Website.Annotaions.LimitLightbox.Body","You have reached the maximum number of 150 annotations within this document. Please remove one or more annotations and try again.");e.Draw()},updateNotesCount:function(e){a.notesCount=(null!==e.documentLevelNotes?e.documentLevelNotes.length:0)+(null!==e.inlineHighlightsAndNotes?e.inlineHighlightsAndNotes.filter((e=>null!=e.noteText)).length:0)+(null!==e.orphanHighlightsAndNotes?e.orphanHighlightsAndNotes.filter((e=>null!=e.noteText)).length:0)}};const s=a},1633:(e,t,n)=>{e.exports=n(4507)(9260)},1811:(e,t,n)=>{e.exports=n(4507)(83761)},1987:(e,t,n)=>{e.exports=n(4507)(52778)},2065:(e,t,n)=>{e.exports=n(4507)(70660)},2114:(e,t,n)=>{e.exports=n(4507)(468)},2179:(e,t,n)=>{e.exports=n(4507)(82191)},2217:(e,t,n)=>{e.exports=n(4507)(21833)},2359:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>o});var i=n(9164);function o(){this.ResolveLinkToGuid=function(e,t){(new i["default"]).GetDocumentGuid(e,t)}}},2453:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>v});var i=n(9520),o=n(9912),r=n(170),a=n.n(r);const s=function(){var e,t,n,r=this;r.Init=function(t){e=t};r.Draw=function(){var r=o["default"].lookup("SC.Document.Redline.ComparisonTool.Title","Redline Comparison Tool"),s=o["default"].lookup("SC.Document.Redline.ComparisonTool.RemoveLightbox","Close the Redline Comparison Tool");t&&t.IsShowing()&&t.Remove();(t=new i["default"]).SetId("coid_redlineLightbox");t.SetTitle(r);t.SetCloseLinkObject({id:"coid_closeLightbox",alt:s,onclick:function(){t.Remove()}});t.SetIsExpandedView(!0);t.Draw();t.AddEventListener("close",(function(){n&&n()}));a().injector(["ng","redlineModal"]).invoke(["$rootScope","$compile",function(n,i){n.lightbox=t;n.options=e;const o=i("<div redline-tool lightbox='lightbox' options='options'></div>")(n);a().element(t.GetContentDomElement()).append(o)}])};r.onClose=function(e){n=e}};var l=n(6751),d=n(8286),c=n(3839),u=!1,f=c["default"].isIacOn("IAC-A11Y-DROPDOWN-REDLINE-COMPARE")?"#"+d["default"].ids.selectedTextMenuListAddToCompareItem+" button:first-child":"#"+d["default"].ids.selectedTextMenuListAddToCompareItem+" > a",h="#"+d["default"].ids.internalTocAddToCompareButton,p="#"+d["default"].ids.coidRedlineToolbarButtonLink;var m=function(){u=!0
;document.querySelector(h)?.classList.add(d["default"].classes.disabled,d["default"].classes.loadingSmall);document.querySelector(f)?.classList.add(d["default"].classes.disabled,d["default"].classes.loadingSmall);document.querySelector(p)?.classList.add(d["default"].classes.disabled)},g=function(){u=!1;document.querySelector(h)?.classList.remove(d["default"].classes.loadingSmall);document.querySelector(f)?.classList.remove(d["default"].classes.disabled,d["default"].classes.loadingSmall);document.querySelector(p)?.classList.remove(d["default"].classes.disabled);document.querySelectorAll(`#${function(){if(c["default"].IsIndigoDisplayEnabled)return d["default"].ids.tocContainer;return d["default"].ids.internalToc}()} input[type = checkbox]:checked`).length>0&&document.querySelector(h)?.classList.remove(d["default"].classes.disabled)},y=function(e){var t=new s;t.Init(e);t.Draw()};const v={LaunchTool:function(e){u||y(e)},AddToCompare:function(e,t){if(!u){m();l["default"].AddComparisonItem(e,y).finally((function(){g();t&&t()}))}},EnableRedlineLinks:g,DisableRedlineLinks:m}},2496:(e,t,n)=>{e.exports=n(4507)(39017)},2517:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>K});var i=n(1987),o=n.n(i),r=n(9191),a=n.n(r),s=n(669),l=n(3839),d=n(7617),c=n(8307),u=n(1422),f=n(5024),h=n(966),p=n(5382),m=n(2769),g=n(4917),y=n(4753),v=n(2065),C=n(9912),b=n(356),_=n(9417),S=n(3985),N=n(8286),E=n(3793),A=n(519),w=n(2842),x=n(9914),T=n(7861),I=n(9265),D=n(68),k=n(4159),M=n(999),R=n(6921),H=n(3110),O=n(2656),L=n(9086),P=n(4682),B=n(5682),F=n(1583),G=n(5549),U=n(6183);function W(e){this._instance=L["default"].Add(this);this._nextPopUpInstance=0;this._popups=[];this._notes=[];this._parent=void 0;this._guid=void 0;this._iScrollableAncestorElement=void 0;this._noteInfo=e;this._isViewOnly=!1;this._optionalProvider=null;this._minimizeNotes=!1;this.hasMaximizeIcon=!1;this.handleEscapeKey=this.handleEscapeKey.bind(this);this.handleOutsideClick=this.handleOutsideClick.bind(this);this.SetNotes=function(e){e||(e=[]);this._notes=e};this.SetParent=function(e){this._parent=e};this.GetParent=function(){return this._parent};this.SetDocumentGuid=function(e){this._guid=e};this.setProvider=function(e){this._optionalProvider=e};this.SetViewOnly=function(e){this._isViewOnly=e};this.SetMinimizeNotes=function(e){this._minimizeNotes=e};this.Draw=function(){this._userName=d["default"].GetUserNameEncoded();this._clientId=d["default"].GetClientMatter();this._buidHTML();this._buildInitialPopups();this._updateIcon();this._subscribeToEvents();(0,_.IsIpad)()&&this.documentLevel&&(this._iScrollableAncestorElement=(0,c.GetNearestAncestorScrollableElement)(this.GetParent()))};this.SetDocumentLevelWidget=function(e){this.documentLevel=e}}W.prototype.Destroy=function(){for(let e=0;e<this._popups.length;e++)this._popups[e]&&this._popups[e].Destroy();this._parent?.replaceChildren();if(this.addNoteSubscription){u["default"].Unsubscribe(this.addNoteSubscription);delete this.addNoteSubscription}if(this.sharedAnnotationsSubscriptions){for(let e=0;e<this.sharedAnnotationsSubscriptions.length;++e)u["default"].Unsubscribe(this.sharedAnnotationsSubscriptions[e]);delete this.sharedAnnotationsSubscriptions}delete this._parent;delete this._notes;delete this._popups;delete this._userName;delete this._clientId;delete this._guid;delete this._isViewOnly;L["default"].Delete(this._instance)};W.prototype.IsDocumentLevelWidget=function(){return this.documentLevel};W.prototype.AreSharedNotesAllowed=function(){return(0,_.AreSharedNotesAllowed)()};W.prototype.AreSharedHighlightsAllowed=function(){return v["default"].AreSharedHighlightsAllowed()};W.prototype.AreSharedAnnotationsAllowed=function(){return(0,_.AreSharedAnnotationsAllowed)()};W.prototype.IsViewOnly=function(){return this._isViewOnly};W.prototype.AddNote=function(e,t,n){var i=this._prependPopUp(e,"new");i.setCreateCallback(t);i.Edit();i.SetDeleteCallback(n);this._updateIcon();if(this.AreSharedAnnotationsAllowed()){this.AlignWithHighlight();F.A.SetActiveNoteDesignation(this._parent)}i.FocusText();!this.documentLevel&&l["default"].isIacOn("IAC-A11Y-DOC-NOTES")&&a()(this._parent).find(".co_notes").on("keydown",D["default"])};W.prototype.ApplyNotesAccessibility=function(){for(let e=0;e<this._popups.length;e++)this._popups[e]&&this._popups[e]._applyNoteAccessibility()};W.prototype.RemoveNotesAccessibility=function(){for(let e=0;e<this._popups.length;e++)this._popups[e]&&this._popups[e]._removeNoteAccessibility()};W.prototype._buildOrphanHighlightHeader=function(){var e=[];e[e.length]='<div id="co_lostNotes">';e[e.length]=' \t<div id="co_lostNotesTitle">';e[e.length]="\t\t<h3>";e[e.length]=C["default"].lookup("SC.Foldering.Notes.OrphanNotesAndHighlights.Header","Additional Notes and Highlighting");e[e.length]='\t\t\t<a id="co_orphan_moreinfo" class="co_moreInfo" href="javascript:void(0);" role="button">';e[e.length]=C["default"].lookup("SC.Foldering.Notes.OrphanNotesAndHighlights.MoreInfo","More Info");e[e.length]="\t\t\t</a>";e[e.length]="\t\t</h3>";e[e.length]='\t\t<div id="co_orphan_infobox"></div>';e[e.length]="\t</div>";e[e.length]='\t<div id="co_lostNotesContent">';e[e.length]="\t</div>";e[e.length]="</div>";return e.join("")};W.prototype.AddExistingNote=function(e,t){var n,i=this;if(!i._orphanedAreaDrawn&&"highlight"==e._type&&null==e.location){var o=i._buildOrphanHighlightHeader();i._popupsRoot?.insertAdjacentHTML("beforeend",o);var r=a()(i._popupsRoot).find("#co_orphan_infobox").get(0),s=new g["default"](r,p["default"].None,m["default"].Right,!0,!1,!1);s.AddCustomClass(E["default"].values.FIXED_CONTAINER_CLASS);s.Draw(C["default"].lookup("SC.Foldering.Notes.OrphanNotesAndHighlights.Information","The original placement of these annotations could not be found. The document may have changed or an error may have occurred."));r?.classList.add("co_hideState");i._lostNotesContent=a()(i._popupsRoot).find("#co_lostNotesContent")[0];i._orphanedAreaDrawn=!0;a()(i._popupsRoot).find("#co_orphan_moreinfo").hover((function(){a()(i._popupsRoot).find("#co_orphan_infobox").removeClass("co_hideState")}),(function(){a()(i._popupsRoot).find("#co_orphan_infobox").addClass("co_hideState")}))}(n="highlight"==e._type&&null==e.location?i._addPopUp(e,"orphan"):i._addPopUp(e,"existing")).SetDeleteCallback(t);i._updateIcon()};W.prototype.AddRestoredNote=function(e,t){e.restored=!0;var n=this._prependPopUp(e,"existing");n.SetDeleteCallback(t);this._updateIcon();this.AreSharedNotesAllowed()&&n.rewriteContactsWidget(n)};W.prototype.ConvertNote=function(e,t,n,i){e.noteText="";const o=this._addPopUp(e,"existing");o.Edit();o.SetDeleteCallback(n);o.SetConvertCallback(t);o.SetCancelCallback(i);this._updateIcon();k["default"].IsInfiniteScroll||o.FocusText();if(this.AreSharedAnnotationsAllowed()){this.AlignWithHighlight();F.A.SetActiveNoteDesignation(this._parent);k["default"].IsInfiniteScroll&&o.FocusText()}u["default"].Publish("Cobalt.Foldering.Note.Converted")};W.prototype.DeleteNote=function(e,t,n){for(var i=0;i<this._popups.length;i++){var o=this._popups[i];if(this._popups[i]&&this._popups[i].GetId()==e){o.SetDeleteCallback(t);o.Delete(n)}}};W.prototype.RemoveNote=function(e){for(var t=void 0,n=0;n<this._popups.length;n++){var i=this._popups[n];if(this._popups[n]&&this._popups[n].GetId()==e){t=i.getNote();i.SetDeleteCallback(void 0);i.RemoveSelf()}}return t};W.prototype.CloseAll=function(){for(var e=0;e<this._popups.length;e++)if(this._popups[e]&&this._popups[e].isOpen()){this._popups[e].Close();this._popups[e].SetCloseAfterSave(!0);this._popups[e].RemoveIfNew();this._popups[e]&&this._popups[e]._hideEdit()}this._updateIcon()};W.prototype.StopEditAll=function(){for(var e=0;e<this._popups.length;e++)if(this._popups[e]&&this._popups[e].isEditing()){this._popups[e].StopEdit();this._popups[e].SetStopEditAfterSave(!0);this._popups[e].RemoveIfNew()}};W.prototype.OpenAll=function(){for(var e=this.IsPreferenceMyNotes(),t=0;t<this._popups.length;t++){var n=this._popups[t];if(n&&!n.isOpen()){if(e&&!n._note.createdByCurrentUser)continue;n.Open();n._showEdit()}}this._updateIcon();this._fireOpenEvent()};W.prototype.OpenNote=function(e){
for(var t=0;t<this._popups.length;t++)if(this._popups[t]&&this._popups[t].GetId()==e){this._popups[t].Open();this._fireOpenEvent();this.HideIcon()}};W.prototype.UpdateIcon=function(){this._updateIcon()};W.prototype.GetInstance=function(){return this._instance};W.prototype.ShowIcon=function(){(this._icon?.style??{}).display="block"};W.prototype.HideIcon=function(){(this._icon?.style??{}).display="none"};W.prototype.GetNoteCount=function(){for(var e=0,t=0;t<this._popups.length;++t){var n=this._popups[t];n&&(n.HasBeenSaved()||"orphan"===n._mode)&&e++}return e};W.prototype.GetMyNoteCount=function(){for(var e=0,t=0;t<this._popups.length;++t){var n=this._popups[t];n&&void 0!==n._note&&n._note.createdByCurrentUser&&e++}return e};W.prototype.GetContainedNotes=function(){for(var e=[],t=0;t<this._popups.length;++t)e.push(this._popups[t]);return e};W.prototype.ShowMyNotes=function(){if(this._popups){const o=v["default"].isNarrowTocDisplayEnabled();this.StopEditAll();for(var e=0,t=B["default"].GetSelectionInstanceIdFromNoteHolder(this._parent),n=0;n<this._popups.length;++n){var i=this._popups[n];if(void 0===i||i.IsCreatedByCurrentUser()){if(void 0!==i){i.ShowNote();i._showEdit()}}else{i.HideNote();++e;if(t){document.getElementById(t)?.classList.remove("co_hl");document.querySelectorAll(`.${t}`).forEach((e=>e.classList.remove("co_hl")))}}}if(e===this._popups.length){(0,w.hideElements)(this._parent);o&&(0,I.HideRightColumn)()}else{(0,w.showElements)(this._parent);o&&H["default"].size>0&&(0,I.ShowRightColumn)()}this._updateIcon()}};W.prototype.HideNotes=function(){for(var e=0;e<this._popups.length;++e)this._popups[e]&&this._popups[e].HideNote();(0,w.hideElements)(this._parent)};W.prototype.ShowNoNotes=function(){this.HideNotes();v["default"].isNarrowTocDisplayEnabled()&&(0,I.HideRightColumn)()};W.prototype.ShowAllNotes=function(){this.StopEditAll();var e=B["default"].GetSelectionInstanceIdFromNoteHolder(this._parent);v["default"].isNarrowTocDisplayEnabled()&&this.GetDisplayedNotesCount()>0&&(0,I.ShowRightColumn)();(0,w.showElements)(this._parent);if(e){document.getElementById(e)?.classList.add("co_hl");document.querySelectorAll(`.${e}`).forEach((e=>e.classList.add("co_hl")))}this.OpenAll();this._updateIcon()};W.prototype.GetDisplayedNotesCount=function(){return H["default"].size};W.prototype.ShareAllNotes=function(){y["default"].Draw(y["default"].Mode.Collaboration);var e=document.getElementById("coid_contacts_closeButton");e?.classList.add("ForShareAll")};W.prototype.ToggleNote=function(){v["default"].isNarrowTocDisplayEnabled()&&this._popups.forEach((e=>{e.CancelEdit()}));const e=this._parent.querySelector("button.co_noteMaximize"),t=this._parent.querySelector(".co_notes"),n=e.classList.contains("co_hideState");e.classList.toggle("co_hideState",!n);t.classList.toggle("co_hideState",n);n&&l["default"].isIacOn("IAC-A11Y-DOC-NOTES")&&this._setFocusOnHighlight();n||this.SetFocusOnEditButton()};W.prototype.MaximizeNote=function(){const e=a()(this._parent),t=e.find("button.co_noteMaximize"),n=e.find(".co_notes");t.length&&t.addClass("co_hideState");n.length&&n.removeClass("co_hideState")};W.prototype.MinimizeNote=function(){if(this._isSaveAllowed()){!this.hasMaximizeIcon&&v["default"].isNarrowTocDisplayEnabled()&&this.DrawMaximizeIcon();const e=a()(this._parent).find("button.co_noteMaximize"),t=a()(this._parent).find(".co_notes");if(e.hasClass("co_hideState")){e.removeClass("co_hideState");t.addClass("co_hideState")}}this.triggeredByMaximizeIcon=null};W.prototype.ActivateNoteByKeyboard=function(){for(var e=0;e<this._popups.length;e++)this._popups[e]&&this._popups[e].ActivateNoteByKeyboard()};W.prototype.AddNoteMarkerColorClass=function(e){const t=a()(this._parent).find("button.co_noteMaximize");t.length&&t.addClass(e)};W.prototype.RemoveNoteMarkerColorClass=function(e){const t=a()(this._parent).find("button.co_noteMaximize");t.length&&t.removeClass(e)};W.prototype._isSaveAllowed=function(){const e=this._popups&&this._popups[0];if(!e)return!0;return!e.isEditing()||!!e.getEditText()?.trim()};W.prototype.IsPreferenceMyNotes=function(){var e=!1;if(this.AreSharedAnnotationsAllowed()){e=h["default"].Get("ADC",P["default"].SHARING_ANNOTATIONS_PREFERENCE_KEY)===P["default"].SHARING_ANNOTATIONS_PREFERENCE_VALUE_MYNOTES}return e};W.prototype.SetTopOffset=function(e){if(this._parent){this._parent.style.top=`${e}px`;this._parent.style.position="absolute"}};W.prototype.GetContainerHeight=function(){return(0,s.getElementHeight)(this._parent)};W.prototype.AlignWithHighlight=function(){var e=O["default"].ParseIdFromNoteHolder(this._parent),t=this.GetHighlightOffsetByInstanceId(e);this.SetTopOffset(t)};W.prototype.GetHighlightOffsetByInstanceId=function(e){var t=L["default"].CalculateDocLevelOffset(),n=O["default"].GetInstanceIdClass(e);return(0,T.position)(document.querySelector(`.${n}`)).top-t};W.prototype.SetNextFocusableElement=function(e){if(l["default"].isIacOn("IAC-A11Y-DOC-NOTES")&&!this.triggeredByMaximizeIcon){this.returnFocusTo=null;if(e){const t=document.getElementById("co_docContentBody")||document.getElementById("co_document"),n=(0,x.getFocusableElements)(t).filter(x.isVisible),i=n.indexOf(e);i<n.length-1&&(this.returnFocusTo=n[i+1])}}};W.prototype.RemovePopup=function(e){var t=this._popups[e];this._popups[e]=void 0;if("orphan"==t._mode&&t.GetParent().parentNode==this._lostNotesContent){this._lostNotesContent.removeChild(t.GetParent());0===this._lostNotesContent.children.length&&(0,w.hideElements)(document.getElementById("co_lostNotes"))}else t.GetParent().parentNode==this._popupsRoot&&this._popupsRoot.removeChild(t.GetParent());t.Destroy();var n=[],i=0;if(this._popups&&this._popups.length>0)for(var o=0;o<this._popups.length;o++)n[i++]=this._popups[o];this._popups=n;b["default"].IsSharedNoteCountsUpToDate=!0;this._updateIcon()};W.prototype.SetupUndo=function(e,t){var n=this,i=function(){var t,i=e.id;e.id=void 0;n.documentLevel?(t=n._prependPopUp(e,"restore")).setCreateCallback((function(){b["default"].IsSharedNoteCountsUpToDate=!0;n._updateIcon()})):(t=n._createPopUp(e,"restore")).setCreateCallback((function(){t.RemoveSelf()}));t.oldId=i;t.Save()};t&&(i=void 0);if(this.AreSharedAnnotationsAllowed()){const e=L["default"].GetLastDeletedNote();e&&e.container._removeNoteFromCache()}this._displayUndoMessage(i);this.AreSharedAnnotationsAllowed()&&L["default"].SetLastDeletedNote(n,e)};W.prototype._fireOpenEvent=function(){var e=new f["default"]({},{},"Cobalt.Foldering.Notes.Container.Open","1.0");u["default"].Publish("Cobalt.Foldering.Notes.Container.Open",e)};W.prototype._addPopUp=function(e,t){var n=this._createPopUp(e,t),i=n.GetParent();if("orphan"==t){if(this._lostNotesContent){i?.setAttribute(N["default"].ids.dataAnnotationId,e.id);this._lostNotesContent.appendChild(i)}}else this._popupsRoot?.appendChild(i);return n};W.prototype._prependPopUp=function(e,t){var n=this._createPopUp(e,t);this._popupsRoot?.prepend(n.GetParent());return n};W.prototype._createId=function(e){return"co_note_"+e};W.prototype._createPopUp=function(e,t){var n=new S["default"],i=this._createId(this._nextPopUpInstance);let o=document.createElement("div");this.documentLevel&&(o=document.createElement("li"));o.className="co_noteContainer";o.id=i;var r=this.IsPreferenceMyNotes();if(this.AreSharedAnnotationsAllowed()){var a=null!==e.createdByCurrentUser&&e.createdByCurrentUser||"new"===t?"myNote":"otherNote";e.createdByCurrentUser="myNote"===a;o.setAttribute("noteType",a)}"document"==e._type&&o.setAttribute(N["default"].ids.dataAnnotationId,e.id);"orphan"==t&&""==e.noteText&&o.classList.add("co_orphan_highlight");n.setParent(o);this._optionalProvider&&n.setProvider(this._optionalProvider);"function"==typeof this.isTinyMceEnabled&&(e.isHtmlNote=this.isTinyMceEnabled());n.setInstance(this._nextPopUpInstance);n.setNote(e);n.setMode(t);n.setContainer(this);n.SetDocumentGuid(this._guid);n.setOrphan(e.selectedText&&this.documentLevel);n.SetMinimizeNotes(this._minimizeNotes);n.Draw();n.Open();this._popups[this._nextPopUpInstance]=n;this._nextPopUpInstance++;r&&!e.createdByCurrentUser&&n.HideNote();return n};W.prototype._buildInitialPopups=function(){
for(var e=0;e<this._notes.length;e++)this._notes[e]&&this._addPopUp(this._notes[e],"existing")};W.prototype.getNoteIconHtml=function(){let e="";this.IsViewOnly()||(e=`<a class='co_noteIcon_add' href='javascript:void(0);' role='button'>\n        ${C["default"].lookup("SC.Foldering.Note.AddNote","Add Note")}\n        </a>`);return`<div class='co_dropdownTabExpanded'>\n        <div class='co_dropdownTab'>\n            <div class='co_noteCount'>\n                <span class='co_noteIcon_message'>\n                    <h2></h2>\n                </span>\n            </div>\n            ${e}\n            <a class='co_noteIcon_toggle' href='javascript:void(0);' role='button'>\n            </a>\n        </div>\n    </div>`};W.prototype._buidHTML=function(){var e=this;this._root=document.createElement("div");this._root.className="co_notes";this._icon=a()(this.getNoteIconHtml())[0];this._popupsRoot=this._setPopupsRoot();const t=document.createElement("div");t.className="co_notesList";this._messageContainer=document.createElement("div");this._messageContainer.className="co_notesUndoContainer";l["default"].isIacOn("IAC-A11Y-DOC-NOTES")&&this._messageContainer.addEventListener("keydown",D["default"]);t.append(this._messageContainer,this._popupsRoot);this._root.append(this._icon,t);this._parent?.append(this._root);a()(this._icon).find("a.co_noteIcon_toggle").click((function(){0==e._openCount?e.OpenAll():e.CloseAll();u["default"].Publish(N["default"].events.documentMayHaveChangedSize)}));a()(this._icon).find("a.co_noteIcon_add").click((function(){e.OpenAll();e.AddNote({_type:"document"})}));e._minimizeNotes&&e.DrawMaximizeIcon();return};W.prototype.DrawMaximizeIcon=function(){let e;if(this._noteInfo&&this._noteInfo.noteText){const t=6,n=v["default"].stripHtml(this._noteInfo.noteText).split(" ").filter(Boolean).slice(0,t).join(" ");e=C["default"].format("SC.Foldering.Note.Maximize.Formattable",{noteText:n},`Maximize Note [${n}]`)}else e=C["default"].lookup("SC.Foldering.Note.Maximize","Maximize Note");const t=document.createElement("button");t.type="button";t.title=e;t.className="co_noteMaximize co_noteIcon co_hideState";t.textContent=e;t.addEventListener("click",(e=>{u["default"].Publish("Cobalt.Document.MaximizeNoteIcon.Clicked");l["default"].isIacOn("IAC-A11Y-DOC-NOTES")&&(this.triggeredByMaximizeIcon=e.target);if(v["default"].isNarrowTocDisplayEnabled()){v["default"].isNarrowTocSituation()&&u["default"].Publish("Cobalt.Document.NoteMaximized");(0,I.ExpandRightColumn)();o().mutate((()=>{this.SetFocusOnEditButton()}))}else this.ToggleNote()}));this._parent?.append(t);this.hasMaximizeIcon=!0};W.prototype.RemoveMaximizeIcon=function(){a()(this._parent).find("button.co_noteMaximize").remove();this.hasMaximizeIcon=!1};W.prototype._setPopupsRoot=function(){const e=document.createElement(this.documentLevel?"ol":"div");e.className="co_notesContainer";return e};W.prototype._displayUndoMessage=function(e){var t=this;L["default"].RemoveAllUndoMessages();this._messageNode=document.createElement("div");var n=new g["default"](this._messageNode,p["default"].Success,m["default"].None,!1,!1,!1),i=C["default"].lookup("SC.Foldering.Notes.Undo.Message","Note has been deleted");null!=e&&(i=i+'<a href="javascript:void(0);" role="button" class="co_notes_undoLink" >'+C["default"].lookup("SC.Foldering.Notes.Undo.Link","Undo")+"</a>");i=i+'<a href="javascript:void(0)" role="button" class="co_notes_closeLink">'+C["default"].lookup("SC.Foldering.Notes.Undo.Close","Close")+"</a>";n.Draw(i);var o=a()(this._messageNode);o.find("a.co_notes_undoLink").click((function(){e();t.OpenAll();t._removeUndoMessage()}));o.find("a.co_notes_closeLink").click((function(e){e.preventDefault();t.findNextFocusableNote();t.closeNoteRestoreWindow()}));this._messageContainer?.append(this._messageNode);this._messageContainer?.querySelector("a.co_notes_undoLink")?.focus();t.attachGlobalListeners()};W.prototype.closeNoteRestoreWindow=function(){this._removeNoteFromCache();this._removeUndoMessage()};W.prototype.handleEscapeKey=function(e){if(e.key===U["default"].Escape){this.closeNoteRestoreWindow();this.cleanupGlobalListeners()}};W.prototype.handleOutsideClick=function(e){if(!this._messageNode?.contains(e.target)){this.closeNoteRestoreWindow();this.cleanupGlobalListeners()}};W.prototype.attachGlobalListeners=function(){document.addEventListener("keydown",this.handleEscapeKey);document.addEventListener("click",this.handleOutsideClick)};W.prototype.cleanupGlobalListeners=function(){document.removeEventListener("keydown",this.handleEscapeKey);document.removeEventListener("click",this.handleOutsideClick)};W.prototype.findNextFocusableNote=function(){const e=this.GetParent();let t=null;if(l["default"].isIacOn("IAC-A11Y-DOC-NOTES"))if(this.triggeredByMaximizeIcon){const n=Array.from(e.parentElement?.childNodes),i=n.indexOf(e);if(i<n.length-1){t=n[i+1].querySelector("button.co_noteMaximize")}else{const e=document.getElementById("co_docContentBody")||document.getElementById("co_document");t=(0,x.getFocusableElements)(e).find(x.isVisible)}}else this.returnFocusTo&&(t=this.returnFocusTo);t?.focus()};W.prototype._undoMessageExists=function(){return a()(this._messageContainer).find("a").length>0};W.prototype._removeNoteFromCache=function(){const e=this.GetParent(),t=O["default"].ParseIdFromNoteHolder(e);M.A.delete(t);(0,R.DeleteCachedNoteContainer)(t)};W.prototype._removeUndoMessage=function(){const e=this.GetParent();if(A["default"].HasClass(e,N["default"].classes.highzIndex)){const t=O["default"].ParseIdFromNoteHolder(e),n=O["default"].GetInstanceIdClass(t);G.A.RemoveHighlightingMarkup(n)}this._messageContainer?.replaceChildren();this.AreSharedAnnotationsAllowed()&&L["default"].UnsetLastDeletedNote();this._updateIcon()};W.prototype.RemoveUndoMessage=function(){this._removeUndoMessage()};W.prototype._subscribeToEvents=function(){var e=this,t=[];t.push(u["default"].Subscribe("Cobalt.Foldering.NoteMenu.ShowAnnotationsEvent",(function(){e.ShowAllNotes()})));t.push(u["default"].Subscribe("Cobalt.Foldering.NoteMenu.HideAnnotationsEvent",(function(){e.ShowNoNotes()})));this.documentLevel&&(this.addNoteSubscription=u["default"].Subscribe("Cobalt.Foldering.NoteMenu.AddDocumentNoteEvent",(function(){e.AddDocumentNote()})));if(this.AreSharedAnnotationsAllowed()){t.push(u["default"].Subscribe("Cobalt.Foldering.NoteMenu.ShowMyAnnotationsEvent",(function(){e.ShowMyNotes()})));t.push(u["default"].Subscribe("Cobalt.Foldering.NoteMenu.ShareAllNotesEvent",(function(){document.querySelector(".co_contacts_collector")||e.ShareAllNotes()})));t.push(u["default"].Subscribe("Cobalt.Foldering.NoteMenu.Destroy",(function(){e.Destroy()})));this.sharedAnnotationsSubscriptions=t}};W.prototype.AddDocumentNote=function(){this.OpenAll();var e=this._prependPopUp({_type:"document"},"new");e.Edit();this._updateIcon();k["default"].IsInfiniteScroll||e.FocusText();var t=this._iScrollableAncestorElement;if((0,_.IsIpad)()&&t)(0,c.ScrollTo)(t,t);else{this._scrollToTop();k["default"].IsInfiniteScroll&&e.FocusText()}};W.prototype.SetFocusOnEditButton=function(){const e=this._parent?.querySelector(".co_noteEditButton")??this._parent?.querySelector("a.co_noteEdit");e?.focus()};W.prototype.SetFocusOnMaximizeIcon=function(){this._parent?.querySelector("button.co_noteMaximize")?.focus()};W.prototype._scrollToTop=function(){window.scrollTo(0,0)};W.prototype.ToggleZIndex=function(e){this._parent?.classList.toggle("co_highzIndex2",e)};W.prototype.SetNoteHeaderLabel=function(e){if(0!==e&&!e)return;const t=this._icon?.querySelector("span.co_noteIcon_message h2");if(!t)return;const n=1!==e?C["default"].format("SC.Foldering.Notes.Count.Plural",{count:e},`Notes (${e})`):C["default"].format("SC.Foldering.Notes.Count.Single",{count:e},`Note (${e})`);t.textContent=n};W.prototype._updateIcon=function(){this._openCount=0;var e=!0,t=0,n=this.AreSharedAnnotationsAllowed(),i=this.IsPreferenceMyNotes(),o=this._popups.filter((e=>e&&"new"===e._mode)),r=this._popups.filter((e=>e&&e.isOpen()));e=0==(t=i?this.GetMyNoteCount():this.GetNoteCount());(this._undoMessageExists()||o&&o.length>0)&&(e=!1);e?(0,w.hideElements)(this._root):(0,w.showElements)(this._root)
;this.documentLevel?this.ShowIcon():this.HideIcon();if(r&&r.length>0){this._openCount=r.length;a()(this._icon).find("a.co_noteIcon_toggle").addClass("co_noteIcon_close");a()(this._icon).find("a.co_noteIcon_toggle").attr("aria-expanded","true");a()(this._icon).find("a.co_noteIcon_toggle").text(C["default"].lookup("SC.Foldering.Note.HideNote","Hide Note"))}else{a()(this._icon).find("a.co_noteIcon_toggle").removeClass("co_noteIcon_close");a()(this._icon).find("a.co_noteIcon_toggle").attr("aria-expanded","false");a()(this._icon).find("a.co_noteIcon_toggle").text(C["default"].lookup("SC.Foldering.Note.ShowNote","Show Note"))}this.SetNoteHeaderLabel(t);n&&b["default"].prototype.UpdateNoteCounts();u["default"].Publish(N["default"].events.noteContainerDisplayChange,{isShown:!e})};W.prototype._setFocusOnHighlight=function(){const e=this._popups.length?this._popups[0].GetHighlightActivator():null;e?.focus()};W.prototype.UpdateAccessibilityNoteLabel=function(e){const t=this._parent.querySelector("button.co_noteMaximize");if(t){const n=document.querySelector(`.${N["default"].classes.highlightActivator}.${e}`);if(n){t.ariaLabel=n.ariaLabel;t.title=n.ariaLabel;t.textContent=n.ariaLabel}}};const $=W;$.prototype.ShowTinyMce=function(e){var t=Promise.resolve(),n=Promise.resolve(),i=e.GetParent().id,o=`#${this._parent.id} #${i} .co_viewNoteText`,r=`#${this._parent.id} #${i} .co_noteArea`;e.SetSaveAllowed(!1);e.GetViewer()?e.setViewText(e._note.noteText):t=e.InitNote(o,!0);if(e.GetEditor())e.setEditText(e._note.noteText);else{const t=document.querySelector(r);(0,w.hideElements)(t);var a=u["default"].CreateUUID();const i=document.createElement("div");i.id=a;i.className="co_richEditor co_noteArea";i.tabIndex=0;t?.before(i);r="#"+a;n=e.InitNote(r,!1)}return Promise.all([t,n])};$.prototype._addPopUp=(z=$.prototype._addPopUp,function(e,t){e=z.call(this,e,t);this.isTinyMceEnabled()&&this.ShowTinyMce(e);return e});var z;$.prototype._prependPopUp=function(e){return function(t,n){t=e.call(this,t,n);this.isTinyMceEnabled()&&this.ShowTinyMce(t);return t}}($.prototype._prependPopUp);$.prototype.SuperRemovePopup=$.prototype.RemovePopup;$.prototype.RemovePopup=function(e){if(this.isTinyMceEnabled()){this._popups[e].RemoveTinyMceNote()}return this.SuperRemovePopup(e)};$.prototype.AlignWithHighlight=function(){var e=O["default"].ParseIdFromNoteHolder(this._parent),t=O["default"].GetInstanceIdClass(e),n=document.querySelector(`.${t}`);if(n){var i=O["default"].getRepositionNoteHolderTop(this._parent,n);this.SetTopOffset(i)}};$.prototype.isTinyMceEnabled=function(){return!1};const V=$;var q=n(8016),j=V.prototype.AlignWithHighlight;V.prototype.AlignWithHighlight=function(){q["default"].IsEdgarContentType(q["default"].FindDocumentContentType())||q["default"].IsFilingsContentType(q["default"].FindDocumentContentType())||q["default"].IsPrivateEquityContentType(q["default"].FindDocumentContentType())||q["default"].IsLocatePrecedentAgreements(q["default"].FindDocumentContentType())||j.call(this)};V.prototype.isTinyMceEnabled=function(){return v["default"].isPracticalLawUsDocument()};const K=V},2520:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>nn});var i=n(9191),o=n.n(i),r=n(5779),a=n.n(r),s=n(1434),l=n.n(s),d=n(9912),c=n(1369),u=n(519),f=n(4383),h=n(9520),p=n(1422),m=n(9054),g=n(2595),y=n(7617),v=n(966),C=n(3839),b=n(3434),_=n(8286),S=n(2065),N=n(9466),E=n(365),A=n(5578),w=n(3364),x=n(6246),T=n(1401),I=n(5501),D=n(4159),k=n(7955),M=n(6494),R=n(6662),H=n(9796),O=n(6751),L=n(5232),P=n(5212),B=n(9422),F=n(1235),G=n(1594),U=n(6399),W=n(6397),$=function(e,t){$=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])};return $(e,t)};function z(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");$(e,t);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function V(e,t,n,i){return new(n||(n=Promise))((function(o,r){function a(e){try{l(i.next(e))}catch(e){r(e)}}function s(e){try{l(i["throw"](e))}catch(e){r(e)}}function l(e){e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s);var t}l((i=i.apply(e,t||[])).next())}))}function q(e,t){var n,i,o,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a["throw"]=s(1),a["return"]=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(r=0)),r;)try{if(n=1,i&&(o=2&s[0]?i["return"]:s[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;(i=0,o)&&(s=[2&s[0],o.value]);switch(s[0]){case 0:case 1:o=s;break;case 4:r.label++;return{value:s[1],done:!1};case 5:r.label++;i=s[1];s=[0];continue;case 7:s=r.ops.pop();r.trys.pop();continue;default:if(!(o=r.trys,o=o.length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1];o=s;break}if(o&&r.label<o[2]){r.label=o[2];r.ops.push(s);break}o[2]&&r.ops.pop();r.trys.pop();continue}s=t.call(e,r)}catch(e){s=[6,e];i=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}Object.create;function j(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){e&&i>=e.length&&(e=void 0);return{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function K(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r["return"])&&n.call(r)}finally{if(o)throw o.error}}return a}function Y(e,t,n){if(n||2===arguments.length)for(var i,o=0,r=t.length;o<r;o++)if(i||!(o in t)){i||(i=Array.prototype.slice.call(t,0,o));i[o]=t[o]}return e.concat(i||Array.prototype.slice.call(t))}function J(e){return this instanceof J?(this.v=e,this):new J(e)}function X(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,o=n.apply(e,t||[]),r=[];return i=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",(function(e){return function(t){return Promise.resolve(t).then(e,d)}})),i[Symbol.asyncIterator]=function(){return this},i;function a(e,t){if(o[e]){i[e]=function(t){return new Promise((function(n,i){r.push([e,t,n,i])>1||s(e,t)}))};t&&(i[e]=t(i[e]))}}function s(e,t){try{(function(e){e.value instanceof J?Promise.resolve(e.value.v).then(l,d):c(r[0][2],e)})(o[e](t))}catch(e){c(r[0][3],e)}}function l(e){s("next",e)}function d(e){s("throw",e)}function c(e,t){(e(t),r.shift(),r.length)&&s(r[0][0],r[0][1])}}function Q(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=j(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(n){t[n]=e[n]&&function(t){return new Promise((function(i,o){(function(e,t,n,i){Promise.resolve(i).then((function(t){e({value:t,done:n})}),t)})(i,o,(t=e[n](t)).done,t.value)}))}}}Object.create;"function"==typeof SuppressedError&&SuppressedError;var Z=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function ee(e){return"function"==typeof e}function te(e){return ee(null==e?void 0:e.then)}function ne(e){var t=e((function(e){Error.call(e);e.stack=(new Error).stack}));t.prototype=Object.create(Error.prototype);t.prototype.constructor=t;return t}var ie=ne((function(e){return function(t){e(this);this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"";this.name="UnsubscriptionError";this.errors=t}}));function oe(e,t){if(e){
var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var re=function(){function e(e){this.initialTeardown=e;this.closed=!1;this._parentage=null;this._finalizers=null}e.prototype.unsubscribe=function(){var e,t,n,i,o;if(!this.closed){this.closed=!0;var r=this._parentage;if(r){this._parentage=null;if(Array.isArray(r))try{for(var a=j(r),s=a.next();!s.done;s=a.next()){s.value.remove(this)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}else r.remove(this)}var l=this.initialTeardown;if(ee(l))try{l()}catch(e){o=e instanceof ie?e.errors:[e]}var d=this._finalizers;if(d){this._finalizers=null;try{for(var c=j(d),u=c.next();!u.done;u=c.next()){var f=u.value;try{le(f)}catch(e){o=null!=o?o:[];e instanceof ie?o=Y(Y([],K(o)),K(e.errors)):o.push(e)}}}catch(e){n={error:e}}finally{try{u&&!u.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}}if(o)throw new ie(o)}};e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)le(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}};e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)};e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e};e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&oe(t,e)};e.prototype.remove=function(t){var n=this._finalizers;n&&oe(n,t);t instanceof e&&t._removeParent(this)};e.EMPTY=function(){var t=new e;t.closed=!0;return t}();return e}(),ae=re.EMPTY;function se(e){return e instanceof re||e&&"closed"in e&&ee(e.remove)&&ee(e.add)&&ee(e.unsubscribe)}function le(e){ee(e)?e():e.unsubscribe()}var de={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},ce={setTimeout:function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var o=ce.delegate;if(null==o?void 0:o.setTimeout)return o.setTimeout.apply(o,Y([e,t],K(n)));return setTimeout.apply(void 0,Y([e,t],K(n)))},clearTimeout:function(e){var t=ce.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function ue(e){ce.setTimeout((function(){var t=de.onUnhandledError;if(!t)throw e;t(e)}))}function fe(){}var he=pe("C",void 0,void 0);function pe(e,t,n){return{kind:e,value:t,error:n}}var me=null;function ge(e){if(de.useDeprecatedSynchronousErrorHandling){var t=!me;t&&(me={errorThrown:!1,error:null});e();if(t){var n=me,i=n.errorThrown,o=n.error;me=null;if(i)throw o}}else e()}var ye=function(e){z(t,e);function t(t){var n=e.call(this)||this;n.isStopped=!1;if(t){n.destination=t;se(t)&&t.add(n)}else n.destination=Ee;return n}t.create=function(e,t,n){return new _e(e,t,n)};t.prototype.next=function(e){this.isStopped?Ne(function(e){return pe("N",e,void 0)}(e),this):this._next(e)};t.prototype.error=function(e){if(this.isStopped)Ne(pe("E",void 0,t=e),this);else{this.isStopped=!0;this._error(e)}var t};t.prototype.complete=function(){if(this.isStopped)Ne(he,this);else{this.isStopped=!0;this._complete()}};t.prototype.unsubscribe=function(){if(!this.closed){this.isStopped=!0;e.prototype.unsubscribe.call(this);this.destination=null}};t.prototype._next=function(e){this.destination.next(e)};t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}};t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}};return t}(re),ve=Function.prototype.bind;function Ce(e,t){return ve.call(e,t)}var be=function(){function e(e){this.partialObserver=e}e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){Se(e)}};e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){Se(e)}else Se(e)};e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){Se(e)}};return e}(),_e=function(e){z(t,e);function t(t,n,i){var o,r=e.call(this)||this;if(ee(t)||!t)o={next:null!=t?t:void 0,error:null!=n?n:void 0,complete:null!=i?i:void 0};else{var a;if(r&&de.useDeprecatedNextContext){(a=Object.create(t)).unsubscribe=function(){return r.unsubscribe()};o={next:t.next&&Ce(t.next,a),error:t.error&&Ce(t.error,a),complete:t.complete&&Ce(t.complete,a)}}else o=t}r.destination=new be(o);return r}return t}(ye);function Se(e){de.useDeprecatedSynchronousErrorHandling?function(e){if(de.useDeprecatedSynchronousErrorHandling&&me){me.errorThrown=!0;me.error=e}}(e):ue(e)}function Ne(e,t){var n=de.onStoppedNotification;n&&ce.setTimeout((function(){return n(e,t)}))}var Ee={closed:!0,next:fe,error:function(e){throw e},complete:fe},Ae="function"==typeof Symbol&&Symbol.observable||"@@observable";function we(e){return e}function xe(e){if(0===e.length)return we;if(1===e.length)return e[0];return function(t){return e.reduce((function(e,t){return t(e)}),t)}}var Te=function(){function e(e){e&&(this._subscribe=e)}e.prototype.lift=function(t){var n=new e;n.source=this;n.operator=t;return n};e.prototype.subscribe=function(e,t,n){var i,o=this,r=(i=e)&&i instanceof ye||function(e){return e&&ee(e.next)&&ee(e.error)&&ee(e.complete)}(i)&&se(i)?e:new _e(e,t,n);ge((function(){var e=o,t=e.operator,n=e.source;r.add(t?t.call(r,n):n?o._subscribe(r):o._trySubscribe(r))}));return r};e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}};e.prototype.forEach=function(e,t){var n=this;return new(t=Ie(t))((function(t,i){var o=new _e({next:function(t){try{e(t)}catch(e){i(e);o.unsubscribe()}},error:i,complete:t});n.subscribe(o)}))};e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)};e.prototype[Ae]=function(){return this};e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return xe(e)(this)};e.prototype.toPromise=function(e){var t=this;return new(e=Ie(e))((function(e,n){var i;t.subscribe((function(e){return i=e}),(function(e){return n(e)}),(function(){return e(i)}))}))};e.create=function(t){return new e(t)};return e}();function Ie(e){var t;return null!==(t=null!=e?e:de.Promise)&&void 0!==t?t:Promise}function De(e){return ee(e[Ae])}function ke(e){return Symbol.asyncIterator&&ee(null==e?void 0:e[Symbol.asyncIterator])}function Me(e){return new TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var Re=function(){if("function"!=typeof Symbol||!Symbol.iterator)return"@@iterator";return Symbol.iterator}();function He(e){return ee(null==e?void 0:e[Re])}function Oe(e){return X(this,arguments,(function(){var t,n,i,o;return q(this,(function(r){switch(r.label){case 0:t=e.getReader();r.label=1;case 1:r.trys.push([1,,9,10]);r.label=2;case 2:0;return[4,J(t.read())];case 3:n=r.sent(),i=n.value;if(!(o=n.done))return[3,5];return[4,J(void 0)];case 4:return[2,r.sent()];case 5:return[4,J(i)];case 6:return[4,r.sent()];case 7:r.sent();return[3,2];case 8:return[3,10];case 9:t.releaseLock();return[7];case 10:return[2]}}))}))}function Le(e){return ee(null==e?void 0:e.getReader)}function Pe(e){if(e instanceof Te)return e;if(null!=e){if(De(e))return r=e,new Te((function(e){var t=r[Ae]();if(ee(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if(Z(e))return o=e,new Te((function(e){for(var t=0;t<o.length&&!e.closed;t++)e.next(o[t]);e.complete()}));if(te(e))return i=e,new Te((function(e){i.then((function(t){if(!e.closed){e.next(t);e.complete()}}),(function(t){return e.error(t)})).then(null,ue)}));if(ke(e))return Be(e);if(He(e))return n=e,new Te((function(e){var t,i;try{for(var o=j(n),r=o.next();!r.done;r=o.next()){var a=r.value;e.next(a);if(e.closed)return}}catch(e){t={error:e}}finally{try{r&&!r.done&&(i=o.return)&&i.call(o)}finally{if(t)throw t.error}}e.complete()}));if(Le(e))return Be(Oe(t=e))}var t,n,i,o,r;throw Me(e)}function Be(e){return new Te((function(t){(function(e,t){var n,i,o,r
;return V(this,void 0,void 0,(function(){var a,s;return q(this,(function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]);n=Q(e);l.label=1;case 1:return[4,n.next()];case 2:if(!(i=l.sent(),!i.done))return[3,4];a=i.value;t.next(a);if(t.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:s=l.sent();o={error:s};return[3,11];case 6:l.trys.push([6,,9,10]);if(!i||i.done||!(r=n.return))return[3,8];return[4,r.call(n)];case 7:l.sent();l.label=8;case 8:return[3,10];case 9:if(o)throw o.error;return[7];case 10:return[7];case 11:t.complete();return[2]}}))}))})(e,t).catch((function(e){return t.error(e)}))}))}function Fe(e){return function(t){if(function(e){return ee(null==e?void 0:e.lift)}(t))return t.lift((function(t){try{return e(t,this)}catch(e){this.error(e)}}));throw new TypeError("Unable to lift unknown Observable type")}}function Ge(e,t,n,i,o){return new Ue(e,t,n,i,o)}var Ue=function(e){z(t,e);function t(t,n,i,o,r,a){var s=e.call(this,t)||this;s.onFinalize=r;s.shouldUnsubscribe=a;s._next=n?function(e){try{n(e)}catch(e){t.error(e)}}:e.prototype._next;s._error=o?function(e){try{o(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error;s._complete=i?function(){try{i()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete;return s}t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this);!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}};return t}(ye);function We(e,t){return Fe((function(n,i){var o=0;n.subscribe(Ge(i,(function(n){i.next(e.call(t,n,o++))})))}))}function $e(e,t,n,i,o){void 0===i&&(i=0);void 0===o&&(o=!1);var r=t.schedule((function(){n();o?e.add(this.schedule(null,i)):this.unsubscribe()}),i);e.add(r);if(!o)return r}function ze(e,t,n){void 0===n&&(n=1/0);if(ee(t))return ze((function(n,i){return We((function(e,o){return t(n,e,i,o)}))(Pe(e(n,i)))}),n);"number"==typeof t&&(n=t);return Fe((function(t,i){return function(e,t,n,i,o,r,a,s){var l=[],d=0,c=0,u=!1,f=function(){!u||l.length||d||t.complete()},h=function(e){return d<i?p(e):l.push(e)},p=function(e){r&&t.next(e);d++;var s=!1;Pe(n(e,c++)).subscribe(Ge(t,(function(e){null==o||o(e);r?h(e):t.next(e)}),(function(){s=!0}),void 0,(function(){if(s)try{d--;for(var e=function(){var e=l.shift();a?$e(t,a,(function(){return p(e)})):p(e)};l.length&&d<i;)e();f()}catch(e){t.error(e)}})))};e.subscribe(Ge(t,h,(function(){u=!0;f()})));return function(){null==s||s()}}(t,i,e,n)}))}var Ve=Array.isArray;function qe(e){return We((function(t){return function(e,t){return Ve(t)?e.apply(void 0,Y([],K(t))):e(t)}(e,t)}))}var je=["addListener","removeListener"],Ke=["addEventListener","removeEventListener"],Ye=["on","off"];function Je(e,t,n,i){if(ee(n)){i=n;n=void 0}if(i)return Je(e,t,n).pipe(qe(i));var o=K(function(e){return ee(e.addEventListener)&&ee(e.removeEventListener)}(e)?Ke.map((function(i){return function(o){return e[i](t,o,n)}})):function(e){return ee(e.addListener)&&ee(e.removeListener)}(e)?je.map(Xe(e,t)):function(e){return ee(e.on)&&ee(e.off)}(e)?Ye.map(Xe(e,t)):[],2),r=o[0],a=o[1];if(!r&&Z(e))return ze((function(e){return Je(e,t,n)}))(Pe(e));if(!r)throw new TypeError("Invalid event target");return new Te((function(e){var t=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.next(1<t.length?t:t[0])};r(t);return function(){return a(t)}}))}function Xe(e,t){return function(n){return function(i){return e[n](t,i)}}}function Qe(e,t,{capture:n=!1,passive:i=!1}={}){return Je(e,t,W["default"].supportsPassiveEventListeners()?{capture:n,passive:i}:n)}var Ze=ne((function(e){return function(){e(this);this.name="ObjectUnsubscribedError";this.message="object unsubscribed"}})),et=function(e){z(t,e);function t(){var t=e.call(this)||this;t.closed=!1;t.currentObservers=null;t.observers=[];t.isStopped=!1;t.hasError=!1;t.thrownError=null;return t}t.prototype.lift=function(e){var t=new tt(this,this);t.operator=e;return t};t.prototype._throwIfClosed=function(){if(this.closed)throw new Ze};t.prototype.next=function(e){var t=this;ge((function(){var n,i;t._throwIfClosed();if(!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var o=j(t.currentObservers),r=o.next();!r.done;r=o.next()){r.value.next(e)}}catch(e){n={error:e}}finally{try{r&&!r.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}}}))};t.prototype.error=function(e){var t=this;ge((function(){t._throwIfClosed();if(!t.isStopped){t.hasError=t.isStopped=!0;t.thrownError=e;for(var n=t.observers;n.length;)n.shift().error(e)}}))};t.prototype.complete=function(){var e=this;ge((function(){e._throwIfClosed();if(!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}}))};t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0;this.observers=this.currentObservers=null};Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0});t.prototype._trySubscribe=function(t){this._throwIfClosed();return e.prototype._trySubscribe.call(this,t)};t.prototype._subscribe=function(e){this._throwIfClosed();this._checkFinalizedStatuses(e);return this._innerSubscribe(e)};t.prototype._innerSubscribe=function(e){var t=this,n=this,i=n.hasError,o=n.isStopped,r=n.observers;if(i||o)return ae;this.currentObservers=null;r.push(e);return new re((function(){t.currentObservers=null;oe(r,e)}))};t.prototype._checkFinalizedStatuses=function(e){var t=this,n=t.hasError,i=t.thrownError,o=t.isStopped;n?e.error(i):o&&e.complete()};t.prototype.asObservable=function(){var e=new Te;e.source=this;return e};t.create=function(e,t){return new tt(e,t)};return t}(Te),tt=function(e){z(t,e);function t(t,n){var i=e.call(this)||this;i.destination=t;i.source=n;return i}t.prototype.next=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===n||n.call(t,e)};t.prototype.error=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===n||n.call(t,e)};t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)};t.prototype._subscribe=function(e){var t,n;return null!==(n=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==n?n:ae};return t}(et);function nt(e,t){return function(n,i){return!e.call(t,n,i)}}function it(e,t){return Fe((function(n,i){var o=0;n.subscribe(Ge(i,(function(n){return e.call(t,n,o++)&&i.next(n)})))}))}function ot(e){return e&&ee(e.schedule)}function rt(e){return e[e.length-1]}function at(e){return ot(rt(e))?e.pop():void 0}function st(e,t){void 0===t&&(t=0);return Fe((function(n,i){n.subscribe(Ge(i,(function(n){return $e(i,e,(function(){return i.next(n)}),t)}),(function(){return $e(i,e,(function(){return i.complete()}),t)}),(function(n){return $e(i,e,(function(){return i.error(n)}),t)})))}))}function lt(e,t){void 0===t&&(t=0);return Fe((function(n,i){i.add(e.schedule((function(){return n.subscribe(i)}),t))}))}function dt(e,t){if(!e)throw new Error("Iterable cannot be null");return new Te((function(n){$e(n,t,(function(){var i=e[Symbol.asyncIterator]();$e(n,t,(function(){i.next().then((function(e){e.done?n.complete():n.next(e.value)}))}),0,!0)}))}))}function ct(e,t){if(null!=e){if(De(e))return function(e,t){return Pe(e).pipe(lt(t),st(t))}(e,t);if(Z(e))return function(e,t){return new Te((function(n){var i=0;return t.schedule((function(){if(i===e.length)n.complete();else{n.next(e[i++]);n.closed||this.schedule()}}))}))}(e,t);if(te(e))return function(e,t){return Pe(e).pipe(lt(t),st(t))}(e,t);if(ke(e))return dt(e,t);if(He(e))return function(e,t){return new Te((function(n){var i;$e(n,t,(function(){i=e[Re]();$e(n,t,(function(){var e,t,o;try{t=(e=i.next()).value,o=e.done}catch(e){n.error(e);return}o?n.complete():n.next(t)}),0,!0)}));return function(){return ee(null==i?void 0:i.return)&&i.return()}}))}(e,t);if(Le(e))return function(e,t){return dt(Oe(e),t)}(e,t)}throw Me(e)}function ut(e,t){return t?ct(e,t):Pe(e)}function ft(e){void 0===e&&(e=1/0);return ze(we,e)}var ht=new Te((function(e){return e.complete()}))
;function pt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=at(e),i=function(e,t){return"number"==typeof rt(e)?e.pop():t}(e,1/0),o=e;return o.length?1===o.length?Pe(o[0]):ft(i)(ut(o,n)):ht}function mt(e){void 0===e&&(e={});var t=e.connector,n=void 0===t?function(){return new et}:t,i=e.resetOnError,o=void 0===i||i,r=e.resetOnComplete,a=void 0===r||r,s=e.resetOnRefCountZero,l=void 0===s||s;return function(e){var t,i,r,s=0,d=!1,c=!1,u=function(){null==i||i.unsubscribe();i=void 0},f=function(){u();t=r=void 0;d=c=!1},h=function(){var e=t;f();null==e||e.unsubscribe()};return Fe((function(e,p){s++;c||d||u();var m=r=null!=r?r:n();p.add((function(){0!==--s||c||d||(i=gt(h,l))}));m.subscribe(p);if(!t&&s>0){t=new _e({next:function(e){return m.next(e)},error:function(e){c=!0;u();i=gt(f,o,e);m.error(e)},complete:function(){d=!0;u();i=gt(f,a);m.complete()}});Pe(e).subscribe(t)}}))(e)}}function gt(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!0===t){e();return}if(!1===t)return;var o=new _e({next:function(){o.unsubscribe();e()}});return Pe(t.apply(void 0,Y([],K(n)))).subscribe(o)}function yt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n,i=ee(rt(n=e))?n.pop():void 0;return Fe((function(t,n){for(var o=e.length,r=new Array(o),a=e.map((function(){return!1})),s=!1,l=function(t){Pe(e[t]).subscribe(Ge(n,(function(e){r[t]=e;if(!s&&!a[t]){a[t]=!0;(s=a.every(we))&&(a=null)}}),fe))},d=0;d<o;d++)l(d);t.subscribe(Ge(n,(function(e){if(s){var t=Y([e],K(r));n.next(i?i.apply(void 0,Y([],K(t))):t)}})))}))}var vt={now:function(){return(vt.delegate||Date).now()},delegate:void 0},Ct=function(e){z(t,e);function t(t,n,i){void 0===t&&(t=1/0);void 0===n&&(n=1/0);void 0===i&&(i=vt);var o=e.call(this)||this;o._bufferSize=t;o._windowTime=n;o._timestampProvider=i;o._buffer=[];o._infiniteTimeWindow=!0;o._infiniteTimeWindow=n===1/0;o._bufferSize=Math.max(1,t);o._windowTime=Math.max(1,n);return o}t.prototype.next=function(t){var n=this,i=n.isStopped,o=n._buffer,r=n._infiniteTimeWindow,a=n._timestampProvider,s=n._windowTime;if(!i){o.push(t);!r&&o.push(a.now()+s)}this._trimBuffer();e.prototype.next.call(this,t)};t.prototype._subscribe=function(e){this._throwIfClosed();this._trimBuffer();for(var t=this._innerSubscribe(e),n=this._infiniteTimeWindow,i=this._buffer.slice(),o=0;o<i.length&&!e.closed;o+=n?1:2)e.next(i[o]);this._checkFinalizedStatuses(e);return t};t.prototype._trimBuffer=function(){var e=this,t=e._bufferSize,n=e._timestampProvider,i=e._buffer,o=e._infiniteTimeWindow,r=(o?1:2)*t;t<1/0&&r<i.length&&i.splice(0,i.length-r);if(!o){for(var a=n.now(),s=0,l=1;l<i.length&&i[l]<=a;l+=2)s=l;s&&i.splice(0,s+1)}};return t}(et);function bt(e,t){if(t)return function(n){return n.pipe(bt((function(n,i){return Pe(e(n,i)).pipe(We((function(e,o){return t(n,e,i,o)})))})))};return Fe((function(t,n){var i=0,o=null,r=!1;t.subscribe(Ge(n,(function(t){if(!o){o=Ge(n,void 0,(function(){o=null;r&&n.complete()}));Pe(e(t,i++)).subscribe(o)}}),(function(){r=!0;!o&&n.complete()})))}))}function _t(e){return Fe((function(t,n){Pe(e).subscribe(Ge(n,(function(){return n.complete()}),fe));!n.closed&&t.subscribe(n)}))}var St=function(e){z(t,e);function t(t,n){return e.call(this)||this}t.prototype.schedule=function(e,t){void 0===t&&(t=0);return this};return t}(re),Nt={setInterval:function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var o=Nt.delegate;if(null==o?void 0:o.setInterval)return o.setInterval.apply(o,Y([e,t],K(n)));return setInterval.apply(void 0,Y([e,t],K(n)))},clearInterval:function(e){var t=Nt.delegate;return((null==t?void 0:t.clearInterval)||clearInterval)(e)},delegate:void 0},Et=function(e){z(t,e);function t(t,n){var i=e.call(this,t,n)||this;i.scheduler=t;i.work=n;i.pending=!1;return i}t.prototype.schedule=function(e,t){var n;void 0===t&&(t=0);if(this.closed)return this;this.state=e;var i=this.id,o=this.scheduler;null!=i&&(this.id=this.recycleAsyncId(o,i,t));this.pending=!0;this.delay=t;this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(o,this.id,t);return this};t.prototype.requestAsyncId=function(e,t,n){void 0===n&&(n=0);return Nt.setInterval(e.flush.bind(e,this),n)};t.prototype.recycleAsyncId=function(e,t,n){void 0===n&&(n=0);if(null!=n&&this.delay===n&&!1===this.pending)return t;null!=t&&Nt.clearInterval(t);return};t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))};t.prototype._execute=function(e,t){var n,i=!1;try{this.work(e)}catch(e){i=!0;n=e||new Error("Scheduled action threw falsy error")}if(i){this.unsubscribe();return n}};t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,n=this.scheduler,i=n.actions;this.work=this.state=this.scheduler=null;this.pending=!1;oe(i,this);null!=t&&(this.id=this.recycleAsyncId(n,t,null));this.delay=null;e.prototype.unsubscribe.call(this)}};return t}(St),At=function(){function e(t,n){void 0===n&&(n=e.now);this.schedulerActionCtor=t;this.now=n}e.prototype.schedule=function(e,t,n){void 0===t&&(t=0);return new this.schedulerActionCtor(this,e).schedule(n,t)};e.now=vt.now;return e}(),wt=new(function(e){z(t,e);function t(t,n){void 0===n&&(n=At.now);var i=e.call(this,t,n)||this;i.actions=[];i._active=!1;return i}t.prototype.flush=function(e){var t,n=this.actions;if(this._active){n.push(e);return}this._active=!0;do{if(t=e.execute(e.state,e.delay))break}while(e=n.shift());this._active=!1;if(t){for(;e=n.shift();)e.unsubscribe();throw t}};return t}(At))(Et),xt=wt;function Tt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ft(1)(ut(e,at(e)))}function It(e){return e<=0?function(){return ht}:Fe((function(t,n){var i=0;t.subscribe(Ge(n,(function(t){if(++i<=e){n.next(t);e<=i&&n.complete()}})))}))}function Dt(e,t){if(t)return function(n){return Tt(t.pipe(It(1),Fe((function(e,t){e.subscribe(Ge(t,fe))}))),n.pipe(Dt(e)))};return ze((function(t,n){return Pe(e(t,n)).pipe(It(1),function(e){return We((function(){return e}))}(t))}))}function kt(e,t,n){void 0===e&&(e=0);void 0===n&&(n=xt);var i=-1;null!=t&&(ot(t)?n=t:i=t);return new Te((function(t){var o,r=(o=e)instanceof Date&&!isNaN(o)?+e-n.now():e;r<0&&(r=0);var a=0;return n.schedule((function(){if(!t.closed){t.next(a++);0<=i?this.schedule(void 0,i):t.complete()}}),r)}))}class Mt{constructor({target:e=document,captureDelay:t=250,selectionChangeDelay:n=100}={}){this.target=e;this.captureDelay=t;this.selectionChangeDelay=n;this.selectionChange=new et;this.capture$=void 0;this.selectionTrail$=void 0;this.setupSubscription()}enable(){this.selectionChange.next(!0)}disable(){this.selectionChange.next(!1)}setupSubscription(){const e=function(e,t){if(C["default"].EnableIpad)return Qe(e,"touchstart",t);return Qe(e,"pointerdown",t)}(this.target,{passive:!0}),t=function(e,t){if(C["default"].EnableIpad)return Qe(e,"touchend",t);return Qe(e,"pointerup",t)}(this.target,{passive:!0}),n=Qe(this.target,"selectionchange",{passive:!0}),i=e.pipe(it(Ht),We(Rt),mt()),o=t.pipe(it(Ht),We(Rt),yt(i,((e,t)=>({begin:t,end:e}))),mt()),[r,a]=(s=this.selectionChange,[it(l=we,d)(Pe(s)),it(nt(l,d))(Pe(s))]);var s,l,d;const c=o.pipe(function(e,t,n){var i,o,r,a,s=!1;e&&"object"==typeof e?(i=e.bufferSize,a=void 0===i?1/0:i,o=e.windowTime,t=void 0===o?1/0:o,s=void 0!==(r=e.refCount)&&r,n=e.scheduler):a=null!=e?e:1/0;return mt({connector:function(){return new Ct(a,t,n)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}({bufferSize:1,refCount:!0})),u=r.pipe(bt((()=>n.pipe(_t(a)))),(f=c,h=()=>i,Fe((function(e,t){var n=[],i=function(e){for(;0<n.length;)n.shift().error(e);t.error(e)};Pe(f).subscribe(Ge(t,(function(e){var o=new et;n.push(o);var r,a=new re;try{r=Pe(h(e))}catch(e){i(e);return}t.next(o.asObservable());a.add(r.subscribe(Ge(t,(function(){oe(n,o);o.complete();a.unsubscribe()}),fe,i)))}),fe));e.subscribe(Ge(t,(function(e){var t,i,o=n.slice();try{for(var r=j(o),a=r.next();!a.done;a=r.next())a.value.next(e)}catch(e){t={error:e}}finally{try{a&&!a.done&&(i=r.return)&&i.call(r)}finally{if(t)throw t.error}}}),(function(){
for(;0<n.length;)n.shift().complete();t.complete()}),i,(function(){for(;0<n.length;)n.shift().unsubscribe()})))}))),ft(),yt(c,((e,t)=>t)));var f,h,p,m;this.capture$=i.pipe((p=e=>function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ut(e,at(e))}(e).pipe(function(e,t){void 0===t&&(t=wt);var n=kt(e,t);return Dt((function(){return n}))}(this.captureDelay),_t(o)),Fe((function(e,t){var n=null,i=0,o=!1,r=function(){return o&&!n&&t.complete()};e.subscribe(Ge(t,(function(e){null==n||n.unsubscribe();var o=0,a=i++;Pe(p(e,a)).subscribe(n=Ge(t,(function(n){return t.next(m?m(e,n,a,o++):n)}),(function(){n=null;r()})))}),(function(){o=!0;r()})))}))));this.selectionTrail$=pt(o,u).pipe(function(e,t){void 0===t&&(t=wt);return Fe((function(n,i){var o=null,r=null,a=null,s=function(){if(o){o.unsubscribe();o=null;var e=r;r=null;i.next(e)}};function l(){var n=a+e,r=t.now();if(r<n){o=this.schedule(void 0,n-r);i.add(o);return}s()}n.subscribe(Ge(i,(function(n){r=n;a=t.now();if(!o){o=t.schedule(l,e);i.add(o)}}),(function(){s();i.complete()}),void 0,(function(){r=o=null})))}))}(this.selectionChangeDelay),_t(a),function(e){var t,n,i=1/0;null!=e&&("object"==typeof e?(t=e.count,i=void 0===t?1/0:t,n=e.delay):i=e);return i<=0?function(){return ht}:Fe((function(e,t){var o,r=0,a=function(){null==o||o.unsubscribe();o=null;if(null!=n){var e="number"==typeof n?kt(n):Pe(n(r)),i=Ge(t,(function(){i.unsubscribe();s()}));e.subscribe(i)}else s()},s=function(){var n=!1;o=e.subscribe(Ge(t,void 0,(function(){++r<i?o?a():n=!0:t.complete()})));n&&a()};s()}))}())}}function Rt(e){const{x:t,y:n}=S["default"].getMouseCoordinatesOfEvent(e);return{pointerX:t,pointerY:n,target:S["default"].getEventSourceElement(e)}}function Ht(e){return!(e.type.startsWith("mouse")||"mouse"===e.pointerType)||0===e.button}const Ot=class{UpdateMenuItemForSelection(e){const t=e.length>_["default"].values.maximumCharactersForAddToOutline;this.handleCharacterLimit(t)}handleCharacterLimit(e){document.getElementById(_["default"].ids.outlineBuilderCharacterLimit)?.classList.toggle("co_hideState",!e);document.getElementById(_["default"].ids.outlineBuilderSelectedTextMenuItem)?.classList.toggle("co_disabled",e)}SetParentDiv(e){this.parentObject=e}Draw(){const{outlineBuilderSelectedTextMenuItem:e,outlineBuilderCharacterLimit:t}=_["default"].ids,{selectedTextMenuAddToOutline:n}=_["default"].texts,{maximumCharactersForAddToOutline:i}=_["default"].values,o=d["default"].format("SC.Document.SelectedTextMenu.AddToOutlineCharacterLimit",{limit:i},`Text must be ${i} characters or less to add to outline`);this.parentObject.innerHTML=`\n            <a id="${e}" class="co_disabled" href="javascript:void(0);">\n                ${n}\n            </a>\n            <span id="${t}" class="co_hideState">\n                ${o}\n            </span>`}};var Lt=n(7271),Pt=n(3890),Bt=n(7882),Ft=n(1424),Gt=n(8116),Ut=n(5024);const Wt=class{constructor(){this.selectionInfo={selectedText:void 0,data:void 0,metadata:void 0};this.dragOptions=null;this.dragDropGroupId=null;this.formattedCitation=null;this.eventName="Cobalt.Document.Snippets.DraggableUID";this.name="Cobalt.Document.Snippets.DraggableUID";this.currentCitationsLineOption=_["default"].citationLineOptions.seperateLineAfterText;this.citationQuotationsAroundCopiedText=!1}async fetchFormattedCitation(e){const t=(await(0,Ft.getPreferenceFormattedCitation)()).htmlText;if(t&&(0,Bt.areCitationPreferencesEnabled)()&&(0,Bt.isOutlineBuilderEnabled)())this.formattedCitation=t;else{const t=x["default"].userPreferences[_["default"].prefs.caRulesSet],n=x["default"].getFormattedCitationValue(t,e);n&&(this.formattedCitation=n.plainTextCitationValue||n.reference)}}UpdateMenuItemForSelection(e,t,n){this.selectionInfo={selectedText:e,data:t,metadata:n};document.getElementById(_["default"].ids.dragSnippetSelectedTextMenuItem)?.classList.toggle("co_hideState",!0);const i=e.length>_["default"].values.maximumCharactersForAddToOutline;this.isSnippetDragEnabled().then((t=>{t&&this.fetchFormattedCitation(e.length>0);const n=!t||i;document.getElementById(_["default"].ids.dragSnippetSelectedTextMenuItem)?.classList.toggle("co_hideState",n)}))}async isSnippetDragEnabled(){const e=await(0,Gt.isOutlineVisibleInPanel)();return(0,Bt.isOutlineBuilderEnabled)()&&e}SetParentDiv(e){this.parentObject=e}Draw(){const{dragSnippetSelectedTextMenuItem:e}=_["default"].ids,{selectedTextMenuDragToOutline:t}=_["default"].texts;this.parentObject.innerHTML=`\n             <button id="${e}" class="SelectedText-drag co_secondaryBtn">\n                 <span class="icon25 icon_drag-blue"></span>\n                 ${t}\n             </button>`;this.initializeDraggables();null!==this.dragDropGroupId&&this.dragOptions&&(0,Lt.RegisterDraggables)(this.dragDropGroupId,document.getElementById(e),this.dragOptions)}show(){this.parentObject.classList.remove("co_hideState")}hide(){this.parentObject.classList.add("co_hideState")}initializeDraggables(){if(null==this.dragDropGroupId){this.dragDropGroupId=(0,Lt.CreateDragDrop)();this.publishDragGroupId(this.dragDropGroupId);this.dragOptions={DragStart:()=>{p["default"].Publish(_["default"].events.outlineBuilderHideContextMenu)},Cancel:!1,Helper:this.dragOptionsHelperCallback.bind(this)}}}formatShadowBoxContent(e){if((0,Bt.isOutlineBuilderEnabled)()&&(0,Bt.areCitationPreferencesEnabled)()){this.currentCitationsLineOption=e.CitationReferenceLineOptions;this.citationQuotationsAroundCopiedText=e.CitationQuotationsAroundCopiedText;this.citationQuotationsAroundCopiedText&&(this.selectionInfo.selectedText=d["default"].format("SC.Foldering.Indigo.OutlineBuilder.Outline.Node.Common.FormattedWithQuotationsNodeText",{nodeTextToFormat:this.selectionInfo.selectedText},`"${this.selectionInfo.selectedText}"`))}return this.currentCitationsLineOption===_["default"].citationLineOptions.separateLinePrecedingText?`<div class="DragDropContainer-citationTitle">${this.formattedCitation}</div>\n                <div class="DragDropContainer-citationContent">${this.selectionInfo.selectedText}</div>`:`<div class="DragDropContainer-citationContent">${this.selectionInfo.selectedText}</div>\n                <div class="DragDropContainer-citationTitle">${this.formattedCitation}</div>`}formatDragOptionsData(e){const t={Data:this.selectionInfo.data,Metadata:this.selectionInfo.metadata,FormattedCitation:this.formattedCitation,IsSnippetDrag:!0};if((0,Bt.isOutlineBuilderEnabled)()&&(0,Bt.areCitationPreferencesEnabled)()){t.CurrentCitationsLineOption=e.CitationReferenceLineOptions;t.CitationQuotationsAroundCopiedText=e.CitationQuotationsAroundCopiedText}return t}dragOptionsHelperCallback(){const e=x["default"].userPreferences,t=this.formatShadowBoxContent(e),n=this.formatDragOptionsData(e);return Pt["default"].createDraggable(t,1,n)}publishDragGroupId(){const e={UID:this.dragDropGroupId},t=new Ut["default"](e,{},this.name,"1.0");p["default"].Publish(this.eventName,t)}};var $t=n(2217);const zt={html:"text/html",text:"text/plain"};const Vt={adoptElementForDesktop(e){"none"===e.style.textDecorationLine&&(e.style.textDecoration="");if("underline"===e.style.textDecorationLine){e.style.textDecoration="underline";(function(e,t){if(e.tagName===t)return e;const n=document.createElement(t);n.innerHTML=e.innerHTML;for(const t of e.attributes)n.setAttribute(t.name,t.value);e.replaceWith(n)})(e,"U")}}};function qt(e){let t;try{const n=async function(e){const t=N["default"].CreateClipboardDiv();document.body.appendChild(t);try{const n=await e;t.innerHTML=n.htmlText;(function(e){N["default"].removeSearchTermClass(e);const t=e.querySelectorAll("*");t.forEach((e=>{const t=function(e){const t=getComputedStyle(e),n="none"===t.display||"hidden"===t.visibility;n&&e.remove();return n}(e);if(!t){(function(e){const t=getComputedStyle(e),n=function(e){const t=document.createElement("iframe");document.body.appendChild(t);const n=t.contentDocument,i=n.createElement(e.tagName);n.body.appendChild(i);const o=t.contentWindow.getComputedStyle(i),r={};for(const e of o)r[e]=o[e];document.body.removeChild(t);return r}(e);for(const i of t){const o=e.style[i],r=_["default"].clipboard.stylesToExclude.includes(i);if(o||r)continue;const a=n[i],s=t[i]
;s!==a&&e.style.setProperty(i,s)}})(e);Vt.adoptElementForDesktop(e)}}));N["default"].fixClipboardStyles(e)})(t);return new Blob([t.innerHTML],{type:zt.html})}finally{document.body.removeChild(t)}}(e),i=async function(e){const t=document.createElement("div");document.body.appendChild(t);try{const n=await e;t.innerHTML=await n.text();return new Blob([t.innerText],{type:zt.text})}finally{document.body.removeChild(t)}}(n);t=new ClipboardItem({[zt.html]:n,[zt.text]:i})}catch(e){(0,$t["default"])(e)}return t}var jt=n(9914),Kt=n(3312),Yt=n(6183),Jt=n(7099),Xt=!1,Qt=l().extend({domId:null,selectedTextMenu:null,selectedTextMenuVisible:!1,selectedTextWithReferencePopupVisible:!1,selectedTextRange:null,currentActiveFolderName:"",focusElement:null,selectedTextObj:{},selectedTextBeginningElement:null,communitySharingPluginLoaded:!1,addToCompareDropdown:null,supportsTouchEvents:!1,EnableSelectMenu:!0,EnableSaveToFolder:!0,EnableCopyWithReference:!0,EnableHighlight:!0,EnableAddNote:!0,mouseDownCoordinates:{},isCopyWithoutReferenceEnabled:()=>document.body.matches(".th_lightGray"),isA11yAddToCompareDropdown:C["default"].isIacOn("IAC-A11Y-DROPDOWN-REDLINE-COMPARE"),init(){this.selectionObserver=new Mt;this.IsResizeEventEnabled=!1;this.setAdjustedMenuPosition=a()(this.setAdjustedMenuPosition,100).bind(this);this.copyWithReferenceWidget=new Jt.A},Initialize:function(e,t){x["default"].getCitationPreferences();C["default"].IsAnonymousSession&&(this.EnableSelectMenu=!1);this.domId=e;T["default"].guid=t},Draw(){this.checkEnabledSelectedTextMenuOptions();this.verifySelectedTextMenuIsEnabled();if(this.EnableSelectMenu&&T["default"].region){this.selectionObserver.capture$.subscribe((e=>{this.captureHandler(e.target)}));this.selectionObserver.selectionTrail$.subscribe((e=>{const{begin:t,end:n}=e;this.selectedTextBeginningElement=t.target;this.releaseHandler(n.target,n.pointerX,n.pointerY)}));u["default"].AddEventHandler(document,"keyup",(e=>{this.keyUpHandler(e,T["default"].region)}))}},setMenuPosition(e){this.selectedTextMenu.style.left=e.x+"px";this.selectedTextMenu.style.top=e.y+"px"},setAdjustedMenuPosition(){if(!this.mouseX||!this.mouseY)return;const e=this.getMenuPosition(this.mouseX,this.mouseY);this.setMenuPosition(e)},displayMenu:function(e,t){this.selectionObserver.disable();var n=this;this.mouseX=e;this.mouseY=t;document.getSelection()?.rangeCount&&(this.selectedTextRange=document.getSelection()?.getRangeAt(0));n.checkEnabledSelectedTextMenuOptions();n.verifySelectedTextMenuIsEnabled();if(C["default"].EnableIpad||!n.EnableSelectMenu)return;null==n.selectedTextMenu&&n.createSelectedTextMenu(n.domId);n.setAdjustedMenuPosition();if(!this.IsResizeEventEnabled){window.addEventListener("resize",this.setAdjustedMenuPosition);this.IsResizeEventEnabled=!0}setTimeout((()=>{n.selectedTextMenuVisible=!0;n.selectedTextMenu.style.visibility="visible";this.setFocusToFirstElement();this.selectionObserver.enable()}),0);R["default"].removeSelectedTextMenuFeatures();R["default"].removeCopyWithReferenceJurisdiction(n.selectedTextMenu);I["default"].Hide();const i=k["default"].GetCurrentRange(),o=k["default"].GetPlainTextFromRange(i);this.addToOutline&&this.addToOutline.UpdateMenuItemForSelection(o);if(this.dragSnippet){const e=T["default"].getSelectionDataForOutline();this.dragSnippet.UpdateMenuItemForSelection(o,e,T["default"].metaInfo)}},setFocusToFirstElement:function(){const e=(0,jt.getFocusableElements)(this.selectedTextMenu),t=Array.from(e).find(jt.isVisible);t&&t!=document.activeElement&&t.focus()},restoreTextSelection:function(){if(this.selectedTextRange){let e=!0;const t=document.getSelection();if(t){for(let n=0;n<t.rangeCount;n++)t.getRangeAt(n)==this.selectedTextRange&&(e=!1);e&&t.addRange(this.selectedTextRange)}}},getMenuPosition(e,t){const n={x:e,y:t};return S["default"].determineElementPlacement(this.selectedTextMenu,n,10,!0)},hideMenu:function(e=!1){var t=this;this.selectedTextRange=null;if(null!=t.selectedTextMenu){if(!0===t.selectedTextMenuVisible){t.selectedTextMenuVisible=!1;t.selectedTextMenu.style.visibility="hidden";if(t.focusElement&&t.focusElement.focus){u["default"].NormalizeNode(t.focusElement);if(t.focusElement.parentNode?.closest(".co_scrollWrapper")&&!e)try{t.focusLastSelection()}catch(e){(0,$t["default"])(e)}}t.closeCopyWithRefMenu(t.copyWithReferenceWidget);!t.isA11yAddToCompareDropdown&&t.addToCompareDropdown&&t.addToCompareDropdown.Collapse()}!0===t.selectedTextWithReferencePopupVisible&&t.hideSelectedTextWithReference();this.selectionObserver.disable()}},updateAddToDockMenuItem:function(e){var t=_["default"].texts.selectedTextMenuAddToFolder;e&&null!=e&&(t=d["default"].format("SC.Document.SelectedTextMenu.SaveToActiveFolderLinkTitle",{ActiveFolderName:e},"Save to "+e));var n=document.getElementById(_["default"].ids.selectedTextMenuListAddToDockItem);n&&(n.innerHTML='<a href="javascript:void(0);" role="button">'+t+"</a>")},initializeCommunity:function(){y["default"].SocialPlatform&&y["default"].SocialPlatform.enableSharing&&void 0!==Qt.TRCommunityWidgets&&Qt.TRCommunityWidgets.init({tunnelUrl:b["default"].GetUrl(b["default"].Website,"/SocialPlatform/tunnel.html"),instance:b["default"].GetUrl(b["default"].Website,"/SocialPlatform/CommunityInstance"),ssoModuleUrl:b["default"].GetHost(b["default"].SocialPlatform)+"/SSOModule",productId:E["default"].ViewData.SocialPlatformProductId,subjectCredentials:"o="+y["default"].SocialPlatform.IdentityProvider+", uid="+y["default"].SocialPlatform.Indentifier})},enableCommunitySharing:function(){const e=document.getElementById(_["default"].ids.selectedTextMenuListShareWithCommunityItem);if(e){e.classList.remove(_["default"].classes.selectedTextMenuListItemDisabled);e.classList.add(_["default"].classes.selectedTextMenuListItem);e.title="";e.innerHTML=""}},disableCommunitySharing:function(e){const t=document.getElementById(_["default"].ids.selectedTextMenuListShareWithCommunityItem);if(t){t.classList.remove(_["default"].classes.selectedTextMenuListItem);t.classList.add(_["default"].classes.selectedTextMenuListItemDisabled);t.title=e||d["default"].lookup("SC.Document.SocialPlatform.DefaultDisabledMessage","Community is not available.");t.innerHTML=d["default"].lookup("SC.Document.SocialPlatform.ShareLabelName","Share with Community")}},buildSharedText:function(){var e="\n\n",t="",n="",i=x["default"].getSelectedTextObjectWithReference();if(i&&(0,g.IsNotNullOrEmpty)(i.plainText)){var o=(t=i.plainText).split(e);if(o.length>1){n=e+o.pop();t=o.join(e)}t.length>_["default"].values.maximumCharactersToShare&&_["default"].values.maximumCharactersToShare>3&&(t=t.substr(0,_["default"].values.maximumCharactersToShare)+"...");t='"'+t+'"'}return(t+n).replace(/\r\n/g,"<br />").replace(/[\r\n]/g,"<br />")},loadCommunitySharingPlugin:function(){var e=this;if(!e.communitySharingPluginLoaded&&y["default"].SocialPlatform&&y["default"].SocialPlatform.enableSharing&&void 0!==Qt.TRCommunityWidgets){var t=f["default"].Absolute(f["default"].Page.Document({guid:T["default"].guid,viewType:"FullText",originationContext:"Social Platform",transitionType:"Default",contextData:"(sc.Default)"}));Qt.TRCommunityWidgets.loadPlugin({container:_["default"].ids.selectedTextMenuListShareWithCommunityItem,theme:"light",name:"share",content:e.buildSharedText,template:d["default"].lookup("SC.Document.SocialPlatform.ShareLabelName","Share with Community"),autoClose:4e3,resource:{url:t,title:document.title,description:"",type:"og:link"}});Qt.TRCommunityWidgets.events.on("share.message.created",(function(){(0,B.postUXEvent)(_["default"].events.socialCommunitySharedPost,{})}));Qt.TRCommunityWidgets.events.on("share.login.click",(function(){var e=f["default"].Relative(f["default"].Page.SocialPlatformCommunity({transitionType:"Default",contextData:f["default"].PageContextData}));(0,m["default"])(b["default"].GetUrl(b["default"].WebsiteDefault,e))}));e.communitySharingPluginLoaded=!0}},addToDockClicked:function(e){var t=e.target||e.srcElement||null,n=Qt.DisableHighlightFeature(this.selectedTextBeginningElement,k["default"].GetSelectedHtmlText());if(null==e)throw new Error("ArgumentNullException: oEvent")
;if(null==e.button)throw new Error("ArgumentNullException: oEvent.button");if(null!=t){if(t.disabled||n)return;T["default"].addSelectedTextToDock()}this.hideMenu()},captureHandler(e){if(null==e)throw new Error("ArgumentNullException: oSourceElement");this.hasElement(e)||this.hideMenu()},releaseHandler(e,t,n){if(null==e)throw new Error("ArgumentNullException: oSourceElement");if(null==t)throw new Error("ArgumentNullException: mouseX");if(null==n)throw new Error("ArgumentNullException: mouseY");if(this.hasElement(e))return;if(!e.parentNode){this.hideMenu();return}if(this._isClickedElementInsideSelectionRegion(e)&&this.captureSelection()){this.setFocusElementFromSelection();null==this.selectedTextMenu&&this.createSelectedTextMenu(this.domId);this.HandleHighlightFeature();this.displayMenu(t,n);this.dragSnippet?.show()}else this.hideMenu()},_isClickedElementInsideSelectionRegion(e){if(null==T["default"]?.region||null==e)return!1;return T["default"].region.contains(e)},captureSelection(){const e=k["default"].GetCurrentRange();if(!T["default"].canAnnotateSelection(e))return!1;k["default"].StoreCurrentSelection();return!0},HandleHighlightFeature:function(){for(var e=Qt.DisableHighlightFeature(this.selectedTextBeginningElement,k["default"].GetSelectedHtmlText()),t=[document.getElementById(_["default"].ids.selectedTextMenuListAddToDockItem),document.getElementById(_["default"].ids.selectedTextMenuListAddNoteItem),document.getElementById(_["default"].ids.selectedTextMenuListHighlightItem)],n=0;n<t.length;n++){var i=t[n];if(!i)continue;var o=i.disabled||!1;e?o||S["default"].disable(i):S["default"].enable(i);i.disabled=e}},setFocusElementFromSelection:function(){let e=(C["default"].isIacOn("IAC-SAFARI-17-RANGE-CLONE")?window.getSelection().getRangeAt(0).cloneRange():window.getSelection().getRangeAt(0)).startContainer;e.nodeType===Node.TEXT_NODE&&(e=e.parentNode);this.selectedTextBeginningElement=e;this.focusElement=e},keyUpHandler:function(e,t){if(null==e)throw new Error("ArgumentNullException: oEvent");if(null==e.which&&null==window.event.keyCode)throw new Error("ArgumentNullException: oEvent.which/window.event.keyCode");if((null==e.target||e.target===document)&&null==e.srcElement)throw new Error("ArgumentNullException: oEvent.target/oEvent.srcElement");if(null==t)throw new Error("ArgumentNullException: boundaryElement");var n,i,o=this,r=e.which?e.which:window.event.keyCode;if(16===r&&this.captureSelection()){this.setFocusElementFromSelection();null==o.selectedTextMenu&&o.createSelectedTextMenu(o.domId);n=parseInt(window.innerHeight/2-o.selectedTextMenu.clientHeight/2+(document.documentElement.scrollTop||document.body.scrollTop));i=parseInt(window.innerWidth/2-o.selectedTextMenu.clientWidth/2);o.displayMenu(i,n);o.dragSnippet?.hide()}88===r&&e.altKey&&this.captureSelection()&&o.displaySelectedTextWithReference()},addAnnotationMenuItems:function(e){var t=this;if(C["default"].isFeatureEnabled("ANNOTATIONS")){e.appendChild(t.createMenuItem(_["default"].ids.selectedTextMenuListAddNoteItem,_["default"].classes.selectedTextMenuListItem,_["default"].texts.selectedTextMenuAddNote,(function(e){t.addNoteClicked(e)}),!0));e.appendChild(t.createMenuItem(_["default"].ids.selectedTextMenuListHighlightItem,_["default"].classes.selectedTextMenuListItem,t.getHighlightHeadingText(),(function(e){t.highlightClicked(e)}),!0))}},getHighlightHeadingText:()=>_["default"].texts.selectedTextMenuHighlight,getCopyWithoutRefMenuItemText:function(){return _["default"].texts[this.supportsTouchEvents?"selectedTextMenuEmailWithoutReference":"selectedTextMenuCopyWithoutReference"]},_assertBrowserIsFirefox:function(){return navigator.userAgent.toLowerCase().includes("firefox")},_stopPropagationNeeded:function(){return this._assertBrowserIsFirefox()},hasElement:e=>S["default"].selfOrAncestorHasId(e,_["default"].ids.selectedTextMenu),addCopyWithoutReferenceMenuItem:function(e){e.appendChild(this.createMenuItem(_["default"].ids.selectedTextMenuListCopyWithoutRefItem,_["default"].classes.selectedTextMenuListItem,this.getCopyWithoutRefMenuItemText(),null,this._stopPropagationNeeded()))},getCopyWithRefMenuItemText:function(){if(this.supportsTouchEvents)return _["default"].texts.selectedTextMenuEmailWithReference;return _["default"].texts.selectedTextMenuCopyWithReference},addCopyWithReferenceMenuItem:function(e){var t,n=this._stopPropagationNeeded();t=this.getCopyWithRefMenuItemText();e.appendChild(this.createMenuItem(_["default"].ids.selectedTextMenuListCopyWithRefItem,_["default"].classes.selectedTextMenuListItem,t,null,n))},isCopyWithoutReferenceMenuItem:function(e){return[_["default"].ids.selectedTextMenuListCopyWithoutRefItem,_["default"].ids.highlightedTextMenuListCopyWithoutRefItem].indexOf(e.id)>=0},updateCopyWithReferenceMenuItem(e,t){if(!e)return;let n,i;if(this.isCopyWithoutReferenceMenuItem(e)){n=this.copyWithoutReferenceMenuItemHtml();i="None"}else n=this.copyWithReferenceMenuItemHtml();e.innerHTML=n;if(!this.isCopyWithoutReferenceMenuItem(e))if(C["default"].isIacOn("IAC-A11Y-COPY-WITH-REFERENCE"))t?.render(e);else{e.querySelector("#"+_["default"].ids.copyWithReferenceMenu)?.addEventListener("click",(e=>this.copyWithRefMenuClick(e)));const t=e?.querySelector("#"+_["default"].ids.copyWithReferenceMenuContainer);t?.addEventListener("focusout",(e=>{e.relatedTarget&&!e.currentTarget.contains(e.relatedTarget)&&this.closeCopyWithRefMenu(this.copyWithReferenceWidget)}));t?.addEventListener("keydown",(t=>{if("Escape"===t.key){this.closeCopyWithRefMenu(this.copyWithReferenceWidget);e?.querySelector("#"+_["default"].ids.copyWithReferenceMenuAnchor)?.focus()}}))}e?.addEventListener("click",(async e=>{const t=e.currentTarget;this.toggleDisabled(t,!0);await this.writeSelectionToClipboard(i);this.toggleDisabled(t,!1)}));this.subscribeToCopyWithReferenceMenuItemEvents()},copyWithReferenceMenuItemHtml:function(){var e,t=this.getCopyWithRefMenuItemText(),n=x["default"].userPreferences&&x["default"].userPreferences[_["default"].prefs.caRulesSet],i=n&&x["default"].convertRulesSetValueToName(n);i||(i=x["default"].convertRulesSetValueToName(_["default"].prefs.caDefaultRuleSet));var r=x["default"].RulesSetNameToValueMappings.ByName,a="",s="";for(var l in r){var d='<li id="'+r[l]+'"><a class="'+_["default"].classes.copyWithReferenceMenuListItem+'" href="javascript:void(0);" role="button" aria-pressed="false">'+l+"</a></li>";this.isStandardItem(l)?a+=d:s+=d}var c=this.buildHtmlBufferForCiteStylesIAC(t,i,s,a);e=o()(c);C["default"].isIacOn("IAC-A11Y-COPY-WITH-REFERENCE")||e.find("a."+_["default"].classes.copyWithReferenceMenuListItem).filter((function(){return this.text===i})).attr("aria-pressed","true").parent().addClass(_["default"].classes.copyWithReferenceMenuListItemSelected);return e.get(0).outerHTML},buildHtmlBufferForCiteStylesIAC:function(e,t,n,i){
return`<div class="${_["default"].classes.copyWithReferenceContainer}">\n            <button type="button" class="${_["default"].classes.copyWithReferenceLabel}">${e}\n                <span id="${_["default"].ids.copyWithReferencePref}">(${t})</span>\n            </button>\n            <div id="${_["default"].ids.copyWithReferenceFlash}">\n                <div id="${_["default"].ids.copyWithReferenceContent}"></div>\n            </div>\n            <div id="${_["default"].ids.copyWithReferenceMenu}">\n                <button type="button" id="${_["default"].ids.copyWithReferenceMenuAnchor}" class="${_["default"].classes.copyWithReferenceMenuAnchor}">\n                    ${_["default"].texts.selectedTextMenuCopyWithReferenceToggleOptions}\n                </button>\n                <div id="${_["default"].ids.copyWithReferenceMenuContainer}" class="${_["default"].classes.copyWithReferenceMenuContainer}">\n                    <ul class="${_["default"].classes.copyWithReferenceMenuColumnList}">\n                        <li class="${_["default"].classes.copyWithReferenceMenuColumnListItem}">\n                            <ul class="${_["default"].classes.copyWithReferenceMenuList}">\n                                ${i}\n                            </ul>\n                        </li>\n                        <li class="${_["default"].classes.copyWithReferenceMenuColumnListItem}">\n                            <ul class="${_["default"].classes.copyWithReferenceMenuList}">\n                                ${n}\n                            </ul>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n        </div>`},copyWithoutReferenceMenuItemHtml:function(){return'<div class="'+_["default"].classes.copyWithReferenceContainer+'"><button type="button" class="'+_["default"].classes.copyWithReferenceLabel+'">'+this.getCopyWithoutRefMenuItemText()+'</button><div id="'+_["default"].ids.copyWithReferenceFlash+'"><div id="'+_["default"].ids.copyWithReferenceContent+'"></div></div></div>'},createSelectedTextMenu:function(e){const t=document.getElementById(e);if(null==t)return;const n=this;if(null!=n.selectedTextMenu)return;x["default"].getCitationPreferences();const i=document.createElement("div");i.id=_["default"].ids.selectedTextMenu;i.className=`${_["default"].classes.dropdownBoxExpanded} ${_["default"].classes.highlightingExcludeAnnotations}`;const o=`\n            <div class="${_["default"].classes.dropdownBoxHeader}"><span></span></div>\n            <div class="${_["default"].classes.dropdownBoxContent}">\n                <div id="${_["default"].ids.selectedTextMenuHolder}" class="${_["default"].classes.dropdownBoxContentRight}"></div>\n            </div>\n            <div class="${_["default"].classes.dropdownBoxFooter}"><span></span></div>\n        `;i.innerHTML=o;(0,Kt.u)({element:i,closeCallback:()=>{n.hideMenu()}});const r=`<div id="${_["default"].ids.dragSnippetContainer}"></div>`;i.insertAdjacentHTML("afterbegin",r);const a=document.createElement("ul");a.className=_["default"].classes.selectedTextMenuList;n.addMenuItems(a,i,t);n.addDragSnippetToMenu();n.hideMenu();p["default"].Subscribe(_["default"].events.outlineBuilderHideContextMenu,(()=>{n.hideMenu()}));this.selectedTextMenu.addEventListener("focusin",(()=>setTimeout((()=>{this.restoreTextSelection()}),0)));this.selectedTextMenu.addEventListener("keyup",(e=>{e.code!==Yt["default"].ShiftLeft&&e.code!==Yt["default"].ShiftRight||e.stopPropagation()}))},addDragSnippetToMenu:function(){var e=document.getElementById(_["default"].ids.dragSnippetContainer);if(this.isAddToOutlineEnabled()&&!w["default"].Instance?.IsPersistedView){this.dragSnippet=new Wt;this.dragSnippet.SetParentDiv(e);this.dragSnippet.Draw()}},addMenuItems:function(e,t,n){if(w["default"].Instance&&!w["default"].Instance.IsPersistedView&&!w["default"].Instance.IsDocketsUpdate){if(C["default"].isFeatureEnabled("FOLDERS")&&this.EnableSaveToFolder){let t;if(C["default"].UsePageHeaderV2&&void 0!==this.createSaveToRecentFolderMenuItem)e.appendChild(this.createSaveToRecentFolderMenuItem());else{t=_["default"].texts.selectedTextMenuAddToFolder;(0,g.IsNotNullOrEmpty)(this.currentActiveFolderName)&&(t=d["default"].format("SC.Document.SelectedTextMenu.SaveToActiveFolderLinkTitle",{ActiveFolderName:this.currentActiveFolderName},"Save to "+this.currentActiveFolderName));e.appendChild(this.createMenuItem(_["default"].ids.selectedTextMenuListAddToDockItem,_["default"].classes.selectedTextMenuListItem,t,(e=>{this.addToDockClicked(e)}),!0))}}this.EnableAddNote&&this.EnableHighlight&&this.addAnnotationMenuItems(e)}this.addCopyReference(this,e);this.selectedTextMenu=t;this.selectedTextMenuVisible=!0;n.appendChild(this.selectedTextMenu);var i=document.getElementById(_["default"].ids.selectedTextMenuHolder);i&&i.appendChild(e);if(this.isCopyWithoutReferenceEnabled()){var r=o()(e).find("#"+_["default"].ids.selectedTextMenuListCopyWithoutRefItem).get(0);this.updateCopyWithReferenceMenuItem(r,this.copyWithReferenceWidget)}if(this.EnableCopyWithReference){var a=o()(e).find("#"+_["default"].ids.selectedTextMenuListCopyWithRefItem).get(0);this.updateCopyWithReferenceMenuItem(a,this.copyWithReferenceWidget);this.setupSocialPlatform(e)}this.buildDocumentCompareMenuItem(this,e);this.buildAddToOutlineMenuItem(e)},setupSocialPlatform:function(e){if(C["default"].isIacOn("IAC-ENABLE-LEGACY-COMMUNITY")&&y["default"].SocialPlatform){e.appendChild(this.createMenuItem(_["default"].ids.selectedTextMenuListShareWithCommunityItem,_["default"].classes.selectedTextMenuListItemDisabled,d["default"].lookup("SC.Document.SocialPlatform.ShareLabelName","Share with Community"),null,!0));y["default"].SocialPlatform.enableSharing&&y["default"].SocialPlatform.TRCommunityWidgets?o().getScript(y["default"].SocialPlatform.TRCommunityWidgets).done((()=>{Qt.TRCommunityWidgets=window.TRCommunityWidgets;this.initializeCommunity();this.enableCommunitySharing();this.loadCommunitySharingPlugin()})):this.disableCommunitySharing(y["default"].SocialPlatform.sharingDisabledReason)}},addCopyReference:function(e,t){e.isCopyWithoutReferenceEnabled()&&e.addCopyWithoutReferenceMenuItem(t);e.EnableCopyWithReference&&e.addCopyWithReferenceMenuItem(t)},buildDocumentCompareMenuItem:function(e,t){return H["default"].getSettings().then((function(n){O["default"].DocumentAllowsRedline(n.contentTypes,T["default"].metaInfo.SubContentType)&&e.addDocumentCompareMenuItem(e,t)}))},addDocumentCompareMenuItem:function(e,t,n){var i=document.createElement("li");i.id=_["default"].ids.selectedTextMenuListAddToCompareItem;i.className=_["default"].classes.selectedTextMenuListItem+" co-RedlineDropdown-wrapper";e.isA11yAddToCompareDropdown||S["default"].AttachClickHandler(i,(function(t){e.addToCompareClicked(t)}));t.appendChild(i);if(e.isA11yAddToCompareDropdown){const t={removeTabularOption:n,onButtonClicked:t=>e.addToCompareClicked(t),parentDiv:i},o=new L["default"](t);o.draw();o.enable();e.addToCompareDropdown=o}else{e.addToCompareDropdown=new P["default"](n);e.addToCompareDropdown.SetParentDiv(i);e.addToCompareDropdown.Draw()}},addToCompareClicked:function(e){var t=this,n=e.target||e.srcElement||null,i=Qt.DisableHighlightFeature(t.selectedTextBeginningElement,k["default"].GetSelectedHtmlText());if(null==e)throw new Error("ArgumentNullException: oEvent");if(null==e.button)throw new Error("ArgumentNullException: oEvent.button");if(null!=n){if(o()(n).children().andSelf().is("."+n.disabled)||i)return;if(!t.isA11yAddToCompareDropdown){if(t.addToCompareDropdown.GetDropdownDiv().contains(n))return}t.addSelectedTextToCompareBucket(t)}else t.hideMenu()},addSelectedTextToCompareBucket:function(e){const t=e.isA11yAddToCompareDropdown?this.addToCompareDropdown.getSelectedValue():this.addToCompareDropdown.GetSelectedValue();T["default"].addSelectedTextToCompare(t,(function(){e.hideMenu(!0);k["default"].Unselect()}))},isAddToOutlineEnabled:function(){return!1},buildAddToOutlineMenuItem:function(e){if(this.isAddToOutlineEnabled()&&!w["default"].Instance?.IsPersistedView){this.addToOutline=new Ot;var t=document.createElement("li")
;t.id=_["default"].ids.selectedTextMenuListAddToOutlineItem;t.className=_["default"].classes.selectedTextMenuListItem;S["default"].AttachClickHandler(t,(e=>{this.addToOutlineClicked(e)}));e.appendChild(t);this.addToOutline.SetParentDiv(t);this.addToOutline.Draw()}},addToOutlineClicked:function(){const e=document.getElementById(_["default"].ids.outlineBuilderSelectedTextMenuItem);if(e?.classList.contains("co_disabled"))return;T["default"].addSelectedTextToOutline();this.hideMenu()},closeCopyWithRefMenu:function(e){if(C["default"].isIacOn("IAC-A11Y-COPY-WITH-REFERENCE")){e?.toggle(!1);return}document.querySelectorAll(`.${_["default"].classes.copyWithReferenceMenuAnchor}`).forEach((e=>e.classList.remove(_["default"].classes.copyWithReferenceContentOpen)));document.querySelectorAll(`.${_["default"].classes.copyWithReferenceMenuContainer}`).forEach((e=>e.classList.remove(_["default"].classes.copyWithReferenceContentOpen)))},toggleCopyWithReferenceSubMenu:function(e){var t=o()(e);t.find("#"+_["default"].ids.copyWithReferenceMenuAnchor).toggleClass(_["default"].classes.copyWithReferenceContentOpen);t.find("#"+_["default"].ids.copyWithReferenceMenuContainer).toggleClass(_["default"].classes.copyWithReferenceContentOpen);this.adjustCopyWithReferenceSubMenu()},adjustCopyWithReferenceSubMenu:function(){},copyWithRefMenuClick:function(e){if(C["default"].isIacOn("IAC-A11Y-COPY-WITH-REFERENCE"))return;var t=e.srcElement||e.target,n=t?.parentNode.closest("li#"+_["default"].ids.selectedTextMenuListCopyWithRefItem);n||(n=t?.parentNode.closest("li#"+_["default"].ids.highlightedTextMenuListCopyWithRefItem));this.toggleCopyWithReferenceSubMenu(n);if(t.className===_["default"].classes.copyWithReferenceMenuListItem){this.updateUserPreferenceForCopyWithRef(n,t);n.querySelector("#"+_["default"].ids.copyWithReferenceMenuAnchor)?.focus()}S["default"].stopEventPropagationAndDefaultBehavior(e)},updateUserPreferenceForCopyWithRef:function(e,t){const n=this,i=t.innerHTML,o=x["default"].convertRulesSetNameToValue(i);n.toggleDisabled(e,!0);v["default"].Set(_["default"].prefs.documentPreferenceSpace,_["default"].prefs.caRulesSet,o,(function(){x["default"].userPreferences[_["default"].prefs.caRulesSet]=o;n.toggleDisabled(e,!1)}));p["default"].Publish(_["default"].events.ruleSetChanged,{RuleSetId:o,RuleSetName:i})},dockReadyEventCallback:function(e,t){var n=this;t&&t.Data&&(n.currentActiveFolderName=t.Data.categoryName);n.updateAddToDockMenuItem(n.currentActiveFolderName)},createMenuItem:function(e,t,n,i,o,r){if(null==e||"string"!=typeof e||e.length<=0)throw new Error("ArgumentException: domId");if(null==t||"string"!=typeof t||t.length<=0)throw new Error("ArgumentException: className");if(null==n||"string"!=typeof n||n.length<=0)throw new Error("ArgumentException: itemText");if(null!=i&&"function"!=typeof i)throw new Error("ArgumentException: onClickHandler");o=null==o||o;var a=document.createElement("li");a.id=e;a.className=t;const s=()=>(this.getHighlightHeadingText()===n||_["default"].texts.selectedTextMenuAddNote===n)&&!e.includes("AddToDock"),l=`${e}_list_heading_aria_label`;s()?a.innerHTML=`<span id="${l}">`+n+"</span>":r&&r.isShared?a.innerHTML=`<button class="co_shared">${n}</button>`:a.innerHTML=`<button>${n}</button>`;if(null!=i&&s())this.createHighlightColorOptions(a,i,l);else if(null!=i){const e=a.querySelector("button")??a;S["default"].AttachClickHandler(e,i)}if(!0===o){u["default"].AddEventHandler(a,"mousedown",S["default"].stopEventPropagationAndDefaultBehavior);u["default"].AddEventHandler(a,"mouseup",S["default"].stopEventPropagationAndDefaultBehavior)}return a},addNoteClicked:function(e){var t=this;if(G["default"].isAnnotationsLimitExceeded()){G["default"].drawAnnotationsLimitLightBox();t.hideMenu()}else{var n=0,i=e.target||e.srcElement||null,o=Qt.DisableHighlightFeature(t.selectedTextBeginningElement,k["default"].GetSelectedHtmlText());if(i.disabled||o)return;null!=M["default"].Instance&&(n=M["default"].Instance.GetCurrentChunk());p["default"].Publish(_["default"].events.annotationAdded,{Data:{AnnotationType:"Note"}});k["default"].DetermineSelectionEndPoints();t.hideMenu();A["default"].AddNoteToCurrentSelection(T["default"].region,D["default"].HighlightColor);A["default"].RecalculateNoteDisplayPositionsForChunk(n)}},highlightClicked(e){if(S["default"].getEventSourceElement(e).disabled)return;if(Qt.DisableHighlightFeature(this.selectedTextBeginningElement,k["default"].GetSelectedHtmlText()))return;p["default"].Publish(_["default"].events.annotationAdded,{Data:{AnnotationType:"Highlight"}});k["default"].DetermineSelectionEndPoints();A["default"].HighlightCurrentSelection(T["default"].region,D["default"].HighlightColor);this.hideMenu()},createHighlightColorOptions:function(e,t,n){var i=e.querySelector("span");i?.classList.add(_["default"].classes.highlightMenuLineItemText);const o=(0,U.A)(t,n);e.append(o)},displayCopyWithRefSuccess(e){const t=x["default"].userPreferences.CiteAdvisorRulesSet,n=x["default"].getSelectedTextObjectWithReference(t),i=x["default"].metaInfo&&"Analytical Treatise - other Commentary"===x["default"].metaInfo.SubContentType||"Analytical Treatise - other"===x["default"].metaInfo.SubContentType||"Analytical - Treatise - Practice Guides Commentary"===x["default"].metaInfo.SubContentType,o=d["default"].lookup("SC.Website.MessagePlaceHolder.DefaultConfirmationText","Text is copied."),r=e?n.confirmationText:void 0,a=e&&!i?o:r;if(!e&&(0,g.IsNullOrEmpty)(a))this.displayCopyWithRefError();else{this.sendEventAddedToClipboard(this.selectedTextObj);this.displayCopyWithRefStatusMessage(a,e)}},async displayCopyWithRefSuccessAsync(e){const t=x["default"].userPreferences.CiteAdvisorRulesSet,n=await x["default"].getFormattedSelection(t),i=x["default"].metaInfo&&"Analytical Treatise - other Commentary"===x["default"].metaInfo.SubContentType||"Analytical Treatise - other"===x["default"].metaInfo.SubContentType||"Analytical - Treatise - Practice Guides Commentary"===x["default"].metaInfo.SubContentType,o=d["default"].lookup("SC.Website.MessagePlaceHolder.DefaultConfirmationText","Text is copied."),r=e?n.confirmationText:void 0,a=e&&!i?o:r;if(e||a){this.sendEventAddedToClipboard(this.selectedTextObj);this.displayCopyWithRefStatusMessage(a,e)}else this.displayCopyWithReferenceErrorAllowRetry()},sendEventAddedToClipboard(e){const t=T["default"].guid,n=e.plainText.length,i=e.reference,o=e.ruleSet;S["default"].publishHubEvent(_["default"].events.copyWithReference,null,{},{},_["default"].events.addedToClipboard,{docGuid:t,copiedCharCount:n,reference:i,ruleSet:o})},displayCopyWithRefError(){const e=d["default"].lookup("SC.Document.CopyWithReference.AddToClipboardFailed","Failed to add the selected text to the clipboard.");this.displayCopyWithRefStatusMessage(e,!1)},displayCopyWithReferenceErrorAllowRetry(){!this.selectedTextObj.errorText&&this.selectedTextObj.htmlText?this.displayCopyWithRefErrorAndAllowRetryCopy():this.displayCopyWithRefError()},displayCopyWithRefErrorAndAllowRetryCopy(){const e=d["default"].lookup("SC.Document.CopyWithReference.AddToClipboardFailed.AllowRetry",'Copy with Reference has encountered an error. Please click "Retry" to complete the process.'),t=[{Label:d["default"].lookup("SC.Document.CopyWithReference.Close","Close"),Function:()=>this.focusLastSelection()},{Label:d["default"].lookup("SC.Document.CopyWithReference.Retry","Retry"),Function:()=>this.retryCopyToClipboard()}],n=_["default"].events.displayMessagePlaceholder,i=_["default"].events.displayCopyWithReferenceConfirmation,o={Message:e,Buttons:t,ShowInfoBox:!1};S["default"].publishHubEvent(n,null,o,{},i)},displayCopyWithRefStatusMessage(e,t){const n=[{Label:d["default"].lookup("SC.Document.CopyWithReference.Close","Close"),Function:()=>this.focusLastSelection()}],i=_["default"].events.displayMessagePlaceholder,o=_["default"].events.displayCopyWithReferenceConfirmation,r={Message:e,Buttons:n,ShowInfoBox:t};S["default"].publishHubEvent(i,null,r,{},o)},focusLastSelection(){try{if(this.focusElement){if(!(0,jt.isFocusable)(this.focusElement)){this.focusElement.tabIndex=-1;this.focusElement.addEventListener("blur",(()=>{this.focusElement.removeAttribute("tabindex")}),{once:!0})}
this.focusElement.focus()}}catch(e){(0,$t["default"])(e)}},async retryCopyToClipboard(){const e=this.copyToClipboard(this.selectedTextObj.htmlText);e&&this.sendEventCopyWithReference(this.selectedTextObj);await this.displayCopyWithRefSuccessAsync(e);this.cleanUpAfterCopyWithRef()},cleanUpAfterCopyWithRef:function(){k["default"].Unselect();this.hideMenu();I["default"].Hide()},subscribeToCopyWithReferenceMenuItemEvents(){if(Xt)return;p["default"].Subscribe(_["default"].events.ruleSetChanged,(function(e,t){var n=o()("#"+_["default"].ids.selectedTextMenuListCopyWithRefItem+", #"+_["default"].ids.highlightedTextMenuListCopyWithRefItem);n.find(`#${_["default"].ids.copyWithReferencePref}`).html(`(${t.RuleSetName})`);n.find("li."+_["default"].classes.copyWithReferenceMenuListItemSelected).removeClass(_["default"].classes.copyWithReferenceMenuListItemSelected).find("a").attr("aria-pressed","false");n.find(`#${t.RuleSetId}`).addClass(_["default"].classes.copyWithReferenceMenuListItemSelected).find("a").attr("aria-pressed","true")}));Xt=!0},async writeSelectionToClipboard(e){const t=x["default"].getFormattedSelection(),n=e?x["default"].getFormattedSelection(e):t;let i=await this.writeToClipboard(n);this.selectedTextObj=await n;i||(i=this.copyToClipboard(this.selectedTextObj.htmlText));if(i){const e=await t;this.sendEventCopyWithReference(e)}await this.displayCopyWithRefSuccessAsync(i);this.cleanUpAfterCopyWithRef()},copyToClipboard(e){if("string"!=typeof e||!e.length)return!1;return N["default"].copyTextToClipboard(e)},async writeToClipboard(e){if("undefined"==typeof ClipboardItem)return!1;const t=qt(e);if(!t?.types?.length)return!1;return await N["default"].write(t)},sendEventCopyWithReference(e){const t={contentType:e.contentType,selectedText:e.plainText,docGuid:e.docGuid,clientId:y["default"].GetClientId()},n=f["default"].Relative(f["default"].Rest.DocumentCopyWithReference({eventName:_["default"].events.copyWithReference}));F["default"].Post({vertical:b["default"].Website,relativeUrl:n,contentType:"application/json",jsonObject:t,timeoutMillisecs:6e4})},displaySelectedTextWithReference:function(){var e=this,t=document.createElement("div"),n=document.createElement("div"),i=x["default"].getSelectedTextObjectWithReference().htmlText;n.id=_["default"].ids.selectedTextWithReference;n.innerHTML=i;t.appendChild(n);t.id=_["default"].ids.selectedTextDisplay;var o=document.getElementById(_["default"].ids.selectedTextMenu),r=o.parentNode.removeChild(o);t.appendChild(r);T["default"].region.appendChild(t);e.selectedTextMenu.style.visibility="visible";e.selectedTextMenu.style.position="relative";e.selectedTextMenu.style.top="0em";e.selectedTextMenu.style.left="2em";e.selectedTextWithReferencePopupVisible=!0},hideSelectedTextWithReference:function(){var e,t=document.getElementById(_["default"].ids.selectedTextMenu),n=t.parentNode.removeChild(t);T["default"].region.appendChild(n);this.selectedTextMenu.style.position="absolute";(e=document.getElementById(_["default"].ids.selectedTextDisplay)).parentNode.removeChild(e);this.selectedTextWithReferencePopupVisible=!1},displayCopyWithRefPopUp:function(e){var t,n,i,o,r=new h["default"],a=(t=x["default"].getSelectedTextObjectWithReference(e)).ruleSet;n="<p>"+_["default"].texts.copyWithReferenceInstructions+'</p><div class="'+_["default"].classes.copyWithRefTextAreaContainer+'"><div id="'+_["default"].ids.copyWithRefText+'" class="'+_["default"].classes.copyWithRefTextArea+'">'+t.htmlText+"</div></div>";i='<ul><li><input id="'+_["default"].ids.selectText+'" class="'+_["default"].classes.submitButton+'" type="button" value="'+_["default"].texts.selectAllText+'"/></li></ul>';r.SetId(_["default"].ids.copyWithRefLightbox);r.SetTitle(d["default"].format("SC.Document.SelectedTextMenu.CopyWithReferencePopUpTitle",{RulesetName:a},"Copy with Reference "+a));r.SetCloseLinkObject({id:_["default"].ids.copyWithRefClose,alt:_["default"].texts.closeThisWindow,onclick:function(){r.Remove();k["default"].Select(k["default"].SelectedRange)}});r.GetContentDomElement().innerHTML=n;r.GetFooterDomElement().innerHTML=i;r.Draw();o=document.getElementById(_["default"].ids.selectText);u["default"].AddEventHandler(o,"click",(function(){var e=k["default"].CreateRange();k["default"].MoveToElement(e,document.getElementById(_["default"].ids.copyWithRefText));k["default"].Select(e)}));u["default"].AddEventHandler(document.getElementById(_["default"].ids.copyWithRefLightbox),"mouseup",S["default"].stopEventPropagation);u["default"].AddEventHandler(document.getElementById(_["default"].ids.copyWithRefLightbox),"mousedown",S["default"].stopEventPropagation)},publishEmailWithRefEvent:function(e){try{if(!T["default"].metaInfo)throw new Error("Selected Text Menu is missing document metainfo for Email with Reference");var t=x["default"].getSelectedTextObjectWithReference(e),n={};n.subject=T["default"].metaInfo.TitleText;n.ruleset=t.ruleSet;n.snippet=t;S["default"].publishHubEvent(_["default"].events.emailWithReference,null,n)}finally{this.hideMenu()}},checkEnabledSelectedTextMenuOptions:function(){w["default"].Instance&&w["default"].Instance.IsUserDocument&&(this.EnableSaveToFolder=!1);if(T["default"].metaInfo){var e=T["default"].metaInfo;(e.isPublicRecordsDocument||e.ContentType&&e.ContentType.indexOf("PublicRecords")>=0||e.SubContentType&&e.SubContentType.indexOf("PublicRecords")>=0)&&(this.EnableSaveToFolder=!1)}},verifySelectedTextMenuIsEnabled:function(){var e=this;e.EnableSaveToFolder||e.EnableCopyWithReference||e.EnableHighlight||e.EnableAddNote||(e.EnableSelectMenu=!1)},toggleDisabled:function(e,t){if(e){e.classList.toggle("co_disabled",t);e.style.pointerEvents=t?"none":"auto"}},isStandardItem:function(e){return e===_["default"].texts.copyWithReferenceStandard||e===_["default"].texts.copyWithReferenceALWD||e===_["default"].texts.copyWithReferenceWestlaw}});Qt.BlackList=[_["default"].classes.disableHighlightFeatures];for(var Zt=["displayCopyWithRefSuccess","displayCopyWithRefError","cleanUpAfterCopyWithRef"],en=0,tn=Zt.length;en<tn;en++)(function(e){Qt[e]=function(){var t=_["default"].objectIds.widget$SelectedTextMenu;if(!c["default"].IsRegistered(t))throw new Error(t+" is not registered with Cobalt.Factory");var n=c["default"].GetObject(t);n[e].apply(n,arguments)}})(Zt[en]);Qt.TRCommunityWidgets=void 0;Qt.DisableHighlightFeature=function(e,t){if(null==e)throw new Error("ArgumentNullException: oStartingElement");if(!Qt.BlackList)return!1;var n,i,o=[],r=!1,a=Qt.BlackList;for(i=0;i<a.length;i++){var s=a[i],l=u["default"].GetElementsByClassName(s);if(Array.isArray(l)&&l.length>0){if(r=(n=new RegExp('[\\s]class=["]?'+s+'["\\s>/]',"i")).test(t))return r;o.push(s)}}return S["default"].selfOrAncestorHasClassFromList(e,o)};const nn=Qt},2570:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(7617),o=n(9417),r=n(7596);function a(){}a.prototype.UpdateNote=function(e,t,n,a,s){var l="/Foldering/v4/"+i["default"].GetUserNameEncoded()+"/notes/"+e;l=(0,o.AddSectionFilterToUrl)(l);(0,r.PutRequest)({url:l,data:t,success:a,error:s})};a.prototype.DeleteNote=function(e,t,n,i,o){(0,r.DeleteRequest)({url:"/Foldering/v4/"+n+"/notes/"+e+"/"+encodeURIComponent(t.id),success:i,error:o})};a.prototype.CreateNote=function(e,t,n,a,s){var l="/Foldering/v4/"+i["default"].GetUserNameEncoded()+"/notes/"+e;l=(0,o.AddSectionFilterToUrl)(l);(0,r.PostRequest)({url:l,data:t,success:a,error:s})};const s=a},2595:(e,t,n)=>{e.exports=n(4507)(54637)},2656:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>D});var i=n(8286),o=n(9191),r=n.n(o),a=n(7861),s=n(3839),l=n(6494),d=n(519),c=n(4579),u=n(2065),f=n(2595),h=n(8230),p=n(4159),m=n(999),g=n(3673),y=n(5359),v=n(6908),C=n(9912);const b={[i["default"].classes.highlightYellow]:e=>C["default"].format("SC.Document.Highlighting.YellowNote",{id:e},`Yellow note ${e}`),[i["default"].classes.highlightGreen]:e=>C["default"].format("SC.Document.Highlighting.GreenNote",{id:e},`Green note ${e}`),[i["default"].classes.highlightBlue]:e=>C["default"].format("SC.Document.Highlighting.BlueNote",{id:e},`Blue note ${e}`),[i["default"].classes.highlightPink]:e=>C["default"].format("SC.Document.Highlighting.PinkNote",{id:e},`Pink note ${e}`),
[i["default"].classes.highlightOrange]:e=>C["default"].format("SC.Document.Highlighting.OrangeNote",{id:e},`Orange note ${e}`),[i["default"].classes.highlightPurple]:e=>C["default"].format("SC.Document.Highlighting.PurpleNote",{id:e},`Purple note ${e}`),[i["default"].classes.highlightBlack]:e=>C["default"].format("SC.Document.Highlighting.BlackNote",{id:e},`Black note ${e}`)},_={[i["default"].classes.highlightYellow]:e=>C["default"].format("SC.Document.Highlighting.YellowHighlight",{id:e},`Yellow highlight ${e}`),[i["default"].classes.highlightGreen]:e=>C["default"].format("SC.Document.Highlighting.GreenHighlight",{id:e},`Green highlight ${e}`),[i["default"].classes.highlightBlue]:e=>C["default"].format("SC.Document.Highlighting.BlueHighlight",{id:e},`Blue highlight ${e}`),[i["default"].classes.highlightPink]:e=>C["default"].format("SC.Document.Highlighting.PinkHighlight",{id:e},`Pink highlight ${e}`),[i["default"].classes.highlightOrange]:e=>C["default"].format("SC.Document.Highlighting.OrangeHighlight",{id:e},`Orange highlight ${e}`),[i["default"].classes.highlightPurple]:e=>C["default"].format("SC.Document.Highlighting.PurpleHighlight",{id:e},`Purple highlight ${e}`),[i["default"].classes.highlightBlack]:e=>C["default"].format("SC.Document.Highlighting.BlackHighlight",{id:e},`Black highlight ${e}`)};const S={[i["default"].classes.highlightYellow]:e=>C["default"].format("SC.Document.Highlighting.StartYellowNote",{id:e},`Start yellow note ${e}`),[i["default"].classes.highlightGreen]:e=>C["default"].format("SC.Document.Highlighting.StartGreenNote",{id:e},`Start green note ${e}`),[i["default"].classes.highlightBlue]:e=>C["default"].format("SC.Document.Highlighting.StartBlueNote",{id:e},`Start blue note ${e}`),[i["default"].classes.highlightPink]:e=>C["default"].format("SC.Document.Highlighting.StartPinkNote",{id:e},`Start pink note ${e}`),[i["default"].classes.highlightOrange]:e=>C["default"].format("SC.Document.Highlighting.StartOrangeNote",{id:e},`Start orange note ${e}`),[i["default"].classes.highlightPurple]:e=>C["default"].format("SC.Document.Highlighting.StartPurpleNote",{id:e},`Start purple note ${e}`),[i["default"].classes.highlightBlack]:e=>C["default"].format("SC.Document.Highlighting.StartBlackNote",{id:e},`Start black note ${e}`)},N={[i["default"].classes.highlightYellow]:e=>C["default"].format("SC.Document.Highlighting.StartYellowHighlight",{id:e},`Start yellow highlight ${e}`),[i["default"].classes.highlightGreen]:e=>C["default"].format("SC.Document.Highlighting.StartGreenHighlight",{id:e},`Start green highlight ${e}`),[i["default"].classes.highlightBlue]:e=>C["default"].format("SC.Document.Highlighting.StartBlueHighlight",{id:e},`Start blue highlight ${e}`),[i["default"].classes.highlightPink]:e=>C["default"].format("SC.Document.Highlighting.StartPinkHighlight",{id:e},`Start pink highlight ${e}`),[i["default"].classes.highlightOrange]:e=>C["default"].format("SC.Document.Highlighting.StartOrangeHighlight",{id:e},`Start orange highlight ${e}`),[i["default"].classes.highlightPurple]:e=>C["default"].format("SC.Document.Highlighting.StartPurpleHighlight",{id:e},`Start purple highlight ${e}`),[i["default"].classes.highlightBlack]:e=>C["default"].format("SC.Document.Highlighting.StartBlackHighlight",{id:e},`Start black highlight ${e}`)};const E={[i["default"].classes.highlightYellow]:e=>C["default"].format("SC.Document.Highlighting.EndYellowNote",{id:e},`End yellow note ${e}`),[i["default"].classes.highlightGreen]:e=>C["default"].format("SC.Document.Highlighting.EndGreenNote",{id:e},`End green note ${e}`),[i["default"].classes.highlightBlue]:e=>C["default"].format("SC.Document.Highlighting.EndBlueNote",{id:e},`End blue note ${e}`),[i["default"].classes.highlightPink]:e=>C["default"].format("SC.Document.Highlighting.EndPinkNote",{id:e},`End pink note ${e}`),[i["default"].classes.highlightOrange]:e=>C["default"].format("SC.Document.Highlighting.EndOrangeNote",{id:e},`End orange note ${e}`),[i["default"].classes.highlightPurple]:e=>C["default"].format("SC.Document.Highlighting.EndPurpleNote",{id:e},`End purple note ${e}`),[i["default"].classes.highlightBlack]:e=>C["default"].format("SC.Document.Highlighting.EndBlackNote",{id:e},`End black note ${e}`)},A={[i["default"].classes.highlightYellow]:e=>C["default"].format("SC.Document.Highlighting.EndYellowHighlight",{id:e},`End yellow highlight ${e}`),[i["default"].classes.highlightGreen]:e=>C["default"].format("SC.Document.Highlighting.EndGreenHighlight",{id:e},`End green highlight ${e}`),[i["default"].classes.highlightBlue]:e=>C["default"].format("SC.Document.Highlighting.EndBlueHighlight",{id:e},`End blue highlight ${e}`),[i["default"].classes.highlightPink]:e=>C["default"].format("SC.Document.Highlighting.EndPinkHighlight",{id:e},`End pink highlight ${e}`),[i["default"].classes.highlightOrange]:e=>C["default"].format("SC.Document.Highlighting.EndOrangeHighlight",{id:e},`End orange highlight ${e}`),[i["default"].classes.highlightPurple]:e=>C["default"].format("SC.Document.Highlighting.EndPurpleHighlight",{id:e},`End purple highlight ${e}`),[i["default"].classes.highlightBlack]:e=>C["default"].format("SC.Document.Highlighting.EndBlackHighlight",{id:e},`End black highlight ${e}`)};var w={WhiteSpaceCharacterRegex:new RegExp("[\\f\\n\\r\\t\\v\b-\r   -​]"),GlobalWhiteSpaceCharacterRegex:new RegExp("[\\f\\n\\r\\t\\v\b-\r   -​]","gi"),AllowHighlightAccessibility:function(e,t){if(e.filter(`.${i["default"].classes.highlightActivator}`).length>0)return;e.attr("role","mark");const n=`${i["default"].classes.selectionFocus} ${i["default"].classes.activeHighlight}`,o=document.createElement("span");o.classList.add(i["default"].classes.highlightStart);o.classList.add(i["default"].classes.highlightingExcludeAnnotations);const r=document.createElement("span");r.classList.add(i["default"].classes.highlightEnd);r.classList.add(i["default"].classes.highlightingExcludeAnnotations);e.first().prepend(o);e.last().append(r);const a=document.createElement("span");a.setAttribute("tabindex",0);a.setAttribute("role","button");a.className=e.attr("class");a.classList.add(i["default"].classes.highlightActivator);a.classList.add(i["default"].classes.highlightingExcludeAnnotations);s["default"].isIacOn("IAC-A11Y-DOC-NOTES-ON-FOCUS")&&a.classList.add(i["default"].classes.highlightActivatorNotActive);t.noteText&&a.classList.add(i["default"].classes.highlightActivatorNote);t.isPublic&&a.classList.add(i["default"].classes.highlightActivatorShared);a.addEventListener("focus",(()=>{e.addClass(n);s["default"].isIacOn("IAC-A11Y-DOC-NOTES-ON-FOCUS")&&a.classList.remove(i["default"].classes.highlightActivatorNotActive)}));a.addEventListener("blur",(()=>{e.removeClass(n);s["default"].isIacOn("IAC-A11Y-DOC-NOTES-ON-FOCUS")&&a.classList.add(i["default"].classes.highlightActivatorNotActive)}));let l=e.last();const d=l.closest(".docLinkWrapper").length?l.closest(".docLinkWrapper"):l.closest("a");d.length&&(l=d);l.after(a);e=e.add(a)}};w.UpdateHighlightAccessibility=function(e,t,n){e.children(`.${i["default"].classes.highlightStart}`).attr("aria-label",function(e,t){const n=e.noteText?S[e.highlightColor]:N[e.highlightColor];if(n)return n(t);return C["default"].format("SC.Document.Highlighting.StartHighlight",{id:t},`Start highlight ${t}`)}(t,n));e.children(`.${i["default"].classes.highlightEnd}`).attr("aria-label",function(e,t){const n=e.noteText?E[e.highlightColor]:A[e.highlightColor];if(n)return n(t);return C["default"].format("SC.Document.Highlighting.EndHighlight",{id:t},`End highlight ${t}`)}(t,n));const o=e.filter(`.${i["default"].classes.highlightActivator}`);o.attr("aria-label",function(e,t){const n=e.noteText?b[e.highlightColor]:_[e.highlightColor];if(n)return n(t);v.datadogLogs.logger.warn("unexpected highlight data",e);return C["default"].format("SC.Document.Highlighting.Highlight",{id:t},`Highlight ${t}`)}(t,n));t.noteText&&o.addClass(i["default"].classes.highlightActivatorNote);o.toggleClass(i["default"].classes.highlightActivatorShared,!!t.isPublic)};w.RemoveHighlightAccessibility=function(e){e.removeAttr("role");e.children(`.${i["default"].classes.highlightStart}, .${i["default"].classes.highlightEnd}`).remove()
;e.filter(`.${i["default"].classes.highlightActivator}`).remove()};w.GetNoteHolderIdFromSelectionInstanceValue=function(e){if(null==e)throw new Error("GetNoteHolderIdFromSelectionInstanceValue: value is null");return i["default"].ids.noteParentPrefix+w.ParseIdFromSelectionInstanceValue(e)};w.SetElementHighzIndex=function(e){var t=document.getElementById(w.GetNoteHolderIdFromSelectionInstanceValue(e));t&&d["default"].AddClass(t,i["default"].classes.highzIndex)};w.GetHighlightTypeOfCachedHighlight=e=>{const t=(0,h.GetCachedHighlightData)(e);return w.GetHighlightType(t)};w.GetHighlightType=e=>{if(null!=e){if("highlight"==e._type){if((0,f.IsNotNullOrEmpty)(e.noteText))return g["default"].Note;return g["default"].Highlight}if("document"==e._type)return g["default"].DocumentLevelNote;if("snippet"==e._type||"orchestratorSnippet"==e._type)return g["default"].Snippet}return g["default"].Unknown};w.ParseIdFromSelectionInstanceValue=e=>{if(null==e)throw new Error("Highlighting.ParseIdFromSelectionInstanceValue: value is null");const t=i["default"].classes.highlightSelectionPrefix;if(e.indexOf(" ")>-1){const n=e.split(" ").filter((e=>e.indexOf(t)>-1))[0];if(n)return n.substring(t.length)}else{const n=e.indexOf(t);if(n>-1)return e.substring(n+t.length)}return null};w.GetDocGuidFromParentDocContainer=e=>{if(e&&p["default"].IsInfiniteScroll){const t="documentContainer_",n=e.closest(`[id^="${t}"]`)?.id;if(n)return n.substr(t.length)}};w.getRepositionNoteHolderTop=function(e,t){var n=u["default"].determineOffset(t),i=(0,a.offsetParent)(r()(e)[0]),o=u["default"].determineOffset(i);return n.y-o.y};w.GetInstanceIdClass=function(e){if(null!=e)return i["default"].classes.highlightSelectionPrefix+e.toString();return i["default"].classes.highlightSelectionPrefix+p["default"].SelectionInstanceCounter.toString()};w.ParseIdFromNoteHolder=function(e){if(null==e)throw new Error("Utility.ParseIdFromNoteHolder: noteHolder is null");const t=i["default"].ids.noteParentPrefix,n=e.id.indexOf(t);if(n>-1)return e.id.substring(n+t.length);return null};w.StripWhiteSpace=e=>e.replace(w.GlobalWhiteSpaceCharacterRegex,"");w.VerifyTextNodeIsValid=function(e){return!e.match(/^\s*<!--.*-->\s*$/)};w.IsAnnotationsElement=function(e){return null!==(e.nodeType===Node.TEXT_NODE?e.parentElement:e).closest(".co_notes, #coid_contacts_lightbox")};w.GetDocumentElement=function(e,t=p["default"].currentDocGuid){return p["default"].IsInfiniteScroll?e?e.closest(`#${i["default"].ids.document}`):document.getElementById(`documentContainer_${t}`).querySelector(`#${i["default"].ids.document}`):document.getElementById(i["default"].ids.document)};w.GetFirstHighlightedElement=function(e,t,n){if(p["default"].IsInfiniteScroll){const t=w.GetDocumentElement(null,n),i=r()(t).find(`#${e}`).get(0);return i?{element:i,chunkNumber:0}:null}return u["default"].GetElementById(e,null,null,null,t)};w.GetHiddenInlineNotesContainer=function(){return p["default"].IsInfiniteScroll?document.getElementById(`documentContainer_${p["default"].currentDocGuid}`).querySelector(`#${i["default"].ids.hiddenInlineNotes}`):document.getElementById(i["default"].ids.hiddenInlineNotes)};w.GetInlineNotesContainer=function(){return p["default"].IsInfiniteScroll?document.getElementById(`documentContainer_${p["default"].currentDocGuid}`).querySelector(`#${i["default"].ids.inlineNotes}`):document.getElementById(i["default"].ids.inlineNotes)};w.GetHighlightsInChunk=function(e,t){var n=document;l["default"].Instance&&l["default"].Instance.GetChunkCount()>0&&(n=l["default"].Instance.GetChunkAt(t));return n.querySelectorAll(`.${e}:not(.${i["default"].classes.highlightActivator})`)};w.AddNoteColorCssMarkup=function(e,t){t.highlightColor&&e._root?.classList.add(t.highlightColor)};w.RemoveNoteColorCssMarkup=function(e,t){t.highlightColor&&e._root?.classList.remove(t.highlightColor)};w.AddHighlightColorCssMarkup=function(e,t){t.highlightColor&&document.querySelectorAll(`.${i["default"].classes.highlightSelectionPrefix}${e}`).forEach((e=>e.classList.add(t.highlightColor)))};w.RemoveHighlightColorCssMarkup=function(e,t){t.highlightColor&&document.querySelectorAll(`.${i["default"].classes.highlightSelectionPrefix}${e}`).forEach((e=>e.classList.remove(t.highlightColor)))};w.GetOrderedHighlights=function(e,t){const n=t||(()=>!0);return(0,h.GetHighlightCacheKeys)().filter((t=>{if(!e){return m.A.get(t).createdByCurrentUser}return!0})).filter(n).sort(((e,t)=>{const n=m.A.get(e),i=m.A.get(t),o=((e,t)=>{const{aValue:n,bValue:i}=((e,t)=>{if(e.chunkNumber!==t.chunkNumber)return{aValue:e.chunkNumber,bValue:t.chunkNumber};if(e.markerId!==t.markerId)return{aValue:e.markerId,bValue:t.markerId};return{aValue:e.nonWhitespaceCharOffset,bValue:t.nonWhitespaceCharOffset}})(e,t);return n-i})(w.extractLocationFromHighlight(n),w.extractLocationFromHighlight(i));if(0===o)return((e,t)=>{let n=new Date(e).getTime(),i=new Date(t).getTime();isNaN(n)&&(n=0);isNaN(i)&&(i=0);return n-i})(n.date,i.date);return o}))};w.FilterExistingHighlight=function(e){return!!document.querySelector(`.${i["default"].classes.highlight}.${i["default"].classes.highlightSelectionPrefix}${e}`)};w.extractLocationFromHighlight=function(e){const t={chunkNumber:-1,markerId:-1,nonWhitespaceCharOffset:-1};if(e?.location?.startPoint){Object.assign(t,e.location.startPoint);t.markerId||(t.markerId="-1");t.markerId=parseInt(t.markerId.replace("co_docMarker_",""),10)}return t};w.GetHighlitingExcludedClasses=function(){return y["default"].CssClassBlacklist};w.TagNodesBetweenMarkers=function(e,t,n,i,o){const r=c["default"].GetTextNodesBetweenMarkerNodes(n,i,o),a=w.GetHighlitingExcludedClasses();let s=!0;for(let n=0;n<r.length;n++)if(w.StripWhiteSpace(r[n].nodeValue)&&!u["default"].selfOrAncestorHasClassFromList(r[n],a)){w.WrapCompleteNodeWithClassedSpan(r[n],t,e,s);s=!1}};w.WrapCompleteNodeWithClassedSpan=function(e,t,n,o){const r=document.createElement("span");1==o&&(r.id=n);r.className=t||i["default"].classes.highlight;r.className+=" "+n;u["default"].AreSharedHighlightsAllowed()&&w.AddHideHighlightClassToElement(r);e.parentNode.insertBefore(r,e);r.appendChild(e);return r};w.AddHideHighlightClassToElement=function(e){e.className+=" co_hideHighlight"};w.GetHighlightClass=e=>{let t=i["default"].classes.highlight;e.highlightColor&&(t+=` ${e.highlightColor}`);return t};const x=w;x.WrapCompleteNodeWithClassedSpanPlatform=x.WrapCompleteNodeWithClassedSpan;x.WrapCompleteNodeWithClassedSpan=(T=x.WrapCompleteNodeWithClassedSpan,function(e,t,n,i){const o=T.call(this,e,t,n,i);o.className+=" co_selection";return o});var T;const I=x;I.GetHighlitingExcludedClasses=function(){return u["default"].isPracticalLawUsDocument()?[i["default"].classes.highlightingExcludeAnnotations,i["default"].classes.highlightingExcludeDraftingNotes]:[i["default"].classes.highlightingExcludeAnnotations]};I.WrapCompleteNodeWithClassedSpan=function(e,t,n,i){const o=I.WrapCompleteNodeWithClassedSpanPlatform(e,t,n,i);u["default"].isPracticalLawUsDocument()&&(o.className+=" co_selection");return o};const D=I},2663:(e,t,n)=>{"use strict";n.r(t);n.d(t,{EditorInitialize:()=>c});var i=n(9191),o=n.n(i),r=n(8198),a=n.n(r),s=n(3839),l=n(721);function d(e,t,n,i){var r,d=function(e,t,n){return{selector:e,inline:t,readonly:t,toolbar1:!t&&"| undo redo | styleselect | bold italic underline strikethrough | bullist numlist | alignleft aligncenter alignright | link",theme_advanced_toolbar_align:"left",style_formats:[{title:"Headers",items:[{title:"Header 1",format:"h1"},{title:"Header 2",format:"h2"},{title:"Header 3",format:"h3"},{title:"Header 4",format:"h4"},{title:"Header 5",format:"h5"},{title:"Header 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"}]}],formats:{bold:[{inline:"strong",exact:!0}],italic:[{inline:"em",exact:!0}]},relative_urls:!1,remove_script_host:!1,
default_link_target:"_blank",target_list:!1,link_title:!1,link_assume_external_targets:!0,insert_link_dialog_close_label:(0,l.getCloseButtonA11yLabel)(),link_list:function(e){var t=a().activeEditor.windowManager,n=t.open;t.open=function(e){if(e.body)for(var i=0,o=e.body.length;i<o;i++)if(e.body[i]&&"anchor"===e.body[i].name){delete e.body[i];break}t.open=n;t.open(e)};e()},visual:!1,allow_html_in_named_anchor:!1,menubar:!1,content_editable:!0,statusbar:!1,max_height:90,height:80,setup:n}}(e,t,n);r=s["default"].isIacOn("IAC-PLC-ANNOTATIONEDITOR")?{plugins:t?"":"link, autolink, paste",paste_as_text:!0,invalid_elements:"form,input,script,applet,embed,frame,frameset,html,style,layer,link,ilayer,meta,object,img,textarea,code",extended_valid_elements:"a[type|name|href|target=_blank|title|class]",paste_postprocess:function(e,t){o()(t.node).find("*").each((function(){for(var e=this.attributes,t=e.length;t--;){if("href"==e[t].name)continue;this.removeAttributeNode(e[t])}}))},auto_focus:i.autoFocus?e.replace("#",""):""}:{plugins:t?"":"link, autolink",valid_styles:{"*":"text-align",span:"text-decoration"},valid_elements:"@[id|style|title],a[type|name|href|target=_blank|title|class],br,-p/div,-em/i,-h1,-h2,-h3,-h4,-h5,-h6,li,ol,-span,-strong/b,ul"};return Object.assign({},d,r)}function c(e,t,n,i={}){a().init(d(e,t,n,i))}},2714:(e,t,n)=>{e.exports=n(4507)(16597)},2769:(e,t,n)=>{e.exports=n(4507)(68571)},2842:(e,t,n)=>{e.exports=n(4507)(27687)},2915:(e,t,n)=>{e.exports=n(4507)(86322)},3110:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>i});const i=new Map},3264:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var i=n(966),o=n(4317),r=n(5682),a=n(9265),s=n(6494),l=n(4159),d=n(6921),c=n(2656),u=n(3602),f=n(2065),h=n(2517),p=n(4682);const m={_showRightColumnIfNotVisible:function(){i["default"].Get("ADC",p["default"].SHARING_ANNOTATIONS_PREFERENCE_KEY)!==p["default"].SHARING_ANNOTATIONS_PREFERENCE_VALUE_HIDENOTES&&(0,a.ShowRightColumn)()},AddNoteToContainer:function(e,t,n,i,a,p){let m=0;null!=s["default"].Instance&&(m=s["default"].Instance.GetCurrentChunk());const g=r["default"].CreateNoteHolder(e);if(m==i)r["default"].RepositionNoteHolder(g,t,n);else{c["default"].GetHiddenInlineNotesContainer().appendChild(g)}const y=u["default"].CreateAnnotationsProvider(n),v=new h["default"](a);v.setProvider(y);v.SetParent(g);v.SetDocumentGuid(n);v._chunkNumber=i;v.SetViewOnly(!l["default"].IsEditable);const C=this._shouldSetMinimized();if(C){v.SetMinimizeNotes(!0);const t=c["default"].GetInstanceIdClass(e);c["default"].GetHighlightsInChunk(t,i).forEach((function(e){e.addEventListener("mouseup",(function(e){e.defaultPrevented||v.ToggleNote()}))}))}(0,d.CacheNoteContainer)(e,v);v.Draw();c["default"].AddNoteColorCssMarkup(v,a);C&&p&&v.ToggleNote();if(f["default"].isNarrowTocDisplayEnabled()){v.DrawMaximizeIcon();l["default"].IsCollapsedView&&v.MinimizeNote();this._showRightColumnIfNotVisible()}o.A.AddNoteMarkerColor(v,a);return v},_shouldSetMinimized:function(){return(l["default"].IsNewDocumentView||l["default"].IsCollapsedView)&&!f["default"].isNarrowTocDisplayEnabled()}}},3312:(e,t,n)=>{"use strict";n.d(t,{u:()=>r});var i=n(68),o=n(8286);const r=function({element:e,closeCallback:t}){const n=o["default"].texts.selectedTextMenuTitle;e.setAttribute("role","dialog");e.setAttribute("aria-modal",!0);e.setAttribute("tabIndex",-1);e.setAttribute("aria-label",n);e.addEventListener("keydown",(function(e){"Escape"===e.key&&t();i["default"].call(this,e)}));const r=`<div class="co_selectedMenuHeader">\n            <h2>${n}</h2>\n            <button type="button" class="co_overlayBox_closeButton co_iconBtn" aria-label="${o["default"].texts.selectedTextMenuClose}">\n                ${o["default"].texts.selectedTextMenuClose}\n            </button>\n        </div>`;e.insertAdjacentHTML("afterbegin",r);e.querySelector(".co_selectedMenuHeader .co_overlayBox_closeButton").addEventListener("click",t);return e}},3364:(e,t,n)=>{e.exports=n(4507)(27533)},3434:(e,t,n)=>{e.exports=n(4507)(25670)},3587:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>d});var i=n(8286),o=n(9086),r=n(2065),a=n(6921),s=n(2656),l=n(7861);const d={CalculateDisplayLocation:function(e,t){var n,i,o,r,a,s,l,d,c,u=e[t].note;u.displayOffset=u.focusedOffset;for(n=t-1;n>=0;--n){o=(c=e[n]).note;r=e[n+1].note;d=c.container.GetContainerHeight();s=Math.max(0,o.idealOffset+d-r.displayOffset);if(o.idealOffset+s===o.computedLocation)break;o.displayOffset=o.idealOffset-s}for(i=t+1;i<e.length;++i){o=(c=e[i]).note;d=(a=e[i-1]).container.GetContainerHeight();(l=a.note.displayOffset+d)<o.focusedOffset&&(l=o.focusedOffset);if(l===o.displayOffset)break;o.displayOffset=l}},FindNoteIndexByNoteSelector:function(e,t){for(var n=0,i=e,o=s["default"].ParseIdFromSelectionInstanceValue(t),r=0;r<i.length;++r)if(o===i[r].id){n=r;break}return n},CalculateNoteIdealOffset:function(e){var t,n,i,o,r=e[0].note;r.idealOffset=r.focusedOffset;var a=r.idealOffset;for(i=0;i<e.length;++i){(n=(t=e[i]).note).focusedOffset>a&&(a=n.focusedOffset);n.idealOffset=a;a+=o=t.container.GetContainerHeight()}},GetHighlightOffset:function(e){return(0,l.position)(document.querySelector("."+e))?.top},CalculateNoteFocusedOffset:function(e,t){for(var n,i,o=0;o<e.length;++o){n=e[o];i=this.GetHighlightOffset(n.highlightSelector);n.note.focusedOffset=i-t}},GetSortedHighlightNotesInfo:function(){for(var e,t,n=(0,a.GetAllCachedNoteContainerIds)(),i=[],r=0;r<n.length;++r){t=n[r];if(e=(0,a.GetCachedNoteContainer)(t)){var l=e.GetContainedNotes();if(l.length>0&&"highlight"===l[0].GetNoteType()){const n={container:e,id:t,note:l[0].getNote(),highlightSelector:s["default"].GetInstanceIdClass(t)};i.push(n)}}}var d=o["default"].GetLastDeletedNote();if(d){e=d.container;t=s["default"].ParseIdFromNoteHolder(e.GetParent());const n={container:e,id:t,note:d.note,highlightSelector:s["default"].GetInstanceIdClass(t)};i.push(n)}i.sort((function(e,t){var n,i=e.note,o=t.note;if(i.location&&o.location){if(0===(n=i.location.startPoint.chunkNumber-o.location.startPoint.chunkNumber)&&0===(n=i.location.startPoint.nonWhitespaceCharOffset-o.location.startPoint.nonWhitespaceCharOffset)){var r=new Date(i.date),a=new Date(o.date);n=r.compareTo(a)}}else n=i.location||o.location?null==i.location?1:-1:0;return n}));return i},ResetNotesInRail:function(){var e=this.GetSortedHighlightNotesInfo();e.length>0&&this.ScrollNoteInRail(e[0].highlightSelector,e[0].highlightSelector)},ScrollNoteInRail:function(e,t){if(!(e&&""!==e||t&&""!==t))return;var n=e;t&&""!==t&&(n=t);var i=o["default"].CalculateDocLevelOffset(),r=this.GetSortedHighlightNotesInfo();if(r.length>0){this.CalculateNoteFocusedOffset(r,i);this.CalculateNoteIdealOffset(r);var a=this.FindNoteIndexByNoteSelector(r,n);this.CalculateDisplayLocation(r,a);for(var s=0;s<r.length;++s){var l=r[s].note,d=r[s].container;void 0!==l.displayOffset&&d.SetTopOffset(l.displayOffset)}this.DisplayNoteScrollButton()}},DisplayNoteScrollButton:function(){if(r["default"].AreSharedAnnotationsAllowed()){for(var e=!1,t=o["default"].CalculateDocLevelOffset(),n=this.GetSortedHighlightNotesInfo(),a=0;a<n.length;++a){if(n[a].note.displayOffset+t<0){e=!0;break}}var s=document.getElementById(i["default"].ids.scrollButton);e?s?.classList.remove(i["default"].classes.hideState):s?.classList.add(i["default"].classes.hideState)}}}},3602:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>M});var i=n(9691),o=n(3839),r=n(3364),a=n(7955),s=n(2496),l=n(9912),d=n(2065);const c={GetDateForModel:function(e){return l["default"].renderDate(new Date(e),"SC.Config.Date.NoteDateTime","MMMM d, yyyy hh:mm tt")},GetNoteDate:function(e){return l["default"].renderDate(new Date(e),"SC.Config.Date.NoteDate","MMMM d, yyyy")},GetNoteTime:function(e){return l["default"].renderDate(new Date(e),"SC.Config.Date.NoteTime","hh:mm tt")},TransformDRAnnotationsToLegacy:function(e){var t,n={};const o=this;n.documentLevelNotes=[];n.inlineHighlightsAndNotes=[];n.orphanHighlightsAndNotes=[];if(!e)return n;e.DocumentLevelNotes&&(d["default"].AreSharedHighlightsAllowed()?(0,i.forEach)(e.DocumentLevelNotes,(function(e){n.documentLevelNotes.push({date:o.GetDateForModel(e.CreatedDate),noteDate:o.GetNoteDate(e.CreatedDate),
noteTime:o.GetNoteTime(e.CreatedDate),documentGuid:e.ItemGuid,_type:"document",noteText:e.NoteText,selectedHtml:null,selectedText:null,location:null,shortId:e.AnnotationSid,clientId:{clientId:e.ClientId.ClientIdValue||e.ClientId.MatterId||"",matterId:e.ClientId.MatterId||"",delimiter:e.ClientId.Delimiter||""},id:e.AnnotationSid,isPublic:e.IsPublic,itemType:e.ItemType,createdByCurrentUser:e.CreatedByCurrentUser,createdBy:{FirstName:e.CreatedBy.FirstName,LastName:e.CreatedBy.LastName,PrismGuid:e.CreatedBy.PrismGuid},permissions:e.Permissions||[]})})):(0,i.forEach)(e.DocumentLevelNotes,(function(e){n.documentLevelNotes.push({date:o.GetDateForModel(e.CreatedDate),noteDate:o.GetNoteDate(e.CreatedDate),noteTime:o.GetNoteTime(e.CreatedDate),documentGuid:e.ItemGuid,_type:"document",noteText:e.NoteText,selectedHtml:null,selectedText:null,location:null,shortId:e.AnnotationSid,clientId:{clientId:e.ClientId.ClientIdValue||e.ClientId.MatterId||"",matterId:e.ClientId.MatterId||"",delimiter:e.ClientId.Delimiter||""},id:e.AnnotationSid,isPublic:e.IsPublic,itemType:e.ItemType,createdByCurrentUser:e.CreatedByCurrentUser,createdBy:e.CreatedBy,permissions:e.Permissions||[]})})));t=function(e){var t,n;t=e.InlineNotes&&e.InlineNotes.length>0?e.InlineNotes[0]:null;(n=o.FromDataRoomHighlightToNoteModel(e)).noteText=t?t.NoteText:null;n.itemType=t&&null!=t.ItemType?t.ItemType:null;n.isPublic=t&&t.IsPublic;d["default"].AreSharedHighlightsAllowed()||(n.createdBy=t&&t.CreatedBy);n.createdByCurrentUser=t&&t.CreatedByCurrentUser?t.CreatedByCurrentUser:e.CreatedByCurrentUser;n["_clientMetadata"]={noteId:t?t.AnnotationSid:null};n.permissions=e.Permissions||[];return n};e.InlineHighlightsAndNotes&&(0,i.forEach)(e.InlineHighlightsAndNotes,(function(e){n.inlineHighlightsAndNotes.push(t(e))}));e.OrphanedHighlightsAndNotes&&(0,i.forEach)(e.OrphanedHighlightsAndNotes,(function(e){n.orphanHighlightsAndNotes.push(t(e))}));return n},FromDataRoomHighlightToNoteModel:function(e){const t=this;return{date:t.GetDateForModel(e.CreatedDate),noteDate:t.GetNoteDate(e.CreatedDate),noteTime:t.GetNoteTime(e.CreatedDate),documentGuid:e.ItemGuid,_type:"highlight",selectedHtml:e.HighlightHtml,selectedText:e.HighlightText,location:e.Location?{chunkSize:e.Location.ChunkSize,chunkableHeadnotes:e.Location.ChunkableHeadnotes,documentContentCacheKey:e.Location.DocumentContentCacheKey,listParameters:e.Location.ListParameters,startPoint:{chunkNumber:e.Location.StartPoint.ChunkNumber,markerId:e.Location.StartPoint.MarkerId,nonWhitespaceCharOffset:e.Location.StartPoint.NonWhitespaceCharOffset},endPoint:{chunkNumber:e.Location.EndPoint.ChunkNumber,markerId:e.Location.EndPoint.MarkerId,nonWhitespaceCharOffset:e.Location.EndPoint.NonWhitespaceCharOffset}}:null,shortId:e.AnnotationSid,documentSnapshot:{},noteText:"",clientId:{clientId:e.ClientId.ClientIdValue||e.ClientId.MatterId||"",matterId:e.ClientId.MatterId||"",delimiter:e.ClientId.Delimiter||""},createdBy:e.CreatedBy||null,id:e.AnnotationSid,highlightColor:e.HighlightColor,permissions:e.Permissions||[]}},FromCreatedHighlightAndNoteToFinalModel:function(e,t){return{id:e.id,status:"success",note:{id:e.id,_type:"highlight",noteText:t.NoteText,isPublic:t.IsPublic,shortId:e.id,date:e.date,noteDate:e.noteDate,noteTime:e.noteTime,createdBy:t.CreatedBy,selectedText:e.selectedText,selectedHtml:e.selectedHtml,location:e.location,_clientMetadata:{noteId:t.AnnotationSid},itemType:t.ItemType,documentSnapshot:{},clientId:{clientId:e.clientId.clientId,matterId:e.clientId.matterId,delimiter:e.clientId.delimiter},highlightColor:e.highlightColor}}}};var u=n(7195);function f(e,t,n,s,l,f){let h=e;this.AreSharedAnnotationsAllowed=function(){return!(o["default"].EnableIpad?o["default"].EnableIpad:o["default"].EnableIphone)&&r["default"].Instance.IsUserDocument};this.GetNotePermissions=function(e,n){return t.GetNotePermissions(e,n,s,null)};this.GetNotePermissionsFromNoteData=function(e,n){return t.GetNotePermissionsFromNoteData(e,s,null,n)};this.UpdateDocumentGuid=function(e){h=e};this.UnshareNotePermissions=function(e,n){return t.UnshareNotePermissions(e,n,s,null)};this.AddNoteToDocument=function(e,n,i,o,r,a){var l=this.AreSharedAnnotationsAllowed(),u=this._FromNoteModelToDataRoomNote(e,n,!1);if("highlight"===n._type){this.AddHighlight(n,i,(function(n){u.ItemGuid=n.id;var i=function(t){const i=c.FromCreatedHighlightAndNoteToFinalModel(n,t);d["default"].WriteSharedAnnotationEvent("Cobalt.Document.Annotations.Note.Add",e,i.note);r(i)};l?t.CreateInlineNoteV2(n.id,u,i,a,s):t.CreateNote(n.id,u,i,a,s)}),a)}else if("document"===n._type){var f=function(t){var n={status:"success",id:t.AnnotationSid,note:{id:t.AnnotationSid,_type:"document",noteText:t.NoteText,itemType:t.ItemType,shortId:t.AnnotationSid,createdBy:t.CreatedBy,isHtmlNote:t.IsHtmlNote,date:c.GetDateForModel(t.CreatedDate),noteDate:c.GetNoteDate(t.CreatedDate),noteTime:c.GetNoteTime(t.CreatedDate),clientId:{clientId:t.ClientId.ClientIdValue||t.ClientId.MatterId||"",matterId:t.ClientId.MatterId||"",delimiter:t.ClientId.Delimiter||""}}};if(l){n.note.isPublic=t.IsPublic;n.note.createdByCurrentUser=t.CreatedByCurrentUser}d["default"].WriteSharedAnnotationEvent("Cobalt.Document.Annotations.Note.Add",e,n.note);r(n)};l?t.CreateDocLevelNoteV2(e,u,f,a,s):t.CreateNote(e,u,f,a,s)}};this.UpdateNote=function(e,n,i,o,r){var a=this,l=this.AreSharedAnnotationsAllowed(),u=a._FromNoteModelToDataRoomNote(e,n,!0),f=function(t){var i={status:"success",id:n.id,note:{id:n.id,_type:n._type,noteText:t.NoteText,itemType:t.ItemType,shortId:n.id,isHtmlNote:t.IsHtmlNote,date:c.GetDateForModel(t.CreatedDate),noteDate:c.GetNoteDate(t.CreatedDate),noteTime:c.GetNoteTime(t.CreatedDate),clientId:{clientId:t.ClientId.ClientIdValue||t.ClientId.MatterId||"",matterId:t.ClientId.MatterId||"",delimiter:t.ClientId.Delimiter||""},documentSnapshot:{}}};if(l){i.note.isPublic=t.IsPublic;i.note.createdByCurrentUser=t.CreatedByCurrentUser}"highlight"===n._type&&a.CopyNoteFromHighlight(i.note,n,t);d["default"].WriteSharedAnnotationEvent("Cobalt.Document.Annotations.Note.Update",e,i.note);o(i)};"highlight"!==n._type||!n.id||n._clientMetadata&&n._clientMetadata.noteId?l?"document"===n._type?t.UpdateDocLevelNoteV2(u.ItemGuid,u.AnnotationSid,u,f,r,s):t.UpdateInlineNoteV2(e,u.AnnotationSid,u,f,r,s):t.UpdateNote(u.ItemGuid,u.AnnotationSid,u,f,r,s):l?t.CreateInlineNoteV2(n.id,u,f,r,s):t.CreateNote(n.id,u,f,r,s)};this.CopyNoteFromHighlight=function(e,t,n){e["_clientMetadata"]={noteId:n.AnnotationSid};e.highlightColor=t.highlightColor;e.location=t.location;e.selectedText=t.selectedText;e.selectedHtml=t.selectedHtml;e.createdBy=n.CreatedBy};this.DeleteAnnotation=function(e,n,o,r,a){var l=this.AreSharedAnnotationsAllowed(),c=function(){var t={status:"success",id:n.id,note:(0,i.cloneDeep)(n)};d["default"].WriteSharedAnnotationEvent("Cobalt.Document.Annotations.Note.Delete",e,n);r(t)};if("highlight"===n._type)if(l){t.DeleteInlineNoteV2("Highlight",e,n.id,n._clientMetadata.noteId,(function(){t.DeleteHighlightV2(e,n.id,c,a,s)}),a,s)}else t.DeleteHighlight(e,n.id,c,a,s);else{if("document"!==n._type)throw new Error("Unknown note type passed into DeleteNote function in AnnotationsProvider.");l?t.DeleteDocLevelNoteV2(n.id,e,c,a,s):t.DeleteNote(n.id,e,c,a,s)}};this.AddHighlight=function(e,i,o,r){var l=this.AreSharedAnnotationsAllowed(),f="";if(i){e._type="highlight";e.createdByCurrentUser=!0;e.clientId={clientId:n.ClientId,delimiter:n.Delimiter||"",matterId:n.MatterId||""};e.selectedHtml=i.HTML?i.HTML:e.selectedHtml;e.selectedText=i.ClearText?i.ClearText:e.selectedText;e.location={startPoint:i.Startpoint,endPoint:i.Endpoint}}f="object"==typeof e.location?{StartPoint:{ChunkNumber:e.location.startPoint.chunkNumber,MarkerId:e.location.startPoint.markerId,NonWhitespaceCharOffset:e.location.startPoint.nonWhitespaceCharOffset},EndPoint:{ChunkNumber:e.location.endPoint.chunkNumber,MarkerId:e.location.endPoint.markerId,NonWhitespaceCharOffset:e.location.endPoint.nonWhitespaceCharOffset}}:e.location;const p=this.getExternalMetadata(e);var m={Selector:null,HighlightHtml:e.selectedHtml,HighlightText:e.selectedText,DocumentId:h,ItemGuid:h,IsOrphan:!1,Location:f,ClientId:{
ClientIdValue:n.ClientId||n.MatterId||"",MatterId:n.MatterId||n.ClientId||"",Delimiter:n.Delimiter||""},HighlightColor:e.highlightColor,ExternalMetadata:{ExternalMetadataMap:p}};l&&(m.IsPublic=e.isPublic);var g=function(e){var t=c.FromDataRoomHighlightToNoteModel(e);u.A.storeCurrentDocumentSnapshotInfo(t);o(t)};l?t.CreateHighlightV2(h,m,s,g,r):t.CreateHighlight(h,m,s,g,r);d["default"].WriteSharedAnnotationEvent("Cobalt.Document.Annotations.Highlight.Add",h,e);a["default"].NewData=null};this.getExternalMetadata=e=>{const t={highlightColor:e.highlightColor};e.starPage&&(t.starPage=e.starPage);return t};this.UpdateHighlight=function(e,n,i){const o={ExternalMetadata:{ExternalMetadataMap:this.getExternalMetadata(e)}};t.UpdateHighlight(h,e.id,o,s,n,i)};this.DeleteHighlight=function(e,n,i){this.AreSharedAnnotationsAllowed()?t.DeleteHighlightV2(h,e.id,n,i):t.DeleteHighlight(h,e.id,n,i);d["default"].WriteSharedAnnotationEvent("Cobalt.Document.Annotations.Highlight.Delete",h,e)};this.GetNotesAndHighlights=function(e,n,i,o,r,a,d,u){var h=function(e){var t=c.TransformDRAnnotationsToLegacy(e);o(t)};this.AreSharedAnnotationsAllowed()?t.GetAnnotationsV2(e,n,i,h,r,a,d,u,s,l,f.contextualInfo||null):t.GetAnnotations(e,n,i,h,r,a,d,u,s,l,f.contextualInfo||null)};this.InitializePreviouslyShared=function(){t.InitializePreviouslyShared(s,null)};this.GetReviewerPermission=function(e,n,i){t.GetReviewerPermission(e,n,i,s,f.contextualInfo||null)};this.AddNotePermission=function(e,n,i,o,r){t.AddNotePermission(e,n,i,o,r)};this.RemoveNotePermission=function(e,n,i){t.RemoveNotePermission(e,n,i)};this.UpdatePreviouslySelectedContacts=function(e,n){t.UpdatePreviouslySelectedContacts(e,n,s,null)};this.GetPreviouslySelectedContacts=function(e){t.GetPreviouslySelectedContacts(e,s,null)};this.GetDecryptedGroupIds=function(e,n){return t.GetDecryptedGroupIds(e,n,s,null)}}f.prototype._FromNoteModelToDataRoomNote=function(e,t,n){var i=this.AreSharedAnnotationsAllowed(),o="",r=null,a=null;if("highlight"===t._type){o=n?t.id:null;r=n&&t._clientMetadata?t._clientMetadata.noteId:null}else{o=e;r=n?t.id:null}a=n?t.itemType:"documents";var l={AnnotationSid:r,ClientId:{MatterId:t.clientId.matterId||t.clientId.clientId||"",ClientIdValue:t.clientId.clientId||t.clientId.matterId||"",Delimiter:t.clientId.delimiter||""},CreatedBy:{FirstName:"",LastName:"",PrismGuid:null},CreatedDate:null,ModifiedBy:{FirstName:"",LastName:"",PrismGuid:null},ModifiedDate:null,ItemGuid:o,DocumentGuid:e,ItemType:a,NoteText:t.noteText,ResourceToken:s["default"].ResourceToken};t.isHtmlNote&&(l.IsHtml=!0);i&&(l.IsPublic=t.isPublic);return l};const h=f;var p=n(9474),m=n(3434),g=n(7617),y=n(8660),v=n(8854),C=n(9417);const b=function(){this.SetDocumentGuid=function(e){this._guid=e};this.Draw=function(){};this.GetHighlightNotes=async function(e){if(!this._guid)throw new Error("Missing document guid on get highlight note request");var t="/Foldering/v4/"+g["default"].GetUserNameEncoded()+"/notes/"+this._guid+"?tz="+encodeURIComponent((0,C.GetUserTimeZone)());t=(0,C.AddSectionFilterToUrl)(t);var n=new y["default"](m["default"].Foldering,t);const i=await n.Get();if(200==i.StatusCode){e(await i.json())}};this.AddHighlightNote=async function(e,t){if(!this._guid)throw new Error("Missing document guid on get highlight note request");e._type="highlight";var n=g["default"].GetClientMatter();e.clientId={clientId:n.ClientId,delimiter:n.Delimiter,matterId:n.MatterId};e.selectedHtml=a["default"].NewData.HTML;e.selectedText=a["default"].NewData.ClearText;null==e.location&&(e.location={});e.location.startPoint=void 0;e.location.endPoint=void 0;e.location.startPoint=a["default"].NewData.Startpoint;e.location.endPoint=a["default"].NewData.Endpoint;var i=JSON.stringify(e),o="/Foldering/v4/"+g["default"].GetUserNameEncoded()+"/notes/"+this._guid;o=(0,C.AddSectionFilterToUrl)(o);var r=new y["default"](m["default"].Foldering,o,{headers:{"Content-Type":"application/json;charset=UTF-8"}});a["default"].NewData=null;const s=await r.Post(i);if(200==s.StatusCode){var l=await s.json();u.A.storeCurrentDocumentSnapshotInfo(l.note);t(l.note)}};this.UpdateHighlight=async function(e,t,n){if(!this._guid)throw new Error("Missing document guid on get highlight note request");e._type="highlight";const i=Object.assign({},e,{noteText:""});var o=JSON.stringify(i),r="/Foldering/v4/"+g["default"].GetUserNameEncoded()+"/notes/"+this._guid;r=(0,C.AddSectionFilterToUrl)(r);var s=new y["default"](m["default"].Foldering,r,{headers:{"Content-Type":"application/json;charset=UTF-8"}});a["default"].NewData=null;const d=await s.Put(o);if(!d.ok){n&&n(e.id);var c=`Failed to update highlight note. Status code: ${d.status}.`;(0,v.publishErrorMessage)(m["default"].Document,l["default"].lookup("SC.Foldering.SharedNotesErrors.ErrorUpdatingHighlight","An error occurred while updating the highlight. Try again."));throw new Error(c)}var f=await d.json();u.A.storeCurrentDocumentSnapshotInfo(f.note);t(f.note)};this.DeleteHighlightNote=async function(e,t,n){if(!this._guid)throw new Error("Missing document guid on get highlight note request");var i="/Foldering/v4/"+g["default"].GetUserNameEncoded()+"/notes/"+this._guid+"/"+e,o=new y["default"](m["default"].Foldering,i);const r=await o.Delete();if(200!=r.StatusCode)n&&n(e);else{t((await r.json()).note)}}};var _=n(2570);const S=function(e,t,n){this.AddNoteToDocument=function(e,t,n,i,o,r){(new _.A).CreateNote(e,t,i,o,r)};this.UpdateNote=function(e,t,n,i,o){(new _.A).UpdateNote(e,t,n,i,o)};this.DeleteAnnotation=function(e,t,n,i,o){(new _.A).DeleteNote(e,t,n,i,o)};this.AddHighlight=function(t,n,i){var o=new b;o.SetDocumentGuid(e);o.AddHighlightNote(t,i)};this.UpdateHighlight=function(t,n,i){var o=new b;o.SetDocumentGuid(e);o.UpdateHighlight(t,n,i)};this.DeleteHighlight=function(t,n,i){var o=new b;o.SetDocumentGuid(e);o.DeleteHighlightNote(t.id,n,i)};this.GetNotesAndHighlights=function(e,t,i,o,r,a,s,l){var d=new p["default"];n&&n.contextualInfo&&(d.ContextualInfo=n.contextualInfo);d.GetNotesAndHighlights(e,t,i,o,r,a,s,l)}};var N=n(2595),E=n(8286),A=n(2714),w=n(9133),x=n(966),T=n(1235),I=n(4383),D=n(8497);const k=function(e,t){this.AreSharedAnnotationsAllowed=function(){return d["default"].AreSharedAnnotationsAllowed()};this.AreSharedNotesAllowed=function(){return d["default"].AreSharedNotesAllowed()};this.GetAnnotations=function(e,n,o,r,a,s,c,u,f,h,p){if((0,N.IsNullOrEmpty)(e))throw new Error("Invalid document guid passed to AnnotationsProxy for GetAnnotations call.");if((0,N.IsNullOrEmpty)(n))throw new Error("Invalid OnePass user name passed to AnnotationsProxy for GetAnnotations call.");if((0,N.IsNullOrEmpty)(o))throw new Error("Invalid time zone passed to AnnotationsProxy for GetAnnotations call.");if(this.AreSharedNotesAllowed()||w["default"].isPUIAllowed()){if(h&&t)throw new Error("Invalid containerId passed to AnnotationsProxy for GetAnnotations call.")}else if(!h)throw new Error("Invalid containerId passed to AnnotationsProxy for GetAnnotations call.");var g="/Document/v1/UserDocuments/"+e+"/"+h+"/Annotations?onePassUserName="+encodeURIComponent(n)+"&tz="+o;g=d["default"].AddSectionFilterToUrl(g);i(g=this.EnsureUrlParametersForAnnotationLocating(g),r,(function(e){a&&a(e);(0,v.publishErrorMessage)(m["default"].Document,l["default"].lookup("SC.Foldering.SharedNotesErrors.ErrorGettingNotes","An error occurred while getting the notes. Try again."));throw new Error("An error occurred while getting the notes. Try again.")}),f,p,!0)};this.GetAnnotationsV2=function(e,t,n,o,r,a,s,d,c,u,f){if((0,N.IsNullOrEmpty)(e))throw new Error("Invalid document guid passed to AnnotationsProxy for GetAnnotations call.");if((0,N.IsNullOrEmpty)(t))throw new Error("Invalid OnePass user name passed to AnnotationsProxy for GetAnnotations call.");if((0,N.IsNullOrEmpty)(n))throw new Error("Invalid time zone passed to AnnotationsProxy for GetAnnotations call.");if((0,N.IsNullOrEmpty)(u))throw new Error("Invalid containerId passed to AnnotationsProxy for GetAnnotations call.");var h="";h="/Document/v2/UserDocuments/"+e+"/"+u+"/Annotations?onePassUserName="+encodeURIComponent(t)+"&tz="+n;i(h=this.EnsureUrlParametersForAnnotationLocating(h),o,(function(e){r&&r(e);(0,
v.publishErrorMessage)(m["default"].Document,l["default"].lookup("SC.Foldering.SharedNotesErrors.ErrorGettingNotes","An error occurred while getting the notes. Try again."));throw new Error("An error occurred while getting the notes. Try again.")}),c,f,!0)};this.GetReviewerPermission=function(e,t,n,o,r){i("document/v1/ReviewerStatus/"+e+"/Status",t,n,o,r,!1)};this.InitializePreviouslyShared=function(e,t){function n(){(0,v.publishErrorMessage)(m["default"].Document,l["default"].lookup("SC.Foldering.SharedNotesErrors.ErrorGettingPrevious","An error occurred while getting previously shared contacts. Try again."));throw new Error("An error occurred while getting previously shared contacts. Try again.")}i("/Document/v2/ShareNoteLastUse?q="+(new Date).getTime(),(function(e){var t=[];e&&(t=(t=JSON.parse(e)).SelectedContacts);if(t&&0!=t.length){o(I["default"].Relative(I["default"].Rest.GetFirmContactsChunkV1({startIndex:0,numberOfRecordsToGet:500,filter:null,includeSelf:!1,includeCobaltContacts:!1})),(function(e){for(let n=0;n<t.length;n++)for(var i=0;i<e.Contacts.length;i++)if(t[n].ContactId===e.Contacts[i].ContactId){t[n].BrowserKey=e.Contacts[i].BrowserKey;t[n].PrismGuid=e.Contacts[i].PrismGuid;t[n].LastName=e.Contacts[i].LastName;break}var a,s=[],l=0,d=function(e){for(let n=0;n<t.length;n++)if(t[n].DecryptedGroupId&&t[n].DecryptedGroupId===e.GroupPermission){t[n].BrowserKey=e.BrowserKey;t[n].GroupId=e.GroupId;t[n].DecryptedGroupId=e.GroupPermission;t[n].GroupName=e.GroupName;break}if(++c==u)for(let e=0;e<t.length;e++){if(t[e].GroupId){a={BrowserKey:t[e].BrowserKey,DecryptedGroupId:t[e].DecryptedGroupId,GroupId:t[e].GroupId,GroupName:t[e].GroupName,GroupPermission:"WRITE",GroupType:"FRMWD",NumberOfMembers:0,DuplicateMemberAdded:!1};s[l]=a;l++}else{a={FirstName:t[e].FirstName,LastName:t[e].LastName,PrismGuid:t[e].PrismGuid,ContactId:t[e].ContactId,Type:"PENDING",BrowserKey:t[e].BrowserKey};s[l]=a;l++}if(l==t.length){var i={SelectedContacts:s};if(i.SelectedContacts.length>0){r("/Document/v2/ShareNoteLastUse?q="+(new Date).getTime(),i,null,(function(){}),n)}}}},c=0,u=0;for(let e=0;e<t.length;e++)if("OWNER"!==t[e].PermissionRole){var f=function(){};if(t[e].GroupId){var h=I["default"].Relative(I["default"].Rest.GetDecryptedId({Id:t[e].DecryptedGroupId,type:"GROUP"}));u++;o(h,f=d,n)}}if(0==u){for(let e=0;e<t.length;e++)if(t[e].ContactId){a={FirstName:t[e].FirstName,LastName:t[e].LastName,PrismGuid:t[e].PrismGuid,ContactId:t[e].ContactId,Type:"PENDING",BrowserKey:t[e].BrowserKey};s[l]=a;l++}if(l==t.length){var p={SelectedContacts:s};if(p.SelectedContacts.length>0){r("/Document/v2/ShareNoteLastUse?q="+(new Date).getTime(),p,null,(function(){}),n)}}}}),n)}}),n)};this.UnshareNotePermissions=function(e,t){if((0,N.IsNullOrEmpty)(e))throw new Error("Invalid document guid passed to AnnotationsProxy for GetNotesPermissions call.");var i={};n("Document/v2/UserDocuments/Annotations/"+e+"/Permissions",i,(function(e){t(e)}),(function(){(0,v.publishErrorMessage)(m["default"].Document,l["default"].lookup("SC.Foldering.SharedNotesErrors.ErrorUnsharing","An error occurred while unsharing the note. Try again."));throw new Error("An error occurred while unsharing the note. Try again.")}),i)};this.TransformNotePermissions=function(e,t,n,i){return function(t){const n=t;if(1==n.length&&"OWNER"==n[0].PermissionRole){var r=JSON.stringify({SelectedContacts:[]});e(r)}else{o(I["default"].Relative(I["default"].Rest.GetFirmContactsChunkV1({startIndex:0,numberOfRecordsToGet:500,filter:null,includeSelf:!1,includeCobaltContacts:!1})),(function(t){var r,a;for(let e=0;e<n.length;e++)"OWNER"==n[e].PermissionRole&&(r=e);void 0!==r&&n.splice(r,1);for(let e=0;e<n.length;e++)for(var s=0;s<t.Contacts.length;s++)if(n[e].ContactId===t.Contacts[s].ContactId){n[e].BrowserKey=t.Contacts[s].BrowserKey;n[e].PrismGuid=t.Contacts[s].PrismGuid;n[e].LastName=t.Contacts[s].LastName;break}var l=[],d=0,c=function(t){for(let e=0;e<n.length;e++)if(n[e].ContactId===t.GroupPermission){n[e].BrowserKey=t.BrowserKey;n[e].GroupId=t.GroupId;n[e].DecryptedGroupId=t.GroupPermission;n[e].GroupName=t.GroupName;n[e].IsAllContactsGroup=t.IsAllContactsGroup;break}if(++u==f)for(let t=0;t<n.length;t++){if("GROUP"===n[t].MemberType){a={BrowserKey:n[t].BrowserKey,DecryptedGroupId:n[t].DecryptedGroupId,GroupId:n[t].GroupId,GroupName:n[t].GroupName,GroupPermission:"WRITE",GroupType:"FRMWD",NumberOfMembers:0,DuplicateMemberAdded:!1,IsAllContactsGroup:n[t].IsAllContactsGroup};l[d]=a;d++}else{a={FirstName:n[t].FirstName,LastName:n[t].LastName,PrismGuid:n[t].PrismGuid,ContactId:n[t].ContactId,Type:"PENDING",BrowserKey:n[t].BrowserKey};l[d]=a;d++}if(d==n.length){var i=JSON.stringify({SelectedContacts:l});e(i)}}},u=0,f=0;for(let e=0;e<n.length;e++)if("OWNER"!==n[e].PermissionRole){var h=I["default"].Relative(I["default"].Rest.GetDecryptedId({Id:n[e].ContactId,type:n[e].MemberType})),p=function(){};if("GROUP"===n[e].MemberType){f++;p=c}o(h,p,i)}if(0==f){for(let e=0;e<n.length;e++)if(n[e].ContactId){a={FirstName:n[e].FirstName,LastName:n[e].LastName,PrismGuid:n[e].PrismGuid,ContactId:n[e].ContactId,Type:"PENDING",BrowserKey:n[e].BrowserKey};l[d]=a;d++}if(d==n.length){var m=JSON.stringify({SelectedContacts:l});e(m)}}}),i)}}};this.GetNotePermissionsFromNoteData=function(e,t,n,i){this.TransformNotePermissions(i,t,n,(function(){(0,v.publishErrorMessage)(m["default"].Website,l["default"].lookup("SC.Foldering.SharedNotesErrors.ErrorPermissions","An error occurred while getting the permissions. Try again."));throw new Error("An error occurred while getting the permissions. Try again.")}))(e.permissions)};this.GetNotePermissions=function(e,t,i,o){if((0,N.IsNullOrEmpty)(e))throw new Error("Invalid document guid passed to AnnotationsProxy for GetNotesPermissions call.");function r(){(0,v.publishErrorMessage)(m["default"].Document,l["default"].lookup("SC.Foldering.SharedNotesErrors.ErrorPermissions","An error occurred while getting the permissions. Try again."));throw new Error("An error occurred while getting the permissions. Try again.")}var a="Document/v2/UserDocuments/Annotations/"+e+"/Permissions",s={},d=this.TransformNotePermissions(t,i,o,r);const c=D["default"].GetNotePermissions(e);c?d(c):n(a,s,d,r,s)};this.GetAdditionalHeaders=function(e){let t=null;t=e.ContactId&&"GROUP"!==e.MemberType?{permissionRole:"REVIEWER",memberType:"USER",memberId:e.ContactId}:e.IsAllContactsGroup?{permissionRole:"REVIEWER",memberType:"FIRM_GROUP",memberId:e.GroupContactId||e.ContactId}:e.DecryptedGroupId?{permissionRole:"REVIEWER",memberType:"GROUP",memberId:e.DecryptedGroupId}:{permissionRole:"REVIEWER",memberType:"GROUP",memberId:e.GroupContactId||e.ContactId};return t};this.AddNotePermission=function(e,t,i){var r;const a=this.GetAdditionalHeaders(i);if(!d["default"].AreSharedHighlightsAllowed()&&(0,N.IsNullOrEmpty)(e))throw new Error("Invalid document annotationId passed to AnnotationsProxy for AddNotePermission call.");if((0,N.IsNullOrEmpty)(a.memberId))throw new Error("Invalid document memberId passed to AnnotationsProxy for AddNotePermission call.");const s=()=>D["default"].AddPermissionToNotesData(e||t,i,a),c=()=>{(0,v.publishErrorMessage)(m["default"].Document,l["default"].lookup("SC.Foldering.SharedNotesErrors.ErrorAddPermissions","An error occurred while adding permissions. Try again."));throw new Error("An error occurred while adding permissions. Try again.")};if("GROUP"==a.memberType)if("1|"===a.memberId.substring(0,2)){o(I["default"].Relative(I["default"].Rest.GetGroupId({groupId:a.memberId})),(function(i){n(r=t?"Document/v2/UserDocuments/Annotations/"+t+"/"+e+"/Permission/"+i.GroupName:"Document/v2/UserDocuments/Annotations/null/"+e+"/Permission/"+i.GroupName,a,s,c,a)}),c)}else n(r=t?"Document/v2/UserDocuments/Annotations/"+t+"/"+e+"/Permission/"+a.memberId:"Document/v2/UserDocuments/Annotations/null/"+e+"/Permission/"+a.memberId,a,s,c,a);else n(r=t?"Document/v2/UserDocuments/Annotations/"+t+"/"+e+"/Permission/"+a.memberId:"Document/v2/UserDocuments/Annotations/null/"+e+"/Permission/"+a.memberId,a,s,c,a)};this.RemoveNotePermission=function(e,t,n){const i=this.GetAdditionalHeaders(n);if(!d["default"].AreSharedHighlightsAllowed()&&(0,
N.IsNullOrEmpty)(e))throw new Error("Invalid document annotationId passed to AnnotationsProxy for RemoveNotePermission call.");if((0,N.IsNullOrEmpty)(i.memberId))throw new Error("Invalid document memberId passed to AnnotationsProxy for RemoveNotePermission call.");const o=()=>{(0,v.publishErrorMessage)(m["default"].Document,l["default"].lookup("SC.Foldering.SharedNotesErrors.ErrorRemovingPermissions","An error occurred while removing permissions. Try again."));throw new Error("An error occurred while removing permissions. Try again.")},r=()=>D["default"].RemovePermissionFromNotesData(e||t,n,i);var s;"GROUP"==i.memberType?"1|"===i.memberId.substring(0,2)?A["default"].GetCobaltGroupDetails(i.memberId,(function(n){a(s=t?"Document/v2/UserDocuments/Annotations/"+t+"/"+e+"/Permission/"+n.GroupName+"/group":"Document/v2/UserDocuments/Annotations/null/"+e+"/Permission/"+n.GroupName+"/group",r,o,i)}),o):a(s=t?"Document/v2/UserDocuments/Annotations/"+t+"/"+e+"/Permission/"+i.memberId+"/group":"Document/v2/UserDocuments/Annotations/null/"+e+"/Permission/"+i.memberId+"/group",r,o,i):"FIRM_GROUP"==i.memberType?a(s=t?"Document/v2/UserDocuments/Annotations/"+t+"/"+e+"/Permission/"+i.memberId+"/firm_group":"Document/v2/UserDocuments/Annotations/null/"+e+"/Permission/"+i.memberId+"/firm_group",r,o,i):a(s=t?"Document/v2/UserDocuments/Annotations/"+t+"/"+e+"/Permission/"+i.memberId+"/user":"Document/v2/UserDocuments/Annotations/null/"+e+"/Permission/"+i.memberId+"/user",r,o,i)};this.CreateNote=function(e,t,i,o,r){var a={};a[E["default"].headers.documentContentCacheKey]=r;n("Document/v1/UserDocuments/"+e+"/Annotations/Notes",t,i,(e=>{o&&o(e);(0,v.publishErrorMessage)(m["default"].Document,l["default"].lookup("SC.Foldering.SharedNotesErrors.ErrorCreatingPermissions","An error occurred while creating the note. Try again."));throw new Error("An error occurred while creating the note. Try again.")}),a)};this.CreateInlineNoteV2=function(e,t,i,o,r){if(!this.AreSharedAnnotationsAllowed())throw new Error("Invalid Proxy Call.");var a={};a[E["default"].headers.documentContentCacheKey]=r;n("Document/v2/UserDocuments/"+e+"/Annotations/InlineNotes",t,i,(function(e){o&&o(e);(0,v.publishErrorMessage)(m["default"].Document,l["default"].lookup("SC.Foldering.SharedNotesErrors.ErrorCreatingPermissions","An error occurred while creating the note. Try again."));throw new Error("An error occurred while creating the note. Try again.")}),a)};this.CreateDocLevelNoteV2=function(e,t,i,o,r){if(!this.AreSharedAnnotationsAllowed())throw new Error("Invalid Proxy Call.");var a={};a[E["default"].headers.documentContentCacheKey]=r;n("Document/v2/UserDocuments/"+e+"/Annotations/DocNotes",t,i,(function(e){o&&o(e);(0,v.publishErrorMessage)(m["default"].Document,l["default"].lookup("SC.Foldering.SharedNotesErrors.ErrorCreatingPermissions","An error occurred while creating the note. Try again."));throw new Error("An error occurred while creating the note. Try again.")}),a)};this.CreateHighlight=function(e,t,i,o,r){var a={};a[E["default"].headers.documentContentCacheKey]=i;var s="Document/v1/UserDocuments/"+e+"/Annotations/Highlights?contextData="+I["default"].PageContextData;s=d["default"].AddSectionFilterToUrl(s);n(s=this.EnsureUrlParametersForAnnotationLocating(s),t,o,(function(e){r&&r(e);(0,v.publishErrorMessage)(m["default"].Document,l["default"].lookup("SC.Foldering.SharedNotesErrors.ErrorCreatingHighlight","An error occurred while creating the highlight. Try again."));throw new Error("An error occurred while creating the highlight. Try again.")}),a)};this.CreateHighlightV2=function(e,t,i,o,r){if(!this.AreSharedAnnotationsAllowed())throw new Error("Invalid Proxy Call.");var a={};a[E["default"].headers.documentContentCacheKey]=i;var s="Document/v2/UserDocuments/"+e+"/Annotations/Highlights?contextData="+I["default"].PageContextData;n(s=this.EnsureUrlParametersForAnnotationLocating(s),t,o,(function(e){r&&r(e);(0,v.publishErrorMessage)(m["default"].Document,l["default"].lookup("SC.Foldering.SharedNotesErrors.ErrorCreatingHighlight","An error occurred while creating the highlight. Try again."));throw new Error("An error occurred while creating the highlight. Try again.")}),a)};this.UpdateNote=function(e,t,n,i,o,a){var s={};s[E["default"].headers.documentContentCacheKey]=a;r("Document/v1/UserDocuments/"+e+"/Annotations/Notes/"+t,n,s,i,(function(e){o&&o(e);(0,v.publishErrorMessage)(m["default"].Document,l["default"].lookup("SC.Foldering.SharedNotesErrors.ErrorUpdatingNote","An error occurred while updating the note. Try again."));throw new Error("An error occurred while updating the note. Try again.")}))};this.UpdateInlineNoteV2=function(e,t,n,i,o,a){if(!this.AreSharedAnnotationsAllowed())throw new Error("Invalid Proxy Call.");var s={};s[E["default"].headers.documentContentCacheKey]=a;r("Document/v2/UserDocuments/"+e+"/Annotations/InlineNotes/"+t,n,s,i,(function(e){o&&o(e);(0,v.publishErrorMessage)(m["default"].Document,l["default"].lookup("SC.Foldering.SharedNotesErrors.ErrorUpdatingNote","An error occurred while updating the note. Try again."));throw new Error("An error occurred while updating the note. Try again.")}))};this.UpdateDocLevelNoteV2=function(e,t,n,i,o,a){var s={};s[E["default"].headers.documentContentCacheKey]=a;r("Document/v2/UserDocuments/"+e+"/Annotations/DocNotes/"+t,n,s,i,(function(e){o&&o(e);(0,v.publishErrorMessage)(m["default"].Document,l["default"].lookup("SC.Foldering.SharedNotesErrors.ErrorUpdatingNote","An error occurred while updating the note. Try again."));throw new Error("An error occurred while updating the note. Try again.")}))};this.UpdateHighlight=function(e,t,n,i,o,a){r("Document/v3/UserDocuments/"+e+"/Annotations/Highlights/"+t,n,{[E["default"].headers.documentContentCacheKey]:i},o,(e=>{a&&a(e);(0,v.publishErrorMessage)(m["default"].Document,l["default"].lookup("SC.Foldering.SharedNotesErrors.ErrorUpdatingHighlight","An error occurred while updating the highlight. Try again."));throw new Error("An error occurred while updating the highlight. Try again.")}))};this.DeleteNote=function(e,t,n,i,o){var r={};r[E["default"].headers.documentContentCacheKey]=o;a("Document/v1/UserDocuments/"+t+"/Annotations/Notes/"+e,n,(function(e){i&&i(e);(0,v.publishErrorMessage)(m["default"].Document,l["default"].lookup("SC.Foldering.SharedNotesErrors.ErrorDeletingNote","An error occurred while deleting the note. Try again."));throw new Error("An error occurred while deleting the note. Try again.")}),r)};this.DeleteInlineNoteV2=function(e,t,n,i,o,r,s){if(!this.AreSharedAnnotationsAllowed())throw new Error("Invalid Proxy Call.");var d={};d[E["default"].headers.documentContentCacheKey]=s;a("Document/v2/UserDocuments/"+e+"/"+t+"/Annotations/Highlight/"+n+"/Notes/"+i,o,(function(e){r&&r(e);(0,v.publishErrorMessage)(m["default"].Document,l["default"].lookup("SC.Foldering.SharedNotesErrors.ErrorDeletingNote","An error occurred while deleting the note. Try again."));throw new Error("An error occurred while deleting the note. Try again.")}),d)};this.DeleteDocLevelNoteV2=function(e,t,n,i,o){if(!this.AreSharedAnnotationsAllowed())throw new Error("Invalid Proxy Call.");var r={};r[E["default"].headers.documentContentCacheKey]=o;a("Document/v2/UserDocuments/"+t+"/Annotations/DocNotes/"+e,n,(function(e){i&&i(e);(0,v.publishErrorMessage)(m["default"].Document,l["default"].lookup("SC.Foldering.SharedNotesErrors.ErrorDeletingNote","An error occurred while deleting the note. Try again."));throw new Error("An error occurred while deleting the note. Try again.")}),r)};this.DeleteHighlight=function(e,t,n,i,o){var r={};r[E["default"].headers.documentContentCacheKey]=o;a("Document/v1/UserDocuments/"+e+"/Annotations/Highlights/"+t,n,(function(e){i&&i(e);(0,v.publishErrorMessage)(m["default"].Document,l["default"].lookup("SC.Foldering.SharedNotesErrors.ErrorDeletingHighlight","An error occurred while deleting the highlight. Try again."));throw new Error("An error occurred while deleting the highlight. Try again.")}),r)};this.DeleteHighlightV2=function(e,t,n,i,o){if(!this.AreSharedAnnotationsAllowed())throw new Error("Invalid Proxy Call.");var r={};r[E["default"].headers.documentContentCacheKey]=o
;a("Document/v2/UserDocuments/"+e+"/Annotations/Highlights/"+t,n,(function(e){i&&i(e);(0,v.publishErrorMessage)(m["default"].Document,l["default"].lookup("SC.Foldering.SharedNotesErrors.ErrorDeletingHighlight","An error occurred while deleting the highlight. Try again."));throw new Error("An error occurred while deleting the highlight. Try again.")}),r)};this.UpdatePreviouslySelectedContacts=function(e,t,n,i){function a(){(0,v.publishErrorMessage)(m["default"].Document,l["default"].lookup("SC.Foldering.SharedNotesErrors.ErrorUpdatingPreviously","An error occurred while saving previously shared contacts. Try again."));throw new Error("An error occurred while saving previously shared contacts. Try again.")}var s=0,d=0;for(let t=0;t<e.SelectedContacts.length;t++)e.SelectedContacts[t].GroupId&&s++;var c=function(n,i){o(I["default"].Relative(I["default"].Rest.GetGroupId({groupId:n})),(function(o){e.SelectedContacts[i].GroupId=n;e.SelectedContacts[i].DecryptedGroupId=o.GroupName;d++;if(s==d){t(e);if(e.SelectedContacts.length>0){r("/Document/v2/ShareNoteLastUse?q="+(new Date).getTime(),e,null,(function(){}),a)}}}),a)};if(0==s){t(e);if(e.SelectedContacts.length>0){r("/Document/v2/ShareNoteLastUse?q="+(new Date).getTime(),e,null,(function(){}),a)}}else for(let t=0;t<e.SelectedContacts.length;t++)e.SelectedContacts[t].GroupId&&"1|"===e.SelectedContacts[t].GroupId.substring(0,2)&&c(e.SelectedContacts[t].GroupId,t)};this.GetPreviouslySelectedContacts=function(e){i("/Document/v2/ShareNoteLastUse?q="+(new Date).getTime(),(function(t){if(""!=t){var n=JSON.parse(t);e(JSON.stringify(n))}else e(JSON.stringify({SelectedContacts:[]}))}),(function(){(0,v.publishErrorMessage)(m["default"].Document,l["default"].lookup("SC.Foldering.SharedNotesErrors.ErrorGettingPrevious","An error occurred while getting previously shared contacts. Try again."));throw new Error("An error occurred while getting previously shared contacts. Try again.")}))};this.GetDecryptedGroupIds=function(e,t,n){var i=I["default"].Relative(I["default"].Rest.GetDecryptedGroupId(null));T["default"].Post({vertical:m["default"].Website,relativeUrl:i,jsonObject:e,responseIsJson:!0,successCallback:t,timeoutMillisecs:18e4,failedCallback:function(e){n&&n(e);(0,v.publishErrorMessage)(m["default"].Website,l["default"].lookup("SC.Foldering.SharedNotesErrors.ErrorGettingPrevious","An error occurred while getting previously shared contacts. Try again."));throw new Error("An error occurred while getting previously shared contacts. Try again.")}})};this.EnsureUrlParametersForAnnotationLocating=function(e){return e};function n(t,n,i,o,r){e&&(t=d["default"].AddQueryParamToUrl(t,"impersonationKey",e));n.TimeZone=x["default"].Get("Global","TimeZone");T["default"].Post({vertical:m["default"].Document,successCallback:i,failedCallback:o,relativeUrl:t,jsonObject:n,responseIsJson:!0,contentType:"application/json",headers:r,timeoutMillisecs:18e4})}function i(t,n,i,o,r,a){a&&e&&(t=d["default"].AddQueryParamToUrl(t,"impersonationKey",e));var s={};o&&(s[E["default"].headers.documentContentCacheKey]=o);r&&(s[E["default"].headers.contextualInfoHeader]=r.toString());T["default"].Get({vertical:m["default"].Document,successCallback:n,failedCallback:i,relativeUrl:t,responseIsJson:!0,headers:s,timeoutMillisecs:18e4})}function o(e,t,n){T["default"].Get({vertical:m["default"].Website,successCallback:t,failedCallback:n,relativeUrl:e,responseIsJson:!0,headers:{},timeoutMillisecs:18e4})}function r(t,n,i,o,r){e&&(t+="?impersonationKey="+e);n.shareNoteOrigin=n.rootNote;n.TimeZone=x["default"].Get("Global","TimeZone");T["default"].Put({vertical:m["default"].Document,successCallback:o,failedCallback:r,relativeUrl:t,jsonObject:n,responseIsJson:!0,contentType:"application/json",headers:i})}function a(t,n,i,o){e&&(t+="?impersonationKey="+e);T["default"].Delete({vertical:m["default"].Document,successCallback:n,failedCallback:i,relativeUrl:t,responseIsJson:!0,headers:o,timeoutMillisecs:18e4})}};const M={CreateAnnotationsProvider:function(e,t){var n=new p["default"],i=!1,o=null,a=null;n.GetMetaInformation(e,(function(e){var t=e.metaInformation;if(t.containerId){i=!0;o=t.containerId;a=t.impersonationKey||null}}));return this.AreSharedNotesAllowed()||w["default"].isPUIAllowed()?new h(e,new k(a,i),g["default"].GetClientMatter(),n.GetDocumentContentCacheKeyFromDOM(),o,t):i&&!r["default"].Instance.IsUserDocument?new h(e,new k(a),g["default"].GetClientMatter(),n.GetDocumentContentCacheKeyFromDOM(),o,t):new S(e,new k(a),t)},CreateDocumentProvider:function(){return new p["default"]},AreSharedNotesAllowed:function(){return d["default"].AreSharedNotesAllowed()}}},3607:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>r});var i=n(8230),o=n(2656);const r={DisplayAllHighlights:function(e){for(var t=(0,i.GetAllCachedHighlightIds)(e),n=0;n<t.length;++n){var r=o["default"].GetInstanceIdClass(t[n]),a=document.querySelector("."+r);a?.classList.remove("co_hideHighlight");var s=document.querySelector("."+r);if(s?.classList.contains("co_hlSharedHide")){s.classList.add("co_hlShared");s.classList.remove("co_hlSharedHide")}}},DisplayNoHighlights:function(e){for(var t=(0,i.GetAllCachedHighlightIds)(e),n=0;n<t.length;++n){var r=o["default"].GetInstanceIdClass(t[n]),a=document.querySelector("."+r);a?.classList.add("co_hideHighlight");var s=document.querySelector("."+r);if(s?.classList.contains("co_hlShared")){s.classList.add("co_hlSharedHide");s.classList.remove("co_hlShared")}}},DisplayMyHighlights:function(e){for(var t=(0,i.GetAllCachedHighlightIds)(e),n=0;n<t.length;++n){var r=(0,i.GetCachedHighlightData)(t[n]),a=o["default"].GetInstanceIdClass(t[n]),s=document.querySelector("."+a);if(r.createdByCurrentUser){s?.classList.remove("co_hideHighlight");const e=document.querySelector("."+a);if(e?.classList.contains("co_hlSharedHide")){e.classList.add("co_hlShared");e.classList.remove("co_hlSharedHide")}}else{s?.classList.add("co_hideHighlight");const e=document.querySelector("."+a);if(e?.classList.contains("co_hlShared")){e.classList.add("co_hlSharedHide");e.classList.remove("co_hlShared")}}}}}},3673:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>i});const i=Object.freeze({Highlight:0,Note:1,DocumentLevelNote:2,Snippet:3,Unknown:4})},3788:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>C});var i=n(6669),o=n.n(i),r=n(1434),a=n.n(r),s=n(519),l=n(2595),d=n(1422),c=n(5024),u=n(2496),f=n(1045),h=n(7271),p=n(3839),m=n(3890),g=n(8286),y=n(2065),v=n(2359);const C=a().extend({init:function(){},dragDropGroupId:null,dragOptions:null,eventName:"Cobalt.Document.DocumentLinks.DraggableUID",name:"Cobalt.Document.DocumentLinks.DraggableUID",initializeDraggables:function(){var e=this;if(null==e.dragDropGroupId){e.dragDropGroupId=(0,h.CreateDragDrop)();e.sendGroupIdToDock(e.dragDropGroupId);e.dragOptions={DragStart:function(){},Helper:function(){var t=void 0,n=e.getSelectedDragItems(this),i=n.length;1==i&&(t=y["default"].GetInnerText(this));return m["default"].createDraggable(t,i,n)}}}},isDraggableLink:function(e){return y["default"].IsFolderable(document)&&"fullscreen"!==f["default"].ReadingModeView.Get()&&s["default"].HasClass(e,g["default"].classes.draggableLink)},publishDraggableLink:function(e){var t=g["default"].classes.registeredDraggableLink,n=this;if(e&&null!=e&&null!==n.dragDropGroupId&&n.dragOptions&&!0!==s["default"].HasClass(e,t)){s["default"].AddClass(e,t);var i=n.dragDropGroupId;n.isNewRIHeader()&&(i=0);(0,h.RegisterDraggables)(i,e,n.dragOptions)}},destroyDraggableLink:function(e){const t=g["default"].classes.registeredDraggableLink;if(s["default"].HasClass(e,t)){s["default"].RemoveClass(e,t);const n=this.isNewRIHeader()?0:this.dragDropGroupId;(0,h.DestroyDraggables)(n,this.dragOptions,e)}},getSelectedDragItems:function(e){var t=this;return[function(n){var i=e.href;if((0,l.IsNotNullOrEmpty)(i))if(i.indexOf("/Link/Document/FullText")>-1){(new v["default"]).ResolveLinkToGuid(e.search,n)}else{var o=t.getDocumentGuidAndTypeFromUrl(i);(0,l.IsNotNullOrEmpty)(o.documentGuid)&&n(o.documentGuid,o.contentType,o.metadata)}}]},getDocumentGuidAndTypeFromUrl:function(e){return{documentGuid:y["default"].GetDocumentGuidFromUrl(e),contentType:null}},sendGroupIdToDock:function(){
var e=this,t={UID:e.dragDropGroupId},n=new c["default"](t,{},e.name,"1.0");d["default"].Publish(e.eventName,n)},AddDraggableHandlersToLinks:function(e){if(null!=e){var t=e.getElementsByTagName("a");if(null!=t)for(var n=t.length;n--;){var i=t[n];null!=i&&this.isDraggableLink(i)&&this.publishDraggableLink(i)}}},isNewRIHeader:function(){return!o().isNull(u["default"].PageName)&&-1!==u["default"].PageName.indexOf("RelatedInfo")&&p["default"].UsePageHeaderV2}})},3793:(e,t,n)=>{e.exports=n(4507)(59470)},3839:(e,t,n)=>{e.exports=n(615)(6700)},3890:(e,t,n)=>{e.exports=n(4507)(80415)},3922:()=>{void 0===Date.CultureInfo&&(Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence)/i,subtract:/^(-|bef(ore)?|ago)/i,yesterday:/^yes(terday)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m(onth)?s?/i,day:/^d(ay)?s?/i,year:/^y(ear)?s?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(:|a(?!u|p)|p)/i},timezones:[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]});(function(){var e,t,n,i=Date,o=i.prototype,r=i.CultureInfo,a=function(e,t){t||(t=2);return("000"+e).slice(-1*t)};o.clearTime=function(){this.setHours(0);this.setMinutes(0);this.setSeconds(0);this.setMilliseconds(0);return this};o.setTimeToNow=function(){var e=new Date;this.setHours(e.getHours());this.setMinutes(e.getMinutes());this.setSeconds(e.getSeconds());this.setMilliseconds(e.getMilliseconds());return this};i.today=function(){return(new Date).clearTime()};i.compare=function(e,t){if(isNaN(e)||isNaN(t))throw new Error(e+" - "+t);if(e instanceof Date&&t instanceof Date)return e<t?-1:e>t?1:0;throw new TypeError(e+" - "+t)};i.equals=function(e,t){return 0===e.compareTo(t)};i.getDayNumberFromName=function(e){for(var t=r.dayNames,n=r.abbreviatedDayNames,i=r.shortestDayNames,o=e.toLowerCase(),a=0;a<t.length;a++)if(t[a].toLowerCase()==o||n[a].toLowerCase()==o||i[a].toLowerCase()==o)return a;return 3==o.length?"sun mon tue wed thu fri sat".indexOf(o)/4:-1};i.getMonthNumberFromName=function(e){for(var t=r.monthNames,n=r.abbreviatedMonthNames,i=e.toLowerCase(),o=0;o<t.length;o++)if(t[o].toLowerCase()==i||n[o].toLowerCase()==i)return o;return-1};i.isLeapYear=function(e){return e%4==0&&e%100!=0||e%400==0};i.getDaysInMonth=function(e,t){return[31,i.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]};i.getTimezoneAbbreviation=function(e){for(var t=r.timezones,n=0;n<t.length;n++)if(t[n].offset===e)return t[n].name;return null};i.getTimezoneOffset=function(e){for(var t=r.timezones,n=0;n<t.length;n++)if(t[n].name===e.toUpperCase())return t[n].offset;return null};o.clone=function(){return new Date(this.getTime())};o.compareTo=function(e){return Date.compare(this,e)};o.equals=function(e){return Date.equals(this,e||new Date)};o.between=function(e,t){return this.getTime()>=e.getTime()&&this.getTime()<=t.getTime()};o.isAfter=function(e){return 1===this.compareTo(e||new Date)};o.isBefore=function(e){return-1===this.compareTo(e||new Date)};o.isToday=function(){return this.isSameDay(new Date)};o.isSameDay=function(e){return this.clone().clearTime().equals(e.clone().clearTime())};o.addMilliseconds=function(e){this.setMilliseconds(this.getMilliseconds()+e);return this};o.addSeconds=function(e){return this.addMilliseconds(1e3*e)};o.addMinutes=function(e){return this.addMilliseconds(6e4*e)};o.addHours=function(e){return this.addMilliseconds(36e5*e)};o.addDays=function(e){this.setDate(this.getDate()+e);return this};o.addWeeks=function(e){return this.addDays(7*e)};o.addMonths=function(e){var t=this.getDate();this.setDate(1);this.setMonth(this.getMonth()+e);this.setDate(Math.min(t,i.getDaysInMonth(this.getFullYear(),this.getMonth())));return this};o.addYears=function(e){return this.addMonths(12*e)};o.add=function(e){if("number"==typeof e){this._orient=e;return this}var t=e;t.milliseconds&&this.addMilliseconds(t.milliseconds);t.seconds&&this.addSeconds(t.seconds);t.minutes&&this.addMinutes(t.minutes);t.hours&&this.addHours(t.hours);t.weeks&&this.addWeeks(t.weeks);t.months&&this.addMonths(t.months);t.years&&this.addYears(t.years);t.days&&this.addDays(t.days);return this};o.getWeek=function(){var i,o,r,a,s,l,d,c,u,f;e=e||this.getFullYear();t=t||this.getMonth()+1;n=n||this.getDate();if(t<=2){u=(o=((i=e-1)/4|0)-(i/100|0)+(i/400|0))-(r=((i-1)/4|0)-((i-1)/100|0)+((i-1)/400|0));s=0;l=n-1+31*(t-1)}else{s=(u=(o=((i=e)/4|0)-(i/100|0)+(i/400|0))-(r=((i-1)/4|0)-((i-1)/100|0)+((i-1)/400|0)))+1;l=n+(153*(t-3)+2)/5+58+u}e=t=n=null;return f=(c=l+3-(a=(l+(d=(i+o)%7)-s)%7)|0)<0?53-((d-u)/5|0):c>364+u?1:1+(c/7|0)};o.getISOWeek=function(){e=this.getUTCFullYear();t=this.getUTCMonth()+1;n=this.getUTCDate();return a(this.getWeek())};o.setWeek=function(e){return this.moveToDayOfWeek(1).addWeeks(e-this.getWeek())};i._validate=function(e,t,n,i){if(void 0===e)return!1;if("number"!=typeof e)throw new TypeError(e+" is not a Number.");if(e<t||e>n)throw new RangeError(e+" is not a valid value for "+i+".");return!0};i.validateMillisecond=function(e){return i._validate(e,0,999,"millisecond")};i.validateSecond=function(e){return i._validate(e,0,59,"second")};i.validateMinute=function(e){return i._validate(e,0,59,"minute")};i.validateHour=function(e){return i._validate(e,0,23,"hour")};i.validateDay=function(e,t,n){return i._validate(e,1,i.getDaysInMonth(t,n),"day")};i.validateMonth=function(e){return i._validate(e,0,11,"month")};i.validateYear=function(e){return i._validate(e,0,9999,"year")};o.set=function(e){i.validateMillisecond(e.millisecond)&&this.addMilliseconds(e.millisecond-this.getMilliseconds());i.validateSecond(e.second)&&this.addSeconds(e.second-this.getSeconds());i.validateMinute(e.minute)&&this.addMinutes(e.minute-this.getMinutes());i.validateHour(e.hour)&&this.addHours(e.hour-this.getHours());i.validateMonth(e.month)&&this.addMonths(e.month-this.getMonth());i.validateYear(e.year)&&this.addYears(e.year-this.getFullYear());i.validateDay(e.day,this.getFullYear(),this.getMonth())&&this.addDays(e.day-this.getDate());e.timezone&&this.setTimezone(e.timezone);e.timezoneOffset&&this.setTimezoneOffset(e.timezoneOffset);e.week&&i._validate(e.week,0,53,"week")&&this.setWeek(e.week);return this};o.moveToFirstDayOfMonth=function(){return this.set({day:1})};o.moveToLastDayOfMonth=function(){return this.set({
day:i.getDaysInMonth(this.getFullYear(),this.getMonth())})};o.moveToNthOccurrence=function(e,t){var n=0;if(t>0)n=t-1;else if(-1===t){this.moveToLastDayOfMonth();this.getDay()!==e&&this.moveToDayOfWeek(e,-1);return this}return this.moveToFirstDayOfMonth().addDays(-1).moveToDayOfWeek(e,1).addWeeks(n)};o.moveToDayOfWeek=function(e,t){var n=(e-this.getDay()+7*(t||1))%7;return this.addDays(0===n?n+=7*(t||1):n)};o.moveToMonth=function(e,t){var n=(e-this.getMonth()+12*(t||1))%12;return this.addMonths(0===n?n+=12*(t||1):n)};o.getOrdinalNumber=function(){return Math.ceil((this.clone().clearTime()-new Date(this.getFullYear(),0,1))/864e5)+1};o.getTimezone=function(){return i.getTimezoneAbbreviation(this.getUTCOffset())};o.setTimezoneOffset=function(e){var t=this.getTimezoneOffset(),n=-6*Number(e)/10;return this.addMinutes(n-t)};o.setTimezone=function(e){return this.setTimezoneOffset(i.getTimezoneOffset(e))};o.hasDaylightSavingTime=function(){return Date.today().set({month:0,day:1}).getTimezoneOffset()!==Date.today().set({month:6,day:1}).getTimezoneOffset()};o.isDaylightSavingTime=function(){return this.hasDaylightSavingTime()&&(new Date).getTimezoneOffset()===Date.today().set({month:6,day:1}).getTimezoneOffset()};o.getUTCOffset=function(){var e,t=-10*this.getTimezoneOffset()/6;return t<0?(e=(t-1e4).toFormattedString()).charAt(0)+e.substr(2):"+"+(e=(t+1e4).toFormattedString()).substr(1)};o.getElapsed=function(e){return(e||new Date)-this};o.toISOString||(o.toISOString=function(){function e(e){return e<10?"0"+e:e}return'"'+this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+'Z"'});o.toFormattedString=function(e){var t=this;if(e&&1==e.length){var n=r.formatPatterns;t.t=t.toFormattedString;switch(e){case"d":return t.t(n.shortDate);case"D":return t.t(n.longDate);case"F":return t.t(n.fullDateTime);case"m":return t.t(n.monthDay);case"r":return t.t(n.rfc1123);case"s":return t.t(n.sortableDateTime);case"t":return t.t(n.shortTime);case"T":return t.t(n.longTime);case"u":return t.t(n.universalSortableDateTime);case"y":return t.t(n.yearMonth)}}return e?e.replace(/(\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S)/g,(function(e){if("\\"===e.charAt(0))return e.replace("\\","");t.h=t.getHours;switch(e){case"hh":return a(t.h()<13?0===t.h()?12:t.h():t.h()-12);case"h":return t.h()<13?0===t.h()?12:t.h():t.h()-12;case"HH":return a(t.h());case"H":return t.h();case"mm":return a(t.getMinutes());case"m":return t.getMinutes();case"ss":return a(t.getSeconds());case"s":return t.getSeconds();case"yyyy":return a(t.getFullYear(),4);case"yy":return a(t.getFullYear());case"dddd":return r.dayNames[t.getDay()];case"ddd":return r.abbreviatedDayNames[t.getDay()];case"dd":return a(t.getDate());case"d":return t.getDate();case"MMMM":return r.monthNames[t.getMonth()];case"MMM":return r.abbreviatedMonthNames[t.getMonth()];case"MM":return a(t.getMonth()+1);case"M":return t.getMonth()+1;case"t":return t.h()<12?r.amDesignator.substring(0,1):r.pmDesignator.substring(0,1);case"tt":return t.h()<12?r.amDesignator:r.pmDesignator;case"S":return function(e){switch(1*e){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}}(t.getDate());default:return e}})):this.toString()}})();(function(){var e=Date,t=e.prototype,n=e.CultureInfo,i=Number.prototype;t._orient=1;t._nth=null;t._is=!1;t._same=!1;t._isSecond=!1;i._dateElement="day";t.next=function(){this._orient=1;return this};e.next=function(){return e.today().next()};t.last=t.prev=t.previous=function(){this._orient=-1;return this};e.last=e.prev=e.previous=function(){return e.today().last()};t.is=function(){this._is=!0;return this};t.same=function(){this._same=!0;this._isSecond=!1;return this};t.today=function(){return this.same().day()};t.weekday=function(){if(this._is){this._is=!1;return!this.is().sat()&&!this.is().sun()}return!1};t.at=function(t){return"string"==typeof t?e.parseLenient(this.toFormattedString("d")+" "+t):this.set(t)};i.fromNow=i.after=function(e){var t={};t[this._dateElement]=this;return(e?e.clone():new Date).add(t)};i.ago=i.before=function(e){var t={};t[this._dateElement]=-1*this;return(e?e.clone():new Date).add(t)};var o,r="sunday monday tuesday wednesday thursday friday saturday".split(/\s/),a="january february march april may june july august september october november december".split(/\s/),s="Millisecond Second Minute Hour Day Week Month Year".split(/\s/),l="Milliseconds Seconds Minutes Hours Date Week Month FullYear".split(/\s/),d="final first second third fourth fifth".split(/\s/);t.toObject=function(){for(var e={},t=0;t<s.length;t++)e[s[t].toLowerCase()]=this["get"+l[t]]();return e};e.fromObject=function(e){e.week=null;return Date.today().set(e)};for(var c=function(t){return function(){if(this._is){this._is=!1;return this.getDay()==t}if(null!==this._nth){this._isSecond&&this.addSeconds(-1*this._orient);this._isSecond=!1;var n=this._nth;this._nth=null;var i=this.clone().moveToLastDayOfMonth();this.moveToNthOccurrence(t,n);if(this>i)throw new RangeError(e.getDayName(t)+" does not occur "+n+" times in the month of "+e.getMonthName(i.getMonth())+" "+i.getFullYear()+".");return this}return this.moveToDayOfWeek(t,this._orient)}},u=function(t){return function(){var i=e.today(),o=t-i.getDay();0===t&&1===n.firstDayOfWeek&&0!==i.getDay()&&(o+=7);return i.addDays(o)}},f=0;f<r.length;f++){e[r[f].toUpperCase()]=e[r[f].toUpperCase().substring(0,3)]=f;e[r[f]]=e[r[f].substring(0,3)]=u(f);t[r[f]]=t[r[f].substring(0,3)]=c(f)}for(var h=function(e){return function(){if(this._is){this._is=!1;return this.getMonth()===e}return this.moveToMonth(e,this._orient)}},p=function(t){return function(){return e.today().set({month:t,day:1})}},m=0;m<a.length;m++){e[a[m].toUpperCase()]=e[a[m].toUpperCase().substring(0,3)]=m;e[a[m]]=e[a[m].substring(0,3)]=p(m);t[a[m]]=t[a[m].substring(0,3)]=h(m)}for(var g=function(e){return function(){if(this._isSecond){this._isSecond=!1;return this}if(this._same){this._same=this._is=!1;for(var t=this.toObject(),n=(arguments[0]||new Date).toObject(),i="",o=e.toLowerCase(),r=s.length-1;r>-1;r--){if(t[i=s[r].toLowerCase()]!=n[i])return!1;if(o==i)break}return!0}"s"!=e.substring(e.length-1)&&(e+="s");return this["add"+e](this._orient)}},y=function(e){return function(){this._dateElement=e;return this}},v=0;v<s.length;v++){t[o=s[v].toLowerCase()]=t[o+"s"]=g(s[v]);i[o]=i[o+"s"]=y(o)}t._ss=g("Second");for(var C=function(e){return function(t){if(this._same)return this._ss(arguments[0]);if(t||0===t)return this.moveToNthOccurrence(t,e);this._nth=e;if(2===e&&null==t){this._isSecond=!0;return this.addSeconds(this._orient)}return this}},b=0;b<d.length;b++)t[d[b]]=C(0===b?-1:b)})();(function(){Date.Parsing={Exception:function(e){this.message="Parse error at '"+e.substring(0,10)+" ...'"}};for(var e=Date.Parsing,t=e.Operators={rtoken:function(t){return function(n){var i=n.match(t);if(i)return[i[0],n.substring(i[0].length)];throw new e.Exception(n)}},token:function(){return function(e){return t.rtoken(new RegExp("^s*"+e+"s*"))(e)}},stoken:function(e){return t.rtoken(new RegExp("^"+e))},until:function(e){return function(t){for(var n=[],i=null;t.length;){try{i=e.call(this,t)}catch(e){n.push(i[0]);t=i[1];continue}break}return[n,t]}},many:function(e){return function(t){for(var n=[],i=null;t.length;){try{i=e.call(this,t)}catch(e){return[n,t]}n.push(i[0]);t=i[1]}return[n,t]}},optional:function(e){return function(t){var n=null;try{n=e.call(this,t)}catch(e){return[null,t]}return[n[0],n[1]]}},not:function(t){return function(n){try{t.call(this,n)}catch(e){return[null,n]}throw new e.Exception(n)}},ignore:function(e){return e?function(t){var n=null;return[null,(n=e.call(this,t))[1]]}:null},product:function(){for(var e=arguments[0],n=Array.prototype.slice.call(arguments,1),i=[],o=0;o<e.length;o++)i.push(t.each(e[o],n));return i},cache:function(t){var n={},i=null;return function(o){try{i=n[o]=n[o]||t.call(this,o)}catch(e){i=n[o]=e}if(i instanceof e.Exception)throw i;return i}},any:function(){var t=arguments;return function(n){for(var i=null,o=0;o<t.length;o++){if(null==t[o])continue;try{i=t[o].call(this,n)
}catch(e){i=null}if(i)return i}throw new e.Exception(n)}},each:function(){var t=arguments;return function(n){for(var i=[],o=null,r=0;r<t.length;r++){if(null==t[r])continue;try{o=t[r].call(this,n)}catch(t){throw new e.Exception(n)}i.push(o[0]);n=o[1]}return[i,n]}},all:function(){var e=arguments,t=t;return t.each(t.optional(e))},sequence:function(n,i,o){i=i||t.rtoken(/^\s*/);o=o||null;if(1==n.length)return n[0];return function(t){for(var r=null,a=null,s=[],l=0;l<n.length;l++){try{r=n[l].call(this,t)}catch(e){break}s.push(r[0]);try{a=i.call(this,r[1])}catch(e){a=null;break}t=a[1]}if(!r)throw new e.Exception(t);if(a)throw new e.Exception(a[1]);if(o)try{r=o.call(this,r[1])}catch(t){throw new e.Exception(r[1])}return[s,r?r[1]:t]}},between:function(e,n,i){i=i||e;var o=t.each(t.ignore(e),n,t.ignore(i));return function(e){var t=o.call(this,e);return[[t[0][0],r[0][2]],t[1]]}},list:function(e,n,i){n=n||t.rtoken(/^\s*/);i=i||null;return e instanceof Array?t.each(t.product(e.slice(0,-1),t.ignore(n)),e.slice(-1),t.ignore(i)):t.each(t.many(t.each(e,t.ignore(n))),px,t.ignore(i))},set:function(n,i,o){i=i||t.rtoken(/^\s*/);o=o||null;return function(r){for(var a=null,s=null,l=null,d=null,c=[[],r],u=!1,f=0;f<n.length;f++){l=null;s=null;a=null;u=1==n.length;try{a=n[f].call(this,r)}catch(e){continue}d=[[a[0]],a[1]];if(a[1].length>0&&!u)try{l=i.call(this,a[1])}catch(e){u=!0}else u=!0;u||0!==l[1].length||(u=!0);if(!u){for(var h=[],p=0;p<n.length;p++)f!=p&&h.push(n[p]);if((s=t.set(h,i).call(this,l[1]))[0].length>0){d[0]=d[0].concat(s[0]);d[1]=s[1]}}d[1].length<c[1].length&&(c=d);if(0===c[1].length)break}if(0===c[0].length)return c;if(o){try{l=o.call(this,c[1])}catch(t){throw new e.Exception(c[1])}c[1]=l[1]}return c}},forward:function(e,t){return function(n){return e[t].call(this,n)}},replace:function(e,t){return function(n){var i=e.call(this,n);return[t,i[1]]}},process:function(e,t){return function(n){var i=e.call(this,n);return[t.call(this,i[0]),i[1]]}},min:function(t,n){return function(i){var o=n.call(this,i);if(o[0].length<t)throw new e.Exception(i);return o}}},n=function(e){return function(){var t=null,n=[];arguments.length>1?t=Array.prototype.slice.call(arguments):arguments[0]instanceof Array&&(t=arguments[0]);if(!t)return e.apply(null,arguments);for(var i=0,o=t.shift();i<o.length;i++){t.unshift(o[i]);n.push(e.apply(null,t));t.shift();return n}}},i="optional not ignore cache".split(/\s/),o=0;o<i.length;o++)t[i[o]]=n(t[i[o]]);for(var a=function(e){return function(){return arguments[0]instanceof Array?e.apply(null,arguments[0]):e.apply(null,arguments)}},s="each any all".split(/\s/),l=0;l<s.length;l++)t[s[l]]=a(t[s[l]])})();(function(){var e=Date,t=e.CultureInfo,n=function(e){for(var t=[],i=0;i<e.length;i++)e[i]instanceof Array?t=t.concat(n(e[i])):e[i]&&t.push(e[i]);return t};e.Grammar={};e.Translator={hour:function(e){return function(){this.hour=Number(e)}},minute:function(e){return function(){this.minute=Number(e)}},second:function(e){return function(){this.second=Number(e)}},meridian:function(e){return function(){this.meridian=e.slice(0,1).toLowerCase()}},timezone:function(e){return function(){var t=e.replace(/[^\d+-]/g,"");t.length?this.timezoneOffset=Number(t):this.timezone=e.toLowerCase()}},day:function(e){var t=e[0];return function(){this.day=Number(t.match(/\d+/)[0])}},month:function(e){return function(){this.month=3==e.length?"jan feb mar apr may jun jul aug sep oct nov dec".indexOf(e)/4:Number(e)-1}},year:function(e){return function(){var n=Number(e);this.year=e.length>2?n:n+(n+2e3<t.twoDigitYearMax?2e3:1900)}},rday:function(e){return function(){switch(e){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0;this.now=!0}}},finishExact:function(t){t=t instanceof Array?t:[t];for(var n=0;n<t.length;n++)t[n]&&t[n].call(this);var i=new Date;!this.hour&&!this.minute||this.month||this.year||this.day||(this.day=i.getDate());this.year||(this.year=i.getFullYear());if(!this.month&&0!==this.month&&this.day){this.month=this.day-1;this.day=void 0}this.month||0===this.month||(this.month=i.getMonth());if(!this.day)if(this.endDate){var o=null==this.year?e.today().getFullYear():this.year;this.day=e.getDaysInMonth(o,this.month)}else this.day=1;this.hour||(this.hour=0);this.minute||(this.minute=0);this.second||(this.second=0);this.meridian&&this.hour&&("p"==this.meridian&&this.hour<12?this.hour=this.hour+12:"a"==this.meridian&&12==this.hour&&(this.hour=0));if(this.day>e.getDaysInMonth(this.year,this.month))throw new RangeError(this.day+" is not a valid value for days.");var r=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);this.timezone?r.set({timezone:this.timezone}):this.timezoneOffset&&r.set({timezoneOffset:this.timezoneOffset});return r},finish:function(t){if(0===(t=t instanceof Array?n(t):[t]).length)return null;for(var i=0;i<t.length;i++)"function"==typeof t[i]&&t[i].call(this);var o=e.today();if(this.now&&!this.unit&&!this.operator)return new Date;this.now&&(o=new Date);var r,a,s,l=!!(this.days&&null!==this.days||this.orient||this.operator);s="past"==this.orient||"subtract"==this.operator?-1:1;this.now||-1=="hour minute second".indexOf(this.unit)||o.setTimeToNow();if((this.month||0===this.month)&&-1!="year day hour minute second".indexOf(this.unit)){this.value=this.month+1;this.month=null;l=!0}if(!l&&this.weekday&&!this.day&&!this.days){const e=Date[this.weekday]();this.day=e.getDate();this.month||(this.month=e.getMonth());this.year=e.getFullYear()}if(l&&this.weekday&&"month"!=this.unit){this.unit="day";r=e.getDayNumberFromName(this.weekday)-o.getDay();a=7;this.days=r?(r+s*a)%a:s*a}if(this.month&&"day"==this.unit&&this.operator){this.value=this.month+1;this.month=null}null!=this.value&&null!=this.month&&null!=this.year&&(this.day=1*this.value);if(this.month&&!this.day&&this.value){o.set({day:1*this.value});l||(this.day=1*this.value)}if(!this.month&&this.value&&"month"==this.unit&&!this.now){this.month=this.value;l=!0}if(l&&(this.month||0===this.month)&&"year"!=this.unit){this.unit="month";r=this.month-o.getMonth();a=12;this.months=r?(r+s*a)%a:s*a;this.month=null}this.unit||(this.unit="day");if(!this.value&&this.operator&&null!==this.operator&&this[this.unit+"s"]&&null!==this[this.unit+"s"])this[this.unit+"s"]=this[this.unit+"s"]+("add"==this.operator?1:-1)+(this.value||0)*s;else if(null==this[this.unit+"s"]||null!=this.operator){this.value||(this.value=1);this[this.unit+"s"]=this.value*s}this.meridian&&this.hour&&("p"==this.meridian&&this.hour<12?this.hour=this.hour+12:"a"==this.meridian&&12==this.hour&&(this.hour=0));if(this.weekday&&!this.day&&!this.days){const e=Date[this.weekday]();this.day=e.getDate();e.getMonth()!==o.getMonth()&&(this.month=e.getMonth())}if(!this.month&&0!==this.month&&this.day){this.month=this.day-1;this.day=void 0}if((this.month||0===this.month)&&!this.day)if(this.endDate){var d=null==this.year?e.today().getFullYear():this.year;this.day=e.getDaysInMonth(d,this.month)}else this.day=1;if(!this.orient&&!this.operator&&"week"==this.unit&&this.value&&!this.day&&!this.month)return Date.today().setWeek(this.value);l&&this.timezone&&this.day&&this.days&&(this.day=this.days);return l?o.add(this):o.set(this)}};var i,o=e.Parsing.Operators,r=e.Grammar,a=e.Translator;r.datePartDelimiter=o.rtoken(/^([\s\-.,/\x27]+)/);r.timePartDelimiter=o.stoken(":");r.whiteSpace=o.rtoken(/^\s*/);r.generalDelimiter=o.rtoken(/^(([\s,]|at|@|on)+)/);var s={};r.ctoken=function(e){var n=s[e];if(!n){for(var i=t.regexPatterns,r=e.split(/\s+/),a=[],l=0;l<r.length;l++)a.push(o.replace(o.rtoken(i[r[l]]),r[l]));n=s[e]=o.any.apply(null,a)}return n};r.ctoken2=function(e){return o.rtoken(t.regexPatterns[e])};r.h=o.cache(o.process(o.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),a.hour));r.hh=o.cache(o.process(o.rtoken(/^(0[0-9]|1[0-2])/),a.hour));r.H=o.cache(o.process(o.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),a.hour));r.HH=o.cache(o.process(o.rtoken(/^([0-1][0-9]|2[0-3])/),a.hour));r.m=o.cache(o.process(o.rtoken(/^([0-5][0-9]|[0-9])/),a.minute));r.mm=o.cache(o.process(o.rtoken(/^[0-5][0-9]/),a.minute));r.s=o.cache(o.process(o.rtoken(/^([0-5][0-9]|[0-9])/),a.second))
;r.ss=o.cache(o.process(o.rtoken(/^[0-5][0-9]/),a.second));r.hms=o.cache(o.sequence([r.H,r.m,r.s],r.timePartDelimiter));r.t=o.cache(o.process(r.ctoken2("shortMeridian"),a.meridian));r.tt=o.cache(o.process(r.ctoken2("longMeridian"),a.meridian));r.z=o.cache(o.process(o.rtoken(/^((\+|-)\s*\d\d\d\d)|((\+|-)\d\d:?\d\d)/),a.timezone));r.zz=o.cache(o.process(o.rtoken(/^((\+|-)\s*\d\d\d\d)|((\+|-)\d\d:?\d\d)/),a.timezone));r.zzz=o.cache(o.process(r.ctoken2("timezone"),a.timezone));r.timeSuffix=o.each(o.ignore(r.whiteSpace),o.set([r.tt,r.zzz]));r.time=o.each(o.optional(o.ignore(o.stoken("T"))),r.hms,r.timeSuffix);r.d=o.cache(o.process(o.each(o.rtoken(/^([0-2]\d|3[0-1]|\d)/),o.optional(r.ctoken2("ordinalSuffix"))),a.day));r.dd=o.cache(o.process(o.each(o.rtoken(/^([0-2]\d|3[0-1])/),o.optional(r.ctoken2("ordinalSuffix"))),a.day));r.ddd=r.dddd=o.cache(o.process(r.ctoken("sun mon tue wed thu fri sat"),(function(e){return function(){this.weekday=e}})));r.M=o.cache(o.process(o.rtoken(/^(1[0-2]|0\d|\d)/),a.month));r.MM=o.cache(o.process(o.rtoken(/^(1[0-2]|0\d)/),a.month));r.MMM=r.MMMM=o.cache(o.process(r.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),a.month));r.y=o.cache(o.process(o.rtoken(/^(\d\d?)/),a.year));r.yy=o.cache(o.process(o.rtoken(/^(\d\d)/),a.year));r.yyy=o.cache(o.process(o.rtoken(/^(\d\d?\d?\d?)/),a.year));r.yyyy=o.cache(o.process(o.rtoken(/^(\d\d\d\d)/),a.year));i=function(){return o.each(o.any.apply(null,arguments),o.not(r.ctoken2("timeContext")))};r.day=i(r.d,r.dd);r.month=i(r.M,r.MMM);r.year=i(r.yyyy,r.yy);r.orientation=o.process(r.ctoken("past future"),(function(e){return function(){this.orient=e}}));r.operator=o.process(r.ctoken("add subtract"),(function(e){return function(){this.operator=e}}));r.rday=o.process(r.ctoken("yesterday tomorrow today now"),a.rday);r.unit=o.process(r.ctoken("second minute hour day week month year"),(function(e){return function(){this.unit=e}}));r.value=o.process(o.rtoken(/^\d\d?(st|nd|rd|th)?/),(function(e){return function(){this.value=e.replace(/\D/g,"")}}));r.expression=o.set([r.rday,r.operator,r.value,r.unit,r.orientation,r.ddd,r.MMM]);i=function(){return o.set(arguments,r.datePartDelimiter)};r.mdy=i(r.ddd,r.month,r.day,r.year);r.ymd=i(r.ddd,r.year,r.month,r.day);r.dmy=i(r.ddd,r.day,r.month,r.year);r.date=function(e){return(r[t.dateElementOrder]||r.mdy).call(this,e)};r.format=o.process(o.many(o.any(o.process(o.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),(function(t){if(r[t])return r[t];throw e.Parsing.Exception(t)})),o.process(o.rtoken(/^[^dMyhHmstz]+/),(function(e){return o.ignore(o.stoken(e))})))),(function(e){return o.process(o.each.apply(null,e),a.finishExact)}));var l={},d=function(e){return l[e]=l[e]||r.format(e)[0]};r.formats=function(e){if(e instanceof Array){for(var t=[],n=0;n<e.length;n++)t.push(d(e[n]));return o.any.apply(null,t)}return d(e)};r._formats=r.formats(['"yyyy-MM-ddTHH:mm:ssZ"',"yyyy-MM-ddTHH:mm:ssZ","yyyy-MM-ddTHH:mm:ssz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mmZ","yyyy-MM-ddTHH:mmz","yyyy-MM-ddTHH:mm","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","MMddyyyy","ddMMyyyy","Mddyyyy","ddMyyyy","Mdyyyy","dMyyyy","yyyy","Mdyy","dMyy","d"]);r._start=o.process(o.set([r.date,r.time,r.expression],r.generalDelimiter,r.whiteSpace),a.finish);r.start=function(e){try{var t=r._formats.call({endDate:this.endDate},e);if(0===t[1].length)return t}catch(e){}return r._start.call({endDate:this.endDate},e)};e.parseLenient=function(t,n){var i=null;if(!t)return null;if(t instanceof Date)return t;try{i=e.Grammar.start.call({endDate:n},t.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1"))}catch(e){return null}return 0===i[1].length?i[0]:null};e.getParseFunction=function(t){var n=e.Grammar.formats(t);return function(e){var t=null;try{t=n.call({},e)}catch(e){return null}return 0===t[1].length?t[0]:null}};e.parseExact=function(t,n){return e.getParseFunction(n)(t)}})()},3985:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>ue});var i=n(5351),o=n.n(i),r=n(9191),a=n.n(r),s=n(3839),l=n(8730),d=n(9691),c=n.n(d),u=n(4341),f=n(3364),h=n(2842),p=n(7875),m=n(9914),g=n(9417),y=n(983),v=n(1633),C=n(3793),b=n(9912);const _=function(e,t){var n,i=this.shareNoteToggleView=document.createElement("div");i.className="co_noteIsPublicContainer";i.innerHTML='<label><input type="checkbox" class="co_noteIsPublic"></label>';n=t?b["default"].lookup("SC.Foldering.Notes.SharedAnnotations.MakeNotePrivate","Only I can view this note."):b["default"].lookup("SC.Foldering.Notes.SharedAnnotations.MakeNotePublic","Share this note with all matter participants.");i.querySelector("label").append(n);!1!==e.isPublic&&(e.isPublic=!0);o();i.addEventListener("click",(n=>{const o=n.target.closest(".co_noteIsPublic");n.currentTarget.contains(o)&&(r=i.querySelector(".co_noteIsPublic").checked,e.isPublic=t?!r:r);var r}));this.UpdateNoteModel=function(t){e=t;o()};function o(){var n=!1;null!=e.isPublic&&(n=t?!e.isPublic:!!e.isPublic);i.querySelector(".co_noteIsPublic").checked=n}};var S=n(2595);function N(){this.WHITESPACE_NODE=3;var e=this;this.defaultTimeout=250;this.openOnMouseOver=!1;this.openOnMouseClick=!1;this.closeOnMouseOut=!1;this.closeOnMouseClick=!1;this.onWidget=!1;this.openTimeout=this.defaultTimeout;this.closeTimeout=this.defaultTimeout;this.clickableHeader="";this.unClickableHeader="";null==N.instances&&(N.instances={});this.setDomId=function(){};this.setDomRoot=function(e){this.externalRoot=e};this.setInstanceId=function(e){this.instanceId=e;N.instances[e]=this};this.setDataMethod=function(t){this.getData=function(){var n=t(e.dataCallback);null!=n&&(e.listRoot.innerHTML=n)}};this.setUnClickableTitle=function(e){n(e)};this.setHoverTitle=function(t){null!=e.titleElement&&(e.titleElement.title=(0,S.EncodeHtml)(t))};this.setClickableTitle=function(e){n(e)};var t,n=function(t){e.title=t;null!=e.titleElement&&(e.titleElement.textContent=t)};this.setOpenOnMouseClick=function(e){this.openOnMouseClick=null==e||null==e||e;this.arrowOnClick=this.toggleList;this.arrowKeyPress=this.toggleList;this.titleOnClick=this.toggleList;this.titleKeyPress=this.toggleList};this.setCloseOnMouseClick=function(e){this.closeOnMouseClick=null==e||null==e||e;this.arrowOnClick=this.toggleList;this.arrowKeyPress=this.toggleList;this.titleOnClick=this.toggleList;this.titleKeyPress=this.toggleList};this.setOpenOnMouseOver=function(e,t){this.openOnMouseOver=null==e||null==e||e;null!=t&&null!=t&&typeof t==Number&&(this.openTimeout=t);this.rootMouseOver=this.startExpandTimer};this.setCloseOnMouseOut=function(e,t){this.closeOnMouseOut=null==e||null==e||e;null!=t&&null!=t&&"Number"==typeof t&&(this.closeTimeout=t);this.rootMouseOut=this.startCloseTimer};this.arrowKeyPress=function(){};this.arrowOnClick=function(){this.toggleList()};this.addArrowOnClick=function(e){this.arrowOnClick=e;this.arrowKeyPress=function(t){y["default"].CheckIfEnter(t)&&e()}};this.titleKeyPress=function(){};this.titleOnClick=function(){this.toggleList()};this.addTitleOnClick=function(e){this.titleOnClick=e;this.titleKeyPress=function(t){y["default"].CheckIfEnter(t)&&e()}};this.addCloseOnClickOff=function(t){if(void 0===t||t)var n=(0,g.BindClickOffCallback)(e.getInternalRoot(),(function(){e.close()}));else n&&n()};this._clickOffCallback=function(){};this.addClickOffFunction=function(t){this._clickOffCallback=t;(0,g.BindClickOffCallback)(this.getInternalRoot(),(function(t){e._clickOffCallback(t)}))};this.removeClickOffFunction=function(){t;this._clickOffCallback=function(){}};this.xhtml='<a class="co_dropdownTitle" id="co_dropdownTitle_%instance%"  href="javascript:void(0);" ></a><a class="co_dropdownArrowExpanded" id="co_dropdownArrow_%instance%" href="javascript:void(0);">'+b["default"].lookup("SC.Foldering.DataDropDown.OpenMenu","Open Menu")+'</a><div class="co_dropdownBoxCollapsed" id="co_dropdownBox_%instance%"><div class="co_dropdownBoxHeader"><span></span></div><div class="co_dropdownBoxContent" id="co_dropdownBody_%instance%"><div class="co_dropdownBoxContentRight" id="co_dropdownBodyContent_%instance%"></div></div><div class="co_dropdownBoxFooter"><span></span></div>';this.draw=function(){if(null==this.instanceId)throw new Error("no instance id")
;this.internalRoot=document.createElement("div");if((null==this.externalRoot||null==this.externalRoot)&&null!=this.domId){var e=y["default"].Get(this.domId);if(null==e)throw new Error("invalid domId");this.externalRoot=e}null!=this.externalRoot&&null!=this.externalRoot&&this.externalRoot.appendChild(this.internalRoot);var t=this.xhtml;t=t.replace(/%instance%/g,this.instanceId);this.internalRoot.innerHTML=t+'<div class="co_clear"></div>';this.storeHtmlElements();this.openState=!1;this.getData&&this.getData(this.dataCallback)};this.SetCustomContents=function(e){(this.listRoot??{}).innerHTML=e};this.destroy=function(){};this.findNextTextNode=function(e){for(;null!=e&&e.nodeType==this.WHITESPACE_NODE;)e=e.nextSibling;return e};this.storeHtmlElements=function(){this.titleElement=a()(this.internalRoot).find("#co_dropdownTitle_"+this.instanceId)[0];if(this.titleElement){this.titleElement.addEventListener("click",(function(){e.titleOnClick()}));this.titleElement.textContent=this.title}this.arrowIcon=a()(this.internalRoot).find("#co_dropdownArrow_"+this.instanceId)[0];this.arrowIcon?.addEventListener("click",(function(){e.arrowOnClick()}));this.bodyContainer=a()(this.internalRoot).find("#co_dropdownBox_"+this.instanceId)[0];this.listRoot=a()(this.internalRoot).find("#co_dropdownBodyContent_"+this.instanceId)[0];return};this.refresh=function(){this.getData(this.dataCallback)};this.dataCallback=async function(t){if(t.ok)e.listRoot.innerHTML=await t.text();else{var n='<li class="co_foldering_dataDropDown_error" id="cobalt.foldering.dataDropDown.error">'+b["default"].lookup("SC.Foldering.DataDropDown.DataRetrievalError","Error retrieving data")+"</li>";e.listRoot.innerHTML=n}};this.toggleList=function(){this.openState?this.closeOnMouseClick&&this.close():this.openOnMouseClick&&this.open()};this.openClose=function(){this.openState?this.close():this.open()};this.open=function(){this.clearTimeouts();this.bodyContainer.className="co_dropdownBoxExpanded";this.arrowIcon.className="co_dropdownArrowExpanded";y["default"].ShowElements(this.bodyContainer);this.openState=!0};this.close=function(){this.clearTimeouts();this.bodyContainer.className="co_dropdownBoxCollapsed";this.arrowIcon.className="co_dropdownArrowCollapsed";y["default"].HideElements(this.bodyContainer);this.openState=!1};this.hide=function(){y["default"].HideElements(this.bodyContainer)};this.hideArrowIcon=function(){y["default"].HideElements(this.arrowIcon)};this.startExpandTimer=function(){e.clearTimeouts();e.openOnMouseOver&&(e.listRoot.ExpandTimeout=setTimeout((function(){e.open()}),e.openTimeout))};this.clearTimeouts=function(){clearTimeout(this.listRoot.ExpandTimeout);clearTimeout(this.listRoot.CloseTimeout)};this.startCloseTimer=function(){e.clearTimeouts();e.closeOnMouseOut&&(e.listRoot.CloseTimeout=setTimeout((function(){e.close()}),e.closeTimeout))};this.isOpen=function(){return this.openState};this.getInternalRoot=function(){return this.internalRoot};this.getListRoot=function(){return this.listRoot};this.getTitle=function(){return this.title?this.title:""};this.getTitleElement=function(){return this.titleElement};this.getBodyElement=function(){return this.bodyContainer};this.getArrowIcon=function(){return this.arrowIcon}}var E=n(4753),A=n(2065),w=n(9086),x=n(356),T=n(2570),I=n(7195),D=n(5682),k=n(4159),M=n(8497),R=n(6921),H=n(7955),O=n(966),L=n(9474),P=n(7718),B=n(3434),F=n(8660),G=n(1422),U=n(5024),W=n(9422),$=n(4383),z=n(7617),V=n(8286),q=n(6399),j=n(68),K=n(762),Y=n(2656),J=n(5549),X=n(8230),Q=n(3587),Z=n(3602),ee=n(4317),te=n(6123);function ne(){this._dropDown=void 0;this._instance=void 0;this._parent=void 0;this._note=void 0;this._mode=void 0;this._contactsHtml=null;this._container=void 0;this._guid=void 0;this._lastText=void 0;this._lastIsPublicValue=void 0;this._optionalProvider=null;this._minimizeNotes=!1;this._selectedContacts=null;this._initialList=null;this._shareTooltips=[];this.handleViewContainerClick=this.handleViewContainerClick.bind(this);this.statusMsgElement=null}ne.prototype.SetDocumentGuid=function(e){this._guid=e};ne.prototype.SetSelectedContacts=function(e){this._selectedContacts=e};ne.prototype.setParent=function(e){this._parent=e};ne.prototype.GetParent=function(){return this._parent};ne.prototype.SetStopEditAfterSave=function(e){this._stopEditAfterSave=e};ne.prototype.SetCloseAfterSave=function(e){this._closeAfterSave=e};ne.prototype.setContainer=function(e){this._container=e};ne.prototype.setProvider=function(e){this._optionalProvider=e};ne.prototype.setInstance=function(e){this._instance=e};ne.prototype.getInstance=function(){return this._instance};ne.prototype.setNote=function(e){this._note=e;this._shareNoteToggleView&&this._shareNoteToggleView.UpdateNoteModel(this._note)};ne.prototype.getNote=function(){return this._note};ne.prototype.getViewText=function(){return this._viewText.innerHTML};ne.prototype.setViewText=function(e){(this._viewText??{}).innerHTML=e};ne.prototype.getEditText=function(){return this._textArea.value};ne.prototype.setEditText=function(e){a()(this._textArea).val(e)};ne.prototype.setMode=function(e){this._mode=e};ne.prototype.setCreateCallback=function(e){this._createCallback=e};ne.prototype.GetId=function(){return this._note.id};ne.prototype.SetDeleteCallback=function(e){this._deleteCallback=e};ne.prototype.SetConvertCallback=function(e){this._convertCallback=e};ne.prototype.SetCancelCallback=function(e){this._cancelCallback=e};ne.prototype.setOrphan=function(e){this._orphan=e};ne.prototype.SetMinimizeNotes=function(e){this._minimizeNotes=e};ne.prototype.Draw=function(){this._buidHTML();if(s["default"].isIacOn("IAC-A11Y-DOC-NOTES")){O["default"].Get("Foldering",V["default"].prefs.noteMenuTogglePreferenceName)===V["default"].prefs.noteMenuToggleShow&&this._applyNoteAccessibility()}this._subscribeToEvents();this.subscribeToEvents()};ne.prototype._applyNoteAccessibility=function(){if(this._note&&"highlight"===this._note._type){this._viewContainer?.addEventListener("keydown",j["default"]);this._dropDown.getListRoot()?.addEventListener("keydown",j["default"]);this._parent?.addEventListener("keydown",j["default"])}};ne.prototype._removeNoteAccessibility=function(){this._dropDown.getListRoot()?.removeEventListener("keydown",j["default"]);this._viewContainer?.removeEventListener("keydown",j["default"])};ne.prototype.AreSharedNotesAllowed=function(){return(0,g.AreSharedNotesAllowed)()};ne.prototype.AreSharedHighlightsAllowed=function(){return A["default"].AreSharedHighlightsAllowed()};ne.prototype.AreSharedAnnotationsAllowed=function(){var e=f["default"]?.Instance?.ContainerType;return"folders"!==e||f["default"].Instance.ContainerType?!(0,g.IsIpad)()&&f["default"].Instance?.IsUserDocument&&"projects"===f["default"].Instance?.ContainerType:!!this.AreSharedNotesAllowed()&&!(0,g.IsIpad)()};ne.prototype.Destroy=function(){s["default"].isIacOn("IAC-A11Y-DOC-NOTES")&&this._removeNoteAccessibility();this._dropDown.removeClickOffFunction();a()(this._parent).unbind("*");if(this._deleteSubscription){G["default"].Unsubscribe(this._deleteSubscription);delete this._deleteSubscription}if(this._selectedChangedSubscription){G["default"].Unsubscribe(this._selectedChangedSubscription);delete this._selectedChangedSubscription}if(this._rightColumnExpandCollapseSubscription){G["default"].Unsubscribe(this._rightColumnExpandCollapseSubscription);delete this._rightColumnExpandCollapseSubscription}if(this._outlineBuilderOpenPanelSubscription){G["default"].Unsubscribe(this._outlineBuilderOpenPanelSubscription);delete this._outlineBuilderOpenPanelSubscription}delete this._dropDown;delete this._instance;delete this._parent;delete this._note;delete this._mode;delete this._container;delete this._guid;delete this._lastText;delete this._lastIsPublicValue};ne.prototype.Open=function(){this._closeAfterSave=!1;this._showView()};ne.prototype.GetNoteType=function(){var e;this._note&&(e=this._note._type);return e};ne.prototype.GetContainer=function(){return this._container};ne.prototype.IsCreatedByCurrentUser=function(){var e;return e=this.AreSharedNotesAllowed()?a()(this._parent).find(".IsCreatedByCurrentUser").length>=1:this._note.createdByCurrentUser}
;ne.prototype.HideNote=function(){this._hideView()};ne.prototype.ShowNote=function(){this._showView()};ne.prototype.Edit=function(){if(this.AreSharedNotesAllowed()&&"existing"==this._mode){"function"==typeof this._container.isTinyMceEnabled&&(this._note.isHtmlNote=this._container.isTinyMceEnabled());if(!this._note.createdBy||this._note.createdByCurrentUser){w["default"].StopEditAll();this._stopEditAfterSave=!1;this._hideView();this._dropDown.open();this._hideSaveMessage();this._updateDate(this._note);this._container.ToggleZIndex(!0);this.unmodifiedState||(this.unmodifiedState=c().cloneDeep(this._note));const e=this.getIdFromContainer();this.activateNote(e);this.updateContactList("Initial");this.collapseContacts();this.removeContacts();this.setupPreviouslyShared();this.setupShareEvents()}}else{w["default"].StopEditAll();this._stopEditAfterSave=!1;this._hideView();this._dropDown.open();this._hideSaveMessage();this._updateDate(this._note);this._container.ToggleZIndex(!0);this.unmodifiedState||(this.unmodifiedState=c().cloneDeep(this._note));if(this.AreSharedNotesAllowed()){this.removeContacts();this.setupPreviouslyShared();this.setupShareEvents()}}let e=a()(this._parent).find("textarea.co_noteArea");s["default"].isIacOn("IAC-A11Y-DOC-NOTES")&&(e=this._note.isHtmlNote?a()(this._parent).find(".co_noteArea:visible"):a()(this._textArea));e.focus();this.setStatusMessage("")};ne.prototype.getIdFromContainer=function(){let e=this._container.GetParent().id;"co_documentNotes"===e&&(e=this._parent.id);return e};ne.prototype.collapseContacts=function(){(0,h.hideElements)(document.querySelectorAll(".coid_contacts_addedContactsInputActive"));(0,h.showElements)(document.querySelectorAll(".coid_contacts_addedContactsInputActive li"))};ne.prototype.activateNote=function(e){document.querySelectorAll(".contactsActive").forEach((e=>e.classList.remove("contactsInactive")));document.getElementById(e)?.querySelectorAll(".contactsInactive").forEach((e=>e.classList.add("contactsActive")));document.querySelectorAll(".dropRightActive").forEach((e=>e.classList.remove("dropRightInactive")));document.getElementById(e)?.querySelectorAll(".dropRightInactive").forEach((e=>e.classList.add("dropRightActive")));document.querySelectorAll(".dropDownActive").forEach((e=>e.classList.remove("dropDownInactive")));document.getElementById(e)?.querySelectorAll(".dropDownInactive").forEach((e=>e.classList.add("dropDownActive")));document.querySelectorAll(".sharedWithActive").forEach((e=>e.classList.remove("sharedWithInactive")));document.getElementById(e)?.querySelectorAll(".sharedWithInactive").forEach((e=>e.classList.add("sharedWithActive")));document.querySelectorAll(".addBtnActive").forEach((e=>e.classList.remove("addBtnInactive")));document.getElementById(e)?.querySelectorAll(".addBtnInactive").forEach((e=>e.classList.add("addBtnActive")));document.querySelectorAll(".deleteBtnActive").forEach((e=>e.classList.remove("deleteBtnInactive")));document.getElementById(e)?.querySelectorAll(".deleteBtnInactive").forEach((e=>e.classList.add("deleteBtnActive")));document.querySelectorAll(".coid_contacts_addedContactsInputActive").forEach((e=>e.classList.remove("coid_contacts_addedContactsInputInactive")));document.getElementById(e)?.querySelectorAll(".coid_contacts_addedContactsInputInactive").forEach((e=>e.classList.add("coid_contacts_addedContactsInputActive")));document.querySelectorAll(".viewMoreActive").forEach((e=>e.classList.remove("viewMoreInactive")));document.getElementById(e)?.querySelectorAll(".viewMoreInactive").forEach((e=>e.classList.add("viewMoreActive")));document.querySelectorAll(".viewLessActive").forEach((e=>e.classList.remove("viewLessInactive")));document.getElementById(e)?.querySelectorAll(".viewLessInactive").forEach((e=>e.classList.add("viewMoreActive")));document.querySelectorAll(".contactsIdActive").forEach((e=>e.classList.remove("contactsIdInactive")));document.getElementById(e)?.querySelectorAll(".contactsIdInactive").forEach((e=>e.classList.add("contactsIdActive")))};ne.prototype.updateContactList=function(e){"Final"===e?this._selectedContacts=this.getContactListData():this._initialList=this.getContactListData()};ne.prototype.getContactListData=function(){let e=p.ElementStorage.get(this.getContactsInput().get(0),"json")||this.createContactList();"string"==typeof e&&(e=JSON.parse(e));return e};ne.prototype.setContactListData=function(e){p.ElementStorage.put(this.getContactsInput().get(0),"json",e)};ne.prototype.getContactsInput=function(){return a()(this._parent).find(".co_contacts_addedContactsInput")};ne.prototype.getContactCount=function(){return this.getContactListData().SelectedContacts.length};ne.prototype.Close=function(){this.StopEdit();this._hideView();this._container.UpdateIcon()};ne.prototype.RemoveIfNew=function(){if(!this._requestOutstanding&&"orphan"!=this._mode){(0,S.Trim)(this.getEditText())||"new"!=this._mode||this.RemoveSelf(!1)}};ne.prototype.setStatusMessage=function(e){this.statusMsgElement&&(this.statusMsgElement.innerText=e)};ne.prototype.StopEdit=function(){if(!this._requestOutstanding){this._stopEditAfterSave&&this.setStatusMessage(b["default"].lookup("SC.Foldering.Note.Saved","Your note has been saved."));this._showView();this._dropDown.close();x["default"].IsSharedNoteCountsUpToDate=!0;this._container.UpdateIcon();this._container.ToggleZIndex(!1);if(this.AreSharedAnnotationsAllowed()){this.unmodifiedState&&c().merge(this._note,this.unmodifiedState);this.setEditText(this._note.noteText);this._shareNoteToggleView&&this._shareNoteToggleView.UpdateNoteModel(this._note)}else if(this._container._popups&&this._container._popups.length>0){var e=this._container._popups[0];e&&!e.getEditText()&&e._cancelCallback&&e._cancelCallback()}}};ne.prototype.isOpen=function(){return this.isEditing()||(0,m.isVisible)(this._viewContainer)};ne.prototype.isEditing=function(){return this._dropDown.isOpen()};ne.prototype.HasBeenSaved=function(){x["default"]._enableOrDisableStopSharingMyAnnotationsTextInDropdown();return"existing"==this._mode};ne.prototype.Save=function(){"new"!=this._mode&&"restore"!=this._mode||(this.AreSharedNotesAllowed()?this._saveNewNote(!1,this._note.selectedHtml):this._saveNewNote(!1))};ne.prototype.Delete=function(e){this._deleteOrRemove(e)};ne.prototype.FocusText=function(){this._textArea.focus()};ne.prototype._showView=function(){(0,h.showElements)(this._viewContainer)};ne.prototype._hideView=function(){(0,h.hideElements)(this._viewContainer)};ne.prototype._showEdit=function(){(0,h.showElements)(this._parent?.querySelectorAll(".co_editNote"))};ne.prototype._hideEdit=function(){(0,h.hideElements)(this._parent?.querySelectorAll(".co_editNote"))};ne.prototype._formatText=function(e){if(!e)return;var t="";(0,S.EncodeHtml)(e).split(/\n/).forEach((e=>{t+=e+"<br>"}));return t};ne.prototype._switchToExistingMode=function(){this._mode="existing";(0,h.showElements)(this._dropDown.getListRoot()?.querySelectorAll("a.co_noteDelete"));this._container.UpdateIcon();if(this.AreSharedAnnotationsAllowed()){x["default"].IsSharedNoteCountsUpToDate=!1;x["default"].prototype.UpdateNoteCounts()}};ne.prototype._saveNewNote=function(e,t,n){const i=(0,m.isVisible)(document.getElementById("coid_contacts_lightbox"));if(!this._requestOutstanding){var o=(0,S.Trim)(this.getEditText());if(o&&!i){this._requestOutstanding=!0;this._showSaveMessage();var r=this;this._note._type||(this._note._type="highlight");if(!this._note.clientId){var a=z["default"].GetClientMatter();this._note.clientId={clientId:a.ClientId,delimiter:a.Delimiter,matterId:a.MatterId}}this._note.noteText=o;if("highlight"===this._note._type&&"restore"!==r._mode&&null!==H["default"].NewData){this._note.selectedText=H["default"].NewData.ClearText;this._note.selectedHtml=H["default"].NewData.HTML;this._note.location={};this._note.location.startPoint=H["default"].NewData.Startpoint;this._note.location.endPoint=H["default"].NewData.Endpoint;this._note.location.documentContentCacheKey=L["default"].DocumentContentCacheKey}I.A.populateCurrentDocumentSnapshotInfo(this._note);var s=function(e){r._requestOutstanding=!1;r.unmodifiedState=null;r._hideSaveMessage();x["default"].IsSharedNoteCountsUpToDate=!1
;M["default"].AddNoteToNotesData(e.note);if(ne.prototype.AreSharedAnnotationsAllowed.call(r)){var i="Cobalt.Foldering.Note.NewNoteData";G["default"].Publish(i,new U["default"]({},{},i,"1.0",e.note))}if(e.id){r.setNote(e.note);I.A.storeCurrentDocumentSnapshotInfo(r._note);if("restore"==r._mode){const e={note:r._note,oldId:r.oldId,documentGuid:r._guid,container:r._container};r._fireUndoEvent(e)}else{const e={note:r._note,documentGuid:r._guid};r._fireCreateEvent(e)}r._lastText=r._note.noteText;if(ne.prototype.AreSharedAnnotationsAllowed.call(r)){r._lastIsPublicValue=r._note.isPublic;r._note.createdByCurrentUser=!0}r.setViewText(r._formatText(r._note.noteText));r._switchToExistingMode();r._updateDate(r._note);r._addDataAnnotationId(r._note.id);if(r._stopEditAfterSave){r.StopEdit();r._stopEditAfterSave=!1}if(r._closeAfterSave){r.Close();r._closeAfterSave=!1}r.focusElementAfterSaveNote()}r._note.createdByCurrentUser=!0;if(ne.prototype.AreSharedAnnotationsAllowed.call(r)){var o=D["default"].GetSelectionInstanceIdFromNoteHolder(r.GetContainer().GetParent());o&&Q["default"].ScrollNoteInRail(o,o)}r._createCallback&&r._createCallback(e.note);ne.prototype.AreSharedNotesAllowed.call(r)&&"object"!=typeof t&&(t=JSON.parse(t));if(ne.prototype.AreSharedNotesAllowed.call(r)&&t.SelectedContacts.length>0){r._addSharedNote();r._optionalProvider&&ne.prototype.AreSharedNotesAllowed.call(r)&&"restore"!=r._mode&&r.updatePreviouslySelectedContacts(t,(function(t){for(var n=0;n<t.SelectedContacts.length;n++){const o=r.getNoteIdSent(e.note);var i=null;"highlight"==e.note._type&&(i=e.note.id);r._optionalProvider.AddNotePermission(o,i,t.SelectedContacts[n])}}),n)}r._selectedHighlightColor&&r._selectedHighlightColor!==r._note.highlightColor&&r.editNoteHighlightColorSuccessCallback();r._note&&r._note.createdBy&&r._setEditNoteLabelAttribute(r._note.createdBy);G["default"].Publish("Cobalt.Foldering.Note.Created",r)},l=function(){r._requestOutstanding=!1;r._hideSaveMessage();r._stopEditAfterSave=!1};if(this._selectedHighlightColor){this._previousHighlightColor=this._note.highlightColor;this._note.highlightColor=this._selectedHighlightColor}if(this._optionalProvider){var d=null;"restore"!==this._mode&&(d=H["default"].NewData);if(ne.prototype.AreSharedNotesAllowed.call(this)&&this.oldId&&"document"==this._note._type){this.rewriteContactsWidget(this);this._note.selectedHtml=null}this._optionalProvider.AddNoteToDocument(this._guid,this._note,d,z["default"].GetUserNameEncoded(),s,l)}else{(new T.A).CreateNote(this._guid,this._note,z["default"].GetUserNameEncoded(),s,l)}ne.prototype.AreSharedNotesAllowed.call(this)&&this.inactivateNote()}else e&&this.RemoveSelf()}i||(H["default"].NewData=null)};ne.prototype.getNoteIdSent=function(e){return e._clientMetadata&&e._clientMetadata.noteId||e.id};ne.prototype.focusElementAfterSaveNote=function(){};ne.prototype.GetNoteHighlightDataToUpdate=function(e){const t=(0,R.GetHighlightIdFromNoteContainerInstance)(e),n=(0,X.GetCachedHighlightData)(t);n.highlightColor=k["default"].HighlightColor;return n};ne.prototype.UpdateNoteHighlight=function(e,t,n,i){const o=Z["default"].CreateAnnotationsProvider(t),r=this.GetNoteHighlightDataToUpdate(e);o.UpdateHighlight(r,n,i)};ne.prototype._saveExistingNote=function(e,t){const n=(0,m.isVisible)(document.getElementById("coid_contacts_lightbox"));if(!this._requestOutstanding){var i=(0,S.Trim)(this.getEditText());if(ne.prototype.AreSharedAnnotationsAllowed.call(this))var o=this._note.isPublic;if(i&&!n){if(i!=this._lastText||ne.prototype.AreSharedAnnotationsAllowed.call(this)&&o!=this._lastIsPublicValue){this._requestOutstanding=!0;this._showSaveMessage();var r=this;this._note.noteText=i;this._note.createdByCurrentUser=!0;I.A.populateCurrentDocumentSnapshotInfo(this._note);const e=this.saveSuccessHandler.bind(this);var a=function(){r._requestOutstanding=!1;r._hideSaveMessage();r._stopEditAfterSave=!1};if(this._optionalProvider)this._optionalProvider.UpdateNote(this._guid,this._note,z["default"].GetUserNameEncoded(),e,a);else{(new T.A).UpdateNote(this._guid,this._note,z["default"].GetUserNameEncoded(),e,a)}}else{this.setEditText(this._lastText);ne.prototype.AreSharedAnnotationsAllowed.call(this)&&(this._note.isPublic=this._lastIsPublicValue);this.StopEdit()}if(this._selectedHighlightColor&&this._selectedHighlightColor!==this.getNote().highlightColor){this._previousHighlightColor=this.getNote().highlightColor;this.UpdateNoteHighlight(this.GetContainer().GetInstance(),this._guid,this.editNoteHighlightColorSuccessCallback.bind(this,!0),this.editNoteHighlightColorErrorCallback.bind(this))}if(this.AreSharedNotesAllowed()){this.updateContactList("Final");this.inactivateNote();this._updateSharedNote();this.addOrRemoveContacts(t)}G["default"].Publish("Cobalt.Foldering.Note.Updated",this)}else e&&this._deleteNote()}n||(H["default"].NewData=null)};ne.prototype.SubmitNoteHightlightColorUpdateEvent=function(e,t,n,i){const o=(0,X.GetCachedHighlightData)(e),r=Object.assign({},o,{changedColor:!0,oldHighlightColor:n,newHighlightColor:i});A["default"].WriteSharedAnnotationEvent("Cobalt.Document.Annotations.Highlight.Update",t,r)};ne.prototype.editNoteHighlightColorSuccessCallback=function(e){const t=(0,R.GetHighlightIdFromNoteContainerInstance)(this.GetContainer().GetInstance());this.getNote().highlightColor=this._selectedHighlightColor;e&&this.SubmitNoteHightlightColorUpdateEvent(t,this._guid,this._previousHighlightColor,this._selectedHighlightColor)};ne.prototype.GetNoteHighlightColorFromClass=function(e){const t=[V["default"].classes.highlightYellow,V["default"].classes.highlightGreen,V["default"].classes.highlightBlue,V["default"].classes.highlightPink,V["default"].classes.highlightOrange,V["default"].classes.highlightPurple,V["default"].classes.highlightBlack];for(let n=0;n<t.length;n++)if(e?.classList.contains(t[n]))return t[n]};ne.prototype.ChangeNoteHighlightColor=function(e,t){const n=(0,R.GetHighlightIdFromNoteContainerInstance)(e.GetInstance()),i=this.GetNoteHighlightColorFromClass(e._root);if(t!==i){Y["default"].AddNoteColorCssMarkup(e,{highlightColor:t});Y["default"].AddHighlightColorCssMarkup(n,{highlightColor:t});Y["default"].RemoveNoteColorCssMarkup(e,{highlightColor:i});Y["default"].RemoveHighlightColorCssMarkup(n,{highlightColor:i});ee.A.AddNoteMarkerColor(e,{highlightColor:t});ee.A.RemoveNoteMarkerColor(e,{highlightColor:i});this.UpdateActiveHighlightColor(t)}};ne.prototype.editNoteHighlightColorErrorCallback=function(){this.ChangeNoteHighlightColor(this.GetContainer(),this._previousHighlightColor);this._selectedHighlightColor=null};ne.prototype.saveSuccessHandler=function(e){this._requestOutstanding=!1;this.unmodifiedState=null;this._hideSaveMessage();if(e.id){if(this.AreSharedAnnotationsAllowed()){var t="Cobalt.Foldering.Note.NewNoteData";G["default"].Publish(t,new U["default"]({},{},t,"1.0",e.note))}this.setNote(e.note);I.A.storeCurrentDocumentSnapshotInfo(this._note);this._lastText=this._note.noteText;this._note.createdByCurrentUser=!0;this.setViewText(this._formatText(this._note.noteText));this._updateDate(this._note);if(this.AreSharedHighlightsAllowed()){var n=D["default"].GetSelectionInstanceIdFromNoteHolder(this.GetContainer().GetParent());document.querySelectorAll(`.${n}`).forEach((e=>e.classList.remove("co_hlShared")))}if(this._stopEditAfterSave){this.StopEdit();this._stopEditAfterSave=!1}if(this._closeAfterSave){this.Close();this._closeAfterSave=!1}if(this._convertCallback){this._convertCallback(this._note);delete this._convertCallback}this._cancelCallback&&delete this._cancelCallback}this.AreSharedAnnotationsAllowed()&&(this._lastIsPublicValue=this._note.isPublic);if(this.AreSharedNotesAllowed()){this._initialList=this.createContactList();this.addOrRemoveContacts()}G["default"].Publish("Cobalt.Foldering.Note.EditedAndSaved",{})};ne.prototype.inactivateNote=function(){document.querySelectorAll(".contactsActive").forEach((e=>e.classList.add("contactsInactive")));document.querySelectorAll(".contactsActive").forEach((e=>e.classList.remove("contactsActive")));document.querySelectorAll(".dropRightActive").forEach((e=>e.classList.add("dropRightInactive")))
;document.querySelectorAll(".dropRightActive").forEach((e=>e.classList.remove("dropRightActive")));document.querySelectorAll(".dropDownActive").forEach((e=>e.classList.add("dropDownInactive")));document.querySelectorAll(".dropDownActive").forEach((e=>e.classList.remove("dropDownActive")));document.querySelectorAll(".sharedWithActive").forEach((e=>e.classList.add("sharedWithInactive")));document.querySelectorAll(".sharedWithActive").forEach((e=>e.classList.remove("sharedWithActive")));document.querySelectorAll(".addBtnActive").forEach((e=>e.classList.add("addBtnInactive")));document.querySelectorAll(".addBtnActive").forEach((e=>e.classList.remove("addBtnActive")));document.querySelectorAll(".deleteBtnActive").forEach((e=>e.classList.add("deleteBtnInactive")));document.querySelectorAll(".deleteBtnActive").forEach((e=>e.classList.remove("deleteBtnActive")));document.querySelectorAll(".coid_contacts_addedContactsInputActive").forEach((e=>e.classList.add("coid_contacts_addedContactsInputInactive")));document.querySelectorAll(".coid_contacts_addedContactsInputActive").forEach((e=>e.classList.remove("coid_contacts_addedContactsInputActive")));document.querySelectorAll(".viewMoreActive").forEach((e=>e.classList.add("viewMoreInactive")));document.querySelectorAll(".viewMoreActive").forEach((e=>e.classList.remove("viewMoreActive")));document.querySelectorAll(".viewLessActive").forEach((e=>e.classList.add("viewLessInactive")));document.querySelectorAll(".viewLessActive").forEach((e=>e.classList.remove("viewLessActive")));document.querySelectorAll(".contactsIdActive").forEach((e=>e.classList.add("contactsIdInactive")));document.querySelectorAll(".contactsIdActive").forEach((e=>e.classList.remove("contactsIdActive")));document.querySelectorAll(".toggleArrow").forEach((e=>e.classList.remove("icon_grey_down_arrow")));document.querySelectorAll(".toggleArrow").forEach((e=>e.classList.add("icon_grey_right_arrow")))};ne.prototype.addOrRemoveContacts=function(e){if(!this._initialList||!this._selectedContacts)return;var t=this.updatePermissions(this._initialList,this._selectedContacts,"Add"),n=this.updatePermissions(this._initialList,this._selectedContacts,"Remove");const i=this.getNoteIdSent(this._note);var o=null;"highlight"==this._note._type&&(o=this._note.id);if(t.length){if(this.AreSharedNotesAllowed()){var r={shareNoteOrigin:e,contentType:P["default"][0].ContentType};(async()=>{var e="/Document/v2/ShareNoteEvent?q="+(new Date).getTime();const t=new F["default"](B["default"].Document,e,{headers:{Accept:"application/json","Content-Type":"application/json"}});await t.Put(JSON.stringify(r))})()}for(let e=0;e<t.length;e++)this._optionalProvider.AddNotePermission(i,o,t[e])}if(n.length)for(let e=0;e<n.length;e++)this._optionalProvider.RemoveNotePermission(i,o,n[e]);if((t.length>0||n.length>0)&&this.AreSharedNotesAllowed()){this.updatePreviouslySelectedContacts(this._selectedContacts,(function(){}),e);x["default"].IsSharedNoteCountsUpToDate=!1;x["default"].prototype.UpdateNoteCounts()}this.setContactListData(this._selectedContacts);this.updateContactList("Initial")};ne.prototype.updatePermissions=function(e,t,n){if("Add"===n)return c().differenceBy(t.SelectedContacts,e.SelectedContacts,(e=>e.BrowserKey));if("Remove"===n)return c().differenceBy(e.SelectedContacts,t.SelectedContacts,(e=>e.BrowserKey))};ne.prototype._deleteNote=function(e){if(!this._requestOutstanding){this._requestOutstanding=!0;this._note.noteText=this._lastText;ne.prototype.AreSharedAnnotationsAllowed.call(this)&&(this._note.isPublic=this._lastIsPublicValue);var t=this;if(ne.prototype.AreSharedNotesAllowed.call(t)){t.updateContactList("Final");this._note.selectedHtml=JSON.stringify(t._selectedContacts)}var n=function(e){t._requestOutstanding=!1;M["default"].RemoveNoteFromNotesData(e.note);x["default"].IsSharedNoteCountsUpToDate=!1;if(e.id){t.setNote(e.note);t._setupUndo(e.note);var n={note:t._note,documentGuid:t._guid};t.RemoveSelf();t._fireDeleteEvent(n)}x["default"].prototype.UpdateNoteCounts()},i=function(){t._requestOutstanding=!1;e&&e(t._note.id)};if(this._optionalProvider){this._optionalProvider.DeleteAnnotation(this._guid,this._note,z["default"].GetUserNameEncoded(),n,i);this._selectedContacts=this.createContactList()}else{(new T.A).DeleteNote(this._guid,this._note,z["default"].GetUserNameEncoded(),n,i)}}};ne.prototype.RemoveSelf=function(e){const t=this._deleteCallback,n=this._note,i=this._lastText,o=this._container.GetParent(),r=this.GetHighlightActivator();this._container.SetNextFocusableElement(r);this._container.RemovePopup(this._instance);if(!e&&t){t(n);if(!i){const e=Y["default"].ParseIdFromNoteHolder(o),t=Y["default"].GetInstanceIdClass(e);(0,R.DeleteCachedNoteContainer)(e);J.A.RemoveHighlightingMarkup(t)}}};ne.prototype._setupUndo=function(e){this._container.SetupUndo(e,this._orphan)};ne.prototype._showSaveMessage=function(){(0,h.showElements)(this._saveMessage);(0,h.hideElements)(this._dateNode);(0,h.hideElements)(this._timeNode);this.setStatusMessage(b["default"].lookup("SC.Foldering.Notes.SaveMessage","Saving"))};ne.prototype._hideSaveMessage=function(){(0,h.hideElements)(this._saveMessage);(0,h.showElements)(this._dateNode);(0,h.showElements)(this._timeNode)};ne.prototype._updateDate=function(e){if(e.date)this._setDate(e);else{(0,h.hideElements)(this._dateNode);(0,h.hideElements)(this._timeNode)}};ne.prototype._setDate=function(e){if(e.date){var t=e.date.split(" "),n=t[0]+" "+t[1]+" "+t[2],i=null==t[5]?t[3]+" "+t[4]:t[3]+" "+t[4]+" "+t[5];this._dateNode.forEach((e=>{e.textContent=n}));this._timeNode.forEach((e=>{e.textContent=i}))}};ne.prototype._updateClientId=function(e){a()(this._parent).find(".co_noteHeader_clientID").text(e)};ne.prototype._addDataAnnotationId=function(e){this._parent?.setAttribute(V["default"].ids.dataAnnotationId,e)};ne.prototype._deleteOrRemove=function(e){"existing"==this._mode||"orphan"==this._mode?this._deleteNote(e):this.RemoveSelf()};ne.prototype._fireUndoEvent=function(e){var t=new U["default"](e,{},"Cobalt.Foldering.Note.Undo","1.0");G["default"].Publish("Cobalt.Foldering.Note.Undo",t)};ne.prototype._fireCreateEvent=function(e){var t=new U["default"](e,{},"Cobalt.Foldering.Note.Add","1.0");G["default"].Publish("Cobalt.Foldering.Note.Add",t)};ne.prototype._fireDeleteEvent=function(e){var t=new U["default"](e,{},"Cobalt.Foldering.Note.Delete","1.0");G["default"].Publish("Cobalt.Foldering.Note.Delete",t)};ne.prototype._displayAlert=function(e){alert(e)};ne.prototype._drawProximityMessage=function(e,t,n,i,o){if(this.messagePopup){this.messagePopup.Destroy();delete this.messagePopup}this.messagePopup=new v["default"](e,t,n,i,o||!1,220,20)};ne.prototype._subscribeToEvents=function(){var e=this;this._deleteSubscription=G["default"].Subscribe("Cobalt.Document.Note.Delete",(function(t,n){n.Data.noteId==e._note.id&&e._deleteOrRemove()}));this.AreSharedAnnotationsAllowed()&&(this._selectedChangedSubscription=G["default"].Subscribe("Cobalt.Document.Note.SelectedStatesChanged",this._onSelectedChanged,this));A["default"].isNarrowTocDisplayEnabled()&&(this._rightColumnExpandCollapseSubscription=G["default"].Subscribe("Cobalt.Website.RightColumn.Toggled",this._onRightColumnCollapseExpand,this));this._outlineBuilderOpenPanelSubscription=G["default"].Subscribe(V["default"].events.outlineBuilderOpenPanel,e.CancelEdit,this);this.setupShareEvents()};ne.prototype._onRightColumnCollapseExpand=function(e,t){!t.Data.collapseRightRail&&this.isEditing()&&setTimeout((()=>{this._textArea.focus()}))};ne.prototype.removeContacts=function(){var e=this;document.querySelectorAll(".co_sharedNotesPerson a, .co_sharedNotesGroup a").forEach((t=>t.addEventListener("click",(function(t){var n=this.parentNode.getAttribute("id"),i=t.target.parentNode?.closest("#sharedNotesHyperlink")?.querySelector(".sharedWithText");this.parentNode?.remove();e.updateContactList("Final");e.updateCollaborationData(n);var o=e._selectedContacts.SelectedContacts.length,r=b["default"].format("SC.Foldering.SharedNotes.SharedWith",{Count:o},"Shared with "+o);if(o<=5){(0,h.hideElements)(document.querySelectorAll(".viewMoreActive"));(0,h.hideElements)(document.querySelectorAll(".viewLessActive"))}
o>0?i&&(i.textContent=r):e.resetSelectedContacts()}))))};ne.prototype.getInitialHyper=function(e){var t='id="contactsId" class="contactsId co_linkBlue '+(e?"Inactive":"Active")+'" type="button"',n='id="previousId" class="js-previouslyShared co_disable disabled" disabled type="button"';return`<div class="sharedNotesHyperlinkWrapper">${b["default"].format("SC.Foldering.SharedNotes.ShareWith",{Attrs1:t,Attrs2:n},"Share with <button "+t+">contacts</button> or <button "+n+">previously shared</button>")}</div>`};ne.prototype._toggleHelper=function(){const e=this._parent?.querySelector(".coid_contacts_addedContactsInputActive");if(e){(0,h.toggleVisibility)(e);const t=(0,m.isVisible)(e);this._parent.querySelector("a#sharedWith")?.setAttribute("aria-expanded",t)}document.querySelectorAll(".toggleArrow").forEach((e=>{e.classList.toggle("icon_grey_right_arrow");e.classList.toggle("icon_grey_down_arrow")}))};ne.prototype.setupShareEvents=function(){this.removeShareTooltips();var e=this;document.querySelectorAll(".addBtnActive").forEach((t=>t.addEventListener("click",(function(){let t=e.getContactListData();t=JSON.stringify(t);E["default"].Draw(E["default"].Mode.Collaboration,t)}))));this.renderShareTooltip(this._parent?.querySelector(".addBtnActive"));this.renderShareTooltip(this._parent?.querySelector(".sharedWithActive"));document.querySelectorAll(".deleteBtnActive").forEach((t=>t.addEventListener("click",(function(){document.querySelector(".coid_contacts_addedContactsInputActive")?.replaceChildren();e.resetSelectedContacts()}))));this.renderShareTooltip(this._parent?.querySelector(".deleteBtnActive"))};ne.prototype.renderShareTooltip=function(e){if(e){const t=new te["default"](e);t.render();this._shareTooltips.push(t)}};ne.prototype.removeShareTooltips=function(){if(this._shareTooltips?.length){this._shareTooltips.forEach((e=>e.remove()));this._shareTooltips=[]}};ne.prototype.resetSelectedContacts=function(){this._selectedContacts=null;a()(this._parent).find(".contactsActive").html(this.getInitialHyper(!1));if(this.AreSharedNotesAllowed()){this._selectedContacts=this.createContactList();this.setupPreviouslySelectedContactsEvents();this._selectedContacts&&this._selectedContacts.length>0?this.togglePreviouslySelectedContacts(!0):this.togglePreviouslySelectedContacts(!1)}};ne.prototype.hasSelectedContacts=function(){return this._selectedContacts&&this._selectedContacts.SelectedContacts.length>0};ne.prototype.getPreviouslySelectedContacts=function(e=c().identity){this.AreSharedNotesAllowed()&&this._optionalProvider&&this._optionalProvider.GetPreviouslySelectedContacts((t=>{this._selectedContacts=JSON.parse(t);e()}))};ne.prototype.setupPreviouslyShared=function(){this.getPreviouslySelectedContacts((()=>{this.togglePreviouslySelectedContacts(this.hasSelectedContacts())}));this.setupPreviouslySelectedContactsEvents()};ne.prototype.setupPreviouslySelectedContacts=function(){if(!this.hasSelectedContacts())return;this._initialList=this.createContactList();this.renderContactsWidget(this);const e=this.getIdFromContainer();this.activateNote(e);this.updateContactList("Final");this.collapseContacts();this.removeContacts();this.setupShareEvents();(0,h.showElements)(document.querySelectorAll(".coid_contacts_addedContactsInputActive"));(0,h.showElements)(document.querySelectorAll(".coid_contacts_addedContactsInputActive li"));this._parent.querySelector("a#sharedWith")?.setAttribute("aria-expanded",!0);document.querySelectorAll(".toggleArrow").forEach((e=>e.classList.remove("icon_grey_right_arrow")));document.querySelectorAll(".toggleArrow").forEach((e=>e.classList.add("icon_grey_down_arrow")))};ne.prototype.setupPreviouslySelectedContactsEvents=function(){a()(this._parent).find("button.js-previouslyShared").unbind().click((e=>{e.currentTarget?.classList.contains("disabled")||this.getPreviouslySelectedContacts((()=>{this.setupPreviouslySelectedContacts();this.togglePreviouslySelectedContacts(this.hasSelectedContacts())}))}))};ne.prototype.togglePreviouslySelectedContacts=function(e){a()(this._parent).find("button.js-previouslyShared").toggleClass("co_disable disabled",!e);a()(this._parent).find("button.js-previouslyShared").toggleClass("co_linkBlue",e);a()(this._parent).find("button.js-previouslyShared").prop("disabled",!e)};ne.prototype.updatePreviouslySelectedContacts=function(e,t,n){"string"==typeof e&&(e=JSON.parse(e));if(this._optionalProvider){e.rootNote=n;e.contentType=P["default"][0].ContentType;const i=e=>{t(e);this.togglePreviouslySelectedContacts(this.hasSelectedContacts())};this._optionalProvider.UpdatePreviouslySelectedContacts(e,i)}};ne.prototype.createContactList=function(e=[]){return{SelectedContacts:[...e]}};ne.prototype.createSharedContacts=function(e,t){var n=t?"Inactive":"Active",i="";if("new"===this._mode||"existing"===this._mode)var o=this._note.createdByCurrentUser?"IsCreatedByCurrentUser":"";!0===t&&(i='<div id="sharedNotesHyperlink" class="contacts'+n+" "+o+'">');if(e){const o=b["default"].lookup("SC.Foldering.SharedNotes.AddContacts","Add Contacts");var r;i+='<div class="co_sharedWithContainer"><a id="sharedWith" aria-expanded="false" aria-controls="coid_contacts_addedContactsInput" class="sharedWith'+n+'" href="javascript:void(0);" role="button" title="'+b["default"].lookup("SC.Foldering.SharedNotes.ViewShared","View Shared List")+'"><span id="dropRight" class="icon25 icon_grey_right_arrow toggleArrow"></span><span class="sharedWithText">'+b["default"].format("SC.Foldering.SharedNotes.SharedWith",{Count:e.SelectedContacts.length},"Shared with "+e.SelectedContacts.length)+"</span></a>";i+=`<a href="javascript:void(0);" role="button" class="co_sharedNotesBtn addBtn${n}" title="${o}">\n                <span id="addBtn" class="icon25 icon_plus">${o}</span>\n            </a>\n            <a href="javascript:void(0);" role="button" class="co_sharedNotesBtn deleteBtn${n}" title="`+b["default"].lookup("SC.Foldering.SharedNotes.RemoveAll","Remove All")+`">\n                <span id="deleteBtn" class="icon25 icon_close">\n                    ${b["default"].lookup("SC.Foldering.SharedNotes.DeleteAll","Delete All")}\n                </span>\n            </a>      \n        </div>`;i+=!1===t?`<ul role="region" aria-labelledby="sharedWith" class="co_defaultInput co_contacts_addedContactsInput ui-droppable coid_contacts_addedContactsInput${n}" title="${o}" id="coid_contacts_addedContactsInput">`:`<ul role="region" aria-labelledby="sharedWith" class="co_defaultInput co_contacts_addedContactsInput ui-droppable coid_contacts_addedContactsInputInactive" title="${o}" id="coid_contacts_addedContactsInput">`;if(e.SelectedContacts.length>0)for(r=0;r<e.SelectedContacts.length;r++)if(e.SelectedContacts[r].ContactId){var a=b["default"].format("SC.Foldering.SharedNotes.RemoveFullName",{FirstName:e.SelectedContacts[r].FirstName,LastName:e.SelectedContacts[r].LastName},"Remove </span><span>"+e.SelectedContacts[r].FirstName+" "+e.SelectedContacts[r].LastName);const t=b["default"].format("SC.Foldering.SharedNotes.RemoveTitle",{Name:e.SelectedContacts[r].LastName},"Remove "+e.SelectedContacts[r].LastName);i+='<li id="'+e.SelectedContacts[r].BrowserKey+'" class="co_sharedNotesPerson removerClass'+e.SelectedContacts[r].BrowserKey+'" style="display:none">';i+='<a role="button" id="notePerson'+e.SelectedContacts[r].BrowserKey+'" title="'+t+'" href="javascript:void(0);"><span class="icon25 icon_close">'+a+"</span></a></li>"}else{var s=b["default"].format("SC.Foldering.SharedNotes.RemoveGroup",{GroupName:e.SelectedContacts[r].GroupName},"Remove </span><span>"+e.SelectedContacts[r].GroupName);const t=b["default"].format("SC.Foldering.SharedNotes.RemoveTitle",{Name:e.SelectedContacts[r].GroupName},"Remove "+e.SelectedContacts[r].GroupName);i+='<li id="'+e.SelectedContacts[r].BrowserKey+'" class="co_sharedNotesGroup removerClass'+e.SelectedContacts[r].BrowserKey+'" style="display:none;">';i+='<a role="button" id="noteGroup'+e.SelectedContacts[r].BrowserKey+'" title="'+t+'" href="javascript:void(0);"><span class="icon25 icon_close">'+s+"</span></a></li>"}}i+="</ul>";!0===t&&(i+="</div>");return i};ne.prototype.updateCollaborationData=function(e){if(this.hasSelectedContacts()){
const t=t=>t.BrowserKey!==e,n=this._selectedContacts.SelectedContacts.filter(t),i=this.createContactList(n);this._selectedContacts=i;this.setContactListData(i)}};ne.prototype.subscribeToEvents=function(){this._subscriptions=[];((e,t)=>{this._subscriptions.push(G["default"].Subscribe(e,t))})("Cobalt.Website.ContactWidget.ContactsSelectedForNotes",((e,t)=>{const n=this._parent?.querySelector(".contactsActive");if(!n)return;this._selectedContacts=JSON.parse(t.Data);if(this.hasSelectedContacts()){const e=this.createSharedContacts(this._selectedContacts,!1);n.innerHTML=e;(0,h.showElements)(this._parent?.querySelectorAll(".coid_contacts_addedContactsInputActive"));(0,h.showElements)(this._parent?.querySelectorAll(".coid_contacts_addedContactsInputActive li"));this._parent.querySelector("a#sharedWith")?.setAttribute("aria-expanded",!0);this._parent?.querySelectorAll(".toggleArrow").forEach((e=>{e.classList.remove("icon_grey_right_arrow");e.classList.add("icon_grey_down_arrow")}));this.setupShareEvents();this._parent.querySelector("a#sharedWith")?.addEventListener("click",this._toggleHelper.bind(this));this.removeContacts();this.setContactListData(this._selectedContacts);this._parent?.querySelector("#sharedWith")?.focus()}else{n.innerHTML=this.getInitialHyper(!1);this._parent?.querySelector("#contactsId")?.focus()}}))};ne.prototype._onSelectedChanged=function(e,t){if(this._note&&this._dropDown){this.GetParent()?.classList.toggle(t.className||"co_active",!!this._note.isSelected);(parent?.style??{}).fontWeight=this._note.isSelected?"bold":""}};ne.prototype._onMinimizeNote=function(){if(s["default"].isIacOn("IAC-A11Y-DOC-NOTES"))if(this._container.triggeredByMaximizeIcon){this._container.triggeredByMaximizeIcon.focus();this._container.triggeredByMaximizeIcon=null}else this._focusHighlight()};ne.prototype._onFocusHighlightedRegion=function(e){e.stopPropagation();e.preventDefault()};ne.prototype._focusHighlight=function(){const e=this.GetHighlightActivator();e.removeEventListener("focus",this._onFocusHighlightedRegion);e.focus();e.addEventListener("focus",this._onFocusHighlightedRegion)};ne.prototype._noteHeaderClientIDTemplate=function(){return'<div class="co_noteHeader_metadata">\n                <span class="co_noteHeader_clientID"></span>\n            </div>'};ne.prototype.handleViewContainerClick=function(){if(ne.prototype.AreSharedAnnotationsAllowed.call(this)){w["default"].RemoveAllUndoMessages();var e=D["default"].GetSelectionInstanceIdFromNoteHolder(this.GetContainer().GetParent());Q["default"].ScrollNoteInRail(e,e);this._note.createdByCurrentUser&&this.Edit()}else this.Edit()};ne.prototype._buildViewHTML=function(){var e=this,t=b["default"].lookup("SC.Foldering.Note.Button.Edit","Edit");const n="new"===e._mode||e._note&&e._note.createdByCurrentUser?"":"co_hideState",i=this._note?.createdBy?.FirstName??"",o=this._note?.createdBy?.LastName??"",r=b["default"].format("SC.Foldering.Note.Button.EditLabel",{firstName:i,lastName:o},`Edit note ${i} ${o}`),a=b["default"].lookup("SC.Foldering.Note.MaximizeDialog.Label","Note"),l="document"===e._note._type;var d=[];d[d.length]=`<div ${l?"":'aria-modal="true" role="dialog"'}  class="co_viewNote" aria-label="${a}">`;d[d.length]=`<button type="button" class="co_noteIcon_edit ${n} co_linkBtn" aria-label="${r}">${t}</button>`;d[d.length]='\t<div class="co_noteHeader" role="heading" aria-level="3">';d[d.length]='\t\t<div class="co_noteHeader_createdBy">';d[d.length]='\t\t<span class="co_noteHeader_userName"></span>';d[d.length]="\t\t</div>";d[d.length]='\t\t<div class="co_noteHeader_dateTime">';d[d.length]='<span class="co_noteBody_date"></span>';d[d.length]="<span>&nbsp;</span>";d[d.length]='<span class="co_noteBody_time"></span>';d[d.length]="\t\t</div>";e.addNoteHeaderControls(d);d[d.length]=e._noteHeaderClientIDTemplate();d[d.length]="   </div>";d[d.length]='   <div class="co_viewNoteText">';d[d.length]="\t</div>";e.addNoteHeaderAdditionalControl(d);if(s["default"].isIacOn("IAC-A11Y-DOC-NOTES")){const t="highlight"===e._note._type,n="new"===e._mode||"restore"===e._mode;(t||!l&&n)&&e.addNoteFooterControls(d)}if("orphan"==e._mode){d[d.length]='<div class="co_persistedDocLink">';d[d.length]="</div>";d[d.length]='<div class="co_viewHighlightText">';d[d.length]="</div>"}d[d.length]="</div>";var c=d.join("");const u=document.createElement("template");u.innerHTML=c;this._viewContainer=u.content.firstElementChild;this._viewText=this._viewContainer.querySelector(".co_viewNoteText");if("orphan"==e._mode){this._highlightText=this._viewContainer.querySelector(".co_viewHighlightText");this._persistedDocLink=this._viewContainer.querySelector(".co_persistedDocLink")}if(!1===e._container.IsViewOnly()){this._viewContainer.querySelector("a.co_noteEdit")?.addEventListener("click",(t=>{e.Edit();t.preventDefault();t.stopPropagation()}));this._viewContainer.querySelector("a.co_noteDelete")?.addEventListener("click",(t=>{e._deleteOrRemove();t.preventDefault();t.stopPropagation()}));e._minimizeNotes&&this._viewContainer.querySelector("a.co_noteMinimize")?.addEventListener("click",(t=>{e._container.ToggleNote();e._onMinimizeNote();t.preventDefault();t.stopPropagation()}));this._viewContainer.addEventListener("click",this.handleViewContainerClick);this._viewText?.addEventListener("click",this.viewTextClick)}(ne.prototype.AreSharedAnnotationsAllowed.call(e)||ne.prototype.AreSharedNotesAllowed(e)&&!(0,g.IsIpad)())&&e.GetCreatedBy().then((function(t){const n=e._viewContainer.querySelector(".co_noteHeader_userName");n&&(n.textContent=t)}));return this._viewContainer};ne.prototype.addNoteHeaderControls=function(e){var t=b["default"].lookup("SC.Foldering.Note.Edit","Edit"),n=b["default"].lookup("SC.Foldering.Note.Delete","Delete"),i=b["default"].lookup("SC.Foldering.Note.Minimize","Minimize");if(!this._container.IsViewOnly()&&"orphan"!=this._mode){e[e.length]=' <div class="co_noteHeader_controls">';e[e.length]='   <a href="#" role="button" class="co_noteEdit co_hideState" title="'+t+'">'+t+"</a>";e[e.length]='   <a href="#" role="button" onmousedown="return false;" class="co_noteDelete co_hideState" title="'+n+'">'+n+"</a>";this._minimizeNotes&&(e[e.length]=' <a href="#" role="button" class="co_noteMinimize co_widget_collapseIcon" title="'+i+'">'+i+"</a>");e[e.length]=" </div>"}};ne.prototype.addNoteHeaderAdditionalControl=function(){};ne.prototype.addNoteFooterControls=function(){};ne.prototype.viewTextClick=function(){};ne.prototype.isWidgetAllowed=function(){return this.AreSharedNotesAllowed()&&(!f["default"].Instance.ContainerType||P["default"][0]&&P["default"][0].DocGuid)&&!s["default"].isFeatureEnabled("BLOCK SHARE NOTE LINK")};ne.prototype.getContactsJson=function(){var e=this;return e._optionalProvider.GetNotePermissionsFromNoteData(e._note,(function(t){var n=e.updateContactsWidget(t);a()(e._parent).find("#sharedNotesHyperlink").remove();a()(e._parent).find(".co_noteBody").append(n);e.setContactListData(t);if(a()(e._parent).find(".co_noteArea").is(":visible")){const t=e.getIdFromContainer();e.activateNote(t)}e.updateContactList("Initial");e.collapseContacts();e.removeContacts();e.setupShareEvents();e._parent.querySelector("a#sharedWith")?.addEventListener("click",e._toggleHelper.bind(e));e._initialList.SelectedContacts.length>0?e._addSharedNote():e.resetSelectedContacts();x["default"]._enableOrDisableStopSharingMyAnnotationsTextInDropdown()}))};ne.prototype._addSharedNote=function(){const e=this._parent||this._viewContainer,t=`<div role="img" aria-label="${b["default"].lookup("SC.Foldering.Note.SharedNote","Shared note")}" class="icon25 icon_people"></div>`;a()(e).find(".co_noteHeader_createdBy").prepend(t)};ne.prototype._updateSharedNote=function(){const e=a()(this._parent).find(".co_noteHeader_createdBy");if(this.hasSelectedContacts()){if(0==e.find(".icon_people").length){const t=`<div role="img" aria-label="${b["default"].lookup("SC.Foldering.Note.SharedNote","Shared note")}" class="icon25 icon_people"></div>`;e.prepend(t)}}else e.find(".icon_people").remove()};ne.prototype.renderContactsWidget=function(){var e=this,t=JSON.stringify(e._selectedContacts),n=e.updateContactsWidget(t);if(e._parent){
a()(e._parent).find("#sharedNotesHyperlink").length>=1&&a()(e._parent).find("#sharedNotesHyperlink").remove();a()(e._parent).find(".co_noteBody").append(n);e.setContactListData(t);e._parent.querySelector("a#sharedWith")?.addEventListener("click",e._toggleHelper.bind(e))}};ne.prototype.rewriteContactsWidget=function(e){var t=this,n=e._note.selectedHtml,i=t.updateContactsWidget(n);if(t._parent){a()(t._parent).find("#sharedNotesHyperlink").length>=1&&a()(t._parent).find("#sharedNotesHyperlink").remove();a()(t._parent).find(".co_noteBody").append(i);t.setContactListData(n);a()(t._parent).find("#sharedNotesHyperlink").addClass("IsCreatedByCurrentUser");t._parent.querySelector("a#sharedWith")?.addEventListener("click",t._toggleHelper.bind(t))}};ne.prototype.updateContactsWidget=function(e){var t=this;t._contactsHtml=JSON.parse(e);var n=t._note.createdByCurrentUser?"IsCreatedByCurrentUser":"",i=null;return i=t._contactsHtml.SelectedContacts.length>0?t.createSharedContacts(t._contactsHtml,!0):'<div id="sharedNotesHyperlink" class="contactsActive '+n+'">'+t.getInitialHyper(!0)+"</div>"};ne.prototype._buidHTML=function(){var e=this,t=b["default"].lookup("SC.Foldering.Note.Delete","Delete");const n=b["default"].lookup("SC.Foldering.Note.EditDialog.Label","Edit Note"),i=("highlight"===this._note._type||!this._note._type)&&"orphan"!==this._mode;this._selectedContacts=null;this._dropDown=new N;this._dropDown.setInstanceId(1e3*this._container.GetInstance()+this._instance);const o=document.createElement("div");o.className="co_editNote";if("document"!==this._note._type){o.setAttribute("aria-modal","true");o.setAttribute("role","dialog")}o.setAttribute("aria-label",n);this.statusMsgElement=document.createElement("div");this.statusMsgElement.className="is-visually-hidden";this.statusMsgElement.setAttribute("role","status");const r=this._buildViewHTML();this._parent?.append(r,o,this.statusMsgElement);this._dropDown.setDomRoot(o);var s=function(t,n){if(e.isOpen())if("new"===e._mode||"restore"===e._mode)if(e.AreSharedNotesAllowed()){e.updateContactList("Final");e._saveNewNote(t,e._selectedContacts,n)}else e._saveNewNote(t);else"existing"!==e._mode&&"orphan"!==e._mode||e._saveExistingNote(t,n)};this._dropDown.draw();this._dropDown.addClickOffFunction((function(t){if(t.target.closest(".mce-menu-item, .mce-window, .co_NotesLightBoxAlert, #mce-modal-block, #TextEditor-KeyboardInstructionsContainer")){t.stopPropagation();return}if(e._dropDown&&e.isEditing()){e._stopEditAfterSave=!0;if((0,g.IsIpad)()){var n=a()(e._dropDown.getListRoot()).find("a.co_note_cancelbutton");n&&n.focus()}s(!1)}}));this._dropDown.open();(0,h.hideElements)(this._dropDown.getArrowIcon());(0,h.hideElements)(this._dropDown.getTitleElement());y["default"].HideElements(this._dropDown.getArrowIcon());y["default"].HideElements(this._dropDown.getTitleElement());a()(o).find(".co_clear").remove();var l=this._note.clientId;if("new"===this._mode){var d=z["default"].GetClientMatter();l={clientId:d.ClientId,clientMatterSeparator:d.Delimiter,matterId:d.MatterId};this._lastText="";ne.prototype.AreSharedAnnotationsAllowed.call(this)&&(this._lastIsPublicValue=!0)}var p='<form><div class="co_noteHeader" role="heading" aria-level="3"><div class="co_noteHeader_dateTime"><span class="co_noteBody_date"></span><span class="co_noteBody_time"></span><span class="co_noteBody_saveMessage">'+b["default"].lookup("SC.Foldering.Notes.SaveMessage","Saving")+'</span></div><div class="co_noteHeader_controls"><a href="javascript:void(0);" role="button" class="co_noteDelete" onmousedown="return false;" title="'+t+'">'+t+"</a></div>"+this._noteHeaderClientIDTemplate()+'</div><div class="co_noteBody">',m=b["default"].lookup("SC.Foldering.Note.AccessibleNoteTextLabel","Enter note text"),v=c().uniqueId("noteArea_");this.noteAreaTextId=v;p+=this.createNoteContainerHtml(v,m);var E=b["default"].lookup("SC.Foldering.Note.MaxLength","Maximum 3000 Characters");p+=`<div id="${v}-${C["default"].values.NOTE_MAX_LENGTH_ID_POSTFIX}" class="co_paragraph">`;p+=E;p+="</div>";const A=`${this.noteAreaTextId}_list_heading_aria_label`;if(i){p+=`<div class="co_colorOptionsContainer"><span id="${A}">`;p+=b["default"].lookup("SC.Foldering.Note.Color","Color:");p+="</span></div>"}e.isWidgetAllowed()&&("new"===e._mode?p=p+'<div id="sharedNotesHyperlink" class="contactsActive IsCreatedByCurrentUser">'+e.getInitialHyper(!1)+"</div>":"existing"===e._mode&&e._note.createdByCurrentUser&&!e._note.restored&&(p+='<div id="sharedNotesHyperlink" class="contactsActive IsCreatedByCurrentUser">Loading Contacts...</div>'));p+="</div>";p=(p=(p+='<div class="co_noteFooter"><ul class="co_dropdownBoxContent_buttons">')+'<li><input type="button" class="co_primaryBtn" value="'+b["default"].lookup("SC.Foldering.Notes.Button.Save","Save")+'"></input></li>')+'<li><a href="javascript:void(0);" role="button" class="co_note_cancelbutton">'+b["default"].lookup("SC.Foldering.Notes.Button.Cancel","Cancel")+"</a></li></ul></td></tr></table></div></form>";var w=this._dropDown.getListRoot();w?.insertAdjacentHTML("beforeend",p);if(i){const t=w?.querySelector(".co_colorOptionsContainer");e.AddColorOptions(t,(()=>{e._selectedHighlightColor=k["default"].HighlightColor;e.ChangeNoteHighlightColor(e.GetContainer(),e._selectedHighlightColor)}),A);e.UpdateActiveHighlightColor(e._note.highlightColor)}var x=function(e,t){var n=e.target||e.srcElement;n.value.length>t&&(n.value=n.value.substring(0,t))},T=a()(w).find("textarea.co_noteArea");T.off("keydown").on("keydown",(function(e){return function(e,t){var n=e.which||e.keyCode,i=e.target||e.srcElement,o=(e.ctrlKey||e.metaKey)&&["c","a","x"].includes(e.key)||n===K["default"].BACKSPACE||n===K["default"].TAB||n>=K["default"].PAGE_UP&&n<=K["default"].DELETE;return i.value.length<t||o}(e,3e3)}));T.off("input").on("input",(function(e){return x(e,3e3)}));T.off("propertychange").on("propertychange",(function(e){return x(e,3e3)}));if(e.AreSharedNotesAllowed()){var I=!1;if(e._note.restored&&e._note.selectedHtml&&"string"==typeof e._note.selectedHtml)try{I=JSON.parse(e._note.selectedHtml).SelectedContacts.length>0}catch(e){I=!1}if(("existing"===e._mode||"orphan"===e._mode)&&e._note.createdByCurrentUser&&!e._note.restored)var D=e.getContactsJson(e._note);e.setContactListData(D);("existing"===e._mode&&!e._note.createdByCurrentUser||e._note.restored&&I)&&e._addSharedNote()}a()(this._dropDown.getListRoot()).find("input[type=button]").click((function(){var t;t=this.closest("div#co_documentNotes")?C["default"].values.SHARED_NOTE_DOCUMENT:this.closest("div#co_inlineNotes")?C["default"].values.SHARED_NOTE_INLINE:C["default"].values.SHARED_NOTE_DEFAULT;if(e.getContactCount()>0){var n=e._note.location?"Cobalt.Foldering.Inline.Note.Share":"Cobalt.Foldering.Document.Note.Share",i=(0,S.Trim)(e._note.selectedText||"");(0,W.postUXEvent)(n,{docGuid:e._guid,text:i.length>1e3?i.substring(0,1e3):i})}if((0,S.Trim)(e.getEditText())){e._stopEditAfterSave=!0;s(!0,t)}else if((0,g.IsIpad)())e._displayAlert(b["default"].lookup("SC.Foldering.Notes.EmptySave","Enter text before saving."));else{e.setEditText(" ");e._drawProximityMessage(b["default"].lookup("SC.Foldering.Notes.EmptySave","Enter text before saving."),!0,a()(e._parent).find(".co_noteArea"),["center"],!0)}}));var M=a()(this._dropDown.getListRoot()).find("a.co_noteDelete");M.click((function(){e._lastText?e._deleteOrRemove():e.CancelEdit();return!1}));if(this.AreSharedAnnotationsAllowed()){var R;R=("folders"!==f["default"].Instance.ContainerType||!this.AreSharedNotesAllowed())&&"ClientMatterTree"===u["default"].PageData.CobaltPage?.ViewData?.FeatureConfigurations.matterTreeType;this._shareNoteToggleView=new _(this._note,R);var H=this._shareNoteToggleView.shareNoteToggleView;H=this._addReviewerPermissions(this._note,H);a()(this._dropDown.getListRoot()).find(".co_noteBody").append(H)}a()(this._dropDown.getListRoot()).find("ul a").click(this.CancelEdit.bind(this));this._updateClientId(l.clientId);if(this.AreSharedAnnotationsAllowed()){e.GetCreatedBy().then((function(t){a()(e._parent).find(".co_noteHeader_userName").text(t)}));this.ToggleSharedClass();this.GetParent()?.addEventListener("click",(function(t){
const n=t.target.closest(".co_noteIsPublic");t.currentTarget.contains(n)&&e.ToggleSharedClass()}))}this._dateNode=this._parent?.querySelectorAll("span.co_noteBody_date");this._timeNode=this._parent?.querySelectorAll("span.co_noteBody_time");this._textArea=this._dropDown.getListRoot()?.querySelector("textarea.co_noteArea");this._saveMessage=this._dropDown.getListRoot()?.querySelector("span.co_noteBody_saveMessage");if("existing"==this._mode||"restore"==this._mode||"orphan"==this._mode){this.setEditText(this._note.noteText);this._lastText=this._note.noteText;ne.prototype.AreSharedAnnotationsAllowed.call(this)&&(this._lastIsPublicValue=this._note.isPublic);this.setViewText(this._formatText(this._renderNoteText(this._note,100)));if("orphan"==this._mode){if(this._highlightText){var O=this._formatText(this._note.selectedText);this._highlightText.innerHTML=O;a()(this._dropDown.getListRoot()).find(".co_viewHighlightText").html(O)}if(this._persistedDocLink&&this._note.persistDocLink&&this._note.persistDate){var L=this._note.persistDocLink+"&contextData="+$["default"].PageContextData;this._persistedDocLink.innerHTML="<a href='"+L+"'>"+b["default"].lookup("SC.Foldering.Note.ViewDocument","View document as it existed on ")+this._note.persistDate+"</a>"}}}else M.css("display","none");this._setDate(this._note);this._hideSaveMessage();this._dropDown.close();document.body.addEventListener("click",this.handleBodyClick)};ne.prototype.handleBodyClick=function(e){e.target.closest("#contactsId")&&E["default"].Draw(E["default"].Mode.Collaboration)};ne.prototype.AddColorOptions=(e,t,n)=>{const i=(0,q.A)(t,n);e?.append(i)};ne.prototype.UpdateActiveHighlightColor=function(e){if(!this._parent||!e)return;this._parent.querySelectorAll(`button.${V["default"].classes.colorOptionItem}`).forEach((t=>{const n=t.value===e;t.classList.toggle(V["default"].classes.colorOptionItemActive,n);t.setAttribute("aria-current",n)}))};ne.prototype.CancelEdit=function(){if(!this._requestOutstanding){if("highlight"===this._note._type){this.AreSharedNotesAllowed()&&this.setEditText(this._lastText);this.RestoreOriginalNoteColor();this.StopEdit()}else if(this._lastText&&""!==this._lastText){this.setEditText(this._lastText);this.AreSharedAnnotationsAllowed()&&(this._note.isPublic=this._lastIsPublicValue);this.StopEdit()}else this.RemoveSelf("existing"===this._mode||"orphan"===this._mode);this._cancelCallback&&this._cancelCallback(this._note);if(this.isWidgetAllowed()&&this._note){const e=JSON.stringify(this._initialList),t=this.updateContactsWidget(e);if(this._parent){const n=a()(this._parent),i=n.find("#sharedNotesHyperlink");i.length>=1&&i.remove();n.find(".co_noteBody").append(t);this.setContactListData(e);this._parent.querySelector("a#sharedWith")?.addEventListener("click",this._toggleHelper.bind(this))}}}};ne.prototype.RestoreOriginalNoteColor=function(){if(this._selectedHighlightColor&&this._selectedHighlightColor!==this._note.highlightColor){this.ChangeNoteHighlightColor(this.GetContainer(),this._note.highlightColor);this._selectedHighlightColor=null}};ne.prototype.ToggleSharedClass=function(){if(!!this._note.isPublic){this.GetParent()?.classList.add("co_indicatePublic");this.GetParent()?.classList.remove("co_indicatePrivate")}else{this.GetParent()?.classList.add("co_indicatePrivate");this.GetParent()?.classList.remove("co_indicatePublic")}};ne.prototype.GetCreatedBy=async function(){var e=this._note.createdBy;if(e){return this._getInfoFromCreatedBy(e)}{const e=$["default"].Relative($["default"].Rest.ContactInformation(null)),t=new F["default"](B["default"].Website,e,{headers:{Accept:"application/json"}}),n=await t.Get();if(n.ok){const e=await n.json();return this._getInfoFromDataroom(e)}}};ne.prototype._getInfoFromDataroom=function(e){let t="";t=e.firstName&&e.lastName?b["default"].format("SC.Foldering.Note.GetCreatedByNames",{firstName:e.firstName,lastName:e.lastName},e.firstName+" "+e.lastName):e.firstName||e.lastName||"";return t};ne.prototype._getInfoFromCreatedBy=function(e){let t="";t=e.FirstName&&e.LastName?b["default"].format("SC.Foldering.Note.GetCreatedByNames",{firstName:e.FirstName,lastName:e.LastName},e.FirstName+" "+e.LastName):e.FirstName||e.LastName||"";return t};ne.prototype._addReviewerPermissions=function(e,t){if("REVIEWER"===w["default"].reviewerStatus){e.isPublic=!1;(0,h.hideElements)(t)}return t};ne.prototype._renderNoteText=function(e,t){if(!e.noteText||null===e.noteText)return"";var n=e.noteText;this.AreSharedAnnotationsAllowed()&&"highlight"===e._type&&n.length>t&&(n=n.substring(0,t)+" &hellip;");return n};ne.prototype.ActivateNoteByKeyboard=function(){};ne.prototype.GetNoteId=function(){const e=this._container.GetParent();return Y["default"].ParseIdFromNoteHolder(e)};ne.prototype.GetHighlightActivator=function(){const e=this.GetNoteId(),t=Y["default"].GetInstanceIdClass(e);return document.querySelector(`.${V["default"].classes.highlightActivator}.${t}`)};ne.prototype._setEditNoteLabelAttribute=function(e){const t=e?.FirstName??"",n=e?.LastName??"",i=b["default"].format("SC.Foldering.Note.Button.EditLabel",{firstName:t,lastName:n},`Edit note ${t} ${n}`);document.querySelectorAll(".co_noteEditButton").forEach((e=>e.setAttribute("aria-label",i)));document.querySelectorAll(".co_noteIcon_edit").forEach((e=>e.setAttribute("aria-label",i)));(document.querySelector(".co_noteEdit")??{}).textContent=i};ne.prototype.createNoteContainerHtml=function(e,t){return`<label for="${e}">${t}</label><textarea id="${e}" class="co_noteArea" aria-describedby="${e}-${C["default"].values.NOTE_MAX_LENGTH_ID_POSTFIX}"></textarea>`};const ie=ne;var oe,re=n(9520),ae=n(9512),se=n(721);ie.prototype.InitNote=function(e,t){const i="note"+this._instance,o=new ae["default"](3e3,i);return new Promise((i=>{Promise.resolve().then(n.bind(n,2663)).then((({EditorInitialize:n})=>{const r=this.GetEditorInitializeHandler(t,i,o);n(e,t,r,{autoFocus:!t})}))}))};ie.prototype.GetEditorInitializeHandler=function(e,t,n){const i=this;return function(o){if(e){i._viewer=o;o.on("LoadContent",(function(){let e=o.getContent({format:"text"});e=void 0===e?"":e;o.setContent(e,{format:"html"});o.getBody()?.setAttribute("aria-labelledby",i.noteAreaTextId);t(o)}))}else{i._editor=o;o.on("init",(function(){n.draw(i._parent?.querySelector(".co_paragraph"));n.setAriaAttribute(i._editor.bodyElement)}));o.on("LoadContent",(function(){i._note&&i._note.noteText&&o.setContent(i._note.noteText,{format:"html"});const e=o.getBody();if(e){e.setAttribute("aria-labelledby",i.noteAreaTextId);e.setAttribute("role","textbox")}const n=o.getKeyboardInstructions();(0,se.drawKeyboardInstructions)(document.getElementById(`noteKeyboardInstructions_${i.noteAreaTextId}`),n);t(o)}));const e=i.GetOnChangeNote(n);o.on("SetContent",e);o.on("Change",e);o.on("KeyUp",e);o.on("input",e)}}};ie.prototype.GetOnChangeNote=function(e){const t=this;let n=!1;var i=b["default"].lookup("SC.Foldering.NoteContainer.Lightbox.Title","Warning!");const o=e.charLimit;return function(r){t.unwrapExtraSpan(r);const s=this.getContent({format:"html"}),l=e.getStringLength(s),d=a()(this.editorContainer).parent().find(".co_paragraph");e.update(l,d,d);if(s.length>o){if(!n){var c=b["default"].lookup("SC.Foldering.NoteContainer.Lightbox.MessageTooLong","You have exceeded the 3,000 character limit for this field. Please remove some of your text and try again.");t.SetSaveAllowed(!1);n=!0;t.ShowAlert(i,c)}}else if(0==s.length){t.IsSaveAllowed()&&t.SetSaveAllowed(!1);n=!1}else if(!t.IsSaveAllowed()){t.SetSaveAllowed(!0);n=!1}}};ie.prototype.RemoveTinyMceNote=function(){if(this._viewer){this._viewer.remove();this._viewer=null}if(this._editor){this._editor.remove();this._editor=null}};ie.prototype.IsSaveAllowed=function(){return this._isSaveAllowed};ie.prototype.GetViewer=function(){return this._viewer||null};ie.prototype.GetEditor=function(){return this._editor||null};ie.prototype.SetSaveAllowed=function(e){var t=a()(this.GetParent()).find(".co_dropdownBoxContent_buttons input").prop("disabled",!e);e?t.removeClass("co_disabled"):t.addClass("co_disabled");this._isSaveAllowed=e};ie.prototype.getViewText=(oe=ie.prototype.getViewText,function(){
return this._viewer?this._viewer.getContent({format:"html"}):oe.call(this)});ie.prototype.setViewText=function(e){return function(t){this._viewer?this._viewer.setContent(t,{format:"html"}):e.call(this,t)}}(ie.prototype.setViewText);ie.prototype.getEditText=function(e){return function(){return this._editor?this.IsSaveAllowed()?this._editor.getContent({format:"html",cleanup:!0}):"":e.call(this)}}(ie.prototype.getEditText);ie.prototype.setEditText=function(e){return function(t){this._editor?this._editor.setContent(t,{format:"html"}):e.call(this,t)}}(ie.prototype.setEditText);ie.prototype._formatText=function(e){return function(t){return this._viewer?t:e.call(this,t)}}(ie.prototype._formatText);ie.prototype._updateClientId=function(){a()(this._parent).find(".co_noteHeader_clientID").remove()};ie.prototype.viewTextClick=function(e){"a"===e.target.tagName.toLowerCase()&&e.stopPropagation()};ie.prototype.updateContactsWidget=function(e){this._contactsHtml=JSON.parse(e);let t=null;if(this._contactsHtml&&this._contactsHtml.SelectedContacts&&this._contactsHtml.SelectedContacts.length>0)t=this.createSharedContacts(this._contactsHtml,!0);else if(!s["default"].isFeatureEnabled("BLOCK SHARE NOTE LINK")){t=`<div id="sharedNotesHyperlink" class="contactsActive ${this._note.createdByCurrentUser?"IsCreatedByCurrentUser":""}">${this.getInitialHyper(!0)}</div>`}return t};ie.prototype.ShowAlert=function(e,t){const n=this;this._lightbox||(this._lightbox=new re["default"]);var i=function(){n._lightbox.Remove()};this._lightbox.SetTitle(e);this._lightbox.SetId("co_NotesLightBoxId");this._lightbox.SetClass("co_NotesLightBoxAlert");var o=this._lightbox.GetContentDomElement(),r=this._lightbox.GetFooterDomElement(),a=document.createElement("ul");r.replaceChildren();o.replaceChildren();const s=document.createElement("div");s.id="co_NotesMessage";s.className="co_NotesMessage";s.textContent=t;o.append(s);this._lightbox.SetCloseLinkObject({alt:"Close",onclick:i});var l=document.createElement("a");l.setAttribute("tabindex","1");l.innerHTML="Ok";l.setAttribute("href","javascript:void(0);");l.classList.add("co_NotesLightBox_okbutton");l.addEventListener("click",i);document.createElement("li").append(l);a.append(l);r.append(a);this._lightbox.SetIsExpandedView(!0);this._lightbox.Draw();document.querySelector(".co_NotesLightBoxAlert .co_NotesLightBox_okbutton")?.focus()};ie.prototype.unwrapExtraSpan=function(e){var t=document.querySelectorAll(`#${CSS.escape(e.target.id)} span:not([data-mce-style]):not([data-mce-type]):not([id*="mce_"])`);if(t.length>0){[...t].flatMap((e=>[...e.childNodes])).forEach((e=>{const t=e.parentNode;t.replaceWith(...t.childNodes)}))}};ie.prototype.ActivateNoteByKeyboard=function(){a()(this._parent).find("a.co_noteMinimize").focus()};const le=ie.prototype.createNoteContainerHtml;ie.prototype.createNoteContainerHtml=function(e,t){return this._note.isHtmlNote?`<label id="${e}">${t}</label><div id="noteKeyboardInstructions_${e}" /><textarea class="co_noteArea"></textarea>`:le.call(this,e,t)};const de=ie.prototype.StopEdit;ie.prototype.StopEdit=function(){de.call(this);s["default"].isIacOn("IAC-A11Y-DOC-NOTES")&&this._container?.SetFocusOnEditButton()};const ce=ie;ce.prototype._updateClientId=function(e){a()(this._parent).find(".co_noteHeader_clientID").text("NO CLIENT ID"==e?"":e)};ce.prototype._buildViewHTMLPlatform=ce.prototype._buildViewHTML;ce.prototype._buildViewHTML=function(){var e=this._buildViewHTMLPlatform(),t=b["default"].lookup("SC.Foldering.Note.Edit","Edit");if(A["default"].isPracticalLawUsDocument()){e.removeEventListener("click",this.handleViewContainerClick);if(this._note.createdByCurrentUser){a()(e).find(".co_noteHeader_controls > a.co_noteEdit.co_hideState").removeClass("co_hideState");a()(e).find("button.co_noteIcon_edit").addClass("co_hideState")}var n=this._viewContainer?.querySelector(".co_noteHeader_createdBy")?.textContent??"",i=this._dropDown.getListRoot(),o=document.createElement("a");o.href="javascript:void(0);";o.title=t;o.className="co_noteEdit";o.textContent=t;o.addEventListener("click",(()=>this.StopEdit()));var r=document.createElement("div");r.className="co_noteHeader_createdBy";var s=document.createElement("span");s.className="co_noteHeader_userName";s.textContent=n;r.appendChild(s);const l=i?.querySelector(".co_noteHeader");l?.prepend(r);const d=l?.querySelector(".co_noteHeader_controls");d?.prepend(o)}return e};ce.prototype.EditBase=ce.prototype.Edit;ce.prototype.Edit=function(){document.querySelectorAll("#co_inlineNotes .co_notes").forEach((e=>e.classList.add("editMode")));if(this._hideOnOutsideClick&&s["default"].isIacOn("IAC-A11Y-DOC-NOTES")){l["default"].removePageTouchedListener(this._hideOnOutsideClick);l["default"].addPageTouchedListener(this._hideOnOutsideClick,a()(this._parent).find(".co_editNote").get(0))}return this.EditBase()};ce.prototype.StopEdit=function(e){return function(){document.querySelectorAll("#co_inlineNotes .co_notes").forEach((e=>e.classList.remove("editMode")));e.call(this);if(s["default"].isIacOn("IAC-A11Y-DOC-NOTES")){if(this._hideOnOutsideClick){l["default"].removePageTouchedListener(this._hideOnOutsideClick);l["default"].addPageTouchedListener(this._hideOnOutsideClick,this._viewContainer)}this._getNoteEditButton().focus()}}}(ce.prototype.StopEdit);ce.prototype.addNoteHeaderControlsPlatrorm=ce.prototype.addNoteHeaderControls;ce.prototype.addNoteHeaderControls=function(e){var t=b["default"].lookup("SC.Foldering.Note.Delete","Delete"),n=b["default"].lookup("SC.Foldering.Note.Minimize","Minimize"),i=!this._note||!this._note.createdByCurrentUser?"co_hideState":"",o=this._note?.createdBy?.FirstName??"",r=this._note?.createdBy?.LastName??"",a=b["default"].format("SC.Foldering.Note.Button.EditLabel",{firstName:o,lastName:r},`Edit note ${o} ${r}`);if(A["default"].isPracticalLawUsDocument()){e[e.length]=` <div class="co_noteHeader_controls ${i}">`;e[e.length]=`   <a role="button" href="javascript:void(0);" class="co_noteEdit co_hideState">${a}</a>`;e[e.length]=`   <a href="javascript:void(0);" onmousedown="return false;" class="co_noteDelete co_hideState" title="${t}">${t}'</a>`;this._minimizeNotes&&(e[e.length]=` <a href="javascript:void(0);" class="co_noteMinimize co_widget_collapseIcon" title="${n}">${n}</a>`);e[e.length]=" </div>"}else this.addNoteHeaderControlsPlatrorm(e)};ce.prototype.addNoteFooterControls=function(e){if(!A["default"].isPracticalLawUsDocument()&&!this._minimizeNotes&&s["default"].isIacOn("IAC-A11Y-DOC-NOTES")){const t=b["default"].lookup("SC.Foldering.Note.Edit","Edit");e[e.length]=o().template('<div class="co_noteFooter_controls">\n    <button type="button" class="co_defaultBtn co_noteLeaveBtn co_hideState">\n        <%-noteLeaveButton%>\n    </button >\n    <button type="button" class="co_defaultBtn co_editNoteBtn co_hideState">\n        <span class="icon25 icon_pencil-edit"></span><%-editNoteBtnText%>\n    </button >\n </div>')({noteLeaveButton:this.getNoteLeaveButtonHtml(),editNoteBtnText:t})}};ce.prototype.getNoteLeaveButtonHtml=function(){return`<span class="icon25 icon_back_arrow"></span>${b["default"].lookup("SC.Foldering.Note.NoteLeaveButton","Go to highlight")}\n\t\t\t<span class="co_accessibilityLabel">: ${this._note.selectedText.trim().split(" ",3).join(" ")}</span>`};ce.prototype.ActivateNoteByKeyboard=function(){const e=this._getNoteLeaveButton();if(!A["default"].isPracticalLawUsDocument()){e.removeClass("co_hideState");this._viewContainer?.querySelector("button.co_editNoteBtn")?.classList.remove("co_hideState")}if(this._hideOnOutsideClick){l["default"].removePageTouchedListener(this._hideOnOutsideClick);l["default"].addPageTouchedListener(this._hideOnOutsideClick,this._viewContainer)}e.get(0).focus()};ce.prototype._applyNoteAccessibilityPlatform=ce.prototype._applyNoteAccessibility;ce.prototype._applyNoteAccessibility=function(){this._applyNoteAccessibilityPlatform();if(A["default"].isPracticalLawUsDocument())return;const e=this._viewContainer?.querySelector("button.co_noteLeaveBtn"),t=this._viewContainer?.querySelector("button.co_editNoteBtn");this._hideOnOutsideClick=()=>{e?.classList.add("co_hideState");t?.classList.add("co_hideState")
;l["default"].removePageTouchedListener(this._hideOnOutsideClick)};this.editHandler=this.editHandler??(e=>{e.stopPropagation();e.preventDefault();l["default"].removePageTouchedListener(this._hideOnOutsideClick);this.Edit()});this.noteLeaveHandler=this.noteLeaveHandler??(n=>{l["default"].removePageTouchedListener(this._hideOnOutsideClick);n.stopPropagation();n.preventDefault();e?.classList.add("co_hideState");t?.classList.add("co_hideState");this._focusHighlight()});t&&t.addEventListener("click",this.editHandler);if(e){e.innerHTML=this.getNoteLeaveButtonHtml();e.focus();this.GetHighlightActivator()?.addEventListener("focus",this._onFocusHighlightedRegion);e.addEventListener("click",this.noteLeaveHandler)}};ce.prototype._removeNoteAccessibilityPlatrorm=ce.prototype._removeNoteAccessibility;ce.prototype._removeNoteAccessibility=function(){this._removeNoteAccessibilityPlatrorm();if(A["default"].isPracticalLawUsDocument())return;this.GetHighlightActivator()?.removeEventListener("focus",this._onFocusHighlightedRegion);l["default"].removePageTouchedListener(this._hideOnOutsideClick);this._viewContainer?.querySelector("button.co_noteLeaveBtn")?.removeEventListener("click",this.noteLeaveHandler);this._viewContainer?.querySelector("button.co_editNoteBtn")?.removeEventListener("click",this.editHandler)};ce.prototype._getNoteLeaveButton=function(){return A["default"].isPracticalLawUsDocument()?a()(this._parent).find("a.co_noteMinimize"):a()(this._parent).find("button.co_noteLeaveBtn")};ce.prototype._getNoteEditButton=function(){return A["default"].isPracticalLawUsDocument()?a()(this._parent).find("a.co_noteEdit"):a()(this._parent).find("button.co_editNoteBtn")};const ue=ce},4046:(e,t,n)=>{e.exports=n(4507)(86365)},4159:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>o});var i=n(3839);const o=Object.seal({hasInitialized:!1,currentHighlightSelectionClass:null,currentDocumentGuid:null,IsHighlighting:!1,SelectionInstanceCounter:0,SupportsCopyWithReference:!(i["default"].EnableIpad?i["default"].EnableIpad:i["default"].EnableIphone),currentDocGuid:null,HighlightColor:null,IsInfiniteScroll:!1,IsMousePressedInAnnotation:!1,AreNotesAndHighlightsFinishedLoading:!1,IsCollapsedView:!1,IsCopyWithoutReferenceEnabled:!1,ListParameters:null,ConvertNoteId:null,chunkSizeSuggestion:null,chunkableHeadnotes:!1,IsEditable:!0,IsDeletable:!0,IsNewDocumentView:!1})},4317:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(8286);const o=Object.freeze({[i["default"].classes.highlightYellow]:i["default"].classes.noteIconYellow,[i["default"].classes.highlightBlue]:i["default"].classes.noteIconBlue,[i["default"].classes.highlightGreen]:i["default"].classes.noteIconGreen,[i["default"].classes.highlightPink]:i["default"].classes.noteIconRed,[i["default"].classes.highlightOrange]:i["default"].classes.noteIconOrange,[i["default"].classes.highlightPurple]:i["default"].classes.noteIconPurple,[i["default"].classes.highlightBlack]:i["default"].classes.noteIconBlack}),r={AddNoteMarkerColor:function(e,t){if(t.highlightColor){const n=o[t.highlightColor]??"";e.AddNoteMarkerColorClass(n)}},RemoveNoteMarkerColor:function(e,t){if(t.highlightColor){const n=o[t.highlightColor]??"";e.RemoveNoteMarkerColorClass(n)}}}},4341:(e,t,n)=>{e.exports=n(615)(2658)},4383:(e,t,n)=>{e.exports=n(615)(7123)},4422:(e,t,n)=>{e.exports=n(4507)(73772)},4507:e=>{"use strict";e.exports=bundle_9c501a451e6a897939757a7935ce4526},4579:(e,t,n)=>{e.exports=n(4507)(26283)},4645:(e,t,n)=>{e.exports=n(4507)(97238)},4682:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>i});const i=Object.freeze({SHOW_ANNOTATIONS_PREFERENCE_KEY:"ShowAnnotationsPreferenceKey",SHARING_ANNOTATIONS_PREFERENCE_KEY:"SharingAnnotationsFilterPreferencesKey",SHOW_ANNOTATIONS_PREFERENCE_VALUE_CHECKED:"checked",SHOW_ANNOTATIONS_PREFERENCE_VALUE_UNCHECKED:"unchecked",SHARING_ANNOTATIONS_PREFERENCE_VALUE_ALLNOTES:"AllNotes",SHARING_ANNOTATIONS_PREFERENCE_VALUE_HIDENOTES:"HideNotes",SHARING_ANNOTATIONS_PREFERENCE_VALUE_MYNOTES:"MyNotes"})},4753:(e,t,n)=>{e.exports=n(4507)(47244)},4917:(e,t,n)=>{e.exports=n(4507)(86009)},5024:(e,t,n)=>{e.exports=n(4507)(82437)},5212:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>d});var i=n(1434),o=n.n(i),r=n(7875);const a=o().extend({dropdownTemplate:'<a id="{linkId}" href="javascript:void(0);" class="co-RedlineDropdown-button link {linkClass}">{linkText}</a><div class="co-RedlineDropdown"><a href="javascript:void(0);" class="co-RedlineDropdown-anchor"></a><div class="co-RedlineDropdown-container"><ul class="co-RedlineDropdown-columnList">{items}</ul></div></div>',itemTemplate:'<li class="co-RedlineDropdown-listItem {itemSelected}"><a class="co-RedlineDropdown-link" href="javascript:void(0);" data-value="{itemValue}">{itemText}</a></li>',linkText:null,linkId:null,linkClass:null,parentObject:null,items:[],selectedValue:null,selectedText:null,onClick:null,dropdownAnchor:null,dropdownContainer:null,buildItemsHtml:function(){var e="",t=this;this.items.forEach((function(n){e+=t.itemTemplate.replace("{itemValue}",n.value).replace("{itemText}",n.text).replace("{itemSelected}",n.selected?"selected":"");if(n.selected){t.selectedValue=n.value;t.selectedText=n.text}}));return e},buildDropdownHtml:function(){return this.dropdownTemplate.replace("{linkId}",this.linkId?this.linkId:"").replace("{linkClass}",this.linkClass?this.linkClass:"").replace("{items}",this.buildItemsHtml()).replace("{linkText}",this.selectedText?`${this.linkText} (${this.selectedText})`:this.linkText)},Collapse:function(){this.dropdownAnchor?.classList.remove("is_open");this.dropdownContainer?.classList.remove("is_open")},selectItem:function(e){this.parentObject.querySelector(".co-RedlineDropdown-listItem")?.classList.remove("selected");e.parentElement.classList.add("selected");this.selectedValue=r.ElementStorage.get(e,"value");const t=this.parentObject.querySelector(".co-RedlineDropdown-button");t&&(t.textContent=`${this.linkText} (${e.textContent})`);this.Collapse()},Draw:function(){var e=this;this.parentObject.innerHTML=this.buildDropdownHtml();this.dropdownAnchor=this.parentObject.querySelector(".co-RedlineDropdown-anchor");this.dropdownContainer=this.parentObject.querySelector(".co-RedlineDropdown-container");this.dropdownAnchor?.addEventListener("click",(function(){if(e.dropdownAnchor.classList.contains("is_open"))e.Collapse();else{e.dropdownAnchor.classList.add("is_open");e.dropdownContainer.classList.add("is_open")}}));this.dropdownContainer?.querySelectorAll("a").forEach((e=>e.addEventListener("click",(e=>this.selectItem(e.currentTarget)))));this.parentObject.querySelector(".co-RedlineDropdown-button")?.addEventListener("click",(()=>{this.onClick?.()}))},GetDropdownDiv:function(){return this.parentObject.querySelector(".co-RedlineDropdown")},GetSelectedValue:function(){return this.selectedValue},SetLinkText:function(e){this.linkText=e},SetLinkId:function(e){this.linkId=e},SetLinkClass:function(e){this.linkClass=e},SetItems:function(e){this.items=e},SetParentDiv:function(e){this.parentObject=e},OnClick:function(e){this.onClick=e}});var s=n(9912),l=n(9796);const d=a.extend({init:function(){this.SetItems([{text:s["default"].lookup("SC.Document.Redline.SnippetTypePlain","Text"),value:l["default"].snippetTextType.plain,selected:!0},{text:s["default"].lookup("SC.Document.Redline.SnippetTypeTabular","Tabular"),value:l["default"].snippetTextType.tabular}]);this.SetLinkText(s["default"].lookup("SC.Document.Redline.AddToCompare","Add to Compare"))}})},5232:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>f});var i=n(8286),o=n(9912),r=n(6123),a=n(1385),s=n(2915),l=n(9796);class d{constructor(e){this.menuItems=[{content:o["default"].lookup("SC.Document.Redline.SnippetTypePlain","Text"),value:l["default"].snippetTextType.plain,isSelected:!0},{content:o["default"].lookup("SC.Document.Redline.SnippetTypeTabular","Tabular"),value:l["default"].snippetTextType.tabular}];this.menuOpts={items:this.menuItems,itemsContainerClass:"a11yDropdown-menu--narrow a11yDropdown-menu--right checkmarks",selectedItemClass:"checked",ariaLabelForMenuContainer:o["default"].lookup("SC.Document.Redline.AddToCompareMenu","Add to Compare")};this.buttonOpts={changeButtonTitleOnSelect:!1}
;this.onMenuItemSelected=e;this.selectedOption=this.menuItems.find((e=>e.isSelected))}getSelectedOption(){return this.selectedOption}draw(e){this.buttonOpts.dropdownContainer=e;this.menu=new s["default"](this.menuOpts);this.menuButton=new a["default"](this.menu,this.buttonOpts);this.menuButton.draw();this.menuButton.getDOMElement().innerHTML=`<span class="icon25 icon_downMenu-customTwo">${o["default"].lookup("SC.Document.Redline.AddToCompareMenu","Add to Compare")}</span>`;this._addEventHandlers()}enable(){this.menuButton?.enable();this._addMenuButtonEventHandlers();this._addTooltip()}disable(){this.menuButton?.disable("co_disabled");this.menuButtonTooltip?.remove()}_addEventHandlers(){this._addMenuEventHandlers();this._addMenuButtonEventHandlers()}_addMenuEventHandlers(){this.menu.getDOMElement()?.addEventListener("changeButtonLabel",(()=>{if(this.menuButtonTooltip){const e=this.menuButton.getAriaLabel();this.menuButtonTooltip.setTooltipText(e)}}));this.menu.getDOMElement()?.addEventListener("menu-item-selected",(e=>{this.selectedOption=e.detail.items[0];this.onMenuItemSelected(this.selectedOption)}))}_addMenuButtonEventHandlers(){const e=this.menuButton.getDOMElement();e.addEventListener("dropdown-collapsed",(e=>{e.target.querySelectorAll("span").forEach((e=>{e.classList.remove("icon_upMenu-customTwo");e.classList.add("icon_downMenu-customTwo")}))}));e.addEventListener("dropdown-expanded",(e=>{e.target.querySelectorAll("span").forEach((e=>{e.classList.remove("icon_downMenu-customTwo");e.classList.add("icon_upMenu-customTwo")}))}))}_addTooltip(){const e=this.menuButton.getAriaLabel();this.menuButtonTooltip=new r["default"](this.menuButton.getDOMElement(),e);this.menuButtonTooltip.render()}}class c{constructor(e){this.addToCompareButton=null;this.onButtonClick=e.onClick;this.dropdownOption=e.dropdownOptionsEnabled?new d((()=>this._updateButtonText())):null}getSelectedAddToCompareOption(){return this.dropdownOption?this.dropdownOption.getSelectedOption().value:l["default"].snippetTextType.plain}draw(e){this.container=e;this.addToCompareButton=this._getAddToCompareButton();e.append(this.addToCompareButton);this._addEventHandlers();if(this.dropdownOption){const e=document.createElement("div");e.addEventListener("click",(e=>{e.stopPropagation()}));this.container.append(e);this.dropdownOption.draw(e)}}enable(){if(this.addToCompareButton){this.addToCompareButton.classList.remove("co_disabled");this.addToCompareButton.removeAttribute("aria-disabled");this.addToCompareButton.disabled=!1;this.dropdownOption&&this.dropdownOption.enable()}}disable(){if(this.addToCompareButton){this.addToCompareButton.classList.add("co_disabled");this.addToCompareButton.setAttribute("aria-disabled","true");this.addToCompareButton.disabled=!0;this.dropdownOption&&this.dropdownOption.disable()}}_getAddToCompareButton(){const e=document.createElement("button");e.className="co-RedlineDropdown-button co_linkBlue";e.setAttribute("type","button");e.textContent=this._getAddToCompareButtonText();return e}_updateButtonText(){this.addToCompareButton.textContent=this._getAddToCompareButtonText()}_getAddToCompareButtonText(){const e=o["default"].lookup("SC.Document.Redline.AddToCompare","Add to Compare");return this.dropdownOption?`${e} (${this.dropdownOption.getSelectedOption().content})`:e}_addEventHandlers(){this.container.addEventListener("click",this.onButtonClick)}}class u{constructor(e,t,n){this.id=e;this.message=t;this.predicate=n}getValidationElement(){const e=document.createElement("span");e.id=this.id;e.className="co_hideState";e.textContent=this.message;this.validationElement=e;return e}validate(e){const t=this.predicate(e);this.validationElement.classList.toggle("co_hideState",t);return t}}class f{constructor(e){this.isDisabled=!1;this.addToCompareButton=null;this.selectedValue=null;this.parentDiv=e.parentDiv;this.id=e.id;this.removeTabularOption=e.removeTabularOption;this.onButtonClicked=e.onButtonClicked;this.validators=[];this.isSnippetCompareOn=!1}getSelectedValue(){return this.addToCompareButton.getSelectedAddToCompareOption()}disable(){if(!this.isDisabled){this.addToCompareButton.disable();this.isDisabled=!0}}enable(){if(this.isDisabled){this.addToCompareButton.enable();this.isDisabled=!1}}draw(){const e={buttonId:this.buttonId,onClick:e=>{this.isDisabled||this.onButtonClicked(e)},dropdownOptionsEnabled:!this.isSnippetCompareOn||!this.removeTabularOption},t=this._buildMenuButtonContainer();this.addToCompareButton=new c(e);this.addToCompareButton.draw(t);this.disable();this.buildValidators();this.validators.forEach((e=>{this.parentDiv.append(e.getValidationElement())}))}buildValidators(){if(this.isSnippetCompareOn){const e=new u(i["default"].ids.snippetCompareOver4kLimit,o["default"].lookup("SC.Document.Redline.Over4kLimit","Text must be 4,000 characters or less to compare"),(e=>e?.length<=i["default"].values.snippetCompareTextLimit4K));this.validators.push(e);if(this.removeTabularOption){const e=new u(i["default"].ids.snippetCompareBlankSnippetMessage,o["default"].lookup("SC.Document.Redline.BlankSnippet","At least 1 character must be selected to compare"),(e=>!!e));this.validators.push(e)}}}validateSelectedText(e){this.validators.every((t=>t.validate(e)))?this.enable():this.disable()}_buildMenuButtonContainer(){const e=document.createElement("div");this.id&&(e.id=this.id);e.className="addToCompare--container";this.parentDiv.append(e);return e}}},5293:(e,t,n)=>{e.exports=n(4507)(52431)},5351:(e,t,n)=>{e.exports=n(4507)(43581)},5359:(e,t,n)=>{e.exports=n(4507)(30275)},5382:(e,t,n)=>{e.exports=n(4507)(9074)},5501:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>$});var i=n(519),o=n(3839),r=n(6662),a=n(9691),s=n.n(a),l=n(9191),d=n.n(l),c=n(6399),u=n(3312),f=n(8286),h=n(2656),p=n(4159),m=n(3673),g=n(2065),y=n(7861),v=n(1422),C=n(1369),b=n(4753),_=n(356),S=n(3602),N=n(8260),E=n(9422),A=n(7955),w=n(3264),x=n(6494),T=n(6254),I=n(999),D=n(5549),k=n(7897),M=n(8497),R=n(8230),H=n(6921),O=n(9914),L=n(7099),P={};P.StoreCurrentHighlightForCopyWithReference=function(){const e=p["default"].currentHighlightSelectionClass,t=document.querySelectorAll(`.${e}`);if(!t.length){A["default"].SelectedRange=null;return}try{const e=Array.from(t).reduce(((e,t)=>e.concat(function(e){const t=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null),n=[];let i;for(;i=t.nextNode();)n.push(i);return n}(t))),[]);if(!e.length){A["default"].SelectedRange=null;return}const n=document.createRange();n.setStart(e[0],0);n.setEnd(e[e.length-1],e[e.length-1].length);A["default"].SelectedRange=n}catch(e){A["default"].SelectedRange=null}};P.Initialize=function(e){const t=document.getElementById(f["default"].ids.highlightMenu);this.copyWithReferenceWidget=new L.A;t?.remove();let n;e?.target&&(n=h["default"].GetDocGuidFromParentDocContainer(e.target));if(P.GetDocumentElement(n)&&!0===o["default"].isFeatureEnabled("ANNOTATIONS")&&(p["default"].IsEditable||p["default"].IsDeletable)){var r=document.createElement("ul");r.className=f["default"].classes.dropBoxMenu;if(p["default"].IsDeletable){const e=this.createHighlightingMenuListItem(P.getDeleteHighlightText(),f["default"].ids.highlightMenuDeleteHighlightOption);g["default"].AttachClickHandler(e,(function(){P.DeleteHighlight(p["default"].currentHighlightSelectionClass)}),!0);r.appendChild(e)}if(p["default"].IsEditable){const e=P.createHighlightingMenuColorOptions();r.appendChild(e);const t=this.createHighlightingMenuListItem(f["default"].texts.highlightMenuAddNote,f["default"].ids.highlightMenuAddNoteOption);g["default"].AttachClickHandler(t,(function(e){P.AddNote(e)}),!0);r.appendChild(t)}P.AddMenuOptions(r,e);const t=document.createElement("div");t.id=f["default"].ids.highlightMenu;t.classList.add(f["default"].classes.dropBoxContainer,f["default"].classes.hideState,f["default"].classes.highlightMenu);t.innerHTML=`\n            <div class="${f["default"].classes.dropBox} ${f["default"].classes.dropBoxExpanded}">\n                <div class="${f["default"].classes.dropBoxInner}" />\n            </div>`;(0,u.u)({element:t,closeCallback:P.Hide.bind(this)});i["default"].GetElementsByClassName(f["default"].classes.dropBoxInner,"div",t)[0].appendChild(r)
;P.GetHighlightMenuContainer().appendChild(t);p["default"].SupportsCopyWithReference&&P.addCopyReference(r);if(g["default"].AreSharedHighlightsAllowed()){const e=P.GetDocumentElement(n);if(i["default"].GetElementsByClassName(p["default"].currentHighlightSelectionClass,"span",e).some((e=>e.classList.contains("co_hlShared")))){const e=this.createHighlightingMenuListItem(f["default"].texts.highlightingMenuEditReviewers,f["default"].ids.highlightingMenuEditReviewers);g["default"].AttachClickHandler(e,(function(e){P.Hide();P.EditContacts(e)}),!0);r.appendChild(e);const t=this.createHighlightingMenuListItem(f["default"].texts.highlightingMenuStopSharing,f["default"].ids.highlightingMenuStopSharing);g["default"].AttachClickHandler(t,(function(e){P.Hide();P.StopSharing(e)}),!0);r.appendChild(t)}else{var a=h["default"].ParseIdFromSelectionInstanceValue(p["default"].currentHighlightSelectionClass),s=(0,R.GetCachedHighlightData)(a),l=null==s.selectedText?"":s.selectedText;const e=P.GetDocumentGuid();var d=this.createHighlightingMenuListItem(f["default"].texts.highlightingMenuShareWithConstacts,f["default"].ids.highlightingMenuShareWithConstacts);g["default"].AttachClickHandler(d,(function(t){P.Hide();P.ShareWithContacts(t);(0,E.postUXEvent)("Cobalt.Document.Highlight.Share",{docGuid:e,text:l.length>1e3?l.substring(0,1e3):l})}),!0);r.appendChild(d);const t=this.createHighlightingMenuListItem(f["default"].texts.highlightingMenuPreviousContacts,f["default"].ids.highlightingMenuPreviousContacts);g["default"].AttachClickHandler(t,(function(t){P.Hide();P.PreviuoslyShared(t);(0,E.postUXEvent)("Cobalt.Document.Highlight.Share",{docGuid:e,text:l.length>1e3?l.substring(0,1e3):l})}),!0);r.appendChild(t);const n=document.getElementById(f["default"].ids.highlightingMenuPreviousContacts);if(n){n.classList.add("disabled");n.style.pointerEvents="none";n.querySelector("a").tabIndex=-1}if(g["default"].AreSharedNotesAllowed()){const e=P.GetDocumentGuid();S["default"].CreateAnnotationsProvider(e,{contextualInfo:null}).GetPreviouslySelectedContacts((function(e){if(JSON.parse(e).SelectedContacts.length>0&&n){n.classList.remove("disabled");n.style.pointerEvents="auto";n.querySelector("a").tabIndex=null}}))}}}p["default"].hasInitialized=!0}};P.getDeleteHighlightText=()=>f["default"].texts.highlightMenuDeleteHighlight;P.createHighlightingMenuListItem=(e,t)=>{const n=document.createElement("li");n.classList.add(f["default"].classes.highlightBoxListItem);n.id=t;const i=document.createElement("a");i.innerHTML=e;i.role="button";i.href="javascript:void(0);";n.appendChild(i);return n};P.createHighlightingMenuColorOptions=()=>{const e=f["default"].ids.highlightMenuEditHighlightColorOption,t=document.createElement("li"),n=`${e}_list_heading_aria_label`;t.id=e;t.innerHTML=`<span class="${f["default"].classes.highlightMenuEditHighlightColorText}" id=${n}>\n        ${f["default"].texts.highlightMenuEditHighlightColor}</span>`;t.appendChild((0,c.A)((()=>{P.EditHighlightColor(p["default"].currentHighlightSelectionClass);P.Hide()}),n));return t};P.addCopyReference=function(e){P.addCopyWithoutReference(e);P.addCopyWithReference(e)};P.addCopyWithReference=function(e){var t=document.createElement("li");t.classList.add(f["default"].classes.highlightBoxListItem);e.appendChild(t);t.id=f["default"].ids.highlightedTextMenuListCopyWithRefItem;C["default"].GetObject("Cobalt.Document.Widget.SelectedTextMenu").updateCopyWithReferenceMenuItem(t,this.copyWithReferenceWidget)};P.addCopyWithoutReference=function(e){if(p["default"].IsNewDocumentView||p["default"].IsCopyWithoutReferenceEnabled){var t=document.createElement("li");t.classList.add(f["default"].classes.highlightBoxListItem);e.appendChild(t);t.id=f["default"].ids.highlightedTextMenuListCopyWithoutRefItem;C["default"].GetObject("Cobalt.Document.Widget.SelectedTextMenu").updateCopyWithReferenceMenuItem(t,this.copyWithReferenceWidget)}};P.GetDocumentGuid=function(e){if(p["default"].IsInfiniteScroll&&e&&e.documentGuid)return e.documentGuid;return p["default"].currentDocumentGuid?p["default"].currentDocumentGuid:N["default"].ViewData.DocumentGuid};P.GetDocumentElement=function(e=p["default"].currentDocumentGuid){return p["default"].IsInfiniteScroll?document.getElementById(`documentContainer_${e}`).querySelector(`#${f["default"].ids.document}`):document.getElementById(f["default"].ids.document)};P.AddMenuOptions=function(){return};P.GetHighlightMenuContainer=function(){return document.body};P.ToggleMenuOptions=function(){var e=h["default"].ParseIdFromSelectionInstanceValue(p["default"].currentHighlightSelectionClass),t=h["default"].GetHighlightTypeOfCachedHighlight(e),n=document.getElementById(f["default"].ids.highlightMenuDeleteHighlightOption),o=document.getElementById(f["default"].ids.highlightMenuAddNoteOption);if(t==m["default"].Highlight){i["default"].RemoveClass(n,f["default"].classes.hideState);i["default"].RemoveClass(o,f["default"].classes.hideState)}else{i["default"].AddClass(n,f["default"].classes.hideState);i["default"].AddClass(o,f["default"].classes.hideState)}};P.AdjustMenuPosition=function(e,t,n){if(e){var i=g["default"].determineOffset(n),o=g["default"].determineOffset(document.getElementById(f["default"].ids.inlineNotes));i.x=o.x;P.ToggleMenuOptions();var r={x:i.x,y:i.y},a=g["default"].determineElementPlacement(t,r,0,!1);t.style.left=a.x+"px";t.style.top=a.y+"px"}};P.Show=function(e,t,n){if(g["default"].AreSharedHighlightsAllowed()){p["default"].hasInitialized=!1;p["default"].currentHighlightSelectionClass=t}if(p["default"].hasInitialized){const e=document.getElementById(f["default"].ids.highlightMenu);for(var o=d()(e).find("#co_copyWithRefFlash"),r=o.length,a=0;a<r;a++){var s=o[a].children[0];s&&(s.style.visibility="visible")}}else P.Initialize(n);const l=document.getElementById(f["default"].ids.highlightMenu);if(l&&e&&i["default"].HasClass(l,f["default"].classes.hideState)){i["default"].RemoveClass(l,f["default"].classes.hideState);p["default"].currentHighlightSelectionClass=t;const o=h["default"].ParseIdFromSelectionInstanceValue(t),r=(0,R.GetCachedHighlightData)(o),a=l.querySelector(`#${f["default"].ids.highlightMenuEditHighlightColorOption}`);P.UpdateActiveHighlightColor(a,r.highlightColor);P.AdjustMenuPosition(n,l,e)}p["default"].SupportsCopyWithReference&&P.StoreCurrentHighlightForCopyWithReference();const c=(0,O.getFocusableElements)(l?.querySelector(`.${f["default"].classes.dropBoxMenu}`)),u=Array.from(c).find(O.isVisible);u?.focus()};P.UpdateActiveHighlightColor=function(e,t){if(!e||!t)return;e.querySelectorAll(`button.${f["default"].classes.colorOptionItem}`).forEach((e=>{const n=e.value===t;e.classList.toggle(f["default"].classes.colorOptionItemActive,n);e.setAttribute("aria-current",n)}))};P.Hide=function(){const e=document.getElementById(f["default"].ids.highlightMenu);if(e&&!e.classList.contains(f["default"].classes.hideState)){e.classList.add(f["default"].classes.hideState);p["default"].SupportsCopyWithReference&&C["default"].GetObject("Cobalt.Document.Widget.SelectedTextMenu").closeCopyWithRefMenu(this.copyWithReferenceWidget);document.querySelector(`.${f["default"].classes.highlightActivator}.${p["default"].currentHighlightSelectionClass}`)?.focus()}document.querySelectorAll(`span.${f["default"].classes.activeHighlight}`).forEach((e=>e.classList.remove(f["default"].classes.activeHighlight)))};P.EditHighlightColor=function(e){var t=h["default"].ParseIdFromSelectionInstanceValue(e),n=(0,R.GetCachedHighlightData)(t);if(!n||n.highlightColor==p["default"].HighlightColor)return;var i=n.highlightColor;n.highlightColor=p["default"].HighlightColor;T["default"].instance.UpdateHighlight(n,(function(){document.querySelectorAll(`.${f["default"].classes.highlightSelectionPrefix}${t}`).forEach((e=>{p["default"].HighlightColor&&e.classList.add(p["default"].HighlightColor);i&&e.classList.remove(i)}));g["default"].WriteSharedAnnotationEvent("Cobalt.Document.Annotations.Highlight.Update",null,{changedColor:!0,oldHighlightColor:i,newHighlightColor:n.highlightColor,_type:"highlight",clientId:n.clientId,selectedText:n.selectedText,documentGuid:n.documentGuid});const o=Object.assign({},n,{oldHighlightColor:i,selectionInstanceClass:e,
highlightId:t});v["default"].Publish("Cobalt.Document.Highlighting.Color.Update",o)}))};P.HandleHighlightDeletion=function(e,t){M["default"].RemoveNoteFromNotesData(e);I.A.delete(e.id);o["default"].isIacOn("IAC-A11Y-DOC-NOTES")&&P.focusNextInteractiveElement(document.querySelector(`.${t}.${f["default"].classes.highlightActivator}`));D.A.RemoveHighlightingMarkup(t,e.documentGuid);g["default"].publishHubEvent(f["default"].events.highlightDeleted,null,{id:e.id},null);_["default"].IsSharedNoteCountsUpToDate=!1;_["default"].prototype.UpdateNoteCounts()};P.DeleteHighlight=function(e){const t=h["default"].ParseIdFromSelectionInstanceValue(e),n=(0,R.GetCachedHighlightData)(t);if(n&&n.id){const i=function(){P.HandleHighlightDeletion(n,e)};if(h["default"].GetHighlightTypeOfCachedHighlight(t)===m["default"].Highlight){p["default"].IsInfiniteScroll&&T["default"].instance.UpdateDocumentGuid(n.documentGuid||p["default"].currentDocGuid);T["default"].instance.DeleteHighlight(n,i)}}P.Hide()};P.focusNextInteractiveElement=function(e){if(!(e&&e instanceof HTMLElement))return;const t=document.createTreeWalker(this.GetDocumentElement(),NodeFilter.SHOW_ELEMENT,(e=>{if(!(0,O.isVisible)(e))return NodeFilter.FILTER_REJECT;if((0,O.isFocusable)(e))return NodeFilter.FILTER_ACCEPT;return NodeFilter.FILTER_SKIP}));t.currentNode=e;const n=t.nextNode();n?.focus()};P.ShareWithContacts=function(){b["default"].Draw(b["default"].Mode.Collaboration);var e=document.getElementById("coid_contacts_closeButton");e?.classList.add("ForHighlights");var t,n,i=this;i._subscriptions=[];t="Cobalt.Website.ContactWidget.ContactsSelectedForHighlights",n=function(e,t){var n=JSON.parse(t.Data),i=h["default"].ParseIdFromSelectionInstanceValue(p["default"].currentHighlightSelectionClass),o=(0,R.GetCachedHighlightData)(i),r=o.id;if(n.SelectedContacts.length>0){var a=P.GetDocumentGuid(o),s=S["default"].CreateAnnotationsProvider(a,{contextualInfo:null});D.A.ShareHighlightMarkup(p["default"].currentHighlightSelectionClass,a);_["default"].IsSharedNoteCountsUpToDate=!1;_["default"].prototype.UpdateNoteCounts();for(var l=0;l<n.SelectedContacts.length;l++)s.AddNotePermission(null,r,n.SelectedContacts[l]);document.getElementById("previousContacts")?.classList.remove("disabled");const e=document.getElementById("previousContacts");e&&(e.style.pointerEvents="auto");s.UpdatePreviouslySelectedContacts(n,(function(){}))}},i._subscriptions.push(v["default"].SubscribeOnce(t,n))};P.PreviuoslyShared=function(){var e=h["default"].ParseIdFromSelectionInstanceValue(p["default"].currentHighlightSelectionClass),t=(0,R.GetCachedHighlightData)(e),n=P.GetDocumentGuid(t),i=t.id,o=S["default"].CreateAnnotationsProvider(n,{contextualInfo:null});o.GetPreviouslySelectedContacts((function(e){var t=JSON.parse(e);if(t.SelectedContacts.length>0){for(var r=0;r<t.SelectedContacts.length;r++)o.AddNotePermission(null,i,t.SelectedContacts[r]);D.A.ShareHighlightMarkup(p["default"].currentHighlightSelectionClass,n);_["default"].IsSharedNoteCountsUpToDate=!1;_["default"].prototype.UpdateNoteCounts()}}))};P.updatePermissions=function(e,t,n){if("Add"===n)return s().differenceBy(t.SelectedContacts,e.SelectedContacts,(e=>e.BrowserKey));if("Remove"===n)return s().differenceBy(e.SelectedContacts,t.SelectedContacts,(e=>e.BrowserKey))};P.addOrRemoveContacts=function(e,t){var n=this.updatePermissions(e,t,"Add"),i=this.updatePermissions(e,t,"Remove"),o=h["default"].ParseIdFromSelectionInstanceValue(p["default"].currentHighlightSelectionClass),r=(0,R.GetCachedHighlightData)(o),a=P.GetDocumentGuid(r),s=r.id,l=S["default"].CreateAnnotationsProvider(a,{contextualInfo:null});if(n)for(let e=0;e<n.length;e++)l.AddNotePermission(null,s,n[e]);if(i)for(let e=0;e<i.length;e++)l.RemoveNotePermission(null,s,i[e]);0==t.SelectedContacts.length&&document.querySelectorAll(`.co_selection_${o}`).forEach((e=>e.classList.remove("co_hlShared")));if((n.length>0||i.length>0)&&g["default"].AreSharedNotesAllowed()){l.UpdatePreviouslySelectedContacts(t,(function(){}));_["default"].IsSharedNoteCountsUpToDate=!1;_["default"].prototype.UpdateNoteCounts()}};P.EditContacts=function(){var e=this,t=h["default"].ParseIdFromSelectionInstanceValue(p["default"].currentHighlightSelectionClass),n=(0,R.GetCachedHighlightData)(t),i=P.GetDocumentGuid(n),o=n.id,r=S["default"].CreateAnnotationsProvider(i,{contextualInfo:null}),a=!1,s=null;r.GetNotePermissions(o,(function(e){b["default"].Draw(b["default"].Mode.Collaboration,e);var t=document.getElementById("coid_contacts_closeButton");t?.classList.add("ForUpdateHighlights");s=e}));e._subscriptions=[];(function(t,n){e._subscriptions.push(v["default"].SubscribeOnce(t,n))})("Cobalt.Website.ContactWidget.ContactsSelectedForUpdateHighlights",(function(t,n){if(!a){e.addOrRemoveContacts(JSON.parse(s),JSON.parse(n.Data));a=!0}}))};P.StopSharing=function(){var e=h["default"].ParseIdFromSelectionInstanceValue(p["default"].currentHighlightSelectionClass),t=(0,R.GetCachedHighlightData)(e),n=P.GetDocumentGuid(t),i=t.id,o=S["default"].CreateAnnotationsProvider(n,{contextualInfo:null});D.A.UnshareHighlightMarkup(p["default"].currentHighlightSelectionClass,n);_["default"].IsSharedNoteCountsUpToDate=!1;_["default"].prototype.UpdateNoteCounts();o.GetNotePermissions(i,(function(e){var t=JSON.parse(e);if(t.SelectedContacts.length>0)for(var n=0;n<t.SelectedContacts.length;n++)o.RemoveNotePermission(null,i,t.SelectedContacts[n])}))};P.ConvertHighlightToNote=function(e){var t=h["default"].ParseIdFromSelectionInstanceValue(e);p["default"].ConvertNoteId=t;var n=(0,R.GetCachedHighlightData)(t);if(null!=n){v["default"].Publish("Cobalt.Document.Highlighting.ConvertHighlightToNote");n.permissions=n.permissions||[];var i=n.documentGuid||p["default"].currentDocGuid;function l(){k.A.DeleteNote(t,n);p["default"].ConvertNoteId=null}function d(e){e.documentGuid||(e.documentGuid=i);(0,R.UpdateCachedHighlightData)(t,e);p["default"].ConvertNoteId=null;_["default"].IsSharedNoteCountsUpToDate=!1;_["default"].prototype.UpdateNoteCounts()}function c(){p["default"].ConvertNoteId=null;(0,H.DeleteCachedNoteContainer)(t);document.getElementById(e.replace("selection","noteHolder"))?.remove();_["default"].IsSharedNoteCountsUpToDate=!1;_["default"].prototype.UpdateNoteCounts()}var o=0;null!=x["default"].Instance&&(o=x["default"].Instance.GetCurrentChunk());var r=h["default"].GetFirstHighlightedElement(e,0,i).element,a=w.A.AddNoteToContainer(t,r,i,o,n);(0,R.CacheHighlightData)(t,n);var s=(0,y.position)(r);n.focusedOffset=s.top;a.ConvertNote(n,d,l,c)}};P.AddNote=function(){P.Hide();P.ConvertHighlightToNote(p["default"].currentHighlightSelectionClass)};const B=P;var F=n(8016),G=B.Show,U=B.GetHighlightMenuContainer,W=B.AdjustMenuPosition;B.GetHighlightMenuContainer=function(){return F["default"].IsEdgarContentType(F["default"].FindDocumentContentType())||F["default"].IsFilingsContentType(F["default"].FindDocumentContentType())||F["default"].IsPrivateEquityContentType(F["default"].FindDocumentContentType())||F["default"].IsLocatePrecedentAgreements(F["default"].FindDocumentContentType())?document.getElementById(f["default"].ids.websiteWidgetDiv):U.call(this)};B.Show=function(e,t,n){const a=document.getElementById(f["default"].ids.highlightMenu);if(F["default"].IsEdgarContentType(F["default"].FindDocumentContentType())||F["default"].IsFilingsContentType(F["default"].FindDocumentContentType())||F["default"].IsPrivateEquityContentType(F["default"].FindDocumentContentType())||F["default"].IsLocatePrecedentAgreements(F["default"].FindDocumentContentType())){if(g["default"].AreSharedHighlightsAllowed()){p["default"].hasInitialized=!1;p["default"].currentHighlightSelectionClass=t}p["default"].hasInitialized||B.Initialize(n);r["default"].removeCopyWithReferenceJurisdiction(a);if(a&&e&&i["default"].HasClass(a,f["default"].classes.hideState)){i["default"].RemoveClass(a,f["default"].classes.hideState);p["default"].currentHighlightSelectionClass=t;if(n){var s;if(o["default"].EnableIpad){(s=g["default"].getMouseCoordinatesOfEvent(n)).x<100&&(s.x=s.x+30);if(s.y<100)i["default"].AddClass(a,f["default"].classes.highlightBelowMenu);else{
i["default"].HasClass(a,f["default"].classes.highlightBelowMenu)&&i["default"].RemoveClass(a,f["default"].classes.highlightBelowMenu);s.y=s.y+20}}else{s=g["default"].determineOffsetForHighlightMenu(e);var l=g["default"].determineOffset(document.getElementById(f["default"].ids.inlineNotes));s.x=l.x;B.ToggleMenuOptions()}var d={x:s.x,y:s.y},c=g["default"].determineElementPlacement(a,d,0,!0,!0);a.style.left=c.x+"px";a.style.top=c.y+"px"}}p["default"].SupportsCopyWithReference&&B.StoreCurrentHighlightForCopyWithReference()}else if(F["default"].IsCorporateZone(F["default"].FindDocumentContentType())){G.call(this,e,t,n);r["default"].removeCopyWithReferenceJurisdiction(a)}else G.call(this,e,t,n)};B._ExtractCoordinatesFromEvent=function(e,t){let n=g["default"].getMouseCoordinatesOfEvent(e);0===n.x&&0===n.y&&(n=g["default"].determineOffset(t));return n};B.AdjustMenuPosition=function(e,t,n){if(g["default"].isPracticalLawUsDocument()&&e){const{innerHeight:i}=window,o=this.GetDocumentElement().querySelector("#co_docStickyHeader, #co_docContentHeader").getBoundingClientRect().bottom,{x:r,y:a}=this._ExtractCoordinatesFromEvent(e,n),s=a-window.scrollY,l=t.offsetHeight+(t.querySelector(".co_dropBox.co_dropBoxExpanded")?.offsetHeight||0),d=10,c=s<o,u=s+l>i,f=()=>c?o+window.scrollY+d:u?a-l-n.offsetHeight:a+d;t.style.left=`${r}px`;t.style.top=`${f()}px`}else W.call(this,e,t,n)};const $=B},5549:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(9191),o=n.n(i),r=n(3839),a=n(8286),s=n(519),l=n(5359),d=n(7955),c=n(2656);const u={ShareHighlightMarkup:function(e,t){for(var n=c["default"].GetDocumentElement(null,t),i=s["default"].GetElementsByClassName(e,"span",n),o=0;o<i.length;o++)if(i.length>1){if(0==o){i[o].classList.add("co_hlShared");i[o].classList.add("firstChunk")}else if(o>0&&o<i.length-1){i[o].classList.add("co_hlShared");i[o].classList.add("middleChunk")}else if(o==i.length-1){i[o].classList.add("co_hlShared");i[o].classList.add("lastChunk")}}else i.forEach((e=>{e.classList.add("co_hlShared")}))},UnshareHighlightMarkup:function(e,t){var n=c["default"].GetDocumentElement(null,t);s["default"].GetElementsByClassName(e,"span",n).forEach((function(e){e.classList.remove("co_hlShared")}))},RemoveHighlightingMarkup:function(e,t){if(r["default"].isIacOn("IAC-A11Y-DOC-NOTES")){const t=o()(`.${e}`);c["default"].RemoveHighlightAccessibility(t)}for(var n=c["default"].GetDocumentElement(null,t),i=s["default"].GetElementsByClassName(e,"span",n),a=0;a<i.length;a++){for(;i[a].childNodes.length>0;){var l=i[a].removeChild(i[a].firstChild);i[a].parentNode.insertBefore(l,i[a])}i[a].parentNode.removeChild(i[a])}},HighlightTheRange:function(e,t,n){d["default"].InjectSurroundingMarkers(e,l["default"].StartMarkerHtml,l["default"].EndMarkerHtml);const i=d["default"].GetCommonAncestorElementOfRange(e),o=document.getElementById(a["default"].ids.highlightStartMarker),r=document.getElementById(a["default"].ids.highlightEndMarker);c["default"].TagNodesBetweenMarkers(t,n,i,o,r);if(o){o.parentNode.removeChild(o)}if(r){r.parentNode.removeChild(r)}}}},5578:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>j});n(3922);var i,o=n(9191),r=n.n(o),a=n(8286),s=n(4579),l=n(9474),d=n(519),c=n(7861),u=n(1422),f=n(5024),h=n(966),p=n(2595),m=n(3839),g=n(2065),y=n(6494),v=n(7955),C=n(5359),b=n(6246),_=n(9417),S=n(356),N=n(5682),E=n(9086),A=n(3264),w=n(3602),x=n(2656),T=n(8260),I=n(9265),D=n(4159),k=n(5549),M=n(3673),R=n(7897),H=n(6254),O=n(3110),L=n(8497),P=n(3607),B=n(1583),F=n(8230),G=n(6921),U=n(4682),W=n(6574),$=n(3587),z=n(4422),V=n(2842),q={currentSelectionInstance:null,OrphanContainer:null,PublishContainsInlineNotesEvent:function(){u["default"].Publish(a["default"].events.containsInlineNotes,new f["default"]({},{},a["default"].events.containsInlineNotes,"1.0"))},PublishNoInlineNotesEvent:function(){u["default"].Publish(a["default"].events.noInlineNotes,new f["default"]({},{},a["default"].events.noInlineNotes,"1.0"))},CollapseAllNotes:function(){D["default"].IsCollapsedView=!0;O["default"].forEach((e=>{e.SetMinimizeNotes(!0);e.MinimizeNote()}))},ExpandAllNotes:function(){if(g["default"].isRightColumnHidden())return;if(!D["default"].IsCollapsedView)return;D["default"].IsCollapsedView=!1;O["default"].forEach((e=>{e.MaximizeNote();e.SetMinimizeNotes(!1)}))},Initialize:function(){function e(e){W["default"].ActivateNote(e)}function t(e){var t=g["default"].getEventSourceElement(e);D["default"].IsMousePressedInAnnotation=x["default"].IsAnnotationsElement(t);if(B.A.current){if(g["default"].selfOrAncestorHasClassFromList(t,["co_noteHolderActive",W["default"].currentSelectionInstance]))return;if(t?.closest("#coid_contacts_lightbox,#coid_contacts_groupeditbox"))return;B.A.RemoveActiveNoteDesignation()}}var n=x["default"].GetDocumentElement();if(n)if(m["default"].EnableIpad||m["default"].EnableIphone)d["default"].AddEventHandler(n.parentNode,"touchstart",e);else{d["default"].AddEventHandler(document.body,"mouseup",e);d["default"].AddEventHandler(document.body,"contextmenu",e);d["default"].AddEventHandler(n,"mousedown",(function(){D["default"].IsHighlighting=!0}));d["default"].AddEventHandler(n,"mouseup",(function(){D["default"].IsHighlighting=!1}));m["default"].isIacOn("IAC-A11Y-DOC-NOTES")&&d["default"].AddEventHandler(n,"keydown",(function(e){"Enter"!==e.code&&"Space"!==e.code||W["default"].ActivateNote(e)}))}m["default"].EnableIpad||m["default"].EnableIphone?d["default"].AddEventHandler(document.body,"touchend",t):d["default"].AddEventHandler(document.body,"mousedown",t);D["default"].IsInfiniteScroll&&this.undoSubscription||(this.undoSubscription=u["default"].Subscribe(a["default"].events.noteUndoDelete,(function(e,t){var i=t.Data.note;const o=t.Data.container;if(x["default"].GetHighlightType(i)===M["default"].DocumentLevelNote)return;q.RestoreNoteFromCache(i,t.Data.oldId);var r=[i];q.MultipleRelocateAndTag(r,a["default"].classes.highlight,n,D["default"].currentDocGuid,!0,null,!1,!!o.triggeredByMaximizeIcon)})));u["default"].Subscribe(a["default"].events.chunkRendered,(function(e,t){q.SwapInNotesForThePertinentChunk(t.Data.oldChunkNumber,t.Data.chunkNumber)}));if(g["default"].AreSharedAnnotationsAllowed()){u["default"].Subscribe(a["default"].events.notesAndHighlightsFinishedLoading,$["default"].ResetNotesInRail.bind($["default"]));u["default"].Subscribe("Cobalt.Foldering.Note.Add",q.PositionAddedNote);u["default"].Subscribe("Cobalt.Foldering.Note.Delete",q.FocusNotesToLastDeleted);u["default"].Subscribe("Cobalt.Foldering.NoteMenu.ShowMyAnnotationsEvent",P["default"].DisplayMyHighlights);u["default"].Subscribe("Cobalt.Foldering.NoteMenu.ShowAnnotationsEvent",P["default"].DisplayAllHighlights);u["default"].Subscribe("Cobalt.Foldering.NoteMenu.HideAnnotationsEvent",P["default"].DisplayNoHighlights);u["default"].Subscribe("Cobalt.DocumentHighlighting.AnnotationsRetrievedEvent",(function(e,t){i=t.EventData;W["default"].setInlineNotesHighlights(i)}));u["default"].Subscribe("Cobalt.Foldering.Note.NewNoteData",q.FindInlineNotesHighlights)}g["default"].isNarrowTocDisplayEnabled()&&u["default"].Subscribe(a["default"].events.noInlineNotes,q.OnLastNoteDeleted);if(m["default"].isIacOn("IAC-A11Y-DOC-NOTES")){u["default"].Subscribe("Cobalt.Foldering.NoteMenu.ShowMyAnnotationsEvent",(function(){q.ApplyAccessibility({myHighlightsOnly:!0})}));u["default"].Subscribe("Cobalt.Foldering.NoteMenu.ShowAnnotationsEvent",(function(){q.ApplyAccessibility({myHighlightsOnly:!1})}));u["default"].Subscribe("Cobalt.Foldering.NoteMenu.HideAnnotationsEvent",(function(){q.RemoveAccessibility()}));u["default"].Subscribe("Cobalt.Foldering.Note.Created",(function(e,t){const n=t.getNote();"highlight"===n?._type&&q.UpdateAccessibility()}));u["default"].Subscribe("Cobalt.Foldering.Note.Updated",(function(e,t){const n=t.getNote();"highlight"===n?._type&&q.UpdateAccessibility()}));u["default"].Subscribe("Cobalt.Foldering.Note.Delete",(function(e,t){"highlight"===t?.Data?.note?._type&&q.UpdateAccessibility()}));u["default"].Subscribe(a["default"].events.notesAndHighlightsFinishedLoading,(function(){q.UpdateAccessibility()}));u["default"].Subscribe(a["default"].events.highlightAdded,(function(){q.UpdateAccessibility()}))
;u["default"].Subscribe(a["default"].events.highlightDeleted,(function(){q.UpdateAccessibility()}));u["default"].Subscribe("Cobalt.Document.Highlighting.Color.Update",(function(){q.UpdateAccessibility()}))}},RestoreNoteFromCache:function(e,t){const n=(0,F.GetHighlightIdFromStorageId)(t),i=(0,F.GetCachedHighlightData)(n);e.location=i.location;e.highlightColor=i.highlightColor;return i},PositionAddedNote:function(e,t){if(t.Data&&t.Data.container&&!t.Data.container.IsDocumentLevelWidget()){var n=x["default"].ParseIdFromNoteHolder(t.Data.container.GetParent()),i=x["default"].GetInstanceIdClass(n);$["default"].ScrollNoteInRail("",i)}},ApplyAccessibility:function(e){x["default"].GetOrderedHighlights(!0,x["default"].FilterExistingHighlight).forEach((t=>{const n=(0,F.GetCachedHighlightData)(t);if("highlight"!==n._type)return;const i=x["default"].GetInstanceIdClass(t),o=r()("."+i),a=e&&e.myHighlightsOnly,s=(0,G.GetCachedNoteContainer)(t);if(!a||a&&n.createdByCurrentUser){q.EnableHighlightAccessibility(o,n);s&&s.ApplyNotesAccessibility()}else{x["default"].RemoveHighlightAccessibility(o);s&&s.RemoveNotesAccessibility()}}));q.UpdateAccessibility()},UpdateAccessibility:function(){const e=x["default"].GetOrderedHighlights(!0,x["default"].FilterExistingHighlight),t=e.map((e=>(0,F.GetCachedHighlightData)(e)));t.forEach(((n,i)=>{if("highlight"!==n._type)return;const o=x["default"].GetInstanceIdClass(e[i]),a=t.filter((e=>e.highlightColor===n.highlightColor&&!e.noteText==!n.noteText)).indexOf(n);x["default"].UpdateHighlightAccessibility(r()("."+o),n,a+1);q.UpdateAccessibilityNoteLabel(n.id)}))},UpdateAccessibilityNoteLabel:function(e){const t=(0,F.GetHighlightIdFromStorageId)(e),n=x["default"].GetInstanceIdClass(t),i=(0,G.GetCachedNoteContainer)(t);i&&i.UpdateAccessibilityNoteLabel(n)},RemoveAccessibility:function(){(0,F.GetAllCachedHighlightIds)(void 0).forEach((e=>{if("highlight"!==(0,F.GetCachedHighlightData)(e)._type)return;var t=x["default"].GetInstanceIdClass(e),n=r()("."+t);x["default"].RemoveHighlightAccessibility(n)}))},FindInlineNotesHighlights:function(e,t){var n=!1;if(i&&i.inlineHighlightsAndNotes){for(var o=0;o<i.inlineHighlightsAndNotes.length;o++)if(i.inlineHighlightsAndNotes[o].id===t.EventData.id){n=!0;break}!1===n&&i.inlineHighlightsAndNotes.push(t.EventData)}},SwapInNotesForThePertinentChunk:function(e,t){if(e!=t){var n,i,o=x["default"].GetHiddenInlineNotesContainer(),r=[];for(const[a]of O["default"])if((0,p.IsNotNullOrEmpty)(a)&&(n=(0,G.GetCachedNoteContainer)(a)))if(n._chunkNumber==e){i=n.GetParent();o.appendChild(i)}else n._chunkNumber==t&&r.push(a);q.RecalculateNoteDisplayPositions(r)}},RecalculateNoteDisplayPositionsForChunk:function(e){var t,n=[];for(const[i]of O["default"])(t=(0,G.GetCachedNoteContainer)(i))._guid==D["default"].currentDocGuid&&t._chunkNumber==e&&n.push(i);q.RecalculateNoteDisplayPositions(n)},RecalculateNoteDisplayPositions:function(e){Array.isArray(e)&&g["default"].TimedProcessTasks(e,N["default"].PrepAndRepositionNoteHolder.bind(N["default"]),null,null)},FocusNotesToLastDeleted:function(){var e=E["default"].GetLastDeletedNote(),t=N["default"].GetSelectionInstanceIdFromNoteHolder(e.container.GetParent());$["default"].ScrollNoteInRail(t,t)},GetTextOccurrenceIndexOfRange:function(e,t){var n=-1,i=v["default"].GetPlainTextFromRange(e);i&&"string"==typeof i&&i.length>0&&(n=q.LocateIndexOfTextOccurrenceWithinElement(i,e,t));return n},LocateIndexOfTextOccurrenceWithinElement:function(e,t,n){v["default"].InjectSurroundingMarkers(t,C["default"].StartMarkerHtml,C["default"].EndMarkerHtml);var i=document.getElementById(a["default"].ids.highlightStartMarker),o=document.getElementById(a["default"].ids.highlightEndMarker),r=C["default"].FindNonWhitespaceCharacterOffsetFromNearestMarker(i,n);i&&i.parentNode.removeChild(i);var s=C["default"].FindNonWhitespaceCharacterOffsetFromNearestMarker(o,n);o&&o.parentNode.removeChild(o);return{startPoint:r,endPoint:s}},RemoveLineBreaks:function(e){if(null==e)throw new Error("ArgumentNullException: text");(0,p.IsNotNullOrEmpty)(e)&&(e=e.replace(/[\r\n]/g,""));return e},Sanitize:function(e){return q.RemoveLineBreaks(e).replace(/\s+/g," ").toLowerCase()},SetStarPageAsExternalMetaData:function(e){if(m["default"].isFeatureSupported("TocReportView")){var t=b["default"].metaInfo;if(t){var n=b["default"].getCitationsWithNearestStarpagesOfSelectedText(),i=null;if(void 0===n.starpageCitations){(n={}).starpageCitations=[];n.pubCitations=[]}void 0===n.pubCitations&&(n.pubCitations=[]);i=b["default"].buildReference(n,t);var o,r=v["default"].GetPlainTextFromRange(v["default"].SelectedRange),s=b["default"].getHtmlTextFromRange(v["default"].SelectedRange),l=b["default"].getSelectionParaNumbers(),d=b["default"].buildDefaultCiteFormatterRequest(i,r,s);o=!o&&b["default"].userPreferences?b["default"].userPreferences[a["default"].prefs.caRulesSet]:"None";t.metaInformation&&t.metaInformation.isDocketGatewayDocument||"None"===o||"Westlaw"===o||!b["default"].contentTypeSupportsFormattedCites(t.SubContentType)||(d=b["default"].buildCiteFormatterRequest(n,t,b["default"].userPreferences,r,s,l))}var c=JSON.stringify(d);e.starPage=c}},AddNoteToCurrentSelection:function(e,t){if(g["default"].AreSharedNotesAllowed()){S["default"].prototype._checkAnnotations();S["default"].prototype._updateUserPreferenceSharingAnnotations(U["default"].SHARING_ANNOTATIONS_PREFERENCE_KEY,U["default"].SHARING_ANNOTATIONS_PREFERENCE_VALUE_ALLNOTES);S["default"].prototype._updateAnnotationUserPreference(U["default"].SHOW_ANNOTATIONS_PREFERENCE_KEY,U["default"].SHOW_ANNOTATIONS_PREFERENCE_VALUE_CHECKED);document.getElementById("co_allAnnotations")?.classList.add("checked");document.getElementById("co_hideAllAnnotations")?.classList.remove("checked");document.getElementById("co_myAnnotations")?.classList.remove("checked");S["default"].prototype.UpdateNoteCounts();g["default"].AreSharedHighlightsAllowed()&&P["default"].DisplayAllHighlights();S["default"].prototype._publishEvent("Cobalt.Foldering.NoteMenu.ShowAnnotationsEvent")}var n=x["default"].GetDocGuidFromParentDocContainer(e)||D["default"].currentDocGuid,i=v["default"].SelectedRange,o=D["default"].SelectionInstanceCounter,r=x["default"].GetInstanceIdClass(o),a=q.HighlightRange(i,e,r,t);m["default"].isIacOn("iac-oldhighlightingoff")&&(a={selectedText:v["default"].NewData.SelectedPlainText,selectedHtml:v["default"].NewData.selectedHtmlText,location:{startPoint:v["default"].NewData.Startpoint,endPoint:v["default"].NewData.Endpoint}});var s=d["default"].GetElementsByClassName(r,"span",e);if(s.length>0){var l=s[0],u=0;null!=y["default"].Instance&&(u=y["default"].Instance.GetCurrentChunk());var f=(0,c.position)(l);a.focusedOffset=f.top;q.AddNote(a,o,l,n,!1,!1,u);g["default"].AreSharedHighlightsAllowed()&&s.forEach((e=>e.classList.remove("co_hideHighlight")));D["default"].SelectionInstanceCounter++}q.SetStarPageAsExternalMetaData(a)},HighlightCurrentSelection:function(e,t){var n=v["default"].SelectedRange,i=D["default"].SelectionInstanceCounter,o=x["default"].GetInstanceIdClass(i),r=q.HighlightRange(n,e,o,t);q.SetStarPageAsExternalMetaData(r);var a=x["default"].GetDocGuidFromParentDocContainer(e);q.SaveHighlight(r,o,a);if(g["default"].AreSharedHighlightsAllowed()){document.querySelectorAll(`.${o}`).forEach((e=>e.classList.remove("co_hideHighlight")));if(g["default"].AreSharedNotesAllowed()){S["default"].prototype._checkAnnotations();S["default"].prototype._updateUserPreferenceSharingAnnotations(U["default"].SHARING_ANNOTATIONS_PREFERENCE_KEY,U["default"].SHARING_ANNOTATIONS_PREFERENCE_VALUE_ALLNOTES);S["default"].prototype._updateAnnotationUserPreference(U["default"].SHOW_ANNOTATIONS_PREFERENCE_KEY,U["default"].SHOW_ANNOTATIONS_PREFERENCE_VALUE_CHECKED);document.getElementById("co_allAnnotations")?.classList.add("checked");document.getElementById("co_hideAllAnnotations")?.classList.remove("checked");document.getElementById("co_myAnnotations")?.classList.remove("checked");S["default"].prototype.UpdateNoteCounts();g["default"].AreSharedHighlightsAllowed()&&P["default"].DisplayAllHighlights();S["default"].prototype._publishEvent("Cobalt.Foldering.NoteMenu.ShowAnnotationsEvent")}}
D["default"].SelectionInstanceCounter++},HighlightRange:function(e,t,n,i){var o={};m["default"].isIacOn("iac-oldhighlightingoff")||(o=q.GetRangeInformation(e,t));o.highlightColor=i;const r=x["default"].GetHighlightClass(o);k.A.HighlightTheRange(e,n,r);v["default"].Unselect();if(!m["default"].isIacOn("iac-oldhighlightingoff"))return o},GetRangeInformation:function(e,t){var n=v["default"].GetPlainTextFromRange(e).replace(/[\r\n]/g,"");v["default"].CleanUpHighlights();var i=q.GetTextOccurrenceIndexOfRange(e,t);null!=D["default"].ListParameters&&(i.listParameters=D["default"].ListParameters);i.chunkSize=D["default"].chunkSizeSuggestion;i.chunkableHeadnotes=D["default"].chunkableHeadnotes;var o=new l["default"];i.documentContentCacheKey=o.GetDocumentContentCacheKeyFromDOM();return{selectedText:n,location:i}},SaveHighlight:function(e,t,n){var i=x["default"].ParseIdFromSelectionInstanceValue(t);const o=n||D["default"].currentDocGuid;e.documentGuid=o;(0,F.CacheHighlightData)(i,e);D["default"].IsInfiniteScroll&&H["default"].instance.UpdateDocumentGuid(o);H["default"].instance.AddHighlight(e,v["default"].NewData,(function(e){e.documentGuid||(e.documentGuid=o);(0,F.UpdateCachedHighlightData)(i,e);q.AddAnnotationId(t,e);L["default"].AddNoteToNotesData(e);g["default"].publishHubEvent(a["default"].events.highlightAdded,null,{id:e.id},null);if(q.AreSharedNotesAllowed()){S["default"].IsSharedNoteCountsUpToDate=!1;S["default"].prototype.UpdateNoteCounts()}}))},AreSharedNotesAllowed:function(){return g["default"].AreSharedNotesAllowed()},AddNote:function(e,t,n,i,o,r,a){var s=A.A.AddNoteToContainer(t,n,i,a,e,o);function l(){R.A.DeleteNote(t,e,i)}const d=i||D["default"].currentDocGuid;if(!0===o){r?s.AddRestoredNote(e,l):s.AddExistingNote(e,l);(0,F.CacheHighlightData)(t,e)}else{function c(e){e.documentGuid||(e.documentGuid=d);(0,F.UpdateCachedHighlightData)(t,e);const n=x["default"].GetInstanceIdClass(t);q.AddAnnotationId(n,e)}(0,F.CacheHighlightData)(t,e);s.AddNote(e,c,l)}},TagWithoutRange:function(e,t,n){var i=e,o=r()("#"+a["default"].ids.highlightStartMarker,e)[0],s=r()("#"+a["default"].ids.highlightEndMarker,e)[0];x["default"].TagNodesBetweenMarkers(t,n,i,o,s);o&&o.parentNode.removeChild(o);s&&s.parentNode.removeChild(s)},RelocationCallback:function(e,t){g["default"].publishHubEvent(a["default"].events.notesAndHighlightsFinishedLoading,null,{guid:D["default"].currentDocGuid},null);D["default"].AreNotesAndHighlightsFinishedLoading=!0;q.LogRelocationErrors(t.unrelocatedHighlights);if(g["default"].AreSharedNotesAllowed()){S["default"].IsSharedNoteCountsUpToDate=!1;S["default"].prototype.UpdateNoteCounts();h["default"].Get("ADC",U["default"].SHARING_ANNOTATIONS_PREFERENCE_KEY)===U["default"].SHARING_ANNOTATIONS_PREFERENCE_VALUE_MYNOTES&&u["default"].Publish("Cobalt.Foldering.NoteMenu.ShowMyAnnotationsEvent",new f["default"]({},{},"ShowMyAnnotationsEvent","1.0"))}if(m["default"].isIacOn("IAC-A11Y-DOC-NOTES")&&t.restoredNote){const n=e[0];if(n){const e=(0,F.GetHighlightIdFromStorageId)(n.id);if(!e)return;const i=(0,G.GetCachedNoteContainer)(e);if(t.shouldReturnFocus)i.SetFocusOnMaximizeIcon();else{const e=x["default"].ParseIdFromNoteHolder(i?.GetParent()),t=x["default"].GetInstanceIdClass(e);document.querySelector(`.${a["default"].classes.highlightActivator}.${t}`)?.focus()}}}},MultipleRelocateAndTag:function(e,t,n,i,o,r,a=!1,s=!1){var l=n||x["default"].GetDocumentElement(),d=M["default"].Note,c=M["default"].Snippet,u=1;y["default"].Instance&&(u=y["default"].Instance.GetChunkCount());var f,h={tagClass:t,boundaryElement:n,docGuid:i,restoredNote:o,docDiv:l,unrelocatedHighlights:[],highlightTypeOfNote:d,highlightTypeOfSnippet:c,totalChunkCount:u,isOutlineSnippet:a,shouldReturnFocus:s};f=r&&"function"===(typeof r).toLowerCase()?function(e,t){r(e,t);q.RelocationCallback(e,arguments)}:q.RelocationCallback;if(g["default"].AreSharedNotesAllowed()&&!g["default"].AreSharedHighlightsAllowed()&&!a){for(var p=[],m=0;m<e.length;m++)(e[m].createdByCurrentUser||!e[m].createdByCurrentUser&&e[m].noteText||"snippet"==e[m]._type)&&p.push(e[m]);e=p}g["default"].TimedProcessTasks(e,q.ProcessHighlight,h,f)},OrphanNoteOnClient:function(e){e.location=null;q.OrphanContainer.AddExistingNote(e,null)}};q.RelocateText=function(e){var t=!1,n=0,i=0,o=0,s=null,l=0,d=null;this.findText=function(e,a,u,f,h,p,m,g,y,v){m=void 0!==m?x["default"].GetInstanceIdClass(m):x["default"].GetInstanceIdClass();var b=this.GetDomToSearch(e);if(y){if(0!=r()("#"+y.id,b).length){a=y.id;u=y.nonWhitespaceCharOffset}}if(v){if(0!=r()("#"+v.id,b).length){h=v.id;p=v.nonWhitespaceCharOffset}}let _=[];if(b){_=b.querySelectorAll(`#${a}`);_=[..._].concat((0,z.nextUntil)(b.querySelector(`#${a}`),`#${h}`))}(0,V.hideElements)(_.map((e=>[...e.querySelectorAll(".co_excludeAnnotations")])).flat());a||null!=e&&0!=e||null!=d?a||(a="co_document_"+e):a="co_document";h||null!=f&&0!=f||null!=d?h||(h="co_document_"+f):h="co_document";var S=c(b,a,u,y);t=!1;n=0;i=0;o=0;s=null;l=0;var N=c(b,h,p,v);if(!N&&s&&n>0){N={Element:s,Offset:p-o+l}}t=!1;n=0;i=0;o=0;s=null;l=0;var E=null;try{(E=b.createRange()).setStart(S.Element,S.Offset);E.setEnd(N.Element,N.Offset);k.A.HighlightTheRange(E,m,g)}catch(e){q.InjectMarkerBasedOnElement(S.Element,S.Offset,C["default"].StartMarkerHtml,N.Element,N.Offset,C["default"].EndMarkerHtml);q.TagWithoutRange(b,m,g)}(0,V.showElements)(_.map((e=>[...e.querySelectorAll(".co_excludeAnnotations")])).flat());return{StartInfo:S,EndInfo:N}};this.GetDomToSearch=function(t){var n=x["default"].GetDocumentElement(null,e);if(null!=y["default"].Instance){(d=y["default"].Instance).GetCurrentChunk();n=r()(d.GetChunkAt(t))[0]}return n};function c(e,r,d,f){e.id==r&&(t=!0);for(var h=0;h<e.childNodes.length;h++){var p=e.childNodes[h];p.id==r&&(t=!0);if(3!==p.nodeType&&null!=p.className&&-1==p.className.indexOf("co_excludeAnnotations")&&(""==p.className||null!=p.className&&-1==p.className.indexOf(a["default"].classes.docPostLoadAppText)||null!=f)){const e=c(p,r,d,f);if(e&&t)return e}if(t)if(3==p.nodeType){n<=d&&!f?n+=u(p,d):i<d&&(i+=u(p,d));if(f&&i>=d){return{Element:s,Offset:d-o+l}}if(n>d){return{Element:s,Offset:d-o+l}}}else if((""==p.className||null!=p.className&&-1==p.className.indexOf("co_excludeAnnotations"))&&(""==p.className||null!=p.className&&-1!=p.className.indexOf(a["default"].classes.docPostLoadAppText)&&null!=f)&&(1!=p.nodeType||null!=f)){const e=c(p,r,d,f);if(e)return e}}}function u(e,t){var i=e.textContent||e.nodeValue;if((i=i.replace(x["default"].GlobalWhiteSpaceCharacterRegex," "))&&x["default"].VerifyTextNodeIsValid(i)){l=function(e,t){e=e.replace(x["default"].GlobalWhiteSpaceCharacterRegex," ");for(var i=0,o=0,r=0;r<e.length;r++){" "===e.charAt(r)?i++:o++;if(o>=t-n)return i}}(i,t);i=(i=(i=(i=i.split("\t").join("")).split("\n").join("")).split("\r").join("")).split("\r\n").join("");o=n;s=e;return i.split(" ").join("").length}return 0}};q.InitializeSharing=function(e,t){var n=t.location?t.location.startPoint.chunkNumber:0,i=x["default"].GetHighlightsInChunk(e,n);if(t.noteText||"snippet"==t._type||null!=t.isPublic)i.forEach((e=>e.classList.remove("co_hideHighlight")));else if(t.createdByCurrentUser){const e=T["default"].ViewData&&T["default"].ViewData.DocumentGuid||D["default"].currentDocGuid;w["default"].CreateAnnotationsProvider(e,{contextualInfo:null}).GetNotePermissionsFromNoteData(t,(function(t){if(JSON.parse(t).SelectedContacts.length>0){var n=h["default"].Get("Foldering",U["default"].SHOW_ANNOTATIONS_PREFERENCE_KEY)===U["default"].SHOW_ANNOTATIONS_PREFERENCE_VALUE_UNCHECKED?"co_hlSharedHide":"co_hlShared";i.forEach((e=>e.classList.add(n)));if(i.length>1)for(var o=0;o<i.length;o++)0==o?i[o].classList.add("firstChunk"):o>0&&o<i.length-1?i[o].classList.add("middleChunk"):i[o].classList.add("lastChunk")}i.forEach((e=>e.classList.remove("co_hideHighlight")));u["default"].Publish("Cobalt.Document.Higlighting.SharingInitialized",{docGuid:e})}));D["default"].IsInfiniteScroll&&i.forEach((e=>e.classList.remove("co_hideHighlight")))}else if("unchecked"!=h["default"].Get("Foldering","ShowAnnotationsPreferenceKey")){for(let e=0;e<i.length;e++)if(i.length>1){if(0==e){i[e].classList.add("co_hlShared")
;i[e].classList.add("firstChunk")}else if(e>0&&e<i.length-1){i[e].classList.add("co_hlShared");i[e].classList.add("middleChunk")}else if(e==i.length-1){i[e].classList.add("co_hlShared");i[e].classList.add("lastChunk")}}else i[0].classList.add("co_hlShared");i.forEach((e=>e.classList.remove("co_hideHighlight")))}else for(let e=0;e<i.length;e++)if(i.length>1){if(0==e){i[e].classList.add("co_hlSharedHide");i[e].classList.add("firstChunk")}else if(e>0&&e<i.length-1){i[e].classList.add("co_hlSharedHide");i[e].classList.add("middleChunk")}else if(e==i.length-1){i[e].classList.add("co_hlSharedHide");i[e].classList.add("lastChunk")}}else i.forEach((e=>e.classList.add("co_hlSharedHide")))};q.UnshareAllHighlights=function(e){for(var t=(0,G.GetAllCachedNoteContainerIds)(e),n=(0,F.GetAllCachedHighlightIds)(e).filter((function(e){return t.indexOf(e)<0})),i=0;i<n.length;i++){(0,F.GetCachedHighlightData)(n[i]).createdByCurrentUser&&document.querySelectorAll(`.co_selection_${n[i]}`).forEach((e=>e.classList.remove("co_hlShared")))}};q.ShareAllHighlights=function(e){for(var t=(0,G.GetAllCachedNoteContainerIds)(e),n=(0,F.GetAllCachedHighlightIds)(e).filter((function(e){return t.indexOf(e)<0})),i=0;i<n.length;i++){if((0,F.GetCachedHighlightData)(n[i]).createdByCurrentUser){var o=document.querySelector(".co_selection_"+n[i]);o?.classList.contains("co_hideHighlight")?o.classList.add("co_hlSharedHide"):o?.classList.add("co_hlShared")}}};q.ProcessHighlight=function(e,t){var n=t.docGuid,i=t.restoredNote,o=t.highlightTypeOfNote,r=t.highlightTypeOfSnippet,s=e.location,l=t.isOutlineSnippet,d=x["default"].GetHighlightType(e);e.documentGuid||(e.documentGuid=n);e.permissions=e.permissions||[];var c=s.startPoint.chunkNumber,u=s.endPoint.chunkNumber,f=null;(r===d||l)&&(f=a["default"].ids.snippetSuffix);if(q.ShouldOrphanNote(c,u)){q.OrphanNoteOnClient(e);return}var p=new q.RelocateText(n);const v=x["default"].GetHighlightClass(e);try{p.findText(c,e.location.startPoint.markerId,e.location.startPoint.nonWhitespaceCharOffset,u,e.location.endPoint.markerId,e.location.endPoint.nonWhitespaceCharOffset,f,v,e.location.startPoint.postLoadAppTextOffset,e.location.endPoint.postLoadAppTextOffset)}catch(t){var C=!0;if(m["default"].EnableIpad||m["default"].EnableIphone){var b=c;y["default"].Instance&&(b=y["default"].Instance.currentChunk);C=c>=b&&u<=b}C&&q.OrphanNoteOnClient(e);return}var S=D["default"].SelectionInstanceCounter;d!=r&&D["default"].SelectionInstanceCounter++;(d===r||l)&&(S=a["default"].ids.snippetSuffix);var N=x["default"].GetInstanceIdClass(S);if(g["default"].AreSharedHighlightsAllowed())q.InitializeSharing(N,e);else{document.querySelectorAll("."+N).forEach((e=>e.classList.remove("co_hideHighlight")))}if(d===o){var E=x["default"].GetFirstHighlightedElement(N,c,n);E&&q.AddNote(e,S,E.element,n,!0,i,E.chunkNumber)}d!=r&&(0,F.CacheHighlightData)(S,e);if((0,_.AreSharedAnnotationsAllowed)()){h["default"].Get("ADC",U["default"].SHARING_ANNOTATIONS_PREFERENCE_KEY)==U["default"].SHARING_ANNOTATIONS_PREFERENCE_VALUE_MYNOTES&&P["default"].DisplayMyHighlights()}document.getElementById("co_startMarker")?.remove();document.getElementById("co_endMarker")?.remove();q.AddAnnotationId(N,e);if(i){const e=(0,G.GetInvalidNotesIds)();(0,F.CleanUpHighlightCacheByIds)(e);(0,G.CleanUpNotesCacheByIds)(e)}};q.ShouldOrphanNote=function(e,t){return e!=t};q.InjectMarkerBasedOnElement=function(e,t,n,i,o,a){let s,l,d,c,u;if(e===i){s=e.textContent||e.nodeValue;const i=s.substring(0,t),f=s.substring(t,o);l=s.substring(o,s.length);d=document.createElement("div");d.innerHTML=n;c=d.childNodes[0].outerHTML;d.innerHTML=a;u=d.childNodes[0].outerHTML;const h=(0,p.EncodeHtml)(i)+c+(0,p.EncodeHtml)(f)+u+(0,p.EncodeHtml)(l);r()(e).replaceWith(h)}else{s=e.textContent||e.nodeValue;const l=s.substring(0,t),f=s.substring(t,s.length);d=document.createElement("div");d.innerHTML=n;c=d.childNodes[0].outerHTML;const h=(0,p.EncodeHtml)(l)+c+(0,p.EncodeHtml)(f);s=i.textContent||i.nodeValue;const m=s.substring(0,o),g=s.substring(o,s.length);d.innerHTML=a;u=d.childNodes[0].outerHTML;const y=(0,p.EncodeHtml)(m)+u+(0,p.EncodeHtml)(g);r()(i).replaceWith(y);r()(e).replaceWith(h)}};q.InsertHighlightMarkerBasedOnDocumentMarker=function(e,t,n,i,o){var r=s["default"].TreeWalker.GetFilterObjectForNodesNotInCssBlacklist(o,!0),a=[s["default"].NodeTypeFilter.SHOW_ELEMENT,s["default"].NodeTypeFilter.SHOW_TEXT],l=new s["default"].TreeWalker(i,a,r,!1);l.currentNode=e;for(var d=0;l.nextNode();)if(l.currentNode.nodeType==s["default"].NodeType.TEXT_NODE){var c=q.FindCharOffsetFromStartViaSanitizedCharOffset(l.currentNode.nodeValue,n-d);d+=c.nonWhiteSpaceCharCount;if(c.rawCharOffset>-1){var u;if(c.rawCharOffset===l.currentNode.nodeValue.length){u=document.createTextNode("");l.currentNode.parentNode.insertBefore(u,l.currentNode.nextSibling)}else{u=l.currentNode.splitText(c.rawCharOffset);if(l.currentNode.parentNode!==u.parentNode){u.parentNode&&u.parentNode.removeChild(u);l.currentNode.parentNode.insertBefore(u,l.currentNode.nextSibling)}}u.parentNode.insertBefore(t,u);return}}};q.LogRelocationErrors=function(e){if(Array.isArray(e)&&e.length>0){(new l["default"]).LogHighlightRelocationErrors(e)}};q.CompileTextNodeOffsetInformation=function(e,t){var n=0,i=[],o=s["default"].TreeWalker.GetFilterObjectForNodesNotInCssBlacklist(t,!0);function r(e,t){for(var r=[s["default"].NodeTypeFilter.SHOW_ELEMENT,s["default"].NodeTypeFilter.SHOW_TEXT],a=new s["default"].TreeWalker(e,r,o,!1);a.nextNode();)if(a.currentNode.nodeType==s["default"].NodeType.TEXT_NODE){var l=q.Sanitize(a.currentNode.nodeValue),d=l.length,c={startOffset:n,length:d,text:l,nodeReference:a.currentNode,chunkNumber:t};i.push(c);n+=d}}var a=y["default"].Instance;if(null!=a)for(var l=0;l<a.GetChunkCount();l++)r(a.GetChunkAt(l),l);0==i.length&&r(e,0);return i};q.FindCharOffsetFromStartViaSanitizedCharOffset=function(e,t){if(null==e)throw new Error("ArgumentException: rawNodeText was null or empty");if(t<0)throw new Error("ArgumentException: sanitizedCharOffset was not within the acceptable range");for(var n=-1,i=0,o=x["default"].WhiteSpaceCharacterRegex,r=0;r<e.length;r++){var a=e.substring(r,r+1);if(!o.test(a)){if(0==t){n=r;break}if(++i==t){n=r+1;break}}}return{nonWhiteSpaceCharCount:i,rawCharOffset:n}};q.FindCharOffsetFromEndViaSanitizedCharOffset=function(e,t){if((0,p.IsNullOrEmpty)(e))throw new Error("ArgumentException: rawNodeText was null or empty");if(t<=0&&t>e.length)throw new Error("ArgumentException: sanitizedCharOffset was not within the acceptable range");for(var n=-1,i=0,o=!1,r=e.length;r>0;r--){var a=e.substring(r-1,r),s=" "==a;if((0,p.IsNotNullOrEmpty)(q.Sanitize(a))&&(!s||!o)&&++i==t){n=r-1;break}o=s}return n};q.FindTextNodeOffsetInformationIndexFromStartOffset=function(e,t,n){for(var i=-1,o=n=null!=n&&n>=0&&n<e.length?n:0;o<e.length;o++)if(e[o].startOffset<=t&&t<e[o].startOffset+e[o].length){i=o;break}return i};q.FindTextNodeOffsetInformationIndexFromEndOffset=function(e,t,n){for(var i=-1,o=n=null!=n&&n>=0&&n<e.length?n:0;o<e.length;o++)if(e[o].startOffset<t&&t<=e[o].startOffset+e[o].length){i=o;break}return i};q.AddAnnotationId=function(e,t){const n=t.id;let i=document;if(y["default"].Instance&&y["default"].Instance.GetChunkCount()>0){const e=t.location.startPoint.chunkNumber;i=y["default"].Instance.GetChunkAt(e)}const o=r()(i).find(`.${e}`);o.attr(a["default"].ids.dataAnnotationId,n);m["default"].isIacOn("IAC-A11Y-DOC-NOTES")||o.attr("role","mark");const s=x["default"].GetHighlightType(t);if((s===M["default"].Note||s===M["default"].Highlight)&&m["default"].isIacOn("IAC-A11Y-DOC-NOTES")){h["default"].Get("Foldering",a["default"].prefs.noteMenuTogglePreferenceName)===a["default"].prefs.noteMenuToggleShow&&q.EnableHighlightAccessibility(o,t)}};q.EnableHighlightAccessibility=function(e,t){x["default"].AllowHighlightAccessibility(e,t);e.focus((()=>{W["default"].DisplayNoteUpFront(W["default"].ParseSelectionInstanceFromClassValue(e.attr("class")),!1)}))};q.OnLastNoteDeleted=function(){(0,I.HideRightColumn)()};const j=q},5682:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>m});var i=n(669),o=n(8286),r=n(1422),a=n(2065),s=n(2656),l=n(2595),d=n(966),c=n(6921),u=n(4682);const f={
CreateNoteHolder(e){var t=document.createElement("span");t.id=o["default"].ids.noteParentPrefix+e;t.style.zIndex=parseInt(e);t.className=`${o["default"].classes.noteHolder} ${o["default"].classes.highlightingExcludeAnnotations}`;return t},RemoveNoteHolder:function(e,t){e.id||document.getElementById(t.replace("selection","noteHolder"))?.remove()},RepositionNoteHolder:function(e,t,n){var i,o,r=s["default"].GetDocumentElement(null,n),l=a["default"].determineOffset(r),d=a["default"].determineOffset(t).y-l.y;if(d<0)(i=s["default"].GetHiddenInlineNotesContainer()).appendChild(e);else{o=s["default"].GetInlineNotesContainer();var c=document.activeElement,u=e.contains(c);o.appendChild(e);u&&c.focus();if(!a["default"].AreSharedAnnotationsAllowed()){e.style.position="absolute";e.style.top=d+"px"}}},PrepAndRepositionNoteHolder:function(e){if((0,l.IsNotNullOrEmpty)(e)){var t=(0,c.GetCachedNoteContainer)(e),n=s["default"].GetInstanceIdClass(e),i=s["default"].GetFirstHighlightedElement(n,0);const o=d["default"].Get("Foldering",u["default"].SHOW_ANNOTATIONS_PREFERENCE_KEY)===u["default"].SHOW_ANNOTATIONS_PREFERENCE_VALUE_CHECKED;i&&o&&this.RepositionNoteHolder(t.GetParent(),i.element)}},GetSelectionInstanceIdFromNoteHolder:function(e){if(!e)throw new Error("noteHolder is not defined");const t=s["default"].ParseIdFromNoteHolder(e);if(t)return o["default"].classes.highlightSelectionPrefix+t;return null}};var h=n(4422);const p={...f,getElementToDocumentOffset:function(e){var t=document.getElementById(o["default"].ids.document),n=a["default"].determineOffset(t);return a["default"].determineOffset(e).y-n.y},RepositionNoteHolder:function(e,t){var n,i,r=this.getElementToDocumentOffset(t),l=s["default"].ParseIdFromNoteHolder;if(r<0)(n=document.getElementById(o["default"].ids.hiddenInlineNotes)).appendChild(e);else{i=document.getElementById(o["default"].ids.inlineNotes);const n=document.activeElement,r=e.contains(n);i.appendChild(e);r&&n.focus();if(!a["default"].AreSharedAnnotationsAllowed()){e.style.position="absolute";var d=s["default"].getRepositionNoteHolderTop(e,t);e.style.top=d+"px";var c=0;(0,h.siblings)(e,".co_noteHolder:not(.co_highzIndex)").forEach((function(t){Math.abs(d-parseInt(t.style.top,10))<5&&parseInt(l(t))<parseInt(l(e))&&(c+=25)}));e.style.right=c+"px"}}}},m={...p,RepositionNoteHolder:function(e,t,n){a["default"].isPracticalLawUsDocument()?p.RepositionNoteHolder(e,t,n):f.RepositionNoteHolder(e,t,n);this.MoveNoteUnderNoteNavigation(e);const i={noteHolder:e};r["default"].Publish("Cobalt.Foldering.Note.Reposition",i)},MoveNoteUnderNoteNavigation:function(e){const t=e.offsetParent?.offsetTop,n=(0,i.getElementHeight)(document.getElementById(o["default"].ids.inlineNotesNavigationContainer));if(t&&n){e.offsetTop+t<n&&(e.style.top=n-t+"px")}}}},5734:(e,t,n)=>{e.exports=n},5779:(e,t,n)=>{e.exports=n(4507)(5855)},6123:(e,t,n)=>{e.exports=n(4507)(43453)},6183:(e,t,n)=>{e.exports=n(4507)(28447)},6246:(e,t,n)=>{e.exports=n(4507)(91422)},6254:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>i});const i={instance:null}},6397:(e,t,n)=>{e.exports=n(4507)(68926)},6399:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var i=n(9691),o=n.n(i),r=n(8286),a=n(4159),s=n(9912);const l='<div class="<%- colorBoxListClass %>">\n    <fieldset aria-labelledby="<%- ariaLabelledBy %>">\n        <legend class="co_accessibilityLabel" id="<%- legendId %>"><%- legend %></legend>\n        <div class="ColorOptions">\n            <ul>\n                <% colors.forEach(function(color) { %>\n                    <li>\n                        <button class="ColorOptionItem" type="button" id="<%- color.id %>" name="colorOption_<%= id %>" value="<%- color.value %>" >\n                            <span class="ColorOption ColorOption--<%- color.value %>"></span>\n                            <span class="co_accessibilityLabel"><%- color.label %></span>\n                        </button>\n                    </li>\n                <% }) %>\n            </ul>\n        </div>\n    </fieldset>\n</div>\n';var d=n(6123);const c=e=>[{label:s["default"].lookup("SC.Document.ColorOptions.Yellow","Yellow"),id:`yellow_${e}`,value:r["default"].classes.highlightYellow},{label:s["default"].lookup("SC.Document.ColorOptions.Green","Green"),id:`green_${e}`,value:r["default"].classes.highlightGreen},{label:s["default"].lookup("SC.Document.ColorOptions.Blue","Blue"),id:`blue_${e}`,value:r["default"].classes.highlightBlue},{label:s["default"].lookup("SC.Document.ColorOptions.Pink","Pink"),id:`pink_${e}`,value:r["default"].classes.highlightPink},{label:s["default"].lookup("SC.Document.ColorOptions.Orange","Orange"),id:`orange_${e}`,value:r["default"].classes.highlightOrange},{label:s["default"].lookup("SC.Document.ColorOptions.Purple","Purple"),id:`purple_${e}`,value:r["default"].classes.highlightPurple},{label:s["default"].lookup("SC.Document.ColorOptions.Black","Black"),id:`black_${e}`,value:r["default"].classes.highlightBlack}],u=e=>{const t=e.currentTarget.value;t&&(a["default"].HighlightColor=t)};function f(e,t){const n=o().uniqueId(),i=`legend_${n}`,a={colors:c(n),colorBoxListClass:r["default"].classes.highlightBoxList,legend:s["default"].lookup("SC.Document.SelectedTextMenu.ColorOptionsTitle","Color options"),id:n,legendId:i,ariaLabelledBy:`${t} ${i}`},f=function(e){e.currentTarget.classList.toggle(r["default"].classes.highlightBoxHover)},h=o().template(l)(a),p=document.createElement("template");p.innerHTML=h;const m=p.content.firstElementChild;m.querySelectorAll(`.${r["default"].classes.colorOptionItem}`).forEach((t=>{t.addEventListener("mouseenter",f);t.addEventListener("mouseleave",f);t.addEventListener("click",(t=>{u(t);e(t)}));const n=new d["default"](t,t.innerText);n.render();n.getTooltipElement()?.addEventListener("pointerdown",(e=>{e.preventDefault();e.stopPropagation()}))}));return m}},6494:(e,t,n)=>{e.exports=n(4507)(7058)},6574:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>S});var i=n(9191),o=n.n(i),r=n(3839),a=n(1422),s=n(8286),l=n(519),d=n(9086),c=n(2179),u=n(5501),f=n(7955),h=n(2065),p=n(1583),m=n(8230),g=n(4159),y=n(3673),v=n(3110),C=n(6921),b=n(3587),_=n(2656);const S={currentSelectionInstance:null,inlineNotesHighlights:null,setInlineNotesHighlights:function(e){this.inlineNotesHighlights=e},ShowSharedBy:function(e,t,n){var i="",o=_["default"].ParseIdFromSelectionInstanceValue(t),r=(0,m.GetCachedHighlightData)(o),a="",s="";if(r&&r.createdBy){r.createdBy.FirstName&&(a=r.createdBy.FirstName);r.createdBy.LastName&&(s=r.createdBy.LastName);const t=document.getElementById(`co_selection_${o}`);t&&(t.style.position="relative");i+="<div id='createdBy' class='hl_popUp' style='top:"+n.clientY+"px; left: "+n.clientX+"px;'><div class='icon25 icon_people'></div>Shared by "+a+" "+s+"</div>";if(e?.classList.contains("co_hlShared")&&!n.target.classList.contains("hl_popUp")&&!n.target.parentElement.classList.contains("hl_popUp")){e.insertAdjacentHTML("beforeend",i);document.getElementById("createdBy")?.addEventListener("contextmenu",(function(e){e.preventDefault();e.stopPropagation()}));setTimeout((function(){var e=function(t){if(document.querySelectorAll(".hl_popUp").length>1){var n=t.clientY-document.querySelector(".hl_popUp")?.offsetTop,i=t.clientX-document.querySelector(".hl_popUp")?.offsetLeft,o=t.clientY-document.querySelectorAll(".hl_popUp")[1]?.offsetTop+(t.clientX-document.querySelectorAll(".hl_popUp")[1]?.offsetLeft);0!=i+n?document.querySelector(".hl_popUp")?.remove():0!=o&&document.querySelectorAll(".hl_popUp")[1]?.remove()}else document.querySelectorAll(".hl_popUp").forEach((e=>e.remove()));["scroll","contextmenu","mouseup"].forEach((t=>document.removeEventListener(t,e)))};["scroll","contextmenu","mouseup"].forEach((t=>document.addEventListener(t,e)))}),100)}}},CanDisplayOptionsMenu:function(e){if((g["default"].IsInfiniteScroll?o()(`#${s["default"].ids.infiniteScrollWidgetContainer}`):o()(`#${s["default"].ids.websiteWidgetDiv}`)).hasClass("co_hideAnnotations"))return!1;var t=_["default"].ParseIdFromSelectionInstanceValue(e);if(h["default"].AreSharedHighlightsAllowed()){const e=(0,m.GetCachedHighlightData)(t);if(!e||!e.createdByCurrentUser)return!1}if(g["default"].ConvertNoteId==t)return!1
;var n=f["default"].GetCurrentRange();if(f["default"].GetPlainTextFromRange(n).length>0)return!1;if(_["default"].GetHighlightTypeOfCachedHighlight(t)===y["default"].Highlight)return!0;return!1},MarkNotesSelectedByPosition:function(e){var t,n,i,o,r=this.inlineNotesHighlights.inlineHighlightsAndNotes,a=r.length;for(t=0;t<a;++t)if("highlight"===(n=r[t])._type){i=n.location.startPoint;o=n.location.endPoint;n.isSelected=!1;(i.chunkNumber<e.chunkNumber||i.chunkNumber===e.chunkNumber&&i.nonWhitespaceCharOffset<=e.nonWhitespaceCharOffset)&&(o.chunkNumber>e.chunkNumber||o.chunkNumber===e.chunkNumber&&o.nonWhitespaceCharOffset>=e.nonWhitespaceCharOffset)&&(n.isSelected=!0)}},UnselectActiveHighlights:function(e,t){if(this.currentSelectionInstance&&this.currentSelectionInstance!=e){for(var n=l["default"].GetElementsByClassName(this.currentSelectionInstance,"span",t),i=0;i<n.length;i++)l["default"].RemoveClass(n[i],s["default"].classes.activeHighlight);u["default"].Hide()}},MaximizeNoteContainer:function(e){for(const t of v["default"].values())if(t?._parent===e){t.MaximizeNote();break}},MinimizeNoteContainer:function(e){for(const t of v["default"].values())if(t?._parent===e){t.MinimizeNote();break}},DisplayNoteUpFront:function(e,t){if(null==e)return;var n=document.getElementById(_["default"].GetNoteHolderIdFromSelectionInstanceValue(e));if(null==n)return;t&&h["default"].isNarrowTocDisplayEnabled()&&this.MaximizeNoteContainer(n);if(p.A.current==n)return;p.A.SetActiveNoteDesignation(n);for(var i=n.parentNode,o=0;o<i.childNodes.length;o++){var r=i.childNodes[o];l["default"].HasClass(r,"co_highzIndex")||l["default"].HasClass(r,"co_highzIndex2")?r.style.zIndex="":Number.parseInt(r.style.zIndex)>Number.parseInt(n.style.zIndex)&&r.style.zIndex--}if(l["default"].HasClass(n,"co_highzIndex")||l["default"].HasClass(n,"co_highzIndex2")){n.style.zIndex="";return}n.style.zIndex=g["default"].SelectionInstanceCounter-1},CollapseNotes:function(e,t,n){let i=h["default"].getEventSourceElement(t);if(!i)return;i.nodeType===c["default"].TEXT_NODE&&(i=i.parentNode);var o="co_noteHeader";"string"==typeof i.className&&"co_noteArea"!=i.className&&"co_viewNoteText"!=i.className&&i.className.substring(0,13)!=o&&!("button"===i.type&&"Save"===i.value)&&"co_highlightMenuAddNote"!=i.id&&v["default"].forEach((e=>{const t=e.GetParent();n&&n===t.id||l["default"].HasClass(t,s["default"].classes.highzIndex)||e.MinimizeNote()}))},ParseSelectionInstanceFromClassValue:function(e){if(null==e)throw new Error("ParseSelectionInstanceFromClassValue: classValue is null");e=" "+e+" ";var t=s["default"].classes.highlightSelectionPrefix,n=e.indexOf(t);if(n>-1){var i=e.indexOf(" ",n);if(i>-1)return e.substring(n,i)}return null},GetHighlightTypeFromElement:function(e){var t,n=h["default"].GetAncestorOrSelfElement(e,"span",s["default"].classes.highlight);if(n&&n.className){var i=this.ParseSelectionInstanceFromClassValue(n.className),o=_["default"].ParseIdFromSelectionInstanceValue(i);t=_["default"].GetHighlightTypeOfCachedHighlight(o)}return t},ActivateNote:function(e){var t=_["default"].GetDocumentElement(e.target),n=h["default"].getEventSourceElement(e),i=!_["default"].IsAnnotationsElement(n)&&!g["default"].IsMousePressedInAnnotation;if("mouseup"===e.type||"touchstart"===e.type){var c=h["default"].GetAncestorOrSelfElement(n,"a"),v=h["default"].GetAncestorOrSelfElement(n,"button","co_noteMaximize");if(c&&c.href||v){var S=this.GetHighlightTypeFromElement(n)===y["default"].Note;const t=n.parentElement;(g["default"].IsNewDocumentView||g["default"].IsCollapsedView)&&t.id&&i&&this.CollapseNotes(N,e,t.id);if(r["default"].EnableIpad&&S||"mouseup"===e.type)return}}if(h["default"].GetAncestorOrSelfElement(n,"div",s["default"].classes.highlightMenu)){if(g["default"].IsHighlighting)return;return}var N=h["default"].GetAncestorOrSelfElement(n,"span",s["default"].classes.highlight);if(N&&N.className){if(g["default"].IsHighlighting)return;if(h["default"].AreSharedAnnotationsAllowed()){if("mouseup"===e.type){d["default"].RemoveAllUndoMessages();b["default"].ScrollNoteInRail(N.className,N.id)}}else{this.DisplayNoteUpFront(N.className,!0);if(g["default"].IsNewDocumentView||g["default"].IsCollapsedView){const t=document.getElementById(_["default"].GetNoteHolderIdFromSelectionInstanceValue(N.className));t?this.CollapseNotes(N,e,t.id):this.CollapseNotes(N,e)}}const n=this.ParseSelectionInstanceFromClassValue(N.className);this.UnselectActiveHighlights(n,t);this.currentSelectionInstance=n;const i=l["default"].GetElementsByClassName(n,"span",t);for(var E=0;E<i.length;E++)l["default"].AddClass(i[E],s["default"].classes.activeHighlight);if(h["default"].AreSharedAnnotationsAllowed()&&"mouseup"===e.type){f["default"].StoreCurrentSelection();f["default"].DetermineSelectionEndPoints(!0);var A=f["default"].NewData.Startpoint;this.MarkNotesSelectedByPosition(A);a["default"].Publish(s["default"].events.noteSelectedStatesChanged,{className:s["default"].classes.activeClass});var w=_["default"].ParseIdFromSelectionInstanceValue(this.currentSelectionInstance),x=(0,C.GetCachedNoteContainer)(w);x&&p.A.SetActiveNoteDesignation(x.GetParent())}if(this.CanDisplayOptionsMenu(n))u["default"].Show(i[0],n,e);else if(h["default"].AreSharedHighlightsAllowed()){var T=_["default"].ParseIdFromSelectionInstanceValue(n),I=(0,m.GetCachedHighlightData)(T);I.createdByCurrentUser||I.noteText||this.ShowSharedBy(i[0],n,e)}const c=N.classList.contains(s["default"].classes.highlightActivator);if(r["default"].isIacOn("IAC-A11Y-DOC-NOTES")&&c){const e=document.getElementById(_["default"].GetNoteHolderIdFromSelectionInstanceValue(N.className));if(o()(e).length){const e=_["default"].ParseIdFromSelectionInstanceValue(this.currentSelectionInstance),t=(0,C.GetCachedNoteContainer)(e);t.MaximizeNote();t.ActivateNoteByKeyboard()}}h["default"].preventEventDefaultBehavior(e);return}let D=null;if(this.currentSelectionInstance){var k=D=this.currentSelectionInstance;const e=l["default"].GetElementsByClassName(k,"span",t);for(var M=0;M<e.length;M++)l["default"].RemoveClass(e[M],s["default"].classes.activeHighlight);u["default"].Hide();this.currentSelectionInstance=null;if(h["default"].AreSharedAnnotationsAllowed()){for(M=0;M<this.inlineNotesHighlights.inlineHighlightsAndNotes.length;++M)this.inlineNotesHighlights.inlineHighlightsAndNotes[M].isSelected=!1;a["default"].Publish(s["default"].events.noteSelectedStatesChanged,{className:s["default"].classes.activeClass})}}if(this.IsNotesCollapsingAllowed(i)){if((n.nodeType===Node.TEXT_NODE?n.parentElement:n).closest(".mce-menu-item, .mce-window, .co_NotesLightBoxAlert, #mce-modal-block, #TextEditor-KeyboardInstructionsContainer"))return;N&&N.className&&D||this.CollapseNotes(N,e)}},IsNotesCollapsingAllowed:function(e){return(g["default"].IsNewDocumentView||g["default"].IsCollapsedView)&&e}}},6662:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>o});var i={removeSelectedTextMenuFeatures:function(){},removeCopyWithReferenceJurisdiction:function(){}};const o=i},6669:(e,t,n)=>{e.exports=n(4507)(71605)},6751:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>m});var i=n(170),o=n.n(i);const r={addParamsToUrl:function(e,t){if(e&&e.length>0&&t){-1==e.indexOf("?")&&(e+="?");Object.keys(t).forEach((n=>{"?"!==e.slice(-1)&&(e+="&");e+=n+"="+t[n]}))}return e}};var a=n(9796),s=n(3434),l=n(8854),d=n(3839),c=n(9912),u=n(8660),f=function(e,t,n,i){if(t.ok){var o=t.ResponseText;n&&(o=n(t.ResponseText));i&&i(o);return o}var r="Request failed {endPoint}. Status code: {statusCode}".replace("{endPoint}",e).replace("{statusCode}",t.StatusCode);i&&i({Status:"Error",ErrorMessage:r});throw new Error(r)},h=function(e){var t;return t=!e||e.every((function(e){return d["default"].isFeatureEnabled(e)}))};const p=function(){return d["default"].IsIndigoDisplayEnabled&&h(["SNIPPET COMPARE"])};const m={AddComparisonItem:async function(e,t){var n=a["default"].endPoints.comparisonItems,i={text:e.text,documentGuid:e.documentGuid,itemType:e.itemType,itemName:e.itemName,sectionFilter:e.sectionFilter,textType:e.textType};if(d["default"].isFeatureEnabled("SNIPPET COMPARE")){i.titleText=e.titleText;i.contentType=e.contentType;i.jurisdiction=e.jurisdiction;i.clientId=e.clientId
;i.text?.startsWith("<tr")&&(i.text=`<table>${i.text}</table>`)}var o=new u["default"](s["default"].Document,n),r=await o.Post(JSON.stringify(i));return f(n,r,(function(e){return JSON.parse(e)}),(function(e){if(p()&&e&&"Error"===e.Status){(0,l.publishErrorMessage)(s["default"].Document,c["default"].lookup("SC.Document.SelectedTextMenu.SnippetCompareUnexpectedError","Snippet could not be added to compare text.  Please try again."));throw new Error(e.ErrorMessage)}t&&t(e)}))},UpdateComparisonItem:async function(e){var t=a["default"].endPoints.deleteComparisonItem.replace("{comparisonItemGuid}",e.itemGuid),n=new u["default"](s["default"].Document,t),i=await n.Put(JSON.stringify(e));return f(t,i)},DeleteItem:async function(e){var t=a["default"].endPoints.deleteComparisonItem.replace("{comparisonItemGuid}",e.itemGuid),n=new u["default"](s["default"].Document,t),i=await n.Delete();return f(t,i)},BatchDeleteItems:async function(e){var t=e.itemsIds.map((e=>`comparisonItemsGuids=${e}`)).join("&"),n=a["default"].endPoints.deleteComparisonItems.replace("{comparisonItemsGuids}",t),i=new u["default"](s["default"].Document,n),o=await i.Delete();return f(n,o)},GetComparisonItemsCount:async function(){var e=a["default"].endPoints.getComparisonItemsCount,t=new u["default"](s["default"].Document,e),n=await t.Get();return f(e,n)},GetComparisonItems:async function(e){var t=a["default"].endPoints.comparisonItems;t=r.addParamsToUrl(t,e);var n=new u["default"](s["default"].Document,t),i=await n.Get();return f(t,i,(function(e){return JSON.parse(e)}))},GetComparisonItemFullText:async function(e,t){var n=a["default"].endPoints.comparisonItemFullText.replace("{reportGuid}",e.reportGuid).replace("{comparisonItemGuid}",e.comparisonItemGuid);n=r.addParamsToUrl(n,t);var i=new u["default"](s["default"].Document,n),o=await i.Get();return f(n,o)},GetReports:async function(e){var t=a["default"].endPoints.reports;t=r.addParamsToUrl(t,e);var n=new u["default"](s["default"].Document,t),i=await n.Get();return f(t,i,(function(e){return JSON.parse(e)}))},GetReport:async function(e){var t=a["default"].endPoints.report.replace("{reportGuid}",e.itemGuid),n=new u["default"](s["default"].Document,t),i=await n.Get();return f(t,i,(function(e){return JSON.parse(e)}))},GetReportFullText:async function(e,t){var n=a["default"].endPoints.reportFullText.replace("{reportGuid}",e.itemGuid);n=r.addParamsToUrl(n,t);var i=new u["default"](s["default"].Document,n),o=await i.Get();return f(n,o)},GetReportDiffs:async function(e){var t=a["default"].endPoints.reportDiffs.replace("{reportGuid}",e),n=new u["default"](s["default"].Document,t),i=await n.Get();return f(t,i,(function(e){return JSON.parse(e)}))},GetReportFullTextJC:async function(e){var t=a["default"].endPoints.reportFullTextJC.replace("{reportGuid}",e),n=new u["default"](s["default"].Document,t),i=await n.Get();return f(t,i,(function(e){return JSON.parse(e)}))},AddReport:async function(e){var t=a["default"].endPoints.createReport,n=new u["default"](s["default"].Website,t),i=await n.Post(JSON.stringify(e));return f(t,i,(function(e){return JSON.parse(e)}))},UpdateReport:async function(e){var t=a["default"].endPoints.report.replace("{reportGuid}",e.itemGuid),n=new u["default"](s["default"].Document,t),i=await n.Put(JSON.stringify(e));return f(t,i,(function(e){return e?JSON.parse(e):e}))},DeleteReport:async function(e){var t=a["default"].endPoints.report.replace("{reportGuid}",e.itemGuid);"params"in e&&e.params&&(t=r.addParamsToUrl(t,e.params));var n=new u["default"](s["default"].Document,t),i=await n.Delete();return f(t,i)},BatchDeleteReports:async function(e){var t=e.reportsIds.map((e=>`reportsGuids=${e}`)).join("&"),n=a["default"].endPoints.deleteReports.replace("{reportsGuids}",t);e.params&&(n=r.addParamsToUrl(n,e.params));var i=new u["default"](s["default"].Document,n),o=await i.Delete();return f(n,o)},AcceptCharges:async function(e){var t=a["default"].endPoints.acceptCharges.replace("{transactionGuid}",e.transactionGuid),n=new u["default"](s["default"].Website,t),i=await n.Post(null);return f(t,i)},DocumentAllowsRedline:function(e,t){if(t&&e?.[t])return(n=e[t]?.IAC,!n||n.every((function(e){return d["default"].isIacOn(e)})))&&h(e[t]?.FAC);var n;return!1},CheckReportCompletionStatus:async function(e){var t=a["default"].endPoints.checkReportStatus,n=new u["default"](s["default"].Website,t),i=await n.Post(o().toJson(e));return f(t,i,(function(e){return e?JSON.parse(e):null}))},GetComparisonItemsGroupedByDate:async function(e){let t="Document/v1/Redline/ComparisonItemsGroupedByDate";t=r.addParamsToUrl(t,e);const n=new u["default"](s["default"].Document,t),i=await n.Get();return f(t,i,(function(e){return JSON.parse(e)}))},GetComparisonItemFullTextWithoutReport:async function(e,t){let n="Document/v1/Redline/ComparisonItem/fulltext{guid}".replace("{guid}",e);n=r.addParamsToUrl(n,t);const i=new u["default"](s["default"].Document,n),o=await i.Get();return f(n,o)}}},6908:(e,t,n)=>{e.exports=n(4507)(86370)},6921:(e,t,n)=>{"use strict";n.r(t);n.d(t,{CacheNoteContainer:()=>d,CleanUpNotesCacheByIds:()=>l,DeleteCachedNoteContainer:()=>f,GetAllCachedNoteContainerIds:()=>h,GetCachedNoteContainer:()=>c,GetHighlightIdFromNoteContainerInstance:()=>u,GetInvalidNotesIds:()=>s,GetNoteContainerCacheKeys:()=>p});var i=n(1422),o=n(8286),r=n(5024),a=n(3110);function s(){const e=p(),t=[];e.forEach((e=>{const n=a["default"].get(e);if(!n._popups){t.push(e);return}n._popups.every((e=>void 0===e))&&t.push(e)}));return t}function l(e){e.forEach((e=>{a["default"].delete(e)}))}function d(e,t){if(null!=e&&e.toString().length>0&&null!=t){a["default"].set(e.toString(),t);1===a["default"].size&&i["default"].Publish(o["default"].events.containsInlineNotes,new r["default"]({},{},o["default"].events.containsInlineNotes,"1.0"))}}function c(e){if(null!=e&&e.toString().length>0)return a["default"].get(e.toString());return null}function u(e){if(null!=e&&e.toString().length>0)for(const[t,n]of a["default"])if(n._instance==e)return t;return null}function f(e){a["default"].delete(e);0===a["default"].size&&i["default"].Publish(o["default"].events.noInlineNotes,new r["default"]({},{},o["default"].events.noInlineNotes,"1.0"));i["default"].Publish(o["default"].events.deleteCachedNote)}function h(e){const t=p();if(e)return t.filter((t=>a["default"].get(t)?._guid===e));return t}function p(){return Array.from(a["default"].keys())}},7099:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var i=n(7433),o=n(1422),r=n(966),a=n(6246),s=n(8286),l=n(1446),d=n(4046),c=n.n(d),u=n(1460),f=n(9912),h=n(1811);const p=({data:e,initialValue:t,onToggle:n,onMenuItemClick:i,isOpen:o})=>{const[r,a]=(0,l.useState)(t),[s,d]=(0,l.useState)(""),p=(0,l.useRef)(null),m=(0,l.useRef)(null),g=(0,l.useRef)(null),{refs:y,floatingStyles:v,update:C}=(0,u.useFloating)({placement:"right-start",middleware:[(0,u.flip)({crossAxis:!1})]});(0,l.useEffect)((()=>{if(o){C();y.setReference(p.current.closest(".co_selectedTextMenuListItem, .co_highlightBoxListItem"));d("");m.current.focus()}}),[o,y,C]);const b=(0,l.useMemo)((()=>Object.entries(e).filter((([e])=>e.toLowerCase().includes(s)))),[s,e]),_=()=>{n(!1);p.current?.focus()};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("button",{ref:p,type:"button",className:"co_copyWithRefMenu_anchor",onClick:e=>{e.stopPropagation();n(!o)},children:f["default"].lookup("SC.Document.SelectedTextMenu.SelectedTextMenuCopyWithReferenceToggleOptions","Citation format options menu")}),(0,h.jsxs)("div",{ref:y.setFloating,style:v,onClick:e=>e.stopPropagation(),onKeyDown:e=>{if("Escape"===e.key){e.stopPropagation();_()}},onBlur:e=>{e.relatedTarget&&!e.currentTarget.contains(e.relatedTarget)&&_()},className:c()("CopyReference-typeahead",{co_hideState:!o}),children:[(0,h.jsxs)("div",{className:"CopyReference-typeahead-wrapper",children:[(0,h.jsx)("input",{ref:m,value:s,onChange:e=>d(e.target.value),type:"text",autoComplete:"off",role:"combobox","aria-autocomplete":"list","aria-expanded":b.length>0,"aria-controls":"optionlist","aria-activedescendant":r?`coid_copywithref_typeahead_${r}`:null,"aria-haspopup":"listbox",
"aria-label":f["default"].lookup("SC.Document.SelectedTextMenu.SelectedTextMenuCopyWithReferenceToggleOptionsSearchLabel","Search"),className:"CopyReference-typeahead-search"}),(0,h.jsx)("i",{className:"fa-solid fa-magnifying-glass CopyReference-typeahead-searchIcon"})]}),(0,h.jsx)("div",{ref:g,onKeyDown:e=>{const t=Array.from(g.current.querySelectorAll('input[type="radio"]')),n=t.findIndex((t=>t===e.target)),i=t.length-1,o=n+1,r=n-1;switch(e.key){case"ArrowDown":e.preventDefault();t[o%t.length].focus();break;case"ArrowUp":e.preventDefault();t[n?r:i].focus();break;case"Home":e.preventDefault();t[0].focus();break;case"End":e.preventDefault();t[i].focus()}},id:"optionlist",role:"radiogroup",tabIndex:-1,className:"CopyReference-typeahead-list",children:b.map((([e,t])=>(0,h.jsx)("div",{className:"CopyReference-typeahead-listitem",children:(0,h.jsxs)("label",{children:[(0,h.jsx)("input",{checked:e===r,onChange:t=>(async(e,t)=>{e.stopPropagation();e.preventDefault();await i(t);a(t);_()})(t,e),id:`coid_copywithref_typeahead_${e}`,type:"radio",name:"copywithref_options"}),t]})},e)))})]})]})};class m{getDefaultProps(){return{onMenuItemClick:this.onMenuItemClick.bind(this),onToggle:this.toggle.bind(this),data:a["default"].RulesSetNameToValueMappings.ByValue,isOpen:!1,initialValue:a["default"].userPreferences?.[s["default"].prefs.caRulesSet]??s["default"].prefs.caDefaultRuleSet}}#e(e,t){this.reactRoot=this.reactRoot??(0,i.createRoot)(e);const n=(0,h.jsx)(p,{...t});this.reactRoot.render(n)}toggleDisabled(e){this.menuItem.classList.toggle("co_disabled",e);this.menuItem.style.pointerEvents=e?"none":"auto"}onMenuItemClick(e){const t=a["default"].convertRulesSetValueToName(e);this.toggleDisabled(!0);r["default"].Set(s["default"].prefs.documentPreferenceSpace,s["default"].prefs.caRulesSet,e,(()=>{a["default"].userPreferences[s["default"].prefs.caRulesSet]=e;this.toggleDisabled(!1)}));o["default"].Publish(s["default"].events.ruleSetChanged,{RuleSetId:e,RuleSetName:t})}render(e,t,n){const i=e.querySelector(`#${s["default"].ids.copyWithReferenceMenu}`);if(!i)return!1;this.menuItem=e;this.props={...this.getDefaultProps(),...t};if(!n){this.reactRoot?.unmount();this.reactRoot=null}this.#e(i,this.props);return this.initialized=!0}toggle(e){this.initialized&&this.render(this.menuItem,{...this.props,isOpen:e},!0)}}m.displayName="Widget (Platform/js/Document/Widget/CopyWithReference/Widget.jsx)"},7195:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i={storeCurrentDocumentSnapshotInfo:function(e){e.documentSnapshot&&e.documentSnapshot.checkSum&&(i.currentDocSnapshotInfo=e.documentSnapshot)},populateCurrentDocumentSnapshotInfo:function(e){i.currentDocSnapshotInfo&&(e.documentSnapshot=i.currentDocSnapshotInfo)},currentDocSnapshotInfo:void 0};const o=i},7271:(e,t,n)=>{e.exports=n(4507)(74129)},7433:(e,t,n)=>{e.exports=n(4507)(51405)},7596:(e,t,n)=>{e.exports=n(4507)(5393)},7617:(e,t,n)=>{e.exports=n(4507)(41035)},7718:(e,t,n)=>{e.exports=n(4507)(25014)},7861:(e,t,n)=>{e.exports=n(4507)(56800)},7875:(e,t,n)=>{e.exports=n(4507)(2281)},7882:(e,t,n)=>{e.exports=n(4507)(74743)},7897:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(9191),o=n.n(i),r=n(8286),a=n(5682),s=n(2065),l=n(5549),d=n(2656);const c={DeleteNote:function(e,t,n){const i=d["default"].GetInstanceIdClass(e),c=o()(`<span class="${r["default"].classes.noteMarker}"></span>`).insertBefore(`#${i}`);l.A.RemoveHighlightingMarkup(i,n);c.attr("id",i);c.addClass(i);d["default"].SetElementHighzIndex(i);s["default"].AreSharedAnnotationsAllowed()&&a["default"].RemoveNoteHolder(t,i)}}},7955:(e,t,n)=>{e.exports=n(4507)(94004)},7964:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>o});var i=n(4383);const o=n(3788)["default"].extend({getDocumentGuidAndTypeFromUrl:function(e){var t=this._super(e),n=i["default"].ParseQueryString(e);n.entityId&&n.entityType&&(t.metadata={entityId:n.entityId,entityType:n.entityType});return t}})},8016:(e,t,n)=>{e.exports=n(4507)(3139)},8116:(e,t,n)=>{e.exports=n(4507)(93435)},8198:(e,t,n)=>{(function(e){(function(e,t){"use strict";var n={};function i(e,i,r){if("string"!=typeof e)throw"invalid module definition, module id must be defined and be a string";if(i===t)throw"invalid module definition, dependencies must be specified";if(r===t)throw"invalid module definition, definition function must be specified";(function(e,t){for(var i,r=[],a=0;a<e.length;++a){if(!(i=n[e[a]]||o(e[a])))throw"module definition dependecy not found: "+e[a];r.push(i)}t.apply(null,r)})(i,(function(){n[e]=r.apply(null,arguments)}))}function o(t){for(var n=e,i=t.split(/[.\/]/),o=0;o<i.length;++o){if(!n[i[o]])return;n=n[i[o]]}return n}i("tinymce/dom/EventUtils",[],(function(){var e=/^(?:mouse|contextmenu)|click/,t={keyLocation:1,layerX:1,layerY:1,returnValue:1};function n(e,t,n,i){e.addEventListener?e.addEventListener(t,n,i||!1):e.attachEvent&&e.attachEvent("on"+t,n)}function i(e,t,n,i){e.removeEventListener?e.removeEventListener(t,n,i||!1):e.detachEvent&&e.detachEvent("on"+t,n)}function o(n,i){var o,r,a=i||{};function s(){return!1}function l(){return!0}for(o in n)t[o]||(a[o]=n[o]);a.target||(a.target=a.srcElement||document);if(n&&e.test(n.type)&&n.pageX===r&&n.clientX!==r){var d=a.target.ownerDocument||document,c=d.documentElement,u=d.body;a.pageX=n.clientX+(c&&c.scrollLeft||u&&u.scrollLeft||0)-(c&&c.clientLeft||u&&u.clientLeft||0);a.pageY=n.clientY+(c&&c.scrollTop||u&&u.scrollTop||0)-(c&&c.clientTop||u&&u.clientTop||0)}a.preventDefault=function(){a.isDefaultPrevented=l;n&&(n.preventDefault?n.preventDefault():n.returnValue=!1)};a.stopPropagation=function(){a.isPropagationStopped=l;n&&(n.stopPropagation?n.stopPropagation():n.cancelBubble=!0)};a.stopImmediatePropagation=function(){a.isImmediatePropagationStopped=l;a.stopPropagation()};if(!a.isDefaultPrevented){a.isDefaultPrevented=s;a.isPropagationStopped=s;a.isImmediatePropagationStopped=s}return a}function r(e,t,o){var r=e.document,a={type:"ready"};if(o.domLoaded){t(a);return}function s(){if(!o.domLoaded){o.domLoaded=!0;t(a)}}if(r.addEventListener)"complete"===r.readyState?s():n(e,"DOMContentLoaded",s);else{n(r,"readystatechange",(function e(){if("complete"===r.readyState||"interactive"===r.readyState&&r.body){i(r,"readystatechange",e);s()}}));r.documentElement.doScroll&&e.self===e.top&&function e(){try{r.documentElement.doScroll("left")}catch(t){setTimeout(e,0);return}s()}()}n(e,"load",s)}function a(){var e,t,a,s,l,d=this,c={};t="mce-data-"+(+new Date).toString(32);s="onmouseenter"in document.documentElement;a="onfocusin"in document.documentElement;l={mouseenter:"mouseover",mouseleave:"mouseout"};e=1;d.domLoaded=!1;d.events=c;function u(e,t){var n,i,o,r,a=c[t];if(n=a&&a[e.type])for(i=0,o=n.length;i<o;i++){(r=n[i])&&!1===r.func.call(r.scope,e)&&e.preventDefault();if(e.isImmediatePropagationStopped())return}}d.bind=function(i,f,h,p){var m,g,y,v,C,b,_,S=window;function N(e){u(o(e||S.event),m)}if(!i||3===i.nodeType||8===i.nodeType)return;if(i[t])m=i[t];else{m=e++;i[t]=m;c[m]={}}p=p||i;y=(f=f.split(" ")).length;for(;y--;){b=N;C=_=!1;"DOMContentLoaded"===(v=f[y])&&(v="ready");if(d.domLoaded&&"ready"===v&&"complete"==i.readyState){h.call(p,o({type:v}));continue}s||(C=l[v])&&(b=function(e){var t,n;t=e.currentTarget;if((n=e.relatedTarget)&&t.contains)n=t.contains(n);else for(;n&&n!==t;)n=n.parentNode;if(!n){(e=o(e||S.event)).type="mouseout"===e.type?"mouseleave":"mouseenter";e.target=t;u(e,m)}});if(!a&&("focusin"===v||"focusout"===v)){_=!0;C="focusin"===v?"focus":"blur";b=function(e){(e=o(e||S.event)).type="focus"===e.type?"focusin":"focusout";u(e,m)}}if(g=c[m][v])"ready"===v&&d.domLoaded?h({type:v}):g.push({func:h,scope:p});else{c[m][v]=g=[{func:h,scope:p}];g.fakeName=C;g.capture=_;g.nativeHandler=b;"ready"===v?r(i,b,d):n(i,C||v,b,_)}}i=g=0;return h};d.unbind=function(e,n,o){var r,a,s,l,u,f;if(!e||3===e.nodeType||8===e.nodeType)return d;if(r=e[t]){f=c[r];if(n){s=(n=n.split(" ")).length;for(;s--;)if(a=f[u=n[s]]){if(o){l=a.length;for(;l--;)if(a[l].func===o){var h=a.nativeHandler,p=a.fakeName,m=a.capture;(a=a.slice(0,l).concat(a.slice(l+1))).nativeHandler=h;a.fakeName=p;a.capture=m;f[u]=a}}if(!o||0===a.length){delete f[u];i(e,a.fakeName||u,a.nativeHandler,a.capture)}}}else{
for(u in f)i(e,(a=f[u]).fakeName||u,a.nativeHandler,a.capture);f={}}for(u in f)return d;delete c[r];try{delete e[t]}catch(n){e[t]=null}}return d};d.fire=function(e,n,i){var r;if(!e||3===e.nodeType||8===e.nodeType)return d;(i=o(null,i)).type=n;i.target=e;do{(r=e[t])&&u(i,r);e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!i.isPropagationStopped());return d};d.clean=function(e){var n,i,o=d.unbind;if(!e||3===e.nodeType||8===e.nodeType)return d;e[t]&&o(e);e.getElementsByTagName||(e=e.document);if(e&&e.getElementsByTagName){o(e);n=(i=e.getElementsByTagName("*")).length;for(;n--;)(e=i[n])[t]&&o(e)}return d};d.destroy=function(){c={}};d.cancel=function(e){if(e){e.preventDefault();e.stopImmediatePropagation()}return!1}}a.Event=new a;a.Event.bind(window,"ready",(function(){}));return a}));i("tinymce/dom/Sizzle",[],(function(){var e,n,i,o,r,a,s,l,d,c,u,f,h,p,m,g,y,v,C,b="sizzle"+-new Date,_=window.document,S=0,N=0,E=oe(),A=oe(),w=oe(),x=function(e,t){e===t&&(u=!0);return 0},T=typeof t,I=1<<31,D={}.hasOwnProperty,k=[],M=k.pop,R=k.push,H=k.push,O=k.slice,L=k.indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]===e)return t;return-1},P="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",B="[\\x20\\t\\r\\n\\f]",F="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",G="\\["+B+"*("+F+")(?:"+B+"*([*^$|!~]?=)"+B+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+F+"))|)"+B+"*\\]",U=":("+F+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+G+")*)|.*)\\)|)",W=new RegExp("^"+B+"+|((?:^|[^\\\\])(?:\\\\.)*)"+B+"+$","g"),$=new RegExp("^"+B+"*,"+B+"*"),z=new RegExp("^"+B+"*([>+~]|"+B+")"+B+"*"),V=new RegExp("="+B+"*([^\\]'\"]*?)"+B+"*\\]","g"),q=new RegExp(U),j=new RegExp("^"+F+"$"),K={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),TAG:new RegExp("^("+F+"|[*])"),ATTR:new RegExp("^"+G),PSEUDO:new RegExp("^"+U),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+B+"*(even|odd|(([+-]|)(\\d*)n|)"+B+"*(?:([+-]|)"+B+"*(\\d+)|))"+B+"*\\)|)","i"),bool:new RegExp("^(?:"+P+")$","i"),needsContext:new RegExp("^"+B+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+B+"*((?:-\\d)?\\d*)"+B+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,X=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Z=/[+~]/,ee=/'|\\/g,te=new RegExp("\\\\([\\da-f]{1,6}"+B+"?|("+B+")|.)","ig"),ne=function(e,t,n){var i="0x"+t-65536;return i!=i||n?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)};try{H.apply(k=O.call(_.childNodes),_.childNodes);k[_.childNodes.length].nodeType}catch(e){H={apply:k.length?function(e,t){R.apply(e,O.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}function ie(e,t,i,o){var r,s,d,c,u,p,y,v,S,N;(t?t.ownerDocument||t:_)!==h&&f(t);i=i||[];if(!e||"string"!=typeof e)return i;if(1!==(c=(t=t||h).nodeType)&&9!==c)return[];if(m&&!o){if(r=Q.exec(e))if(d=r[1]){if(9===c){if(!(s=t.getElementById(d))||!s.parentNode)return i;if(s.id===d){i.push(s);return i}}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(d))&&C(t,s)&&s.id===d){i.push(s);return i}}else{if(r[2]){H.apply(i,t.getElementsByTagName(e));return i}if((d=r[3])&&n.getElementsByClassName){H.apply(i,t.getElementsByClassName(d));return i}}if(n.qsa&&(!g||!g.test(e))){v=y=b;S=t;N=9===c&&e;if(1===c&&"object"!==t.nodeName.toLowerCase()){p=a(e);(y=t.getAttribute("id"))?v=y.replace(ee,"\\$&"):t.setAttribute("id",v);v="[id='"+v+"'] ";u=p.length;for(;u--;)p[u]=v+pe(p[u]);S=Z.test(e)&&fe(t.parentNode)||t;N=p.join(",")}if(N)try{H.apply(i,S.querySelectorAll(N));return i}catch(e){}finally{y||t.removeAttribute("id")}}}return l(e.replace(W,"$1"),t,i,o)}function oe(){var e=[];return function t(n,o){e.push(n+" ")>i.cacheLength&&delete t[e.shift()];return t[n+" "]=o}}function re(e){e[b]=!0;return e}function ae(e){var t=h.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t);t=null}}function se(e,t){for(var n=e.split("|"),o=e.length;o--;)i.attrHandle[n[o]]=t}function le(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||I)-(~e.sourceIndex||I);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function de(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function ce(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function ue(e){return re((function(t){t=+t;return re((function(n,i){for(var o,r=e([],n.length,t),a=r.length;a--;)n[o=r[a]]&&(n[o]=!(i[o]=n[o]))}))}))}function fe(e){return e&&typeof e.getElementsByTagName!==T&&e}n=ie.support={};r=ie.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName};f=ie.setDocument=function(e){var t,o=e?e.ownerDocument||e:_,a=o.defaultView;if(o===h||9!==o.nodeType||!o.documentElement)return h;h=o;p=o.documentElement;m=!r(o);a&&a!==a.top&&(a.addEventListener?a.addEventListener("unload",(function(){f()}),!1):a.attachEvent&&a.attachEvent("onunload",(function(){f()})));n.attributes=ae((function(e){e.className="i";return!e.getAttribute("className")}));n.getElementsByTagName=ae((function(e){e.appendChild(o.createComment(""));return!e.getElementsByTagName("*").length}));n.getElementsByClassName=X.test(o.getElementsByClassName);n.getById=ae((function(e){p.appendChild(e).id=b;return!o.getElementsByName||!o.getElementsByName(b).length}));if(n.getById){i.find["ID"]=function(e,t){if(typeof t.getElementById!==T&&m){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}};i.filter["ID"]=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}}}else{delete i.find["ID"];i.filter["ID"]=function(e){var t=e.replace(te,ne);return function(e){var n=typeof e.getAttributeNode!==T&&e.getAttributeNode("id");return n&&n.value===t}}}i.find["TAG"]=n.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!==T)return t.getElementsByTagName(e)}:function(e,t){var n,i=[],o=0,r=t.getElementsByTagName(e);if("*"===e){for(;n=r[o++];)1===n.nodeType&&i.push(n);return i}return r};i.find["CLASS"]=n.getElementsByClassName&&function(e,t){if(m)return t.getElementsByClassName(e)};y=[];g=[];if(n.qsa=X.test(o.querySelectorAll)){ae((function(e){e.innerHTML="<select msallowcapture=''><option selected=''></option></select>";e.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]="+B+"*(?:''|\"\")");e.querySelectorAll("[selected]").length||g.push("\\["+B+"*(?:value|"+P+")");e.querySelectorAll(":checked").length||g.push(":checked")}));ae((function(e){var t=o.createElement("input");t.setAttribute("type","hidden");e.appendChild(t).setAttribute("name","D");e.querySelectorAll("[name=d]").length&&g.push("name"+B+"*[*^$|!~]?=");e.querySelectorAll(":enabled").length||g.push(":enabled",":disabled");e.querySelectorAll("*,:x");g.push(",.*:")}))}(n.matchesSelector=X.test(v=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&ae((function(e){n.disconnectedMatch=v.call(e,"div");v.call(e,"[s!='']:x");y.push("!=",U)}));g=g.length&&new RegExp(g.join("|"));y=y.length&&new RegExp(y.join("|"));t=X.test(p.compareDocumentPosition);C=t||X.test(p.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1};x=t?function(e,t){if(e===t){u=!0;return 0}var i=!e.compareDocumentPosition-!t.compareDocumentPosition;if(i)return i;if(1&(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===i){if(e===o||e.ownerDocument===_&&C(_,e))return-1;if(t===o||t.ownerDocument===_&&C(_,t))return 1;return c?L.call(c,e)-L.call(c,t):0}return 4&i?-1:1}:function(e,t){if(e===t){u=!0;return 0}var n,i=0,r=e.parentNode,a=t.parentNode,s=[e],l=[t];if(!r||!a)return e===o?-1:t===o?1:r?-1:a?1:c?L.call(c,e)-L.call(c,t):0;if(r===a)return le(e,t);n=e
;for(;n=n.parentNode;)s.unshift(n);n=t;for(;n=n.parentNode;)l.unshift(n);for(;s[i]===l[i];)i++;return i?le(s[i],l[i]):s[i]===_?-1:l[i]===_?1:0};return o};ie.matches=function(e,t){return ie(e,null,null,t)};ie.matchesSelector=function(e,t){(e.ownerDocument||e)!==h&&f(e);t=t.replace(V,"='$1']");if(n.matchesSelector&&m&&(!y||!y.test(t))&&(!g||!g.test(t)))try{var i=v.call(e,t);if(i||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){}return ie(t,h,null,[e]).length>0};ie.contains=function(e,t){(e.ownerDocument||e)!==h&&f(e);return C(e,t)};ie.attr=function(e,o){(e.ownerDocument||e)!==h&&f(e);var r=i.attrHandle[o.toLowerCase()],a=r&&D.call(i.attrHandle,o.toLowerCase())?r(e,o,!m):t;return a!==t?a:n.attributes||!m?e.getAttribute(o):(a=e.getAttributeNode(o))&&a.specified?a.value:null};ie.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};ie.uniqueSort=function(e){var t,i=[],o=0,r=0;u=!n.detectDuplicates;c=!n.sortStable&&e.slice(0);e.sort(x);if(u){for(;t=e[r++];)t===e[r]&&(o=i.push(r));for(;o--;)e.splice(i[o],1)}c=null;return e};o=ie.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=o(t);return n};i=ie.selectors={cacheLength:50,createPseudo:re,match:K,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){e[1]=e[1].replace(te,ne);e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne);"~="===e[2]&&(e[3]=" "+e[3]+" ");return e.slice(0,4)},CHILD:function(e){e[1]=e[1].toLowerCase();if("nth"===e[1].slice(0,3)){e[3]||ie.error(e[0]);e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3]));e[5]=+(e[7]+e[8]||"odd"===e[3])}else e[3]&&ie.error(e[0]);return e},PSEUDO:function(e){var t,n=!e[6]&&e[2];if(K["CHILD"].test(e[0]))return null;if(e[3])e[2]=e[4]||e[5]||"";else if(n&&q.test(n)&&(t=a(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)){e[0]=e[0].slice(0,t);e[2]=n.slice(0,t)}return e.slice(0,3)}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=E[e+" "];return t||(t=new RegExp("(^|"+B+")"+e+"("+B+"|$)"))&&E(e,(function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==T&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(i){var o=ie.attr(i,e);if(null==o)return"!="===t;if(!t)return!0;o+="";return"="===t?o===n:"!="===t?o!==n:"^="===t?n&&0===o.indexOf(n):"*="===t?n&&o.indexOf(n)>-1:"$="===t?n&&o.slice(-n.length)===n:"~="===t?(" "+o+" ").indexOf(n)>-1:"|="===t&&(o===n||o.slice(0,n.length+1)===n+"-")}},CHILD:function(e,t,n,i,o){var r="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===i&&0===o?function(e){return!!e.parentNode}:function(t,n,l){var d,c,u,f,h,p,m=r!==a?"nextSibling":"previousSibling",g=t.parentNode,y=s&&t.nodeName.toLowerCase(),v=!l&&!s;if(g){if(r){for(;m;){u=t;for(;u=u[m];)if(s?u.nodeName.toLowerCase()===y:1===u.nodeType)return!1;p=m="only"===e&&!p&&"nextSibling"}return!0}p=[a?g.firstChild:g.lastChild];if(a&&v){h=(d=(c=g[b]||(g[b]={}))[e]||[])[0]===S&&d[1];f=d[0]===S&&d[2];u=h&&g.childNodes[h];for(;u=++h&&u&&u[m]||(f=h=0)||p.pop();)if(1===u.nodeType&&++f&&u===t){c[e]=[S,h,f];break}}else if(v&&(d=(t[b]||(t[b]={}))[e])&&d[0]===S)f=d[1];else for(;u=++h&&u&&u[m]||(f=h=0)||p.pop();)if((s?u.nodeName.toLowerCase()===y:1===u.nodeType)&&++f){v&&((u[b]||(u[b]={}))[e]=[S,f]);if(u===t)break}return(f-=o)===i||f%i==0&&f/i>=0}}},PSEUDO:function(e,t){var n,o=i.pseudos[e]||i.setFilters[e.toLowerCase()]||ie.error("unsupported pseudo: "+e);if(o[b])return o(t);if(o.length>1){n=[e,e,"",t];return i.setFilters.hasOwnProperty(e.toLowerCase())?re((function(e,n){for(var i,r=o(e,t),a=r.length;a--;)e[i=L.call(e,r[a])]=!(n[i]=r[a])})):function(e){return o(e,0,n)}}return o}},pseudos:{not:re((function(e){var t=[],n=[],i=s(e.replace(W,"$1"));return i[b]?re((function(e,t,n,o){for(var r,a=i(e,null,o,[]),s=e.length;s--;)(r=a[s])&&(e[s]=!(t[s]=r))})):function(e,o,r){t[0]=e;i(t,null,r,n);return!n.pop()}})),has:re((function(e){return function(t){return ie(e,t).length>0}})),contains:re((function(e){e=e.replace(te,ne);return function(t){return(t.textContent||t.innerText||o(t)).indexOf(e)>-1}})),lang:re((function(e){j.test(e||"")||ie.error("unsupported lang: "+e);e=e.replace(te,ne).toLowerCase();return function(t){var n;do{if(n=m?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(e){var t=window.location&&window.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===p},focus:function(e){return e===h.activeElement&&(!h.hasFocus||h.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){e.parentNode&&e.parentNode.selectedIndex;return!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!i.pseudos["empty"](e)},header:function(e){return J.test(e.nodeName)},input:function(e){return Y.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ue((function(){return[0]})),last:ue((function(e,t){return[t-1]})),eq:ue((function(e,t,n){return[n<0?n+t:n]})),even:ue((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:ue((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:ue((function(e,t,n){for(var i=n<0?n+t:n;--i>=0;)e.push(i);return e})),gt:ue((function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e}))}};i.pseudos["nth"]=i.pseudos["eq"];for(e in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[e]=de(e);for(e in{submit:!0,reset:!0})i.pseudos[e]=ce(e);function he(){}he.prototype=i.filters=i.pseudos;i.setFilters=new he;a=ie.tokenize=function(e,t){var n,o,r,a,s,l,d,c=A[e+" "];if(c)return t?0:c.slice(0);s=e;l=[];d=i.preFilter;for(;s;){if(!n||(o=$.exec(s))){o&&(s=s.slice(o[0].length)||s);l.push(r=[])}n=!1;if(o=z.exec(s)){n=o.shift();r.push({value:n,type:o[0].replace(W," ")});s=s.slice(n.length)}for(a in i.filter)if((o=K[a].exec(s))&&(!d[a]||(o=d[a](o)))){n=o.shift();r.push({value:n,type:a,matches:o});s=s.slice(n.length)}if(!n)break}return t?s.length:s?ie.error(e):A(e,l).slice(0)};function pe(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function me(e,t,n){var i=t.dir,o=n&&"parentNode"===i,r=N++;return t.first?function(t,n,r){for(;t=t[i];)if(1===t.nodeType||o)return e(t,n,r)}:function(t,n,a){var s,l,d=[S,r];if(a){for(;t=t[i];)if((1===t.nodeType||o)&&e(t,n,a))return!0}else for(;t=t[i];)if(1===t.nodeType||o){if((s=(l=t[b]||(t[b]={}))[i])&&s[0]===S&&s[1]===r)return d[2]=s[2];l[i]=d;if(d[2]=e(t,n,a))return!0}}}function ge(e){return e.length>1?function(t,n,i){for(var o=e.length;o--;)if(!e[o](t,n,i))return!1;return!0}:e[0]}function ye(e,t,n,i,o){for(var r,a=[],s=0,l=e.length,d=null!=t;s<l;s++)if((r=e[s])&&(!n||n(r,i,o))){a.push(r);d&&t.push(s)}return a}function ve(e,t,n,i,o,r){i&&!i[b]&&(i=ve(i));o&&!o[b]&&(o=ve(o,r));return re((function(r,a,s,l){var d,c,u,f=[],h=[],p=a.length,m=r||function(e,t,n){for(var i=0,o=t.length;i<o;i++)ie(e,t[i],n);return n}(t||"*",s.nodeType?[s]:s,[]),g=!e||!r&&t?m:ye(m,f,e,s,l),y=n?o||(r?e:p||i)?[]:a:g;n&&n(g,y,s,l);if(i){d=ye(y,h);i(d,[],s,l);c=d.length;for(;c--;)(u=d[c])&&(y[h[c]]=!(g[h[c]]=u))}if(r){if(o||e){if(o){d=[];c=y.length;for(;c--;)(u=y[c])&&d.push(g[c]=u);o(null,y=[],d,l)}c=y.length;for(;c--;)(u=y[c])&&(d=o?L.call(r,u):f[c])>-1&&(r[d]=!(a[d]=u))}}else{y=ye(y===a?y.splice(p,y.length):y);o?o(null,a,y,l):H.apply(a,y)}}))}function Ce(e){
for(var t,n,o,r=e.length,a=i.relative[e[0].type],s=a||i.relative[" "],l=a?1:0,c=me((function(e){return e===t}),s,!0),u=me((function(e){return L.call(t,e)>-1}),s,!0),f=[function(e,n,i){return!a&&(i||n!==d)||((t=n).nodeType?c(e,n,i):u(e,n,i))}];l<r;l++)if(n=i.relative[e[l].type])f=[me(ge(f),n)];else{if((n=i.filter[e[l].type].apply(null,e[l].matches))[b]){o=++l;for(;o<r&&!i.relative[e[o].type];o++);return ve(l>1&&ge(f),l>1&&pe(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(W,"$1"),n,l<o&&Ce(e.slice(l,o)),o<r&&Ce(e=e.slice(o)),o<r&&pe(e))}f.push(n)}return ge(f)}s=ie.compile=function(e,t){var n,o=[],r=[],s=w[e+" "];if(!s){t||(t=a(e));n=t.length;for(;n--;)(s=Ce(t[n]))[b]?o.push(s):r.push(s);s=w(e,function(e,t){var n=t.length>0,o=e.length>0,r=function(r,a,s,l,c){var u,f,p,m=0,g="0",y=r&&[],v=[],C=d,b=r||o&&i.find["TAG"]("*",c),_=S+=null==C?1:Math.random()||.1,N=b.length;c&&(d=a!==h&&a);for(;g!==N&&null!=(u=b[g]);g++){if(o&&u){f=0;for(;p=e[f++];)if(p(u,a,s)){l.push(u);break}c&&(S=_)}if(n){(u=!p&&u)&&m--;r&&y.push(u)}}m+=g;if(n&&g!==m){f=0;for(;p=t[f++];)p(y,v,a,s);if(r){if(m>0)for(;g--;)y[g]||v[g]||(v[g]=M.call(l));v=ye(v)}H.apply(l,v);c&&!r&&v.length>0&&m+t.length>1&&ie.uniqueSort(l)}if(c){S=_;d=C}return y};return n?re(r):r}(r,o));s.selector=e}return s};l=ie.select=function(e,t,o,r){var l,d,c,u,f,h="function"==typeof e&&e,p=!r&&a(e=h.selector||e);o=o||[];if(1===p.length){if((d=p[0]=p[0].slice(0)).length>2&&"ID"===(c=d[0]).type&&n.getById&&9===t.nodeType&&m&&i.relative[d[1].type]){if(!(t=(i.find["ID"](c.matches[0].replace(te,ne),t)||[])[0]))return o;h&&(t=t.parentNode);e=e.slice(d.shift().value.length)}l=K["needsContext"].test(e)?0:d.length;for(;l--;){c=d[l];if(i.relative[u=c.type])break;if((f=i.find[u])&&(r=f(c.matches[0].replace(te,ne),Z.test(d[0].type)&&fe(t.parentNode)||t))){d.splice(l,1);if(!(e=r.length&&pe(d))){H.apply(o,r);return o}break}}}(h||s(e,p))(r,t,!m,o,Z.test(e)&&fe(t.parentNode)||t);return o};n.sortStable=b.split("").sort(x).join("")===b;n.detectDuplicates=!!u;f();n.sortDetached=ae((function(e){return 1&e.compareDocumentPosition(h.createElement("div"))}));ae((function(e){e.innerHTML="<a href='#'></a>";return"#"===e.firstChild.getAttribute("href")}))||se("type|href|height|width",(function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}));n.attributes&&ae((function(e){e.innerHTML="<input/>";e.firstChild.setAttribute("value","");return""===e.firstChild.getAttribute("value")}))||se("value",(function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}));ae((function(e){return null==e.getAttribute("disabled")}))||se(P,(function(e,t,n){var i;if(!n)return!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}));return ie}));i("tinymce/Env",[],(function(){var e,t,n,i,o,r,a,s,l=navigator,d=l.userAgent;e=window.opera&&window.opera.buildNumber;s=/Android/.test(d);n=(n=!(t=/WebKit/.test(d))&&!e&&/MSIE/gi.test(d)&&/Explorer/gi.test(l.appName))&&/MSIE (\w+)\./.exec(d)[1];i=-1!=d.indexOf("Trident/")&&(-1!=d.indexOf("rv:")||-1!=l.appName.indexOf("Netscape"))&&11;return{opera:e,webkit:t,ie:n=n||i,gecko:o=!t&&!i&&/Gecko/.test(d),mac:r=-1!=d.indexOf("Mac"),iOS:a=/(iPad|iPhone)/.test(d),android:s,contentEditable:!a||d.match(/AppleWebKit\/(\d*)/)[1]>=534,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:8!=n,range:window.getSelection&&"Range"in window,documentMode:n?document.documentMode||7:10}}));i("tinymce/util/Tools",["tinymce/Env"],(function(e){var n=/^\s*|\s*$/g;function i(e){return null===e||e===t?"":(""+e).replace(n,"")}var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function r(e,n){if(!n)return e!==t;if("array"==n&&o(e))return!0;return typeof e==n}function a(e,n,i){var o,r;if(!e)return 0;i=i||e;if(e.length!==t){for(o=0,r=e.length;o<r;o++)if(!1===n.call(i,e[o],o,e))return 0}else for(o in e)if(e.hasOwnProperty(o)&&!1===n.call(i,e[o],o,e))return 0;return 1}function s(e,t){var n=[];a(e,(function(e){n.push(t(e))}));return n}return{trim:i,isArray:o,is:r,toArray:function(e){var t,n,i=e;if(!o(e)){i=[];for(t=0,n=e.length;t<n;t++)i[t]=e[t]}return i},makeMap:function(e,t,n){var i;t=t||",";"string"==typeof(e=e||[])&&(e=e.split(t));n=n||{};i=e.length;for(;i--;)n[e[i]]={};return n},each:a,map:s,grep:function(e,t){var n=[];a(e,(function(e){t&&!t(e)||n.push(e)}));return n},inArray:function(e,t){var n,i;if(e)for(n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},extend:function(e,n){var i,o,r,a,s=arguments;for(i=1,o=s.length;i<o;i++){n=s[i];for(r in n)n.hasOwnProperty(r)&&(a=n[r])!==t&&(e[r]=a)}return e},create:function(e,t,n){var i,o,r,a,s,l=this,d=0;e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e);r=e[3].match(/(^|\.)(\w+)$/i)[2];if((o=l.createNS(e[3].replace(/\.\w+$/,""),n))[r])return;if("static"==e[2]){o[r]=t;this.onCreate&&this.onCreate(e[2],e[3],o[r]);return}if(!t[r]){t[r]=function(){};d=1}o[r]=t[r];l.extend(o[r].prototype,t);if(e[5]){i=l.resolve(e[5]).prototype;a=e[5].match(/\.(\w+)$/i)[1];s=o[r];o[r]=d?function(){return i[a].apply(this,arguments)}:function(){this.parent=i[a];return s.apply(this,arguments)};o[r].prototype[r]=o[r];l.each(i,(function(e,t){o[r].prototype[t]=i[t]}));l.each(t,(function(e,t){i[t]?o[r].prototype[t]=function(){this.parent=i[t];return e.apply(this,arguments)}:t!=r&&(o[r].prototype[t]=e)}))}l.each(t["static"],(function(e,t){o[r][t]=e}))},walk:function e(t,n,i,o){o=o||this;if(t){i&&(t=t[i]);a(t,(function(t,r){if(!1===n.call(o,t,r,i))return!1;e(t,n,i,o)}))}},createNS:function(e,t){var n,i;t=t||window;e=e.split(".");for(n=0;n<e.length;n++){t[i=e[n]]||(t[i]={});t=t[i]}return t},resolve:function(e,t){var n,i;t=t||window;for(n=0,i=(e=e.split(".")).length;n<i&&(t=t[e[n]]);n++);return t},explode:function(e,t){if(!e||r(e,"array"))return e;return s(e.split(t||","),i)},_addCacheSuffix:function(t){var n=e.cacheSuffix;n&&(t+=(-1===t.indexOf("?")?"?":"&")+n);return t}}}));i("tinymce/dom/DomQuery",["tinymce/dom/EventUtils","tinymce/dom/Sizzle","tinymce/util/Tools","tinymce/Env"],(function(e,n,i,o){var r,a=document,s=Array.prototype.push,l=Array.prototype.slice,d=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,c=e.Event;function u(e){return void 0!==e}function f(e){return"string"==typeof e}function h(e,t){var n,i,o;o=(t=t||a).createElement("div");n=t.createDocumentFragment();o.innerHTML=e;for(;i=o.firstChild;)n.appendChild(i);return n}function p(e,t,n,i){var o;if(f(t))t=h(t,T(e[0]));else if(t.length&&!t.nodeType){t=N.makeArray(t);if(i)for(o=t.length-1;o>=0;o--)p(e,t[o],n,i);else for(o=0;o<t.length;o++)p(e,t[o],n,i);return e}if(t.nodeType){o=e.length;for(;o--;)n.call(e[o],t)}return e}function m(e,t){return e&&t&&-1!==(" "+e.className+" ").indexOf(" "+t+" ")}function g(e,t,n){var i,o;t=N(t)[0];e.each((function(){var e=this;if(n&&i==e.parentNode)o.appendChild(e);else{i=e.parentNode;o=t.cloneNode(!1);e.parentNode.insertBefore(o,e);o.appendChild(e)}}));return e}var y=i.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),v=i.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),C={for:"htmlFor",class:"className",readonly:"readOnly"},b={float:"cssFloat"},_={},S={};function N(e,t){return new N.fn.init(e,t)}var E=/^\s*|\s*$/g;function A(e){return null===e||e===r?"":(""+e).replace(E,"")}function w(e,t){var n,i,o,r;if(e)if(undefined===(n=e.length)){for(i in e)if(e.hasOwnProperty(i)){r=e[i];if(!1===t.call(r,i,r))break}}else for(o=0;o<n;o++){r=e[o];if(!1===t.call(r,o,r))break}return e}function x(e,t){var n=[];w(e,(function(e,i){t(i,e)&&n.push(i)}));return n}function T(e){if(!e)return a;if(9==e.nodeType)return e;return e.ownerDocument}N.fn=N.prototype={constructor:N,selector:"",context:null,length:0,init:function(e,t){var n,i,o=this;if(!e)return o;if(e.nodeType){o.context=o[0]=e;o.length=1;return o}if(t&&t.nodeType)o.context=t;else{if(t)return N(e).attr(t);o.context=t=document}if(f(e)){o.selector=e;if(!(n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:d.exec(e)))return N(t).find(e);if(n[1]){i=h(e,T(t)).firstChild;for(;i;){s.call(o,i);i=i.nextSibling}}else{
if(!(i=T(t).getElementById(n[2])))return o;if(i.id!==n[2])return o.find(e);o.length=1;o[0]=i}}else this.add(e,!1);return o},toArray:function(){return i.toArray(this)},add:function(e,t){var n,i,o=this;if(f(e))return o.add(N(e));if(!1!==t){n=N.unique(o.toArray().concat(N.makeArray(e)));o.length=n.length;for(i=0;i<n.length;i++)o[i]=n[i]}else s.apply(o,N.makeArray(e));return o},attr:function(e,t){var n,i=this;if("object"==typeof e)w(e,(function(e,t){i.attr(e,t)}));else{if(!u(t)){if(i[0]&&1===i[0].nodeType){if((n=_[e])&&n.get)return n.get(i[0],e);if(v[e])return i.prop(e)?e:r;null===(t=i[0].getAttribute(e,2))&&(t=r)}return t}this.each((function(){var n;if(1===this.nodeType){if((n=_[e])&&n.set){n.set(this,t);return}null===t?this.removeAttribute(e,2):this.setAttribute(e,t,2)}}))}return i},removeAttr:function(e){return this.attr(e,null)},prop:function(e,t){var n=this;if("object"==typeof(e=C[e]||e))w(e,(function(e,t){n.prop(e,t)}));else{if(!u(t)){if(n[0]&&n[0].nodeType&&e in n[0])return n[0][e];return t}this.each((function(){1==this.nodeType&&(this[e]=t)}))}return n},css:function(e,t){var n,i,o=this;function a(e){return e.replace(/-(\D)/g,(function(e,t){return t.toUpperCase()}))}function s(e){return e.replace(/[A-Z]/g,(function(e){return"-"+e}))}if("object"==typeof e)w(e,(function(e,t){o.css(e,t)}));else if(u(t)){e=a(e);"number"!=typeof t||y[e]||(t+="px");o.each((function(){var n=this.style;if((i=S[e])&&i.set){i.set(this,t);return}try{this.style[b[e]||e]=t}catch(e){}null!==t&&""!==t||(n.removeProperty?n.removeProperty(s(e)):n.removeAttribute(e))}))}else{n=o[0];if((i=S[e])&&i.get)return i.get(n);if(n.ownerDocument.defaultView)try{return n.ownerDocument.defaultView.getComputedStyle(n,null).getPropertyValue(s(e))}catch(e){return r}else if(n.currentStyle)return n.currentStyle[a(e)]}return o},remove:function(){for(var e,t=this.length;t--;){e=this[t];c.clean(e);e.parentNode&&e.parentNode.removeChild(e)}return this},empty:function(){for(var e,t=this.length;t--;){e=this[t];for(;e.firstChild;)e.removeChild(e.firstChild)}return this},html:function(e){var t,n=this;if(u(e)){t=n.length;try{for(;t--;)n[t].innerHTML=e}catch(i){N(n[t]).empty().append(e)}return n}return n[0]?n[0].innerHTML:""},text:function(e){var t,n=this;if(u(e)){t=n.length;for(;t--;)"innerText"in n[t]?n[t].innerText=e:n[0].textContent=e;return n}return n[0]?n[0].innerText||n[0].textContent:""},append:function(){return p(this,arguments,(function(e){1===this.nodeType&&this.appendChild(e)}))},prepend:function(){return p(this,arguments,(function(e){1===this.nodeType&&this.insertBefore(e,this.firstChild)}),!0)},before:function(){var e=this;if(e[0]&&e[0].parentNode)return p(e,arguments,(function(e){this.parentNode.insertBefore(e,this)}));return e},after:function(){var e=this;if(e[0]&&e[0].parentNode)return p(e,arguments,(function(e){this.parentNode.insertBefore(e,this.nextSibling)}),!0);return e},appendTo:function(e){N(e).append(this);return this},prependTo:function(e){N(e).prepend(this);return this},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){return g(this,e)},wrapAll:function(e){return g(this,e,!0)},wrapInner:function(e){this.each((function(){N(this).contents().wrapAll(e)}));return this},unwrap:function(){return this.parent().each((function(){N(this).replaceWith(this.childNodes)}))},clone:function(){var e=[];this.each((function(){e.push(this.cloneNode(!0))}));return N(e)},addClass:function(e){return this.toggleClass(e,!0)},removeClass:function(e){return this.toggleClass(e,!1)},toggleClass:function(e,t){var n=this;if("string"!=typeof e)return n;-1!==e.indexOf(" ")?w(e.split(" "),(function(){n.toggleClass(this,t)})):n.each((function(n,i){var o,r;if((r=m(i,e))!==t){o=i.className;r?i.className=A((" "+o+" ").replace(" "+e+" "," ")):i.className+=o?" "+e:e}}));return n},hasClass:function(e){return m(this[0],e)},each:function(e){return w(this,e)},on:function(e,t){return this.each((function(){c.bind(this,e,t)}))},off:function(e,t){return this.each((function(){c.unbind(this,e,t)}))},trigger:function(e){return this.each((function(){"object"==typeof e?c.fire(this,e.type,e):c.fire(this,e)}))},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new N(l.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(e){var t,n,i=[];for(t=0,n=this.length;t<n;t++)N.find(e,this[t],i);return N(i)},filter:function(e){if("function"==typeof e)return N(x(this.toArray(),(function(t,n){return e(n,t)})));return N(N.filter(e,this.toArray()))},closest:function(e){var t=[];e instanceof N&&(e=e[0]);this.each((function(n,i){for(;i;){if("string"==typeof e&&N(i).is(e)){t.push(i);break}if(i==e){t.push(i);break}i=i.parentNode}}));return N(t)},offset:function(e){var t,n,i,o,r=0,a=0;if(!e){if(t=this[0]){i=(n=t.ownerDocument).documentElement;if(t.getBoundingClientRect){r=(o=t.getBoundingClientRect()).left+(i.scrollLeft||n.body.scrollLeft)-i.clientLeft;a=o.top+(i.scrollTop||n.body.scrollTop)-i.clientTop}}return{left:r,top:a}}return this.css(e)},push:s,sort:[].sort,splice:[].splice};i.extend(N,{extend:i.extend,makeArray:function(e){if((t=e)&&t==t.window||e.nodeType)return[e];var t;return i.toArray(e)},inArray:function(e,t){var n;if(t.indexOf)return t.indexOf(e);n=t.length;for(;n--;)if(t[n]===e)return n;return-1},isArray:i.isArray,each:w,trim:A,grep:x,find:n,expr:n.selectors,unique:n.uniqueSort,text:n.getText,contains:n.contains,filter:function(e,t,n){var i=t.length;n&&(e=":not("+e+")");for(;i--;)1!=t[i].nodeType&&t.splice(i,1);return t=1===t.length?N.find.matchesSelector(t[0],e)?[t[0]]:[]:N.find.matches(e,t)}});function I(e,n,i){var o=[],r=e[n];"string"!=typeof i&&i instanceof N&&(i=i[0]);for(;r&&9!==r.nodeType;){if(i!==t){if(r===i)break;if("string"==typeof i&&N(r).is(i))break}1===r.nodeType&&o.push(r);r=r[n]}return o}function D(e,n,i,o){var r=[];o instanceof N&&(o=o[0]);for(;e;e=e[n]){if(i&&e.nodeType!==i)continue;if(o!==t){if(e===o)break;if("string"==typeof o&&N(e).is(o))break}r.push(e)}return r}function k(e,t,n){for(e=e[t];e;e=e[t])if(e.nodeType==n)return e;return null}w({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return I(e,"parentNode")},next:function(e){return k(e,"nextSibling",1)},prev:function(e){return k(e,"previousSibling",1)},children:function(e){return D(e.firstChild,"nextSibling",1)},contents:function(e){return i.toArray(("iframe"===e.nodeName?e.contentDocument||e.contentWindow.document:e).childNodes)}},(function(e,t){N.fn[e]=function(n){var i=[];this.each((function(){var e=t.call(i,this,n,i);e&&(N.isArray(e)?i.push.apply(i,e):i.push(e))}));if(this.length>1){i=N.unique(i);0===e.indexOf("parents")&&(i=i.reverse())}i=N(i);if(n)return i.filter(n);return i}}));w({parentsUntil:function(e,t){return I(e,"parentNode",t)},nextUntil:function(e,t){return D(e,"nextSibling",1,t).slice(1)},prevUntil:function(e,t){return D(e,"previousSibling",1,t).slice(1)}},(function(e,t){N.fn[e]=function(n,i){var o=[];this.each((function(){var e=t.call(o,this,n,o);e&&(N.isArray(e)?o.push.apply(o,e):o.push(e))}));if(this.length>1){o=N.unique(o);0!==e.indexOf("parents")&&"prevUntil"!==e||(o=o.reverse())}o=N(o);if(i)return o.filter(i);return o}}));N.fn.is=function(e){return!!e&&this.filter(e).length>0};N.fn.init.prototype=N.fn;N.overrideDefaults=function(e){var t;function n(i,o){t=t||e();0===arguments.length&&(i=t.element);o||(o=t.context);return new n.fn.init(i,o)}N.extend(n,this);return n};function M(e,t,n){w(n,(function(n,i){e[n]=e[n]||{};e[n][t]=i}))}if(o.ie&&o.ie<8){M(_,"get",{maxlength:function(e){var t=e.maxLength;if(2147483647===t)return r;return t},size:function(e){var t=e.size;if(20===t)return r;return t},class:function(e){return e.className},style:function(e){var t=e.style.cssText;if(0===t.length)return r;return t}});M(_,"set",{class:function(e,t){e.className=t},style:function(e,t){e.style.cssText=t}})}if(o.ie&&o.ie<9){b["float"]="styleFloat";M(S,"set",{opacity:function(e,t){var n=e.style;if(null===t||""===t)n.removeAttribute("filter");else{n.zoom=1;n.filter="alpha(opacity="+100*t+")"}}})}
N.attrHooks=_;N.cssHooks=S;return N}));i("tinymce/html/Styles",[],(function(){return function(e,t){var n,i,o,r,a,s=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,l=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,d=/\s*([^:]+):\s*([^;]+);?/g,c=/\s+$/,u={};e=e||{};if(t){r=t.getValidStyles();a=t.getInvalidStyles()}o="\\\" \\' \\; \\: ; : \ufeff".split(" ");for(i=0;i<o.length;i++){u[o[i]]="\ufeff"+i;u["\ufeff"+i]=o[i]}function f(e,t,n,i){function o(e){return(e=parseInt(e,10).toString(16)).length>1?e:"0"+e}return"#"+o(t)+o(n)+o(i)}return{toHex:function(e){return e.replace(s,f)},parse:function(t){var n,o,r,a,h={},p=e.url_converter,m=e.url_converter_scope||this;function g(e,t,n){var o,r,a,s;if(!(o=h[e+"-top"+t]))return;if(!(r=h[e+"-right"+t]))return;if(!(a=h[e+"-bottom"+t]))return;if(!(s=h[e+"-left"+t]))return;var l=[o,r,a,s];i=l.length-1;for(;i--&&l[i]===l[i+1];);if(i>-1&&n)return;h[e+t]=-1==i?l[0]:l.join(" ");delete h[e+"-top"+t];delete h[e+"-right"+t];delete h[e+"-bottom"+t];delete h[e+"-left"+t]}function y(e){var t,n=h[e];if(!n)return;t=(n=n.split(" ")).length;for(;t--;)if(n[t]!==n[0])return!1;h[e]=n[0];return!0}function v(e){a=!0;return u[e]}function C(e,t){a&&(e=e.replace(/\uFEFF[0-9]/g,(function(e){return u[e]})));t||(e=e.replace(/\\([\'\";:])/g,"$1"));return e}function b(t,n,i,o,r,a){if(r=r||a)return"'"+(r=C(r)).replace(/\'/g,"\\'")+"'";n=C(n||i||o);if(!e.allow_script_urls){var s=n.replace(/[\s\r\n]+/,"");if(/(java|vb)script:/i.test(s))return"";if(!e.allow_svg_data_urls&&/^data:image\/svg/i.test(s))return""}p&&(n=p.call(m,n,"style"));return"url('"+n.replace(/\'/g,"\\'")+"')"}if(t){t=(t=t.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,v).replace(/\"[^\"]+\"|\'[^\']+\'/g,(function(e){return e.replace(/[;:]/g,v)}));for(;n=d.exec(t);){o=n[1].replace(c,"").toLowerCase();r=(r=n[2].replace(c,"")).replace(/\\[0-9a-f]+/g,(function(e){return String.fromCharCode(parseInt(e.substr(1),16))}));if(o&&r.length>0){if(!e.allow_script_urls&&("behavior"==o||/expression\s*\(|\/\*|\*\//.test(r)))continue;"font-weight"===o&&"700"===r?r="bold":"color"!==o&&"background-color"!==o||(r=r.toLowerCase());r=(r=r.replace(s,f)).replace(l,b);h[o]=a?C(r,!0):r}d.lastIndex=n.index+n[0].length}g("border","",!0);g("border","-width");g("border","-color");g("border","-style");g("padding","");g("margin","");(function(e,t,n,i){if(!y(t))return;if(!y(n))return;if(!y(i))return;h[e]=h[t]+" "+h[n]+" "+h[i];delete h[t];delete h[n];delete h[i]})("border","border-width","border-style","border-color");"medium none"===h.border&&delete h.border;"none"===h["border-image"]&&delete h["border-image"]}return h},serialize:function(e,t){var i,o,s="";function l(t){var i,o,a,l;if(i=r[t])for(o=0,a=i.length;o<a;o++){t=i[o];(l=e[t])!==n&&l.length>0&&(s+=(s.length>0?" ":"")+t+": "+l+";")}}function d(e,t){var n;if((n=a["*"])&&n[e])return!1;if((n=a[t])&&n[e])return!1;return!0}if(t&&r){l("*");l(t)}else for(i in e)(o=e[i])!==n&&o.length>0&&(a&&!d(i,t)||(s+=(s.length>0?" ":"")+i+": "+o+";"));return s}}}}));i("tinymce/dom/TreeWalker",[],(function(){return function(e,t){var n=e;function i(e,n,i,o){var r,a;if(e){if(!o&&e[n])return e[n];if(e!=t){if(r=e[i])return r;for(a=e.parentNode;a&&a!=t;a=a.parentNode)if(r=a[i])return r}}}this.current=function(){return n};this.next=function(e){return n=i(n,"firstChild","nextSibling",e)};this.prev=function(e){return n=i(n,"lastChild","previousSibling",e)}}}));i("tinymce/dom/Range",["tinymce/util/Tools"],(function(e){function t(n){var i=this,o=n.doc,r=!0,a=!1,s="startOffset",l="startContainer",d="endContainer",c="endOffset",u=e.extend,f=n.nodeIndex;function h(){return o.createDocumentFragment()}function p(e,t){_(r,e,t)}function m(e,t){_(a,e,t)}function g(e){p(e.parentNode,f(e))}function y(e){m(e.parentNode,f(e)+1)}function v(){return S(1)}function C(e,t){var n;if(3==e.nodeType)return e;if(t<0)return e;n=e.firstChild;for(;n&&t>0;){--t;n=n.nextSibling}if(n)return n;return e}function b(e,t,i,o){var r,a,s,l,d,c;if(e==i){if(t==o)return 0;if(t<o)return-1;return 1}r=i;for(;r&&r.parentNode!=e;)r=r.parentNode;if(r){a=0;s=e.firstChild;for(;s!=r&&a<t;){a++;s=s.nextSibling}if(t<=a)return-1;return 1}r=e;for(;r&&r.parentNode!=i;)r=r.parentNode;if(r){a=0;s=i.firstChild;for(;s!=r&&a<o;){a++;s=s.nextSibling}if(a<o)return-1;return 1}l=n.findCommonAncestor(e,i);d=e;for(;d&&d.parentNode!=l;)d=d.parentNode;d||(d=l);c=i;for(;c&&c.parentNode!=l;)c=c.parentNode;c||(c=l);if(d==c)return 0;s=l.firstChild;for(;s;){if(s==d)return-1;if(s==c)return 1;s=s.nextSibling}}function _(e,t,o){var r,a;if(e){i[l]=t;i[s]=o}else{i[d]=t;i[c]=o}r=i[d];for(;r.parentNode;)r=r.parentNode;a=i[l];for(;a.parentNode;)a=a.parentNode;a==r?b(i[l],i[s],i[d],i[c])>0&&i.collapse(e):i.collapse(e);i.collapsed=i[l]==i[d]&&i[s]==i[c];i.commonAncestorContainer=n.findCommonAncestor(i[l],i[d])}function S(e){var t,n,a,u,p,m,g,y=0,v=0;if(i[l]==i[d])return function(e){var t,n,a,d,u,f,p,m,g;2!=e&&(t=h());if(i[s]==i[c])return t;if(3==i[l].nodeType){a=(n=i[l].nodeValue).substring(i[s],i[c]);if(1!=e){d=i[l];m=i[s];g=i[c]-i[s];0===m&&g>=d.nodeValue.length-1?d.parentNode.removeChild(d):d.deleteData(m,g);i.collapse(r)}if(2==e)return;a.length>0&&t.appendChild(o.createTextNode(a));return t}d=C(i[l],i[s]);u=i[c]-i[s];for(;d&&u>0;){f=d.nextSibling;p=T(d,e);t&&t.appendChild(p);--u;d=f}1!=e&&i.collapse(r);return t}(e);for(n=(t=i[d]).parentNode;n;t=n,n=n.parentNode){if(n==i[l])return N(t,e);++y}for(n=(t=i[l]).parentNode;n;t=n,n=n.parentNode){if(n==i[d])return E(t,e);++v}a=v-y;u=i[l];for(;a>0;){u=u.parentNode;a--}p=i[d];for(;a<0;){p=p.parentNode;a++}for(m=u.parentNode,g=p.parentNode;m!=g;m=m.parentNode,g=g.parentNode){u=m;p=g}return function(e,t,n){var o,a,s,l,d,c,u;2!=n&&(a=h());o=w(e,n);a&&a.appendChild(o);s=f(e);l=f(t);++s;d=l-s;c=e.nextSibling;for(;d>0;){u=c.nextSibling;o=T(c,n);a&&a.appendChild(o);c=u;--d}o=A(t,n);a&&a.appendChild(o);if(1!=n){i.setStartAfter(e);i.collapse(r)}return a}(u,p,e)}function N(e,t){var n,o,r,l,d,c;2!=t&&(n=h());o=A(e,t);n&&n.appendChild(o);if((l=(r=f(e))-i[s])<=0){if(1!=t){i.setEndBefore(e);i.collapse(a)}return n}o=e.previousSibling;for(;l>0;){d=o.previousSibling;c=T(o,t);n&&n.insertBefore(c,n.firstChild);--l;o=d}if(1!=t){i.setEndBefore(e);i.collapse(a)}return n}function E(e,t){var n,o,a,s,l,d;2!=t&&(n=h());a=w(e,t);n&&n.appendChild(a);o=f(e);++o;s=i[c]-o;a=e.nextSibling;for(;a&&s>0;){l=a.nextSibling;d=T(a,t);n&&n.appendChild(d);--s;a=l}if(1!=t){i.setStartAfter(e);i.collapse(r)}return n}function A(e,t){var n,o,s,l,u,f=C(i[d],i[c]-1),h=f!=i[d];if(f==e)return x(f,h,a,t);o=x(n=f.parentNode,a,a,t);for(;n;){for(;f;){s=f.previousSibling;l=x(f,h,a,t);2!=t&&o.insertBefore(l,o.firstChild);h=r;f=s}if(n==e)return o;f=n.previousSibling;u=x(n=n.parentNode,a,a,t);2!=t&&u.appendChild(o);o=u}}function w(e,t){var n,o,d,c,u,f=C(i[l],i[s]),h=f!=i[l];if(f==e)return x(f,h,r,t);o=x(n=f.parentNode,a,r,t);for(;n;){for(;f;){d=f.nextSibling;c=x(f,h,r,t);2!=t&&o.appendChild(c);h=r;f=d}if(n==e)return o;f=n.nextSibling;u=x(n=n.parentNode,a,r,t);2!=t&&u.appendChild(o);o=u}}function x(e,t,o,r){var l,d,u,f,h;if(t)return T(e,r);if(3==e.nodeType){l=e.nodeValue;if(o){f=i[s];d=l.substring(f);u=l.substring(0,f)}else{f=i[c];d=l.substring(0,f);u=l.substring(f)}1!=r&&(e.nodeValue=u);if(2==r)return;(h=n.clone(e,a)).nodeValue=d;return h}if(2==r)return;return n.clone(e,a)}function T(e,t){if(2!=t)return 1==t?n.clone(e,r):e;e.parentNode.removeChild(e)}u(i,{startContainer:o,startOffset:0,endContainer:o,endOffset:0,collapsed:r,commonAncestorContainer:o,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:p,setEnd:m,setStartBefore:g,setStartAfter:function(e){p(e.parentNode,f(e)+1)},setEndBefore:function(e){m(e.parentNode,f(e))},setEndAfter:y,collapse:function(e){if(e){i[d]=i[l];i[c]=i[s]}else{i[l]=i[d];i[s]=i[c]}i.collapsed=r},selectNode:function(e){g(e);y(e)},selectNodeContents:function(e){p(e,0);m(e,1===e.nodeType?e.childNodes.length:e.nodeValue.length)},compareBoundaryPoints:function(e,t){var n=i[l],o=i[s],r=i[d],a=i[c],u=t.startContainer,f=t.startOffset,h=t.endContainer,p=t.endOffset;if(0===e)return b(n,o,u,f);if(1===e)return b(r,a,u,f)
;if(2===e)return b(r,a,h,p);if(3===e)return b(n,o,h,p)},deleteContents:function(){S(2)},extractContents:function(){return S(0)},cloneContents:v,insertNode:function(e){var t,i,o=this[l],r=this[s];if(3!==o.nodeType&&4!==o.nodeType||!o.nodeValue){o.childNodes.length>0&&(i=o.childNodes[r]);i?o.insertBefore(e,i):3==o.nodeType?n.insertAfter(e,o):o.appendChild(e)}else if(r)if(r>=o.nodeValue.length)n.insertAfter(e,o);else{t=o.splitText(r);o.parentNode.insertBefore(e,t)}else o.parentNode.insertBefore(e,o)},surroundContents:function(e){var t=i.extractContents();i.insertNode(e);e.appendChild(t);i.selectNode(e)},cloneRange:function(){return u(new t(n),{startContainer:i[l],startOffset:i[s],endContainer:i[d],endOffset:i[c],collapsed:i.collapsed,commonAncestorContainer:i.commonAncestorContainer})},toStringIE:function(){return n.create("body",null,v()).outerText}});return i}t.prototype.toString=function(){return this.toStringIE()};return t}));i("tinymce/html/Entities",["tinymce/util/Tools"],(function(e){var t,n,i,o=e.makeMap,r=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,a=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,s=/[<>&\"\']/g,l=/&(#x|#)?([\w]+);/g,d={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"};n={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"};i={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};function c(e,t){var i,o,r,a={};if(e){e=e.split(",");t=t||10;for(i=0;i<e.length;i+=2){o=String.fromCharCode(parseInt(e[i],t));if(!n[o]){r="&"+e[i+1]+";";a[o]=r;a[r]=o}}return a}}t=c("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);var u={encodeRaw:function(e,t){return e.replace(t?r:a,(function(e){return n[e]||e}))},encodeAllRaw:function(e){return(""+e).replace(s,(function(e){return n[e]||e}))},encodeNumeric:function(e,t){return e.replace(t?r:a,(function(e){if(e.length>1)return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";";return n[e]||"&#"+e.charCodeAt(0)+";"}))},encodeNamed:function(e,i,o){o=o||t;return e.replace(i?r:a,(function(e){return n[e]||o[e]||e}))},getEncodeFunc:function(e,i){i=c(i)||t;if((e=o(e.replace(/\+/g,","))).named&&e.numeric)return function(e,t){return e.replace(t?r:a,(function(e){return n[e]||i[e]||"&#"+e.charCodeAt(0)+";"||0}))};if(e.named){if(i)return function(e,t){return u.encodeNamed(e,t,i)};return u.encodeNamed}if(e.numeric)return u.encodeNumeric;return u.encodeRaw},decode:function(e){return e.replace(l,(function(e,n,o){if(n){if((o=parseInt(o,2===n.length?16:10))>65535){o-=65536;return String.fromCharCode(55296+(o>>10),56320+(1023&o))}return d[o]||String.fromCharCode(o)}return i[e]||t[e]||function(e){var t;(t=document.createElement("div")).innerHTML=e;return t.textContent||t.innerText||e}(e)}))}};return u}));i("tinymce/dom/StyleSheetLoader",["tinymce/util/Tools"],(function(e){return function(t,n){var i,o=0,r={};i=(n=n||{}).maxLoadTime||5e3;function a(e){t.getElementsByTagName("head")[0].appendChild(e)}this.load=function(n,s,l){var d,c,u,f,h;function p(){for(var e=f.passed,t=e.length;t--;)e[t]();f.status=2;f.passed=[];f.failed=[]}function m(){for(var e=f.failed,t=e.length;t--;)e[t]();f.status=3;f.passed=[];f.failed=[]}function g(e,t){e()||((new Date).getTime()-u<i?window.setTimeout(t,0):m())}function y(){g((function(){for(var e,n,i=t.styleSheets,o=i.length;o--;)if((n=(e=i[o]).ownerNode?e.ownerNode:e.owningElement)&&n.id===d.id){p();return!0}}),y)}n=e._addCacheSuffix(n);if(r[n])f=r[n];else{f={passed:[],failed:[]};r[n]=f}s&&f.passed.push(s);l&&f.failed.push(l);if(1==f.status)return;if(2==f.status){p();return}if(3==f.status){m();return}f.status=1;(d=t.createElement("link")).rel="stylesheet";d.type="text/css";d.id="u"+o++;d.async=!1;d.defer=!1;u=(new Date).getTime();if("onload"in d&&!(h=navigator.userAgent.match(/WebKit\/(\d*)/),h&&h[1]<536)){d.onload=y;d.onerror=m}else{if(navigator.userAgent.indexOf("Firefox")>0){(c=t.createElement("style")).textContent='@import "'+n+'"';(function e(){g((function(){try{var e=c.sheet.cssRules;p();return!!e}catch(e){}}),e)})();a(c);return}y()}a(d);d.href=n}}}));i("tinymce/dom/DOMUtils",["tinymce/dom/Sizzle","tinymce/dom/DomQuery","tinymce/html/Styles","tinymce/dom/EventUtils","tinymce/dom/TreeWalker","tinymce/dom/Range","tinymce/html/Entities","tinymce/Env","tinymce/util/Tools","tinymce/dom/StyleSheetLoader"],(function(e,n,i,o,r,a,s,l,d,c){var u=d.each,f=d.is,h=d.grep,p=d.trim,m=l.ie,g=/^([a-z0-9],?)+$/i,y=/^[ \t\r\n]*$/;function v(e,t){var r,a=this;a.doc=e;a.win=window;a.files={};a.counter=0;a.stdMode=!m||e.documentMode>=8;a.boxModel=!m||"CSS1Compat"==e.compatMode||a.stdMode;a.styleSheetLoader=new c(e);a.boundEvents=[];a.settings=t=t||{};a.schema=t.schema;a.styles=new i({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema);a.fixDoc(e);a.events=t.ownEvents?new o(t.proxy):o.Event;a.attrHooks=function(e,t){var n,i={},o=t.keep_values;n={set:function(n,i,o){t.url_converter&&(i=t.url_converter.call(t.url_converter_scope||e,i,o,n[0]));n.attr("data-mce-"+o,i).attr(o,i)},get:function(e,t){return e.attr("data-mce-"+t)||e.attr(t)}};i={style:{set:function(e,t){if(null!==t&&"object"==typeof t){e.css(t);return}o&&e.attr("data-mce-style",t);e.attr("style",t)},get:function(t){var n=t.attr("data-mce-style")||t.attr("style");return e.serializeStyle(e.parseStyle(n),t[0].nodeName)}}};o&&(i.href=i.src=n);return i}(a,t);r=t.schema?t.schema.getBlockElements():{};a.$=n.overrideDefaults((function(){return{context:e,element:a.getRoot()}}));a.isBlock=function(e){if(!e)return!1;var t=e.nodeType;if(t)return!(1!==t||!r[e.nodeName]);return!!r[e]}}v.prototype={$$:function(e){"string"==typeof e&&(e=this.get(e));return this.$(e)},root:null,fixDoc:function(e){var t,n=this.settings;if(m&&n.schema){
"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,(function(t){e.createElement(t)}));for(t in n.schema.getCustomElements())e.createElement(t)}},clone:function(e,t){var n,i,o=this;if(!m||1!==e.nodeType||t)return e.cloneNode(t);i=o.doc;if(!t){n=i.createElement(e.nodeName);u(o.getAttribs(e),(function(t){o.setAttrib(n,t.nodeName,o.getAttrib(e,t.nodeName))}));return n}return n.firstChild},getRoot:function(){return this.settings.root_element||this.doc.body},getViewPort:function(e){var t,n;t=(e=e||this.win).document;n=this.boxModel?t.documentElement:t.body;return{x:e.pageXOffset||n.scrollLeft,y:e.pageYOffset||n.scrollTop,w:e.innerWidth||n.clientWidth,h:e.innerHeight||n.clientHeight}},getRect:function(e){var t,n,i=this;e=i.get(e);t=i.getPos(e);n=i.getSize(e);return{x:t.x,y:t.y,w:n.w,h:n.h}},getSize:function(e){var t,n,i=this;e=i.get(e);t=i.getStyle(e,"width");n=i.getStyle(e,"height");-1===t.indexOf("px")&&(t=0);-1===n.indexOf("px")&&(n=0);return{w:parseInt(t,10)||e.offsetWidth||e.clientWidth,h:parseInt(n,10)||e.offsetHeight||e.clientHeight}},getParent:function(e,t,n){return this.getParents(e,t,n,!1)},getParents:function(e,n,i,o){var r,a=this,s=[];e=a.get(e);o=o===t;i=i||("BODY"!=a.getRoot().nodeName?a.getRoot().parentNode:null);if(f(n,"string")){r=n;n="*"===n?function(e){return 1==e.nodeType}:function(e){return a.is(e,r)}}for(;e&&e!=i&&e.nodeType&&9!==e.nodeType;){if(!n||n(e)){if(!o)return e;s.push(e)}e=e.parentNode}return o?s:null},get:function(e){var t;if(e&&this.doc&&"string"==typeof e){t=e;if((e=this.doc.getElementById(e))&&e.id!==t)return this.doc.getElementsByName(t)[1]}return e},getNext:function(e,t){return this._findSib(e,t,"nextSibling")},getPrev:function(e,t){return this._findSib(e,t,"previousSibling")},select:function(t,n){var i=this;return e(t,i.get(n)||i.settings.root_element||i.doc,[])},is:function(n,i){var o;if(n.length===t){if("*"===i)return 1==n.nodeType;if(g.test(i)){i=i.toLowerCase().split(/,/);n=n.nodeName.toLowerCase();for(o=i.length-1;o>=0;o--)if(i[o]==n)return!0;return!1}}if(n.nodeType&&1!=n.nodeType)return!1;var r=n.nodeType?[n]:n;return e(i,r[0].ownerDocument||r[0],null,r).length>0},add:function(e,t,n,i,o){var r=this;return this.run(e,(function(e){var a;a=f(t,"string")?r.doc.createElement(t):t;r.setAttribs(a,n);i&&(i.nodeType?a.appendChild(i):r.setHTML(a,i));return o?a:e.appendChild(a)}))},create:function(e,t,n){return this.add(this.doc.createElement(e),e,t,n,1)},createHTML:function(e,t,n){var i,o="";o+="<"+e;for(i in t)t.hasOwnProperty(i)&&null!==t[i]&&void 0!==t[i]&&(o+=" "+i+'="'+this.encode(t[i])+'"');if(void 0!==n)return o+">"+n+"</"+e+">";return o+" />"},createFragment:function(e){var t,n,i,o=this.doc;i=o.createElement("div");t=o.createDocumentFragment();e&&(i.innerHTML=e);for(;n=i.firstChild;)t.appendChild(n);return t},remove:function(e,t){e=this.$$(e);t?e.each((function(){for(var e;e=this.firstChild;)3==e.nodeType&&0===e.data.length?this.removeChild(e):this.parentNode.insertBefore(e,this)})).remove():e.remove();return e.length>1?e.toArray():e[0]},setStyle:function(e,t,n){e=this.$$(e).css(t,n);this.settings.update_styles&&e.attr("data-mce-style",null)},getStyle:function(e,n,i){e=this.$$(e);if(i)return e.css(n);"float"==(n=n.replace(/-(\D)/g,(function(e,t){return t.toUpperCase()})))&&(n=m?"styleFloat":"cssFloat");return e[0]&&e[0].style?e[0].style[n]:t},setStyles:function(e,t){e=this.$$(e).css(t);this.settings.update_styles&&e.attr("data-mce-style",null)},removeAllAttribs:function(e){return this.run(e,(function(e){var t,n=e.attributes;for(t=n.length-1;t>=0;t--)e.removeAttributeNode(n.item(t))}))},setAttrib:function(e,t,n){var i,o,r=this,a=r.settings;""===n&&(n=null);i=(e=r.$$(e)).attr(t);if(!e.length)return;(o=r.attrHooks[t])&&o.set?o.set(e,n,t):e.attr(t,n);i!=n&&a.onSetAttrib&&a.onSetAttrib({attrElm:e,attrName:t,attrValue:n})},setAttribs:function(e,t){var n=this;n.$$(e).each((function(e,i){u(t,(function(e,t){n.setAttrib(i,t,e)}))}))},getAttrib:function(e,t,n){var i,o;(e=this.$$(e)).length&&(o=(i=this.attrHooks[t])&&i.get?i.get(e,t):e.attr(t));void 0===o&&(o=n||"");return o},getPos:function(e,t){var i,o,r=this,a=0,s=0,l=r.doc,d=l.body;t=t||d;if(e=r.get(e)){if(t===d&&e.getBoundingClientRect&&"static"===n(d).css("position")){o=e.getBoundingClientRect();t=r.boxModel?l.documentElement:d;return{x:a=o.left+(l.documentElement.scrollLeft||d.scrollLeft)-t.clientLeft,y:s=o.top+(l.documentElement.scrollTop||d.scrollTop)-t.clientTop}}i=e;for(;i&&i!=t&&i.nodeType;){a+=i.offsetLeft||0;s+=i.offsetTop||0;i=i.offsetParent}i=e.parentNode;for(;i&&i!=t&&i.nodeType;){a-=i.scrollLeft||0;s-=i.scrollTop||0;i=i.parentNode}}return{x:a,y:s}},parseStyle:function(e){return this.styles.parse(e)},serializeStyle:function(e,t){return this.styles.serialize(e,t)},addStyle:function(e){var t,n,i=this.doc;if(this!==v.DOM&&i===document){var o=v.DOM.addedStyles;if((o=o||[])[e])return;o[e]=!0;v.DOM.addedStyles=o}if(!(n=i.getElementById("mceDefaultStyles"))){(n=i.createElement("style")).id="mceDefaultStyles";n.type="text/css";(t=i.getElementsByTagName("head")[0]).firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n)}n.styleSheet?n.styleSheet.cssText+=e:n.appendChild(i.createTextNode(e))},loadCSS:function(e){var t,n=this,i=n.doc;if(n!==v.DOM&&i===document){v.DOM.loadCSS(e);return}e||(e="");t=i.getElementsByTagName("head")[0];u(e.split(","),(function(e){var o;e=d._addCacheSuffix(e);if(n.files[e])return;n.files[e]=!0;o=n.create("link",{rel:"stylesheet",href:e});m&&i.documentMode&&i.recalc&&(o.onload=function(){i.recalc&&i.recalc();o.onload=null});t.appendChild(o)}))},addClass:function(e,t){this.$$(e).addClass(t)},removeClass:function(e,t){this.toggleClass(e,t,!1)},hasClass:function(e,t){return this.$$(e).hasClass(t)},toggleClass:function(e,t,i){this.$$(e).toggleClass(t,i).each((function(){""===this.className&&n(this).attr("class",null)}))},show:function(e){this.$$(e).show()},hide:function(e){this.$$(e).hide()},isHidden:function(e){return"none"==this.$$(e).css("display")},uniqueId:function(e){return(e||"mce_")+this.counter++},setHTML:function(e,t){e=this.$$(e);m?e.each((function(e,i){if(!1===i.canHaveHTML)return;for(;i.firstChild;)i.removeChild(i.firstChild);try{i.innerHTML="<br>"+t;i.removeChild(i.firstChild)}catch(e){n("<div>").html("<br>"+t).contents().slice(1).appendTo(i)}return t})):e.html(t)},getOuterHTML:function(e){return 1==(e=this.get(e)).nodeType&&"outerHTML"in e?e.outerHTML:n("<div>").append(n(e).clone()).html()},setOuterHTML:function(e,t){var i=this;i.$$(e).each((function(){try{if("outerHTML"in this){this.outerHTML=t;return}}catch(e){}i.remove(n(this).html(t),!0)}))},decode:s.decode,encode:s.encodeAllRaw,insertAfter:function(e,t){t=this.get(t);return this.run(e,(function(e){var n,i;n=t.parentNode;(i=t.nextSibling)?n.insertBefore(e,i):n.appendChild(e);return e}))},replace:function(e,t,n){return this.run(t,(function(t){f(t,"array")&&(e=e.cloneNode(!0));n&&u(h(t.childNodes),(function(t){e.appendChild(t)}));return t.parentNode.replaceChild(e,t)}))},rename:function(e,t){var n,i=this;if(e.nodeName!=t.toUpperCase()){n=i.create(t);u(i.getAttribs(e),(function(t){i.setAttrib(n,t.nodeName,i.getAttrib(e,t.nodeName))}));i.replace(n,e,1)}return n||e},findCommonAncestor:function(e,t){for(var n,i=e;i;){n=t;for(;n&&i!=n;)n=n.parentNode;if(i==n)break;i=i.parentNode}if(!i&&e.ownerDocument)return e.ownerDocument.documentElement;return i},toHex:function(e){return this.styles.toHex(d.trim(e))},run:function(e,t,n){var i,o=this;"string"==typeof e&&(e=o.get(e));if(!e)return!1;n=n||this;if(!e.nodeType&&(e.length||0===e.length)){i=[];u(e,(function(e,r){if(e){"string"==typeof e&&(e=o.get(e));i.push(t.call(n,e,r))}}));return i}return t.call(n,e)},getAttribs:function(e){var t;if(!(e=this.get(e)))return[];if(m){t=[];if("OBJECT"==e.nodeName)return e.attributes;"OPTION"===e.nodeName&&this.getAttrib(e,"selected")&&t.push({specified:1,nodeName:"selected"});e.cloneNode(!1).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,(function(e){t.push({specified:1,nodeName:e})}));return t}return e.attributes},isEmpty:function(e,t){
var n,i,o,a,s,l=this,d=0;if(e=e.firstChild){a=new r(e,e.parentNode);t=t||(l.schema?l.schema.getNonEmptyElements():null);do{if(1===(o=e.nodeType)){if(e.getAttribute("data-mce-bogus"))continue;s=e.nodeName.toLowerCase();if(t&&t[s]){if("br"===s){d++;continue}return!1}n=(i=l.getAttribs(e)).length;for(;n--;)if("name"===(s=i[n].nodeName)||"data-mce-bookmark"===s)return!1}if(8==o)return!1;if(3===o&&!y.test(e.nodeValue))return!1}while(e=a.next())}return d<=1},createRng:function(){var e=this.doc;return e.createRange?e.createRange():new a(this)},nodeIndex:function(e,t){var n,i,o=0;if(e)for(n=e.nodeType,e=e.previousSibling;e;e=e.previousSibling){i=e.nodeType;if(t&&3==i&&(i==n||!e.nodeValue.length))continue;o++;n=i}return o},split:function(e,t,n){var i,o,r,a=this,s=a.createRng();function l(e){var t,n=e.childNodes,i=e.nodeType;if(1==i&&"bookmark"==e.getAttribute("data-mce-type"))return;for(t=n.length-1;t>=0;t--)l(n[t]);if(9!=i){if(3==i&&e.nodeValue.length>0){var o=p(e.nodeValue).length;if(!a.isBlock(e.parentNode)||o>0||0===o&&function(e){var t=e.previousSibling&&"SPAN"==e.previousSibling.nodeName,n=e.nextSibling&&"SPAN"==e.nextSibling.nodeName;return t&&n}(e))return}else if(1==i){1==(n=e.childNodes).length&&n[0]&&1==n[0].nodeType&&"bookmark"==n[0].getAttribute("data-mce-type")&&e.parentNode.insertBefore(n[0],e);if(n.length||/^(br|hr|input|img)$/i.test(e.nodeName))return}a.remove(e)}return e}if(e&&t){s.setStart(e.parentNode,a.nodeIndex(e));s.setEnd(t.parentNode,a.nodeIndex(t));i=s.extractContents();(s=a.createRng()).setStart(t.parentNode,a.nodeIndex(t)+1);s.setEnd(e.parentNode,a.nodeIndex(e)+1);o=s.extractContents();(r=e.parentNode).insertBefore(l(i),e);n?r.replaceChild(n,t):r.insertBefore(t,e);r.insertBefore(l(o),e);a.remove(e);return n||t}},bind:function(e,t,n,i){var o=this;if(d.isArray(e)){for(var r=e.length;r--;)e[r]=o.bind(e[r],t,n,i);return e}!o.settings.collect||e!==o.doc&&e!==o.win||o.boundEvents.push([e,t,n,i]);return o.events.bind(e,t,n,i||o)},unbind:function(e,t,n){var i,o=this;if(d.isArray(e)){i=e.length;for(;i--;)e[i]=o.unbind(e[i],t,n);return e}if(o.boundEvents&&(e===o.doc||e===o.win)){i=o.boundEvents.length;for(;i--;){var r=o.boundEvents[i];e!=r[0]||t&&t!=r[1]||n&&n!=r[2]||this.events.unbind(r[0],r[1],r[2])}}return this.events.unbind(e,t,n)},fire:function(e,t,n){return this.events.fire(e,t,n)},getContentEditable:function(e){var t;if(!e||1!=e.nodeType)return null;if((t=e.getAttribute("data-mce-contenteditable"))&&"inherit"!==t)return t;return"inherit"!==e.contentEditable?e.contentEditable:null},getContentEditableParent:function(e){for(var t=this.getRoot(),n=null;e&&e!==t&&null===(n=this.getContentEditable(e));e=e.parentNode);return n},destroy:function(){var t=this;if(t.boundEvents){for(var n=t.boundEvents.length;n--;){var i=t.boundEvents[n];this.events.unbind(i[0],i[1],i[2])}t.boundEvents=null}e.setDocument&&e.setDocument();t.win=t.doc=t.root=t.events=t.frag=null},isChildOf:function(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1},dumpRng:function(e){return"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset},_findSib:function(e,t,n){var i=this,o=t;if(e){"string"==typeof o&&(o=function(e){return i.is(e,t)});for(e=e[n];e;e=e[n])if(o(e))return e}return null}};v.DOM=new v(document);return v}));i("tinymce/dom/ScriptLoader",["tinymce/dom/DOMUtils","tinymce/util/Tools"],(function(e,t){var n=e.DOM,i=t.each,o=t.grep;function r(){var e,r={},a=[],s={},l=[],d=0;this.isDone=function(e){return 2==r[e]};this.markDone=function(e){r[e]=2};this.add=this.load=function(t,n,i){if(r[t]==e){a.push(t);r[t]=0}if(n){s[t]||(s[t]=[]);s[t].push({func:n,scope:i||this})}};this.loadQueue=function(e,t){this.loadScripts(a,e,t)};this.loadScripts=function(a,c,u){var f;function h(t){i(s[t],(function(e){e.func.call(e.scope)}));s[t]=e}l.push({func:c,scope:u||this});f=function(){var e=o(a);a.length=0;i(e,(function(e){if(2==r[e]){h(e);return}if(1!=r[e]){r[e]=1;d++;(function(e,i){var o,r,a=n;function s(){a.remove(r);o&&(o.onreadystatechange=o.onload=o=null);i()}r=a.uniqueId();(o=document.createElement("script")).id=r;o.type="text/javascript";o.src=t._addCacheSuffix(e);"onreadystatechange"in o?o.onreadystatechange=function(){/loaded|complete/.test(o.readyState)&&s()}:o.onload=s;o.onerror=function(){"undefined"!=typeof console&&console.log&&console.log("Failed to load: "+e)};(document.getElementsByTagName("head")[0]||document.body).appendChild(o)})(e,(function(){r[e]=2;d--;h(e);f()}))}}));if(!d){i(l,(function(e){e.func.call(e.scope)}));l.length=0}};f()}}r.ScriptLoader=new r;return r}));i("tinymce/AddOnManager",["tinymce/dom/ScriptLoader","tinymce/util/Tools"],(function(e,n){var i=n.each;function o(){var e=this;e.items=[];e.urls={};e.lookup={}}o.prototype={get:function(e){return this.lookup[e]?this.lookup[e].instance:t},dependencies:function(e){var t;this.lookup[e]&&(t=this.lookup[e].dependencies);return t||[]},requireLangPack:function(t,n){var i=o.language;if(i&&!1!==o.languageLoad){if(n)if(-1!=(n=","+n+",").indexOf(","+i.substr(0,2)+","))i=i.substr(0,2);else if(-1==n.indexOf(","+i+","))return;e.ScriptLoader.add(this.urls[t]+"/langs/"+i+".js")}},add:function(e,t,n){this.items.push(t);this.lookup[e]={instance:t,dependencies:n};return t},createUrl:function(e,t){return"object"==typeof t?t:{prefix:e.prefix,resource:t,suffix:e.suffix}},addComponents:function(t,n){var o=this.urls[t];i(n,(function(t){e.ScriptLoader.add(o+"/"+t)}))},load:function(n,r,a,s){var l=this,d=r;function c(){var o=l.dependencies(n);i(o,(function(e){var n=l.createUrl(r,e);l.load(n.resource,n,t,t)}));a&&(s?a.call(s):a.call(e))}if(l.urls[n])return;"object"==typeof r&&(d=r.prefix+r.resource+r.suffix);0!==d.indexOf("/")&&-1==d.indexOf("://")&&(d=o.baseURL+"/"+d);l.urls[n]=d.substring(0,d.lastIndexOf("/"));l.lookup[n]?c():e.ScriptLoader.add(d,c,s)}};o.PluginManager=new o;o.ThemeManager=new o;return o}));i("tinymce/dom/RangeUtils",["tinymce/util/Tools","tinymce/dom/TreeWalker"],(function(e,t){var n=e.each;function i(e){this.walk=function(t,i){var o,r,a,s,l,d,c,u=t.startContainer,f=t.startOffset,h=t.endContainer,p=t.endOffset;if((c=e.select("td.mce-item-selected,th.mce-item-selected")).length>0){n(c,(function(e){i([e])}));return}function m(e){var t;3===(t=e[0]).nodeType&&t===u&&f>=t.nodeValue.length&&e.splice(0,1);t=e[e.length-1];0===p&&e.length>0&&t===h&&3===t.nodeType&&e.splice(e.length-1,1);return e}function g(e,t,n){for(var i=[];e&&e!=n;e=e[t])i.push(e);return i}function y(e,t){do{if(e.parentNode==t)return e;e=e.parentNode}while(e)}function v(e,t,n){var o=n?"nextSibling":"previousSibling";for(l=(s=e).parentNode;s&&s!=t;s=l){l=s.parentNode;if((d=g(s==e?s:s[o],o)).length){n||d.reverse();i(m(d))}}}1==u.nodeType&&u.hasChildNodes()&&(u=u.childNodes[f]);1==h.nodeType&&h.hasChildNodes()&&(h=function(e,t){var n=e.childNodes;--t>n.length-1?t=n.length-1:t<0&&(t=0);return n[t]||e}(h,p));if(u==h)return i(m([u]));o=e.findCommonAncestor(u,h);for(s=u;s;s=s.parentNode){if(s===h)return v(u,o,!0);if(s===o)break}for(s=h;s;s=s.parentNode){if(s===u)return v(h,o);if(s===o)break}r=y(u,o)||u;a=y(h,o)||h;v(u,r,!0);(d=g(r==u?r:r.nextSibling,"nextSibling",a==h?a.nextSibling:a)).length&&i(m(d));v(h,a)};this.split=function(e){var t=e.startContainer,n=e.startOffset,i=e.endContainer,o=e.endOffset;function r(e,t){return e.splitText(t)}if(t==i&&3==t.nodeType){if(n>0&&n<t.nodeValue.length){t=(i=r(t,n)).previousSibling;if(o>n){t=i=r(i,o-=n).previousSibling;o=i.nodeValue.length;n=0}else o=0}}else{if(3==t.nodeType&&n>0&&n<t.nodeValue.length){t=r(t,n);n=0}3==i.nodeType&&o>0&&o<i.nodeValue.length&&(o=(i=r(i,o).previousSibling).nodeValue.length)}return{startContainer:t,startOffset:n,endContainer:i,endOffset:o}};this.normalize=function(n){var i,o;function r(r){var a,s,l,d,c,u,f,h=e.getRoot();function p(n,i){for(var o=new t(n,e.getParent(n.parentNode,e.isBlock)||h);n=o[i?"prev":"next"]();)if("BR"===n.nodeName)return!0}function m(n,r){var l,u,p;r=r||a;p=e.getParent(r.parentNode,e.isBlock)||h;if(n&&"BR"==r.nodeName&&f&&e.isEmpty(p)){a=r.parentNode;s=e.nodeIndex(r);i=!0;return}l=new t(r,p);for(;d=l[n?"prev":"next"]();){
if("false"===e.getContentEditableParent(d))return;if(3===d.nodeType&&d.nodeValue.length>0){a=d;s=n?d.nodeValue.length:0;i=!0;return}if(e.isBlock(d)||c[d.nodeName.toLowerCase()])return;u=d}if(o&&u){a=u;i=!0;s=0}}a=n[(r?"start":"end")+"Container"];s=n[(r?"start":"end")+"Offset"];f=1==a.nodeType&&s===a.childNodes.length;c=e.schema.getNonEmptyElements();u=r;1==a.nodeType&&s>a.childNodes.length-1&&(u=!1);if(9===a.nodeType){a=e.getRoot();s=0}if(a===h){if(u&&(d=a.childNodes[s>0?s-1:0])&&(c[d.nodeName]||"TABLE"==d.nodeName))return;if(a.hasChildNodes()){s=Math.min(!u&&s>0?s-1:s,a.childNodes.length-1);a=a.childNodes[s];s=0;if(a.hasChildNodes()&&!/TABLE/.test(a.nodeName)){d=a;l=new t(a,h);do{if(3===d.nodeType&&d.nodeValue.length>0){s=u?0:d.nodeValue.length;a=d;i=!0;break}if(c[d.nodeName.toLowerCase()]){s=e.nodeIndex(d);a=d.parentNode;"IMG"!=d.nodeName||u||s++;i=!0;break}}while(d=u?l.next():l.prev())}}}if(o){3===a.nodeType&&0===s&&m(!0);if(1===a.nodeType){(d=a.childNodes[s])||(d=a.childNodes[s-1]);!d||"BR"!==d.nodeName||function(e,t){return e.previousSibling&&e.previousSibling.nodeName==t}(d,"A")||p(d)||p(d,!0)||m(!0,d)}}u&&!o&&3===a.nodeType&&s===a.nodeValue.length&&m(!1);i&&n["set"+(r?"Start":"End")](a,s)}o=n.collapsed;r(!0);o||r();i&&o&&n.collapse(!0);return i}}i.compareRanges=function(e,t){if(e&&t){if(!e.item&&!e.duplicate)return e.startContainer==t.startContainer&&e.startOffset==t.startOffset;if(e.item&&t.item&&e.item(0)===t.item(0))return!0;if(e.isEqual&&t.isEqual&&t.isEqual(e))return!0}return!1};i.getCaretRangeFromPoint=function(e,t,n){var i,o;if(n.caretPositionFromPoint){o=n.caretPositionFromPoint(e,t);(i=n.createRange()).setStart(o.offsetNode,o.offset);i.collapse(!0)}else if(n.caretRangeFromPoint)i=n.caretRangeFromPoint(e,t);else if(n.body.createTextRange){i=n.body.createTextRange();try{i.moveToPoint(e,t);i.collapse(!0)}catch(e){i.collapse(t<n.body.clientHeight)}}return i};i.getNode=function(e,t){if(1==e.nodeType&&e.hasChildNodes()){t>=e.childNodes.length&&(t=e.childNodes.length-1);e=e.childNodes[t]}return e};return i}));i("tinymce/NodeChange",["tinymce/dom/RangeUtils","tinymce/Env"],(function(e,t){return function(n){var i,o=[];"onselectionchange"in n.getDoc()||n.on("NodeChange Click MouseUp KeyUp Focus",(function(t){var o,r;r={startContainer:(o=n.selection.getRng()).startContainer,startOffset:o.startOffset,endContainer:o.endContainer,endOffset:o.endOffset};"nodechange"!=t.type&&e.compareRanges(r,i)||n.fire("SelectionChange");i=r}));n.on("contextmenu",(function(){n.fire("SelectionChange")}));n.on("SelectionChange",(function(){var e=n.selection.getStart(!0);if(!t.range&&n.selection.isCollapsed())return;!function(e){var t,i;if((i=n.$(e).parentsUntil(n.getBody()).add(e)).length===o.length){for(t=i.length;t>=0&&i[t]===o[t];t--);if(-1===t){o=i;return!0}}o=i;return!1}(e)&&n.dom.isChildOf(e,n.getBody())&&n.nodeChanged({selectionChange:!0})}));n.on("MouseUp",(function(e){e.isDefaultPrevented()||("IMG"==n.selection.getNode().nodeName?setTimeout((function(){n.nodeChanged()}),0):n.nodeChanged())}));this.nodeChanged=function(e){var t,i,o,r=n.selection;if(n.initialized&&r&&!n.settings.disable_nodechange&&!n.settings.readonly){o=n.getBody();"IMG"==(t=(t=r.getStart()||o).ownerDocument!=n.getDoc()?n.getBody():t).nodeName&&r.isCollapsed()&&(t=t.parentNode);i=[];n.dom.getParent(t,(function(e){if(e===o)return!0;i.push(e)}));(e=e||{}).element=t;e.parents=i;n.fire("NodeChange",e)}}}}));i("tinymce/html/Node",[],(function(){var e=/^[ \t\r\n]*$/,t={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};function n(e,t,n){var i,o,r=n?"lastChild":"firstChild",a=n?"prev":"next";if(e[r])return e[r];if(e!==t){if(i=e[a])return i;for(o=e.parent;o&&o!==t;o=o.parent)if(i=o[a])return i}}function i(e,t){this.name=e;this.type=t;if(1===t){this.attributes=[];this.attributes.map={}}}i.prototype={replace:function(e){var t=this;e.parent&&e.remove();t.insert(e,t);t.remove();return t},attr:function(e,t){var n,i,o=this;if("string"!=typeof e){for(i in e)o.attr(i,e[i]);return o}if(n=o.attributes){if(undefined!==t){if(null===t){if(e in n.map){delete n.map[e];i=n.length;for(;i--;)if(n[i].name===e){n=n.splice(i,1);return o}}return o}if(e in n.map){i=n.length;for(;i--;)if(n[i].name===e){n[i].value=t;break}}else n.push({name:e,value:t});n.map[e]=t;return o}return n.map[e]}},clone:function(){var e,t,n,o,r,a=this,s=new i(a.name,a.type);if(n=a.attributes){(r=[]).map={};for(e=0,t=n.length;e<t;e++)if("id"!==(o=n[e]).name){r[r.length]={name:o.name,value:o.value};r.map[o.name]=o.value}s.attributes=r}s.value=a.value;s.shortEnded=a.shortEnded;return s},wrap:function(e){var t=this;t.parent.insert(e,t);e.append(t);return t},unwrap:function(){var e,t,n=this;for(e=n.firstChild;e;){t=e.next;n.insert(e,n,!0);e=t}n.remove()},remove:function(){var e=this,t=e.parent,n=e.next,i=e.prev;if(t){if(t.firstChild===e){t.firstChild=n;n&&(n.prev=null)}else i.next=n;if(t.lastChild===e){t.lastChild=i;i&&(i.next=null)}else n.prev=i;e.parent=e.next=e.prev=null}return e},append:function(e){var t,n=this;e.parent&&e.remove();if(t=n.lastChild){t.next=e;e.prev=t;n.lastChild=e}else n.lastChild=n.firstChild=e;e.parent=n;return e},insert:function(e,t,n){var i;e.parent&&e.remove();i=t.parent||this;if(n){t===i.firstChild?i.firstChild=e:t.prev.next=e;e.prev=t.prev;e.next=t;t.prev=e}else{t===i.lastChild?i.lastChild=e:t.next.prev=e;e.next=t.next;e.prev=t;t.next=e}e.parent=i;return e},getAll:function(e){var t,i=[];for(t=this.firstChild;t;t=n(t,this))t.name===e&&i.push(t);return i},empty:function(){var e,t,i,o=this;if(o.firstChild){e=[];for(i=o.firstChild;i;i=n(i,o))e.push(i);t=e.length;for(;t--;)(i=e[t]).parent=i.firstChild=i.lastChild=i.next=i.prev=null}o.firstChild=o.lastChild=null;return o},isEmpty:function(t){var i,o,r=this.firstChild;if(r)do{if(1===r.type){if(r.attributes.map["data-mce-bogus"])continue;if(t[r.name])return!1;i=r.attributes.length;for(;i--;)if("name"===(o=r.attributes[i].name)||0===o.indexOf("data-mce-bookmark"))return!1}if(8===r.type)return!1;if(3===r.type&&!e.test(r.value))return!1}while(r=n(r,this));return!0},walk:function(e){return n(this,null,e)}};i.create=function(e,n){var o,r;o=new i(e,t[e]||1);if(n)for(r in n)o.attr(r,n[r]);return o};return i}));i("tinymce/html/Schema",["tinymce/util/Tools"],(function(e){var t={},n={},i=e.makeMap,o=e.each,r=e.extend,a=e.explode,s=e.inArray;function l(e,t){return e?e.split(t||" "):[]}function d(e,t){var n;if(e){n={};"string"==typeof e&&(e={"*":e});o(e,(function(e,o){n[o]=n[o.toUpperCase()]="map"==t?i(e,/[, ]/):a(e,/[, ]/)}))}return n}return function(e){var c,u,f,h,p,m,g,y,v,C,b,_,S,N=this,E={},A={},w=[],x={},T={};function I(n,o,a){var s=e[n];if(s)s=i(s,/[, ]/,i(s.toUpperCase(),/[, ]/));else if(!(s=t[n])){s=i(o," ",i(o.toUpperCase()," "));s=r(s,a);t[n]=s}return s}f=function(e){var i,r,a,s,d,c,u={};function f(e,t,o){var r,a,s,d=arguments;function c(e,t){var n,i,o={};for(n=0,i=e.length;n<i;n++)o[e[n]]=t||{};return o}t=t||"";"string"==typeof(o=o||[])&&(o=l(o));for(a=3;a<d.length;a++){"string"==typeof d[a]&&(d[a]=l(d[a]));o.push.apply(o,d[a])}r=(e=l(e)).length;for(;r--;){s=[].concat(i,l(t));u[e[r]]={attributes:c(s),attributesOrder:s,children:c(o,n)}}}function h(e,t){var n,i,o,r;n=(e=l(e)).length;t=l(t);for(;n--;){i=u[e[n]];for(o=0,r=t.length;o<r;o++){i.attributes[t[o]]={};i.attributesOrder.push(t[o])}}}if(t[e])return t[e];i=l("id accesskey class dir lang style tabindex title");r=l("address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul");a=l("a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment");if("html4"!=e){i.push.apply(i,l("contenteditable contextmenu draggable dropzone hidden spellcheck translate"));r.push.apply(r,l("article aside details dialog figure header footer hgroup section nav"));a.push.apply(a,l("audio canvas command datalist mark meter output progress time wbr video ruby bdi keygen"))}if("html5-strict"!=e){i.push("xml:lang");c=l("acronym applet basefont big font strike tt");a.push.apply(a,c);o(c,(function(e){f(e,"",a)}));d=l("center dir isindex noframes");r.push.apply(r,d)
;s=[].concat(r,a);o(d,(function(e){f(e,"",s)}))}s=s||[].concat(r,a);f("html","manifest","head body");f("head","","base command link meta noscript script style title");f("title hr noscript br");f("base","href target");f("link","href rel media hreflang type sizes hreflang");f("meta","name http-equiv content charset");f("style","media type scoped");f("script","src async defer type charset");f("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",s);f("address dt dd div caption","",s);f("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",a);f("blockquote","cite",s);f("ol","reversed start type","li");f("ul","","li");f("li","value",s);f("dl","","dt dd");f("a","href target rel media hreflang type",a);f("q","cite",a);f("ins del","cite datetime",s);f("img","src sizes srcset alt usemap ismap width height");f("iframe","src name width height",s);f("embed","src type width height");f("object","data type typemustmatch name usemap form width height",s,"param");f("param","name value");f("map","name",s,"area");f("area","alt coords shape href target rel media hreflang type");f("table","border","caption colgroup thead tfoot tbody tr"+("html4"==e?" col":""));f("colgroup","span","col");f("col","span");f("tbody thead tfoot","","tr");f("tr","","td th");f("td","colspan rowspan headers",s);f("th","colspan rowspan headers scope abbr",s);f("form","accept-charset action autocomplete enctype method name novalidate target",s);f("fieldset","disabled form name",s,"legend");f("label","form for",a);f("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width");f("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"==e?s:a);f("select","disabled form multiple name required size","option optgroup");f("optgroup","disabled label","option");f("option","disabled label selected value");f("textarea","cols dirname disabled form maxlength name readonly required rows wrap");f("menu","type label",s,"li");f("noscript","",s);if("html4"!=e){f("wbr");f("ruby","",a,"rt rp");f("figcaption","",s);f("mark rt rp summary bdi","",a);f("canvas","width height",s);f("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",s,"track source");f("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",s,"track source");f("picture","","img source");f("source","src srcset type media sizes");f("track","kind src srclang label default");f("datalist","",a,"option");f("article section nav aside header footer","",s);f("hgroup","","h1 h2 h3 h4 h5 h6");f("figure","",s,"figcaption");f("time","datetime",a);f("dialog","open",s);f("command","type label icon disabled checked radiogroup command");f("output","for form name",a);f("progress","value max",a);f("meter","value min max low high optimum",a);f("details","open",s,"summary");f("keygen","autofocus challenge disabled form keytype name")}if("html5-strict"!=e){h("script","language xml:space");h("style","xml:space");h("object","declare classid code codebase codetype archive standby align border hspace vspace");h("embed","align name hspace vspace");h("param","valuetype type");h("a","charset name rev shape coords");h("br","clear");h("applet","codebase archive code object alt name width height align hspace vspace");h("img","name longdesc align border hspace vspace");h("iframe","longdesc frameborder marginwidth marginheight scrolling align");h("font basefont","size color face");h("input","usemap align");h("select","onchange");h("textarea");h("h1 h2 h3 h4 h5 h6 div p legend caption","align");h("ul","type compact");h("li","type");h("ol dl menu dir","compact");h("pre","width xml:space");h("hr","align noshade size width");h("isindex","prompt");h("table","summary width frame rules cellspacing cellpadding align bgcolor");h("col","width align char charoff valign");h("colgroup","width align char charoff valign");h("thead","align char charoff valign");h("tr","align char charoff valign bgcolor");h("th","axis align char charoff valign nowrap bgcolor width height");h("form","accept");h("td","abbr axis scope align char charoff valign nowrap bgcolor width height");h("tfoot","align char charoff valign");h("tbody","align char charoff valign");h("area","nohref");h("body","background bgcolor text link vlink alink")}if("html4"!=e){h("input button select textarea","autofocus");h("input textarea","placeholder");h("a","download");h("link script img","crossorigin");h("iframe","sandbox seamless allowfullscreen")}o(l("a form meter progress dfn"),(function(e){u[e]&&delete u[e].children[e]}));delete u.caption.children.table;t[e]=u;return u}((e=e||{}).schema);!1===e.verify_html&&(e.valid_elements="*[*]");c=d(e.valid_styles);u=d(e.invalid_styles,"map");y=d(e.valid_classes,"map");h=I("whitespace_elements","pre script noscript style textarea video audio iframe object");p=I("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr");m=I("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track");g=I("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls");C=I("non_empty_elements","td th iframe video audio object script",m);b=I("move_caret_before_on_enter_elements","table",C);_=I("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure");v=I("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup",_);S=I("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp");o((e.special||"script noscript style textarea").split(" "),(function(e){T[e]=new RegExp("</"+e+"[^>]*>","gi")}));function D(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")}function k(e){var t,n,o,r,a,d,c,u,f,h,p,m,g,y,v,C,b,_,S,N=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,A=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,x=/[*?+]/;if(e){e=l(e,",");if(E["@"]){C=E["@"].attributes;b=E["@"].attributesOrder}for(t=0,n=e.length;t<n;t++)if(a=N.exec(e[t])){y=a[1];f=a[2];v=a[3];u=a[5];d={attributes:m={},attributesOrder:g=[]};"#"===y&&(d.paddEmpty=!0);"-"===y&&(d.removeEmpty=!0);"!"===a[4]&&(d.removeEmptyAttrs=!0);if(C){for(_ in C)m[_]=C[_];g.push.apply(g,b)}if(u)for(o=0,r=(u=l(u,"|")).length;o<r;o++)if(a=A.exec(u[o])){c={};p=a[1];h=a[2].replace(/::/g,":");y=a[3];S=a[4];if("!"===p){d.attributesRequired=d.attributesRequired||[];d.attributesRequired.push(h);c.required=!0}if("-"===p){delete m[h];g.splice(s(g,h),1);continue}if(y){if("="===y){d.attributesDefault=d.attributesDefault||[];d.attributesDefault.push({name:h,value:S});c.defaultValue=S}if(":"===y){d.attributesForced=d.attributesForced||[];d.attributesForced.push({name:h,value:S});c.forcedValue=S}"<"===y&&(c.validValues=i(S,"?"))}if(x.test(h)){d.attributePatterns=d.attributePatterns||[];c.pattern=D(h);d.attributePatterns.push(c)}else{m[h]||g.push(h);m[h]=c}}if(!C&&"@"==f){C=m;b=g}if(v){d.outputName=f;E[v]=d}if(x.test(f)){d.pattern=D(f);w.push(d)}else E[f]=d}}}function M(e){E={};w=[];k(e);o(f,(function(e,t){A[t]=e.children}))}function R(e){var n=/^(~)?(.+)$/;if(e){t.text_block_elements=t.block_elements=null;o(l(e,","),(function(e){var t=n.exec(e),i="~"===t[1],a=i?"span":"div",s=t[2];A[s]=A[a];x[s]=a;if(!i){v[s.toUpperCase()]={};v[s]={}}if(!E[s]){var l=E[a];delete(l=r({},l)).removeEmptyAttrs;delete l.removeEmpty;E[s]=l}o(A,(function(e,t){if(e[a]){A[t]=e=r({},A[t]);e[s]=e[a]}}))}))}}function H(e){var t=/^([+\-]?)(\w+)\[([^\]]+)\]$/;e&&o(l(e,","),(function(e){var n,i,a=t.exec(e);if(a){i=a[1];n=i?A[a[2]]:A[a[2]]={"#comment":{}};n=A[a[2]];o(l(a[3],"|"),(function(e){if("-"===i){A[a[2]]=n=r({},A[a[2]]);delete n[e]}else n[e]={}}))}
}))}function O(e){var t,n=E[e];if(n)return n;t=w.length;for(;t--;)if((n=w[t]).pattern.test(e))return n}if(e.valid_elements)M(e.valid_elements);else{o(f,(function(e,t){E[t]={attributes:e.attributes,attributesOrder:e.attributesOrder};A[t]=e.children}));"html5"!=e.schema&&o(l("strong/b em/i"),(function(e){e=l(e,"/");E[e[1]].outputName=e[0]}));E.img.attributesDefault=[{name:"alt",value:""}];o(l("ol ul sub sup blockquote span font a table tbody tr strong em b i"),(function(e){E[e]&&(E[e].removeEmpty=!0)}));o(l("p h1 h2 h3 h4 h5 h6 th td pre div address caption"),(function(e){E[e].paddEmpty=!0}));o(l("span"),(function(e){E[e].removeEmptyAttrs=!0}))}R(e.custom_elements);H(e.valid_children);k(e.extended_valid_elements);H("+ol[ul|ol],+ul[ul|ol]");e.invalid_elements&&o(a(e.invalid_elements),(function(e){E[e]&&delete E[e]}));O("span")||k("span[!data-mce-type|*]");N.children=A;N.getValidStyles=function(){return c};N.getInvalidStyles=function(){return u};N.getValidClasses=function(){return y};N.getBoolAttrs=function(){return g};N.getBlockElements=function(){return v};N.getTextBlockElements=function(){return _};N.getTextInlineElements=function(){return S};N.getShortEndedElements=function(){return m};N.getSelfClosingElements=function(){return p};N.getNonEmptyElements=function(){return C};N.getMoveCaretBeforeOnEnterElements=function(){return b};N.getWhiteSpaceElements=function(){return h};N.getSpecialElements=function(){return T};N.isValidChild=function(e,t){var n=A[e];return!(!n||!n[t])};N.isValid=function(e,t){var n,i,o=O(e);if(o){if(!t)return!0;if(o.attributes[t])return!0;if(n=o.attributePatterns){i=n.length;for(;i--;)if(n[i].pattern.test(e))return!0}}return!1};N.getElementRule=O;N.getCustomElements=function(){return x};N.addValidElements=k;N.setValidElements=M;N.addCustomElements=R;N.addValidChildren=H;N.elements=E}}));i("tinymce/html/SaxParser",["tinymce/html/Schema","tinymce/html/Entities","tinymce/util/Tools"],(function(e,t,n){var i=n.each;function o(e,t,n){var i,o,r,a,s=1;a=e.getShortEndedElements();(r=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g).lastIndex=i=n;for(;o=r.exec(t);){i=r.lastIndex;if("/"===o[1])s--;else if(!o[1]){if(o[2]in a)continue;s++}if(0===s)break}return i}function r(r,a){var s=this;function l(){}r=r||{};s.schema=a=a||new e;!1!==r.fix_self_closing&&(r.fix_self_closing=!0);i("comment cdata text start end pi doctype".split(" "),(function(e){e&&(s[e]=r[e]||l)}));s.parse=function(e){var i,s,l,d,c,u,f,h,p,m,g,y,v,C,b,_,S,N,E,A,w,x,T,I,D,k,M,R,H,O=this,L=0,P=[],B=0,F=t.decode,G=n.makeMap("src,href,data,background,formaction,poster"),U=/((java|vb)script|mhtml):/i,W=/^data:/i;function $(e){var t,n;t=P.length;for(;t--&&P[t].name!==e;);if(t>=0){for(n=P.length-1;n>=t;n--)(e=P[n]).valid&&O.end(e.name);P.length=t}}function z(e,t,n,i,o){var a,s;n=(t=t.toLowerCase())in g?t:F(n||i||o||"");if(v&&!h&&0!==t.indexOf("data-")){if(!(a=N[t])&&E){s=E.length;for(;s--&&!(a=E[s]).pattern.test(t););-1===s&&(a=null)}if(!a)return;if(a.validValues&&!(n in a.validValues))return}if(G[t]&&!r.allow_script_urls){var l=n.replace(/[\s\u0000-\u001F]+/g,"");try{l=decodeURIComponent(l)}catch(e){l=unescape(l)}if(U.test(l))return;if(!r.allow_html_data_urls&&W.test(l)&&!/^data:image\//i.test(l))return}d.map[t]=n;d.push({name:t,value:n})}D=new RegExp("<(?:(?:!--([\\w\\W]*?)--\x3e)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([A-Za-z0-9\\-_\\:\\.]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g");k=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g;m=a.getShortEndedElements();I=r.self_closing_elements||a.getSelfClosingElements();g=a.getBoolAttrs();v=r.validate;p=r.remove_internals;H=r.fix_self_closing;M=a.getSpecialElements();for(;i=D.exec(e);){L<i.index&&O.text(F(e.substr(L,i.index-L)));if(s=i[6]){":"===(s=s.toLowerCase()).charAt(0)&&(s=s.substr(1));$(s)}else if(s=i[7]){":"===(s=s.toLowerCase()).charAt(0)&&(s=s.substr(1));y=s in m;H&&I[s]&&P.length>0&&P[P.length-1].name===s&&$(s);if(!v||(C=a.getElementRule(s))){b=!0;if(v){N=C.attributes;E=C.attributePatterns}if(S=i[8]){(h=-1!==S.indexOf("data-mce-type"))&&p&&(b=!1);(d=[]).map={};S.replace(k,z)}else(d=[]).map={};if(v&&!h){A=C.attributesRequired;w=C.attributesDefault;x=C.attributesForced;(T=C.removeEmptyAttrs)&&!d.length&&(b=!1);if(x){c=x.length;for(;c--;){f=(_=x[c]).name;"{$uid}"===(R=_.value)&&(R="mce_"+B++);d.map[f]=R;d.push({name:f,value:R})}}if(w){c=w.length;for(;c--;)if(!((f=(_=w[c]).name)in d.map)){"{$uid}"===(R=_.value)&&(R="mce_"+B++);d.map[f]=R;d.push({name:f,value:R})}}if(A){c=A.length;for(;c--&&!(A[c]in d.map););-1===c&&(b=!1)}if(_=d.map["data-mce-bogus"]){if("all"===_){L=o(a,e,D.lastIndex);D.lastIndex=L;continue}b=!1}}b&&O.start(s,d,y)}else b=!1;if(l=M[s]){l.lastIndex=L=i.index+i[0].length;if(i=l.exec(e)){b&&(u=e.substr(L,i.index-L));L=i.index+i[0].length}else{u=e.substr(L);L=e.length}if(b){u.length>0&&O.text(u,!0);O.end(s)}D.lastIndex=L;continue}y||(S&&S.indexOf("/")==S.length-1?b&&O.end(s):P.push({name:s,valid:b}))}else if(s=i[1]){">"===s.charAt(0)&&(s=" "+s);r.allow_conditional_comments||"[if"!==s.substr(0,3)||(s=" "+s);O.comment(s)}else(s=i[2])?O.cdata(s):(s=i[3])?O.doctype(s):(s=i[4])&&O.pi(s,i[5]);L=i.index+i[0].length}L<e.length&&O.text(F(e.substr(L)));for(c=P.length-1;c>=0;c--)(s=P[c]).valid&&O.end(s.name)}}r.findEndTag=o;return r}));i("tinymce/html/DomParser",["tinymce/html/Node","tinymce/html/Schema","tinymce/html/SaxParser","tinymce/util/Tools"],(function(e,t,n,i){var o=i.makeMap,r=i.each,a=i.explode,s=i.extend;return function(i,l){var d=this,c={},u=[],f={},h={};(i=i||{}).validate=!("validate"in i)||i.validate;i.root_name=i.root_name||"body";d.schema=l=l||new t;d.filterNode=function(e){var t,n,i;n in c&&((i=f[n])?i.push(e):f[n]=[e]);t=u.length;for(;t--;)(n=u[t].name)in e.attributes.map&&((i=h[n])?i.push(e):h[n]=[e]);return e};d.addNodeFilter=function(e,t){r(a(e),(function(e){var n=c[e];n||(c[e]=n=[]);n.push(t)}))};d.addAttributeFilter=function(e,t){r(a(e),(function(e){var n;for(n=0;n<u.length;n++)if(u[n].name===e){u[n].callbacks.push(t);return}u.push({name:e,callbacks:[t]})}))};d.parse=function(t,r){var a,p,m,g,y,v,C,b,_,S,N,E,A,w,x,T,I,D,k,M,R,H=[];r=r||{};f={};h={};E=s(o("script,style,head,html,body,title,meta,param"),l.getBlockElements());M=l.getNonEmptyElements();k=l.children;N=i.validate;R="forced_root_block"in r?r.forced_root_block:i.forced_root_block;D=l.getWhiteSpaceElements();A=/^[ \t\r\n]+/;x=/[ \t\r\n]+$/;T=/[ \t\r\n]+/g;I=/^[ \t\r\n]+$/;function O(t,n){var i,o=new e(t,n);t in c&&((i=f[t])?i.push(o):f[t]=[o]);return o}function L(e){var t,n,i;for(t=e.prev;t&&3===t.type;)if((n=t.value.replace(x,"")).length>0){t.value=n;t=t.prev}else{i=t.prev;t.remove();t=i}}a=new n({validate:N,allow_script_urls:i.allow_script_urls,allow_conditional_comments:i.allow_conditional_comments,self_closing_elements:function(e){var t,n={};for(t in e)"li"!==t&&"p"!=t&&(n[t]=e[t]);return n}(l.getSelfClosingElements()),cdata:function(e){m.append(O("#cdata",4)).value=e},text:function(e,t){var n;if(!w){e=e.replace(T," ");m.lastChild&&E[m.lastChild.name]&&(e=e.replace(A,""))}if(0!==e.length){(n=O("#text",3)).raw=!!t;m.append(n).value=e}},comment:function(e){m.append(O("#comment",8)).value=e},pi:function(e,t){m.append(O(e,7)).value=t;L(m)},doctype:function(e){var t;(t=m.append(O("#doctype",10))).value=e;L(m)},start:function(e,t,n){var i,o,r,a,s;if(r=N?l.getElementRule(e):{}){(i=O(r.outputName||e,1)).attributes=t;i.shortEnded=n;m.append(i);(s=k[m.name])&&k[i.name]&&!s[i.name]&&H.push(i);o=u.length;for(;o--;)(a=u[o].name)in t.map&&((_=h[a])?_.push(i):h[a]=[i]);E[e]&&L(i);n||(m=i);!w&&D[e]&&(w=!0)}},end:function(t){var n,i,o,r,a;if(i=N?l.getElementRule(t):{}){if(E[t]&&!w){if((n=m.firstChild)&&3===n.type)if((o=n.value.replace(A,"")).length>0){n.value=o;n=n.next}else{r=n.next;n.remove();n=r;for(;n&&3===n.type;){o=n.value;r=n.next;if(0===o.length||I.test(o)){n.remove();n=r}n=r}}if((n=m.lastChild)&&3===n.type)if((o=n.value.replace(x,"")).length>0){n.value=o;n=n.prev}else{r=n.prev;n.remove();n=r;for(;n&&3===n.type;){o=n.value;r=n.prev
;if(0===o.length||I.test(o)){n.remove();n=r}n=r}}}w&&D[t]&&(w=!1);if((i.removeEmpty||i.paddEmpty)&&m.isEmpty(M))if(i.paddEmpty)m.empty().append(new e("#text","3")).value=" ";else if(!m.attributes.map.name&&!m.attributes.map.id){a=m.parent;E[m.name]?m.empty().remove():m.unwrap();m=a;return}m=m.parent}}},l);p=m=new e(r.context||i.root_name,11);a.parse(t);N&&H.length&&(r.context?r.invalid=!0:function(t){var n,i,r,a,s,c,u,f,h,p,m,g,y,v;m=o("tr,td,th,tbody,thead,tfoot,table");p=l.getNonEmptyElements();g=l.getTextBlockElements();for(n=0;n<t.length;n++){if(!(i=t[n]).parent||i.fixed)continue;if(g[i.name]&&"li"==i.parent.name){y=i.next;for(;y&&g[y.name];){y.name="li";y.fixed=!0;i.parent.insert(y,i.parent);y=y.next}i.unwrap(i);continue}a=[i];for(r=i.parent;r&&!l.isValidChild(r.name,i.name)&&!m[r.name];r=r.parent)a.push(r);if(r&&a.length>1){a.reverse();s=c=d.filterNode(a[0].clone());for(h=0;h<a.length-1;h++){if(l.isValidChild(c.name,a[h].name)){u=d.filterNode(a[h].clone());c.append(u)}else u=c;for(f=a[h].firstChild;f&&f!=a[h+1];){v=f.next;u.append(f);f=v}c=u}if(s.isEmpty(p))r.insert(i,a[0],!0);else{r.insert(s,a[0],!0);r.insert(i,s)}((r=a[0]).isEmpty(p)||r.firstChild===r.lastChild&&"br"===r.firstChild.name)&&r.empty().remove()}else if(i.parent){if("li"===i.name){if((y=i.prev)&&("ul"===y.name||"ul"===y.name)){y.append(i);continue}if((y=i.next)&&("ul"===y.name||"ul"===y.name)){y.insert(i,y.firstChild,!0);continue}i.wrap(d.filterNode(new e("ul",1)));continue}l.isValidChild(i.parent.name,"div")&&l.isValidChild("div",i.name)?i.wrap(d.filterNode(new e("div",1))):"style"===i.name||"script"===i.name?i.empty().remove():i.unwrap()}}}(H));R&&("body"==p.name||r.isRootContent)&&function(){var e,t,n=p.firstChild;function o(e){if(e){(n=e.firstChild)&&3==n.type&&(n.value=n.value.replace(A,""));(n=e.lastChild)&&3==n.type&&(n.value=n.value.replace(x,""))}}if(!l.isValidChild(p.name,R.toLowerCase()))return;for(;n;){e=n.next;if(3==n.type||1==n.type&&"p"!==n.name&&!E[n.name]&&!n.attr("data-mce-type"))if(t)t.append(n);else{(t=O(R,1)).attr(i.forced_root_block_attrs);p.insert(t,n);t.append(n)}else{o(t);t=null}n=e}o(t)}();if(!r.invalid){for(S in f){_=c[S];C=(g=f[S]).length;for(;C--;)g[C].parent||g.splice(C,1);for(y=0,v=_.length;y<v;y++)_[y](g,S,r)}for(y=0,v=u.length;y<v;y++)if((_=u[y]).name in h){C=(g=h[_.name]).length;for(;C--;)g[C].parent||g.splice(C,1);for(C=0,b=_.callbacks.length;C<b;C++)_.callbacks[C](g,_.name,r)}}return p};i.remove_trailing_brs&&d.addNodeFilter("br",(function(t){var n,i,o,r,a,d,c,u,f=t.length,h=s({},l.getBlockElements()),p=l.getNonEmptyElements();h.body=1;for(n=0;n<f;n++){o=(i=t[n]).parent;if(h[i.parent.name]&&i===o.lastChild){a=i.prev;for(;a;){if("span"!==(d=a.name)||"bookmark"!==a.attr("data-mce-type")){if("br"!==d)break;if("br"===d){i=null;break}}a=a.prev}if(i){i.remove();o.isEmpty(p)&&(c=l.getElementRule(o.name))&&(c.removeEmpty?o.remove():c.paddEmpty&&(o.empty().append(new e("#text",3)).value=" "))}}else{r=i;for(;o&&o.firstChild===r&&o.lastChild===r;){r=o;if(h[o.name])break;o=o.parent}if(r===o){(u=new e("#text",3)).value=" ";i.replace(u)}}}}));i.allow_html_in_named_anchor||d.addAttributeFilter("id,name",(function(e){for(var t,n,i,o,r=e.length;r--;)if("a"===(o=e[r]).name&&o.firstChild&&!o.attr("href")){i=o.parent;t=o.lastChild;do{n=t.prev;i.insert(t,o);t=n}while(t)}}));i.validate&&l.getValidClasses()&&d.addAttributeFilter("class",(function(e){for(var t,n,i,o,r,a,s,d=e.length,c=l.getValidClasses();d--;){n=(t=e[d]).attr("class").split(" ");r="";for(i=0;i<n.length;i++){o=n[i];s=!1;(a=c["*"])&&a[o]&&(s=!0);a=c[t.name];!s&&a&&a[o]&&(s=!0);if(s){r&&(r+=" ");r+=o}}r.length||(r=null);t.attr("class",r)}}))}}));i("tinymce/html/Writer",["tinymce/html/Entities","tinymce/util/Tools"],(function(e,t){var n=t.makeMap;return function(t){var i,o,r,a,s,l=[];i=(t=t||{}).indent;o=n(t.indent_before||"");r=n(t.indent_after||"");a=e.getEncodeFunc(t.entity_encoding||"raw",t.entities);s="html"==t.element_format;return{start:function(e,t,n){var d,c,u,f;i&&o[e]&&l.length>0&&(f=l[l.length-1]).length>0&&"\n"!==f&&l.push("\n");l.push("<",e);if(t)for(d=0,c=t.length;d<c;d++){u=t[d];l.push(" ",u.name,'="',a(u.value,!0),'"')}l[l.length]=!n||s?">":" />";n&&i&&r[e]&&l.length>0&&(f=l[l.length-1]).length>0&&"\n"!==f&&l.push("\n")},end:function(e){var t;l.push("</",e,">");i&&r[e]&&l.length>0&&(t=l[l.length-1]).length>0&&"\n"!==t&&l.push("\n")},text:function(e,t){e.length>0&&(l[l.length]=t?e:a(e))},cdata:function(e){l.push("<![CDATA[",e,"]]>")},comment:function(e){l.push("\x3c!--",e,"--\x3e")},pi:function(e,t){t?l.push("<?",e," ",t,"?>"):l.push("<?",e,"?>");i&&l.push("\n")},doctype:function(e){l.push("<!DOCTYPE",e,">",i?"\n":"")},reset:function(){l.length=0},getContent:function(){return l.join("").replace(/\n$/,"")}}}}));i("tinymce/html/Serializer",["tinymce/html/Writer","tinymce/html/Schema"],(function(e,t){return function(n,i){var o=this,r=new e(n);(n=n||{}).validate=!("validate"in n)||n.validate;o.schema=i=i||new t;o.writer=r;o.serialize=function(e){var t,o;o=n.validate;t={3:function(e){r.text(e.value,e.raw)},8:function(e){r.comment(e.value)},7:function(e){r.pi(e.name,e.value)},10:function(e){r.doctype(e.value)},4:function(e){r.cdata(e.value)},11:function(e){if(e=e.firstChild)do{a(e)}while(e=e.next)}};r.reset();function a(e){var n,s,l,d,c,u,f,h,p,m=t[e.type];if(m)m(e);else{n=e.name;s=e.shortEnded;l=e.attributes;if(o&&l&&l.length>1){(u=[]).map={};for(f=0,h=(p=i.getElementRule(e.name)).attributesOrder.length;f<h;f++)if((d=p.attributesOrder[f])in l.map){c=l.map[d];u.map[d]=c;u.push({name:d,value:c})}for(f=0,h=l.length;f<h;f++)if(!((d=l[f].name)in u.map)){c=l.map[d];u.map[d]=c;u.push({name:d,value:c})}l=u}r.start(e.name,l,s);if(!s){if(e=e.firstChild)do{a(e)}while(e=e.next);r.end(n)}}}1!=e.type||n.inner?t[11](e):a(e);return r.getContent()}}}));i("tinymce/dom/Serializer",["tinymce/dom/DOMUtils","tinymce/html/DomParser","tinymce/html/Entities","tinymce/html/Serializer","tinymce/html/Node","tinymce/html/Schema","tinymce/Env","tinymce/util/Tools"],(function(e,t,n,i,o,r,a,s){var l=s.each,d=s.trim,c=e.DOM;return function(e,o){var s,u,f;if(o){s=o.dom;u=o.schema}s=s||c;u=u||new r(e);e.entity_encoding=e.entity_encoding||"named";e.remove_trailing_brs=!("remove_trailing_brs"in e)||e.remove_trailing_brs;(f=new t(e,u)).addAttributeFilter("data-mce-tabindex",(function(e,t){for(var n,i=e.length;i--;){(n=e[i]).attr("tabindex",n.attributes.map["data-mce-tabindex"]);n.attr(t,null)}}));f.addAttributeFilter("src,href,style",(function(t,n){for(var i,o,r=t.length,a="data-mce-"+n,l=e.url_converter,d=e.url_converter_scope;r--;)if(undefined!==(o=(i=t[r]).attributes.map[a])){i.attr(n,o.length>0?o:null);i.attr(a,null)}else{o=i.attributes.map[n];"style"===n?o=s.serializeStyle(s.parseStyle(o),i.name):l&&(o=l.call(d,o,n,i.name));i.attr(n,o.length>0?o:null)}}));f.addAttributeFilter("class",(function(e){for(var t,n,i=e.length;i--;)if(n=(t=e[i]).attr("class")){n=t.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,"");t.attr("class",n.length>0?n:null)}}));f.addAttributeFilter("data-mce-type",(function(e,t,n){for(var i,o=e.length;o--;)"bookmark"!==(i=e[o]).attributes.map["data-mce-type"]||n.cleanup||i.remove()}));f.addNodeFilter("noscript",(function(e){for(var t,i=e.length;i--;)(t=e[i].firstChild)&&(t.value=n.decode(t.value))}));f.addNodeFilter("script,style",(function(e,t){var n,i,o,r=e.length;function a(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")}for(;r--;){i=(n=e[r]).firstChild?n.firstChild.value:"";if("script"===t){(o=n.attr("type"))&&n.attr("type","mce-no/type"==o?null:o.replace(/^mce\-/,""));i.length>0&&(n.firstChild.value="// <![CDATA[\n"+a(i)+"\n// ]]>")}else i.length>0&&(n.firstChild.value="\x3c!--\n"+a(i)+"\n--\x3e")}}));f.addNodeFilter("#comment",(function(e){for(var t,n=e.length;n--;)if(0===(t=e[n]).value.indexOf("[CDATA[")){t.name="#cdata";t.type=4;t.value=t.value.replace(/^\[CDATA\[|\]\]$/g,"")
}else if(0===t.value.indexOf("mce:protected ")){t.name="#text";t.type=3;t.raw=!0;t.value=unescape(t.value).substr(14)}}));f.addNodeFilter("xml:namespace,input",(function(e,t){for(var n,i=e.length;i--;)7===(n=e[i]).type?n.remove():1===n.type&&("input"!==t||"type"in n.attributes.map||n.attr("type","text"))}));e.fix_list_elements&&f.addNodeFilter("ul,ol",(function(e){for(var t,n,i=e.length;i--;)"ul"!==(n=(t=e[i]).parent).name&&"ol"!==n.name||t.prev&&"li"===t.prev.name&&t.prev.append(t)}));f.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize",(function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}));return{schema:u,addNodeFilter:f.addNodeFilter,addAttributeFilter:f.addAttributeFilter,serialize:function(t,n){var o,r,c,h,p;if(a.ie&&s.select("script,style,select,map").length>0){p=t.innerHTML;t=t.cloneNode(!1);s.setHTML(t,p)}else t=t.cloneNode(!0);if((o=document.implementation).createHTMLDocument){r=o.createHTMLDocument("");l("BODY"==t.nodeName?t.childNodes:[t],(function(e){r.body.appendChild(r.importNode(e,!0))}));t="BODY"!=t.nodeName?r.body.firstChild:r.body;c=s.doc;s.doc=r}(n=n||{}).format=n.format||"html";n.selection&&(n.forced_root_block="");if(!n.no_events){n.node=t;this.onPreProcess(n)}h=new i(e,u);n.content=h.serialize(f.parse(d(n.getInner?t.innerHTML:s.getOuterHTML(t)),n));n.cleanup||(n.content=n.content.replace(/\uFEFF/g,""));n.no_events||this.onPostProcess(n);c&&(s.doc=c);n.node=null;return n.content},addRules:function(e){u.addValidElements(e)},setRules:function(e){u.setValidElements(e)},onPreProcess:function(e){o&&o.fire("PreProcess",e)},onPostProcess:function(e){o&&o.fire("PostProcess",e)}}}}));i("tinymce/dom/TridentSelection",[],(function(){return function(e){var t=this,n=e.dom;function i(t,n){var i,o,r,a,s,l,d,c,u=0,f=-1;(i=t.duplicate()).collapse(n);if((c=i.parentElement()).ownerDocument!==e.dom.doc)return;for(;"false"===c.contentEditable;)c=c.parentNode;if(!c.hasChildNodes())return{node:c,inside:1};o=(a=c.children).length-1;for(;u<=o;){s=a[d=Math.floor((u+o)/2)];i.moveToElementText(s);if((f=i.compareEndPoints(n?"StartToStart":"EndToEnd",t))>0)o=d-1;else{if(!(f<0))return{node:s};u=d+1}}if(f<0){if(s)i.collapse(!1);else{i.moveToElementText(c);i.collapse(!0);s=c;r=!0}l=0;for(;0!==i.compareEndPoints(n?"StartToStart":"StartToEnd",t)&&0!==i.move("character",1)&&c==i.parentElement();)l++}else{i.collapse(!0);l=0;for(;0!==i.compareEndPoints(n?"StartToStart":"StartToEnd",t)&&0!==i.move("character",-1)&&c==i.parentElement();)l++}return{node:s,position:f,offset:l,inside:r}}this.getBookmark=function(t){var o=e.getRng(),r={};function a(e){var t,i,o,r,a=[];t=e.parentNode;i=n.getRoot().parentNode;for(;t!=i&&9!==t.nodeType;){r=(o=t.children).length;for(;r--;)if(e===o[r]){a.push(r);break}e=t;t=t.parentNode}return a}function s(e){var t;if(t=i(o,e))return{position:t.position,offset:t.offset,indexes:a(t.node),inside:t.inside}}if(2===t)if(o.item)r.start={ctrl:!0,indexes:a(o.item(0))};else{r.start=s(!0);e.isCollapsed()||(r.end=s())}return r};this.moveToBookmark=function(e){var t,i=n.doc.body;function o(e){var t,i,o,r;t=n.getRoot();for(i=e.length-1;i>=0;i--){r=t.children;(o=e[i])<=r.length-1&&(t=r[o])}return t}function r(n){var r,a,s,l=e[n?"start":"end"];if(l){r=l.position>0;(a=i.createTextRange()).moveToElementText(o(l.indexes));if(undefined!==(s=l.offset)){a.collapse(l.inside||r);a.moveStart("character",r?-s:s)}else a.collapse(n);t.setEndPoint(n?"StartToStart":"EndToStart",a);n&&t.collapse(!0)}}if(e.start)if(e.start.ctrl){(t=i.createControlRange()).addElement(o(e.start.indexes));t.select()}else{t=i.createTextRange();r(!0);r();t.select()}};this.addRange=function(t){var i,o,r,a,s,l,d,c,u,f=e.dom.doc,h=f.body;function p(e){var t,o,d,c,u;d=n.create("a");t=e?r:s;o=e?a:l;c=i.duplicate();if(t==f||t==f.documentElement){t=h;o=0}if(3==t.nodeType){t.parentNode.insertBefore(d,t);c.moveToElementText(d);c.moveStart("character",o);n.remove(d);i.setEndPoint(e?"StartToStart":"EndToEnd",c)}else{if((u=t.childNodes).length){o>=u.length?n.insertAfter(d,u[u.length-1]):t.insertBefore(d,u[o]);c.moveToElementText(d)}else if(t.canHaveHTML){t.innerHTML="<span>&#xFEFF;</span>";d=t.firstChild;c.moveToElementText(d);c.collapse(false)}i.setEndPoint(e?"StartToStart":"EndToEnd",c);n.remove(d)}}r=t.startContainer;a=t.startOffset;s=t.endContainer;l=t.endOffset;i=h.createTextRange();if(r==s&&1==r.nodeType){if(a==l&&!r.hasChildNodes()){if(r.canHaveHTML){(d=r.previousSibling)&&!d.hasChildNodes()&&n.isBlock(d)?d.innerHTML="&#xFEFF;":d=null;r.innerHTML="<span>&#xFEFF;</span><span>&#xFEFF;</span>";i.moveToElementText(r.lastChild);i.select();n.doc.selection.clear();r.innerHTML="";d&&(d.innerHTML="");return}a=n.nodeIndex(r);r=r.parentNode}if(a==l-1)try{u=r.childNodes[a];(o=h.createControlRange()).addElement(u);o.select();if((c=e.getRng()).item&&u===c.item(0))return}catch(e){}}p(!0);p();i.select()};this.getRangeAt=function(){var o,r,a,s,l,d=e.getRng(),c=n.createRng();if((o=d.item?d.item(0):d.parentElement()).ownerDocument!=n.doc)return c;r=e.isCollapsed();if(d.item){c.setStart(o.parentNode,n.nodeIndex(o));c.setEnd(c.startContainer,c.startOffset+1);return c}function u(e){var t,n,o,r,a=i(d,e),s=0;t=a.node;n=a.offset;if(a.inside&&!t.hasChildNodes()){c[e?"setStart":"setEnd"](t,0);return}if(undefined===n){c[e?"setStartBefore":"setEndAfter"](t);return}if(a.position<0){if(!(o=a.inside?t.firstChild:t.nextSibling)){c[e?"setStartAfter":"setEndAfter"](t);return}if(!n){3==o.nodeType?c[e?"setStart":"setEnd"](o,0):c[e?"setStartBefore":"setEndBefore"](o);return}for(;o;){if(3==o.nodeType&&(s+=(r=o.nodeValue).length)>=n){t=o;s-=n;s=r.length-s;break}o=o.nextSibling}}else{if(!(o=t.previousSibling))return c[e?"setStartBefore":"setEndBefore"](t);if(!n){3==t.nodeType?c[e?"setStart":"setEnd"](o,t.nodeValue.length):c[e?"setStartAfter":"setEndAfter"](o);return}for(;o;){if(3==o.nodeType&&(s+=o.nodeValue.length)>=n){t=o;s-=n;break}o=o.previousSibling}}c[e?"setStart":"setEnd"](t,s)}try{u(!0);r||u()}catch(n){if(-2147024809!=n.number)throw n;l=t.getBookmark(2);(a=d.duplicate()).collapse(!0);o=a.parentElement();if(!r){(a=d.duplicate()).collapse(!1);(s=a.parentElement()).innerHTML=s.innerHTML}o.innerHTML=o.innerHTML;t.moveToBookmark(l);d=e.getRng();u(!0);r||u()}return c}}}));i("tinymce/util/VK",["tinymce/Env"],(function(e){return{BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey||this.metaKeyPressed(e)},metaKeyPressed:function(t){return e.mac?t.metaKey:t.ctrlKey&&!t.altKey}}}));i("tinymce/dom/ControlSelection",["tinymce/util/VK","tinymce/util/Tools","tinymce/Env"],(function(e,t,n){return function(i,o){var r,a,s,l,d,c,u,f,h,p,m,g,y,v,C,b,_,S,N=o.dom,E=t.each,A=o.getDoc(),w=document,x=n.ie&&n.ie<11,T=Math.abs,I=Math.round,D=o.getBody();l={n:[.5,0,0,-1],e:[1,.5,1,0],s:[.5,1,0,1],w:[0,.5,-1,0],nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};var k=".mce-content-body";o.contentStyles.push(k+" div.mce-resizehandle {position: absolute;border: 1px solid black;background: #FFF;width: 5px;height: 5px;z-index: 10000}"+k+" .mce-resizehandle:hover {background: #000}"+k+" img[data-mce-selected], hr[data-mce-selected] {outline: 1px solid black;resize: none}"+k+" .mce-clonedresizable {position: absolute;"+(n.gecko?"":"outline: 1px dashed black;")+"opacity: .5;filter: alpha(opacity=50);z-index: 10000}"+k+" .mce-resize-helper {background: #555;background: rgba(0,0,0,0.75);border-radius: 3px;border: 1px;color: white;display: none;font-family: sans-serif;font-size: 12px;white-space: nowrap;line-height: 14px;margin: 5px 10px;padding: 5px;position: absolute;z-index: 10001}");function M(e){var t=o.settings.object_resizing;if(!1===t||n.iOS)return!1;"string"!=typeof t&&(t="table,img,div");if("false"===e.getAttribute("data-mce-resize"))return!1;return o.dom.is(e,t)}function R(t){var n,i,l,c,E;n=t.screenX-u;i=t.screenY-f;C=n*d[2]+m;b=i*d[3]+g;C=C<5?5:C;b=b<5?5:b;if(l="IMG"==r.nodeName&&!1!==o.settings.resize_img_proportional?!e.modifierPressed(t):e.modifierPressed(t)||"IMG"==r.nodeName&&d[2]*d[3]!=0)if(T(n)>T(i)){b=I(C*y);C=I(b/y)}else{C=I(b/y);b=I(C*y)}N.setStyles(a,{
width:C,height:b});c=(c=d.startPos.x+n)>0?c:0;E=(E=d.startPos.y+i)>0?E:0;N.setStyles(s,{left:c,top:E,display:"block"});s.innerHTML=C+" &times; "+b;d[2]<0&&a.clientWidth<=C&&N.setStyle(a,"left",h+(m-C));d[3]<0&&a.clientHeight<=b&&N.setStyle(a,"top",p+(g-b));(n=D.scrollWidth-_)+(i=D.scrollHeight-S)!==0&&N.setStyles(s,{left:c-n,top:E-i});if(!v){o.fire("ObjectResizeStart",{target:r,width:m,height:g});v=!0}}function H(){v=!1;function e(e,t){t&&(r.style[e]||!o.schema.isValid(r.nodeName.toLowerCase(),e)?N.setStyle(r,e,t):N.setAttrib(r,e,t))}e("width",C);e("height",b);N.unbind(A,"mousemove",R);N.unbind(A,"mouseup",H);if(w!=A){N.unbind(w,"mousemove",R);N.unbind(w,"mouseup",H)}N.remove(a);N.remove(s);x&&"TABLE"!=r.nodeName||O(r);o.fire("ObjectResized",{target:r,width:C,height:b});N.setAttrib(r,"style",N.getAttrib(r,"style"));o.nodeChanged()}function O(e,t,i){var c,v,x,T,I;$();c=N.getPos(e,D);h=c.x;p=c.y;I=e.getBoundingClientRect();v=I.width||I.right-I.left;x=I.height||I.bottom-I.top;if(r!=e){W();r=e;C=b=0}T=o.fire("ObjectSelected",{target:e});M(e)&&!T.isDefaultPrevented()?E(l,(function(e,o){var l,c;function C(t){u=t.screenX;f=t.screenY;m=r.clientWidth;g=r.clientHeight;y=g/m;d=e;e.startPos={x:v*e[0]+h,y:x*e[1]+p};_=D.scrollWidth;S=D.scrollHeight;a=r.cloneNode(!0);N.addClass(a,"mce-clonedresizable");N.setAttrib(a,"data-mce-bogus","all");a.contentEditable=!1;a.unSelectabe=!0;N.setStyles(a,{left:h,top:p,margin:0});a.removeAttribute("data-mce-selected");D.appendChild(a);N.bind(A,"mousemove",R);N.bind(A,"mouseup",H);if(w!=A){N.bind(w,"mousemove",R);N.bind(w,"mouseup",H)}s=N.add(D,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},m+" &times; "+g)}if(t){o==t&&C(i);return}if(l=N.get("mceResizeHandle"+o))N.show(l);else{c=D;l=N.add(c,"div",{id:"mceResizeHandle"+o,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+o+"-resize; margin:0; padding:0"});n.ie&&(l.contentEditable=!1)}if(!e.elm){N.bind(l,"mousedown",(function(e){e.stopImmediatePropagation();e.preventDefault();C(e)}));e.elm=l}N.setStyles(l,{left:v*e[0]+h-l.offsetWidth/2,top:x*e[1]+p-l.offsetHeight/2})})):L();r.setAttribute("data-mce-selected","1")}function L(){var e,t;$();r&&r.removeAttribute("data-mce-selected");for(e in l)if(t=N.get("mceResizeHandle"+e)){N.unbind(t);N.remove(t)}}function P(e){var t,n;function o(e,t){if(e)do{if(e===t)return!0}while(e=e.parentNode)}if(v)return;E(N.select("img[data-mce-selected],hr[data-mce-selected]"),(function(e){e.removeAttribute("data-mce-selected")}));n="mousedown"==e.type?e.target:i.getNode();if(o(n=N.$(n).closest(x?"table":"table,img,hr")[0],D)){z();if(o(t=i.getStart(!0),n)&&o(i.getEnd(!0),n)&&(!x||n!=t&&"IMG"!==t.nodeName)){O(n);return}}L()}function B(e,t,n){e&&e.attachEvent&&e.attachEvent("on"+t,n)}function F(e,t,n){e&&e.detachEvent&&e.detachEvent("on"+t,n)}function G(e){var t,n,i,a,s,u,f,h=e.srcElement;t=h.getBoundingClientRect();u=c.clientX-t.left;f=c.clientY-t.top;for(n in l){i=l[n];a=h.offsetWidth*i[0];s=h.offsetHeight*i[1];if(T(a-u)<8&&T(s-f)<8){d=i;break}}v=!0;o.fire("ObjectResizeStart",{target:r,width:r.clientWidth,height:r.clientHeight});o.getDoc().selection.empty();O(h,n,c)}function U(e){var t=e.srcElement;if(t!=r){o.fire("ObjectSelected",{target:t});W();if(0===t.id.indexOf("mceResizeHandle")){e.returnValue=!1;return}if("IMG"==t.nodeName||"TABLE"==t.nodeName){L();r=t;B(t,"resizestart",G)}}}function W(){F(r,"resizestart",G)}function $(){for(var e in l){var t=l[e];if(t.elm){N.unbind(t.elm);delete t.elm}}}function z(){try{o.getDoc().execCommand("enableObjectResizing",!1,!1)}catch(e){}}function V(e){var t;if(!x)return;t=A.body.createControlRange();try{t.addElement(e);t.select();return!0}catch(e){}}o.on("init",(function(){if(x){o.on("ObjectResized",(function(e){if("TABLE"!=e.target.nodeName){L();V(e.target)}}));B(D,"controlselect",U);o.on("mousedown",(function(e){c=e}))}else{z();if(n.ie>=11){o.on("mouseup",(function(e){var t=e.target.nodeName;if(!v&&/^(TABLE|IMG|HR)$/.test(t)){o.selection.select(e.target,"TABLE"==t);o.nodeChanged()}}));o.dom.bind(D,"mscontrolselect",(function(e){if(/^(TABLE|IMG|HR)$/.test(e.target.nodeName)){e.preventDefault();"IMG"==e.target.tagName&&window.setTimeout((function(){o.selection.select(e.target)}),0)}}))}}o.on("nodechange ResizeEditor",P);o.on("keydown keyup",(function(e){r&&"TABLE"==r.nodeName&&P(e)}));o.on("hide",L)}));o.on("remove",$);return{isResizable:M,showResizeRect:O,hideResizeRect:L,updateResizeRect:P,controlSelect:V,destroy:function(){r=a=null;if(x){W();F(D,"controlselect",U)}}}}}));i("tinymce/dom/BookmarkManager",["tinymce/Env","tinymce/util/Tools"],(function(e,t){function n(n){var i=n.dom;this.getBookmark=function(e,o){var r,a,s,l,d,c,u,f="&#xFEFF;";function h(e,n){var o=0;t.each(i.select(e),(function(e,t){e==n&&(o=t)}));return o}function p(e){function t(t){var n,i,o,r=t?"start":"end";n=e[r+"Container"];i=e[r+"Offset"];if(1==n.nodeType&&"TR"==n.nodeName&&(n=(o=n.childNodes)[Math.min(t?i:i-1,o.length-1)])){i=t?0:n.childNodes.length;e["set"+(t?"Start":"End")](n,i)}}t(!0);t();return e}if(2==e){if("IMG"==(d=(c=n.getNode())?c.nodeName:null))return{name:d,index:h(d,c)};if(n.tridentSel)return n.tridentSel.getBookmark(e);return function(){var e=n.getRng(!0),t=i.getRoot(),r={};function a(e,n){var r,a,s=e[n?"startContainer":"endContainer"],l=e[n?"startOffset":"endOffset"],d=[],c=0;if(3==s.nodeType){if(o)for(r=s.previousSibling;r&&3==r.nodeType;r=r.previousSibling)l+=r.nodeValue.length;d.push(l)}else{if(l>=(a=s.childNodes).length&&a.length){c=1;l=Math.max(0,a.length-1)}d.push(i.nodeIndex(a[l],o)+c)}for(;s&&s!=t;s=s.parentNode)d.push(i.nodeIndex(s,o));return d}r.start=a(e,!0);n.isCollapsed()||(r.end=a(e));return r}()}if(e)return{rng:n.getRng()};r=n.getRng();s=i.uniqueId();l=n.isCollapsed();u="overflow:hidden;line-height:0px";if(r.duplicate||r.item){if(r.item)return{name:d=(c=r.item(0)).nodeName,index:h(d,c)};a=r.duplicate();try{r.collapse();r.pasteHTML('<span data-mce-type="bookmark" id="'+s+'_start" style="'+u+'">'+f+"</span>");if(!l){a.collapse(!1);r.moveToElementText(a.parentElement());0===r.compareEndPoints("StartToEnd",a)&&a.move("character",-1);a.pasteHTML('<span data-mce-type="bookmark" id="'+s+'_end" style="'+u+'">'+f+"</span>")}}catch(e){return null}}else{if("IMG"==(d=(c=n.getNode()).nodeName))return{name:d,index:h(d,c)};a=p(r.cloneRange());if(!l){a.collapse(!1);a.insertNode(i.create("span",{"data-mce-type":"bookmark",id:s+"_end",style:u},f))}(r=p(r)).collapse(!0);r.insertNode(i.create("span",{"data-mce-type":"bookmark",id:s+"_start",style:u},f))}n.moveToBookmark({id:s,keep:1});return{id:s}};this.moveToBookmark=function(o){var r,a,s,l,d,c;function u(e){var t,n,i,s,l=o[e?"start":"end"];if(l){i=l[0];for(n=a,t=l.length-1;t>=1;t--){s=n.childNodes;if(l[t]>s.length-1)return;n=s[l[t]]}3===n.nodeType&&(i=Math.min(l[0],n.nodeValue.length));1===n.nodeType&&(i=Math.min(l[0],n.childNodes.length));e?r.setStart(n,i):r.setEnd(n,i)}return!0}function f(n){var r,a,u,f,h=i.get(o.id+"_"+n),p=o.keep;if(h){r=h.parentNode;if("start"==n){if(p){r=h.firstChild;a=1}else a=i.nodeIndex(h);s=l=r;d=c=a}else{if(p){r=h.firstChild;a=1}else a=i.nodeIndex(h);l=r;c=a}if(!p){f=h.previousSibling;u=h.nextSibling;t.each(t.grep(h.childNodes),(function(e){3==e.nodeType&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))}));for(;h=i.get(o.id+"_"+n);)i.remove(h,1);if(f&&u&&f.nodeType==u.nodeType&&3==f.nodeType&&!e.opera){a=f.nodeValue.length;f.appendData(u.nodeValue);i.remove(u);if("start"==n){s=l=f;d=c=a}else{l=f;c=a}}}}}function h(t){!i.isBlock(t)||t.innerHTML||e.ie||(t.innerHTML='<br data-mce-bogus="1" />');return t}if(o)if(o.start){r=i.createRng();a=i.getRoot();if(n.tridentSel)return n.tridentSel.moveToBookmark(o);u(!0)&&u()&&n.setRng(r)}else if(o.id){f("start");f("end");if(s){(r=i.createRng()).setStart(h(s),d);r.setEnd(h(l),c);n.setRng(r)}}else o.name?n.select(i.select(o.name)[o.index]):o.rng&&n.setRng(o.rng)}}n.isBookmarkNode=function(e){return e&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")};return n}))
;i("tinymce/dom/Selection",["tinymce/dom/TreeWalker","tinymce/dom/TridentSelection","tinymce/dom/ControlSelection","tinymce/dom/RangeUtils","tinymce/dom/BookmarkManager","tinymce/Env","tinymce/util/Tools"],(function(e,n,i,o,r,a,s){var l=s.each,d=s.trim,c=a.ie;function u(e,t,o,a){var s=this;s.dom=e;s.win=t;s.serializer=o;s.editor=a;s.bookmarkManager=new r(s);s.controlSelection=new i(s,a);s.win.getSelection||(s.tridentSel=new n(s))}u.prototype={setCursorLocation:function(e,t){var n=this,i=n.dom.createRng();if(e){i.setStart(e,t);i.setEnd(e,t);n.setRng(i);n.collapse(!1)}else{n._moveEndPoint(i,n.editor.getBody(),!0);n.setRng(i)}},getContent:function(e){var n,i,o,r=this,a=r.getRng(),s=r.dom.create("body"),l=r.getSel();n=i="";(e=e||{}).get=!0;e.format=e.format||"html";e.selection=!0;r.editor.fire("BeforeGetContent",e);if("text"==e.format)return r.isCollapsed()?"":a.text||(l.toString?l.toString():"");if(a.cloneContents)(o=a.cloneContents())&&s.appendChild(o);else if(a.item!==t||a.htmlText!==t){s.innerHTML="<br>"+(a.item?a.item(0).outerHTML:a.htmlText);s.removeChild(s.firstChild)}else s.innerHTML=a.toString();/^\s/.test(s.innerHTML)&&(n=" ");/\s+$/.test(s.innerHTML)&&(i=" ");e.getInner=!0;e.content=r.isCollapsed()?"":n+r.serializer.serialize(s,e)+i;r.editor.fire("GetContent",e);return e.content},setContent:function(e,t){var n,i,o,r=this,a=r.getRng(),s=r.win.document;(t=t||{format:"html"}).set=!0;t.selection=!0;e=t.content=e;t.no_events||r.editor.fire("BeforeSetContent",t);e=t.content;if(a.insertNode){e+='<span id="__caret">_</span>';if(a.startContainer==s&&a.endContainer==s)s.body.innerHTML=e;else{a.deleteContents();if(0===s.body.childNodes.length)s.body.innerHTML=e;else if(a.createContextualFragment)a.insertNode(a.createContextualFragment(e));else{i=s.createDocumentFragment();o=s.createElement("div");i.appendChild(o);o.outerHTML=e;a.insertNode(i)}}n=r.dom.get("__caret");(a=s.createRange()).setStartBefore(n);a.setEndBefore(n);r.setRng(a);r.dom.remove("__caret");try{r.setRng(a)}catch(e){}}else{if(a.item){s.execCommand("Delete",!1,null);a=r.getRng()}if(/^\s+/.test(e)){a.pasteHTML('<span id="__mce_tmp">_</span>'+e);r.dom.remove("__mce_tmp")}else a.pasteHTML(e)}t.no_events||r.editor.fire("SetContent",t)},getStart:function(e){var t,n,i,o,r=this,a=r.getRng();if(a.duplicate||a.item){if(a.item)return a.item(0);(i=a.duplicate()).collapse(1);(t=i.parentElement()).ownerDocument!==r.dom.doc&&(t=r.dom.getRoot());n=o=a.parentElement();for(;o=o.parentNode;)if(o==t){t=n;break}return t}1==(t=a.startContainer).nodeType&&t.hasChildNodes()&&(e&&a.collapsed||(t=t.childNodes[Math.min(t.childNodes.length-1,a.startOffset)]));if(t&&3==t.nodeType)return t.parentNode;return t},getEnd:function(e){var t,n,i=this,o=i.getRng();if(o.duplicate||o.item){if(o.item)return o.item(0);(o=o.duplicate()).collapse(0);(t=o.parentElement()).ownerDocument!==i.dom.doc&&(t=i.dom.getRoot());if(t&&"BODY"==t.nodeName)return t.lastChild||t;return t}t=o.endContainer;n=o.endOffset;1==t.nodeType&&t.hasChildNodes()&&(e&&o.collapsed||(t=t.childNodes[n>0?n-1:n]));if(t&&3==t.nodeType)return t.parentNode;return t},getBookmark:function(e,t){return this.bookmarkManager.getBookmark(e,t)},moveToBookmark:function(e){return this.bookmarkManager.moveToBookmark(e)},select:function(e,t){var n,i=this,o=i.dom,r=o.createRng();i.lastFocusBookmark=null;if(e){if(!t&&i.controlSelection.controlSelect(e))return;n=o.nodeIndex(e);r.setStart(e.parentNode,n);r.setEnd(e.parentNode,n+1);if(t){i._moveEndPoint(r,e,!0);i._moveEndPoint(r,e)}i.setRng(r)}return e},isCollapsed:function(){var e=this.getRng(),t=this.getSel();if(!e||e.item)return!1;if(e.compareEndPoints)return 0===e.compareEndPoints("StartToEnd",e);return!t||e.collapsed},collapse:function(e){var t,n=this,i=n.getRng();if(i.item){t=i.item(0);(i=n.win.document.body.createTextRange()).moveToElementText(t)}i.collapse(!!e);n.setRng(i)},getSel:function(){var e=this.win;return e.getSelection?e.getSelection():e.document.selection},getRng:function(e){var t,n,i,o,r=this,a=r.win.document;function s(e,t,n){try{return t.compareBoundaryPoints(e,n)}catch(e){return-1}}if(!e&&r.lastFocusBookmark){var l=r.lastFocusBookmark;if(l.startContainer){(n=a.createRange()).setStart(l.startContainer,l.startOffset);n.setEnd(l.endContainer,l.endOffset)}else n=l;return n}if(e&&r.tridentSel)return r.tridentSel.getRangeAt(0);try{(t=r.getSel())&&(n=t.rangeCount>0?t.getRangeAt(0):t.createRange?t.createRange():a.createRange())}catch(e){}if(c&&n&&n.setStart&&a.selection){try{o=a.selection.createRange()}catch(e){}if(o&&o.item){i=o.item(0);(n=a.createRange()).setStartBefore(i);n.setEndAfter(i)}}n||(n=a.createRange?a.createRange():a.body.createTextRange());if(n.setStart&&9===n.startContainer.nodeType&&n.collapsed){i=r.dom.getRoot();n.setStart(i,0);n.setEnd(i,0)}if(r.selectedRange&&r.explicitRange)if(0===s(n.START_TO_START,n,r.selectedRange)&&0===s(n.END_TO_END,n,r.selectedRange))n=r.explicitRange;else{r.selectedRange=null;r.explicitRange=null}return n},setRng:function(e,t){var n,i=this;if(!e)return;if(e.select){try{e.select()}catch(e){}return}if(i.tridentSel){if(e.cloneRange)try{i.tridentSel.addRange(e);return}catch(e){}}else if(n=i.getSel()){i.explicitRange=e;try{n.removeAllRanges();n.addRange(e)}catch(e){}if(!1===t&&n.extend){n.collapse(e.endContainer,e.endOffset);n.extend(e.startContainer,e.startOffset)}i.selectedRange=n.rangeCount>0?n.getRangeAt(0):null}},setNode:function(e){this.setContent(this.dom.getOuterHTML(e));return e},getNode:function(){var e,t=this,n=t.getRng(),i=n.startContainer,o=n.endContainer,r=n.startOffset,a=n.endOffset,s=t.dom.getRoot();function l(e,t){for(var n=e;e&&3===e.nodeType&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n}if(!n)return s;if(n.setStart){e=n.commonAncestorContainer;if(!n.collapsed){i==o&&a-r<2&&i.hasChildNodes()&&(e=i.childNodes[r]);if(3===i.nodeType&&3===o.nodeType){i=i.length===r?l(i.nextSibling,!0):i.parentNode;o=0===a?l(o.previousSibling,!1):o.parentNode;if(i&&i===o)return i}}if(e&&3==e.nodeType)return e.parentNode;return e}(e=n.item?n.item(0):n.parentElement()).ownerDocument!==t.win.document&&(e=s);return e},getSelectedBlocks:function(t,n){var i,o,r=this,a=r.dom,s=[];o=a.getRoot();t=a.getParent(t||r.getStart(),a.isBlock);n=a.getParent(n||r.getEnd(),a.isBlock);t&&t!=o&&s.push(t);if(t&&n&&t!=n){i=t;for(var l=new e(t,o);(i=l.next())&&i!=n;)a.isBlock(i)&&s.push(i)}n&&t!=n&&n!=o&&s.push(n);return s},isForward:function(){var e,t,n=this.dom,i=this.getSel();if(!i||!i.anchorNode||!i.focusNode)return!0;(e=n.createRng()).setStart(i.anchorNode,i.anchorOffset);e.collapse(!0);(t=n.createRng()).setStart(i.focusNode,i.focusOffset);t.collapse(!0);return e.compareBoundaryPoints(e.START_TO_START,t)<=0},normalize:function(){var e=this,t=e.getRng();a.range&&new o(e.dom).normalize(t)&&e.setRng(t,e.isForward());return t},selectorChanged:function(e,t){var n,i=this;if(!i.selectorChangedData){i.selectorChangedData={};n={};i.editor.on("NodeChange",(function(e){var t=e.element,o=i.dom,r=o.getParents(t,null,o.getRoot()),a={};l(i.selectorChangedData,(function(e,t){l(r,(function(i){if(o.is(i,t)){if(!n[t]){l(e,(function(e){e(!0,{node:i,selector:t,parents:r})}));n[t]=e}a[t]=e;return!1}}))}));l(n,(function(e,i){if(!a[i]){delete n[i];l(e,(function(e){e(!1,{node:t,selector:i,parents:r})}))}}))}))}i.selectorChangedData[e]||(i.selectorChangedData[e]=[]);i.selectorChangedData[e].push(t);return i},getScrollContainer:function(){for(var e,t=this.dom.getRoot();t&&"BODY"!=t.nodeName;){if(t.scrollHeight>t.clientHeight){e=t;break}t=t.parentNode}return e},scrollIntoView:function(e){var t,n,i,o,r=this,a=r.dom;function s(e){for(var t=0,n=0,i=e;i&&i.nodeType;){t+=i.offsetLeft||0;n+=i.offsetTop||0;i=i.offsetParent}return{x:t,y:n}}if("BODY"!=a.getRoot().nodeName){var l=r.getScrollContainer();if(l){t=s(e).y-s(l).y;o=l.clientHeight;(t<(i=l.scrollTop)||t+25>i+o)&&(l.scrollTop=t<i?t:t-o+25);return}}n=a.getViewPort(r.editor.getWin());t=a.getPos(e).y;i=n.y;o=n.h;(t<n.y||t+25>i+o)&&r.editor.getWin().scrollTo(0,t<i?t:t-o+25)},placeCaretAt:function(e,t){var n,i,o=this.editor.getDoc();if(o.caretPositionFromPoint){i=o.caretPositionFromPoint(e,t);(n=o.createRange()).setStart(i.offsetNode,i.offset);n.collapse(!0)
}else if(o.caretRangeFromPoint)n=o.caretRangeFromPoint(e,t);else if(o.body.createTextRange){n=o.body.createTextRange();try{n.moveToPoint(e,t);n.collapse(!0)}catch(e){n.collapse(t<o.body.clientHeight)}}this.setRng(n)},_moveEndPoint:function(t,n,i){var o=n,r=new e(n,o),s=this.dom.schema.getNonEmptyElements();do{if(3==n.nodeType&&0!==d(n.nodeValue).length){i?t.setStart(n,0):t.setEnd(n,n.nodeValue.length);return}if(s[n.nodeName]&&!/^(TD|TH)$/.test(n.nodeName)){i?t.setStartBefore(n):"BR"==n.nodeName?t.setEndBefore(n):t.setEndAfter(n);return}if(a.ie&&a.ie<11&&this.dom.isBlock(n)&&this.dom.isEmpty(n)){i?t.setStart(n,0):t.setEnd(n,0);return}}while(n=i?r.next():r.prev());"BODY"==o.nodeName&&(i?t.setStart(o,0):t.setEnd(o,o.childNodes.length))},destroy:function(){this.win=null;this.controlSelection.destroy()}};return u}));i("tinymce/dom/ElementUtils",["tinymce/dom/BookmarkManager","tinymce/util/Tools"],(function(e,t){var n=t.each;return function(t){this.compare=function(i,o){if(i.nodeName!=o.nodeName)return!1;function r(e){var i={};n(t.getAttribs(e),(function(n){var o=n.nodeName.toLowerCase();0!==o.indexOf("_")&&"style"!==o&&"data-mce-style"!==o&&(i[o]=t.getAttrib(e,o))}));return i}function a(e,t){var n,i;for(i in e)if(e.hasOwnProperty(i)){if(void 0===(n=t[i]))return!1;if(e[i]!=n)return!1;delete t[i]}for(i in t)if(t.hasOwnProperty(i))return!1;return!0}if(!a(r(i),r(o)))return!1;if(!a(t.parseStyle(t.getAttrib(i,"style")),t.parseStyle(t.getAttrib(o,"style"))))return!1;return!e.isBookmarkNode(i)&&!e.isBookmarkNode(o)}}}));i("tinymce/fmt/Preview",["tinymce/util/Tools"],(function(e){var t=e.each;return{getCssText:function(e,n){var i,o,r,a,s=e.dom,l="";if(!1===(a=e.settings.preview_styles))return"";a||(a="font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow");function d(e){return e.replace(/%(\w+)/g,"")}if("string"==typeof n){if(!(n=e.formatter.get(n)))return;n=n[0]}i=n.block||n.inline||"span";o=s.create(i);t(n.styles,(function(e,t){(e=d(e))&&s.setStyle(o,t,e)}));t(n.attributes,(function(e,t){(e=d(e))&&s.setAttrib(o,t,e)}));t(n.classes,(function(e){e=d(e);s.hasClass(o,e)||s.addClass(o,e)}));e.fire("PreviewFormats");s.setStyles(o,{position:"absolute",left:-65535});e.getBody().appendChild(o);r=s.getStyle(e.getBody(),"fontSize",!0);r=/px$/.test(r)?parseInt(r,10):0;t(a.split(" "),(function(t){var n=s.getStyle(o,t,!0);if("background-color"==t&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(n)){n=s.getStyle(e.getBody(),t,!0);if("#ffffff"==s.toHex(n).toLowerCase())return}if("color"==t&&"#000000"==s.toHex(n).toLowerCase())return;if("font-size"==t&&/em|%$/.test(n)){if(0===r)return;n=(n=parseFloat(n,10)/(/%$/.test(n)?100:1))*r+"px"}"border"==t&&n&&(l+="padding:0 2px;");l+=t+":"+n+";"}));e.fire("AfterPreviewFormats");s.remove(o);return l}}}));i("tinymce/Formatter",["tinymce/dom/TreeWalker","tinymce/dom/RangeUtils","tinymce/dom/BookmarkManager","tinymce/dom/ElementUtils","tinymce/util/Tools","tinymce/fmt/Preview"],(function(e,t,n,i,o,r){return function(a){var s,l,d,c,u={},f=a.dom,h=a.selection,p=new t(f),m=a.schema.isValidChild,g=f.isBlock,y=a.settings.forced_root_block,v=f.nodeIndex,C="\ufeff",b=/^(src|href|style)$/,_=!1,S=!0,N=f.getContentEditable,E=n.isBookmarkNode,A=o.each,w=o.grep,x=o.walk;function T(e){e.nodeType&&(e=e.nodeName);return!!a.schema.getTextBlockElements()[e.toLowerCase()]}function I(e,t){return f.getParents(e,t,f.getRoot())}function D(e){return 1===e.nodeType&&"_mce_caret"===e.id}function k(e){return e?u[e]:u}function M(e,t){if(e)if("string"!=typeof e)A(e,(function(e,t){M(t,e)}));else{t=t.length?t:[t];A(t,(function(e){e.deep===l&&(e.deep=!e.selector);e.split===l&&(e.split=!e.selector||e.inline);e.remove===l&&e.selector&&!e.inline&&(e.remove="none");if(e.selector&&e.inline){e.mixed=!0;e.block_expand=!0}"string"==typeof e.classes&&(e.classes=e.classes.split(/\s+/))}));u[e]=t}}function R(e){var t;a.dom.getParent(e,(function(e){return(t=a.dom.getStyle(e,"text-decoration"))&&"none"!==t}));return t}function H(e){var t;if(1===e.nodeType&&e.parentNode&&1===e.parentNode.nodeType){t=R(e.parentNode);a.dom.getStyle(e,"color")&&t?a.dom.setStyle(e,"text-decoration",t):a.dom.getStyle(e,"text-decoration")===t&&a.dom.setStyle(e,"text-decoration",null)}}function O(t,n,i){var o,r,s=k(t),l=s[0],d=!i&&h.isCollapsed();function c(e,t){t=t||l;if(e){t.onformat&&t.onformat(e,t,n,i);A(t.styles,(function(t,i){f.setStyle(e,i,$(t,n))}));if(t.styles){var o=f.getAttrib(e,"style");o&&e.setAttribute("data-mce-style",o)}A(t.attributes,(function(t,i){f.setAttrib(e,i,$(t,n))}));A(t.classes,(function(t){t=$(t,n);f.hasClass(e,t)||f.addClass(e,t)}))}}function u(e,i,o){var r,a,u=[],h=!0;r=l.inline||l.block;c(a=f.create(r));p.walk(e,(function(e){var i;A(e,(function e(p){var y,v,C,b,S;S=h;y=p.nodeName.toLowerCase();v=p.parentNode.nodeName.toLowerCase();if(1===p.nodeType&&N(p)){S=h;h="true"===N(p);b=!0}if(G(y,"br")){i=0;l.block&&f.remove(p);return}if(l.wrapper&&P(p,t,n)){i=0;return}if(h&&!b&&l.block&&!l.wrapper&&T(y)&&m(v,r)){c(p=f.rename(p,r));u.push(p);i=0;return}if(l.selector){A(s,(function(e){if("collapsed"in e&&e.collapsed!==d)return;if(f.is(p,e.selector)&&!D(p)){c(p,e);C=!0}}));if(!l.inline||C){i=0;return}}if(!h||b||!m(r,y)||!m(v,r)||!o&&3===p.nodeType&&1===p.nodeValue.length&&65279===p.nodeValue.charCodeAt(0)||D(p)||l.inline&&g(p)){i=0;A(w(p.childNodes),e);b&&(h=S);i=0}else{if(!i){i=f.clone(a,_);p.parentNode.insertBefore(i,p);u.push(i)}i.appendChild(p)}}))}));!0===l.links&&A(u,(function(e){(function e(t){"A"===t.nodeName&&c(t,l);A(w(t.childNodes),e)})(e)}));A(u,(function(e){var i;i=function(e){var t=0;A(e.childNodes,(function(e){z(e)||E(e)||t++}));return t}(e);if((u.length>1||!g(e))&&0===i){f.remove(e,1);return}if(l.inline||l.wrapper){l.exact||1!==i||(e=function(e){var t,n;A(e.childNodes,(function(e){if(1==e.nodeType&&!E(e)&&!D(e)){t=e;return _}}));if(t&&!E(t)&&F(t,l)){c(n=f.clone(t,_));f.replace(n,e,S);f.remove(t,1)}return n||e}(e));A(s,(function(t){A(f.select(t.inline,e),(function(e){if(E(e))return;j(t,n,e,t.exact?e:null)}))}));if(P(e.parentNode,t,n)){f.remove(e,1);e=0;return S}l.merge_with_parents&&f.getParent(e.parentNode,(function(i){if(P(i,t,n)){f.remove(e,1);e=0;return S}}));if(e&&!1!==l.merge_siblings){e=Y(K(e),e);e=Y(e,K(e,S))}}}))}if(l)if(i)if(i.nodeType){(r=f.createRng()).setStartBefore(i);r.setEndAfter(i);u(q(r,s),0,!0)}else u(i,0,!0);else if(d&&l.inline&&!f.select("td.mce-item-selected,th.mce-item-selected").length)X("apply",t,n);else{var v=a.selection.getNode();y||!s[0].defaultBlock||f.getParent(v,f.isBlock)||O(s[0].defaultBlock);a.selection.setRng(function(){var t=a.selection.getRng(),n=t.startContainer,o=t.endContainer;if(n!=o&&0===t.endOffset){var r=function(t,n){var o=new e(n);for(i=o.current();i;i=o.prev())if(i.childNodes.length>1||i==t||"BR"==i.tagName)return i}(n,o),s=3==r.nodeType?r.length:r.childNodes.length;t.setEnd(r,s)}return t}());o=h.getBookmark();u(q(h.getRng(S),s));if(l.styles&&(l.styles.color||l.styles.textDecoration)){x(v,H,"childNodes");H(v)}h.moveToBookmark(o);Q(h.getRng(S));a.nodeChanged()}}function L(e,t,n,i){var o,r,s=k(e),l=s[0],d=!0;function c(e){var n,i,o,r,a;if(1===e.nodeType&&N(e)){r=d;d="true"===N(e);a=!0}n=w(e.childNodes);if(d&&!a)for(i=0,o=s.length;i<o&&!j(s[i],t,e,e);i++);if(l.deep&&n.length){for(i=0,o=n.length;i<o;i++)c(n[i]);a&&(d=r)}}function u(n){return function(e,n,i,o){var r,a,d,c,u,h;if(e){h=e.parentNode;for(r=n.parentNode;r&&r!=h;r=r.parentNode){a=f.clone(r,_);for(u=0;u<s.length;u++)if(j(s[u],t,a,a)){a=0;break}if(a){d&&a.appendChild(d);c||(c=a);d=a}}!o||l.mixed&&g(e)||(n=f.split(e,n));if(d){i.parentNode.insertBefore(d,i);c.appendChild(i)}}return n}(function(n){var o;A(I(n.parentNode).reverse(),(function(n){var r;o||"_start"==n.id||"_end"==n.id||(r=P(n,e,t,i))&&!1!==r.split&&(o=n)}));return o}(n),n,n,!0)}function m(e){var t=f.get(e?"_start":"_end"),n=t[e?"firstChild":"lastChild"];E(n)&&(n=n[e?"firstChild":"lastChild"]);3==n.nodeType&&0===n.data.length&&(n=e?t.previousSibling||t.nextSibling:t.nextSibling||t.previousSibling);f.remove(t,!0);return n}function y(e){var t,n,i=e.commonAncestorContainer;e=q(e,s,S);if(l.split){if((t=J(e,S))!=(n=J(e))){
/^(TR|TH|TD)$/.test(t.nodeName)&&t.firstChild&&(t="TR"==t.nodeName?t.firstChild.firstChild||t:t.firstChild||t);i&&/^T(HEAD|BODY|FOOT|R)$/.test(i.nodeName)&&/^(TH|TD)$/.test(n.nodeName)&&n.firstChild&&(n=n.firstChild||n);t=V(t,"span",{id:"_start","data-mce-type":"bookmark"});n=V(n,"span",{id:"_end","data-mce-type":"bookmark"});u(t);u(n);t=m(S);n=m()}else t=n=u(t);e.startContainer=t.parentNode?t.parentNode:t;e.startOffset=v(t);e.endContainer=n.parentNode?n.parentNode:n;e.endOffset=v(n)+1}p.walk(e,(function(e){A(e,(function(e){c(e);1===e.nodeType&&"underline"===a.dom.getStyle(e,"text-decoration")&&e.parentNode&&"underline"===R(e.parentNode)&&j({deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,e)}))}))}if(n){if(n.nodeType){(r=f.createRng()).setStartBefore(n);r.setEndAfter(n);y(r)}else y(n);return}if(h.isCollapsed()&&l.inline&&!f.select("td.mce-item-selected,th.mce-item-selected").length)X("remove",e,t,i);else{o=h.getBookmark();y(h.getRng(S));h.moveToBookmark(o);l.inline&&B(e,t,h.getStart())&&Q(h.getRng(!0));a.nodeChanged()}}function P(e,t,n,i){var o,r,a,s=k(t);function d(e,t,o){var r,a,s,d=t[o];if(t.onmatch)return t.onmatch(e,t,o);if(d)if(d.length===l){for(r in d)if(d.hasOwnProperty(r)){a="attributes"===o?f.getAttrib(e,r):U(e,r);if(i&&!a&&!t.exact)return;if((!i||t.exact)&&!G(a,W($(d[r],n),r)))return}}else for(s=0;s<d.length;s++)if("attributes"===o?f.getAttrib(e,d[s]):U(e,d[s]))return t;return t}if(s&&e)for(r=0;r<s.length;r++)if(F(e,o=s[r])&&d(e,o,"attributes")&&d(e,o,"styles")){if(a=o.classes)for(r=0;r<a.length;r++)if(!f.hasClass(e,a[r]))return;return o}}function B(e,t,n){var i;function o(n){var i=f.getRoot();if(n===i)return!1;n=f.getParent(n,(function(n){return n.parentNode===i||!!P(n,e,t,!0)}));return P(n,e,t)}if(n)return o(n);if(o(n=h.getNode()))return S;if((i=h.getStart())!=n&&o(i))return S;return _}(0,o.extend)(this,{get:k,register:M,unregister:function(e){e&&u[e]&&delete u[e];return u},apply:O,remove:L,toggle:function(e,t,n){var i=k(e);!B(e,t,n)||"toggle"in i[0]&&!i[0].toggle?O(e,t,n):L(e,t,n)},match:B,matchAll:function(e,t){var n,i=[],o={};n=h.getStart();f.getParent(n,(function(n){var r,a;for(r=0;r<e.length;r++){a=e[r];if(!o[a]&&P(n,a,t)){o[a]=!0;i.push(a)}}}),f.getRoot());return i},matchNode:P,canApply:function(e){var t,n,i,o,r,a=k(e);if(a){n=I(t=h.getStart());for(o=a.length-1;o>=0;o--){if(!(r=a[o].selector)||a[o].defaultBlock)return S;for(i=n.length-1;i>=0;i--)if(f.is(n[i],r))return S}}return _},formatChanged:function(e,t,n){var i;if(!s){s={};i={};a.on("NodeChange",(function(e){var t=I(e.element),n={};t=o.grep(t,(function(e){return 1==e.nodeType&&!e.getAttribute("data-mce-bogus")}));A(s,(function(e,o){A(t,(function(r){if(P(r,o,{},e.similar)){if(!i[o]){A(e,(function(e){e(!0,{node:r,format:o,parents:t})}));i[o]=e}n[o]=e;return!1}}))}));A(i,(function(o,r){if(!n[r]){delete i[r];A(o,(function(n){n(!1,{node:e.element,format:r,parents:t})}))}}))}))}A(e.split(","),(function(e){if(!s[e]){s[e]=[];s[e].similar=n}s[e].push(t)}));return this},getCssText:function(e){return r.getCssText(a,e)}});(function(){M({valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center",listStylePosition:"inside"},defaultBlock:"div"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right",listStylePosition:"inside"},defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"right"}}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},defaultBlock:"div"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(e,t,n){A(n,(function(t,n){f.setAttrib(e,n,t)}))}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]});A("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),(function(e){M(e,{block:e,remove:"all"})}));M(a.settings.formats)})();(function(){a.addShortcut("meta+b","bold_desc","Bold");a.addShortcut("meta+i","italic_desc","Italic");a.addShortcut("meta+u","underline_desc","Underline");for(var e=1;e<=6;e++)a.addShortcut("meta+shift+"+e,"",["FormatBlock",!1,"h"+e]);a.addShortcut("meta+shift+7","",["FormatBlock",!1,"p"]);a.addShortcut("meta+shift+8","",["FormatBlock",!1,"div"]);a.addShortcut("meta+shift+9","",["FormatBlock",!1,"address"])})();a.on("BeforeGetContent",(function(e){c&&"raw"!=e.format&&c()}));a.on("mouseup keydown",(function(e){d&&d(e)}));function F(e,t){if(G(e,t.inline))return S;if(G(e,t.block))return S;if(t.selector)return 1==e.nodeType&&f.is(e,t.selector)}function G(e,t){t=t||"";e=""+((e=e||"").nodeName||e);t=""+(t.nodeName||t);return e.toLowerCase()==t.toLowerCase()}function U(e,t){return W(f.getStyle(e,t),t)}function W(e,t){"color"!=t&&"backgroundColor"!=t||(e=f.toHex(e));"fontWeight"==t&&700==e&&(e="bold");"fontFamily"==t&&(e=e.replace(/[\'\"]/g,"").replace(/,\s+/g,","));return""+e}function $(e,t){"string"!=typeof e?e=e(t):t&&(e=e.replace(/%(\w+)/g,(function(e,n){return t[n]||e})));return e}function z(e){return e&&3===e.nodeType&&/^([\t \r\n]+|)$/.test(e.nodeValue)}function V(e,t,n){var i=f.create(t,n);e.parentNode.insertBefore(i,e);i.appendChild(e);return i}function q(t,n,i){var o,r,s,d=t.startContainer,c=t.startOffset,u=t.endContainer,h=t.endOffset;function p(e){var t,i,o,r,a,s;t=i=e?d:u;r=e?"previousSibling":"nextSibling";a=f.getRoot();if(3==t.nodeType&&!z(t)&&(e?c>0:h<t.nodeValue.length))return t;for(;;){if(!n[0].block_expand&&g(i))return i;for(o=i[r];o;o=o[r])if(!E(o)&&!z(o)&&!(s=o,"BR"==s.nodeName&&s.getAttribute("data-mce-bogus")&&!s.nextSibling))return i;if(i.parentNode==a){t=i;break}i=i.parentNode}return t}function m(e,t){t===l&&(t=3===e.nodeType?e.length:e.childNodes.length);for(;e&&e.hasChildNodes();)(e=e.childNodes[t])&&(t=3===e.nodeType?e.length:e.childNodes.length);return{node:e,offset:t}}if(1==d.nodeType&&d.hasChildNodes()){o=d.childNodes.length-1;3==(d=d.childNodes[c>o?o:c]).nodeType&&(c=0)}if(1==u.nodeType&&u.hasChildNodes()){o=u.childNodes.length-1;3==(u=u.childNodes[h>o?o:h-1]).nodeType&&(h=u.nodeValue.length)}function y(e){for(var t=e;t;){if(1===t.nodeType&&N(t))return"false"===N(t)?t:e;t=t.parentNode}return e}function C(t,n,o){var r,s,l,d;function c(e,t){var n,r,a=e.nodeValue;void 0===t&&(t=o?a.length:0);if(o)-1===(n=(n=a.lastIndexOf(" ",t))>(r=a.lastIndexOf(" ",t))?n:r)||i||n++;else{n=a.indexOf(" ",t);r=a.indexOf(" ",t);n=-1!==n&&(-1===r||n<r)?n:r}return n}if(3===t.nodeType){if(-1!==(l=c(t,n)))return{container:t,offset:l};d=t}
r=new e(t,f.getParent(t,g)||a.getBody());for(;s=r[o?"prev":"next"]();)if(3===s.nodeType){d=s;if(-1!==(l=c(s)))return{container:s,offset:l}}else if(g(s))break;if(d)return{container:d,offset:n=o?0:d.length}}function b(e,i){var o,r,a,s;3==e.nodeType&&0===e.nodeValue.length&&e[i]&&(e=e[i]);o=I(e);for(r=0;r<o.length;r++)for(a=0;a<n.length;a++){if("collapsed"in(s=n[a])&&s.collapsed!==t.collapsed)continue;if(f.is(o[r],s.selector))return o[r]}return e}function S(e,t){var i,o=f.getRoot();n[0].wrapper||(i=f.getParent(e,n[0].block,o));i||(i=f.getParent(3==e.nodeType?e.parentNode:e,(function(e){return e!=o&&T(e)})));i&&n[0].wrapper&&(i=I(i,"ul,ol").reverse()[0]||i);if(!i){i=e;for(;i[t]&&!g(i[t])&&!G(i=i[t],"br"););}return i||e}d=y(d);u=y(u);(E(d.parentNode)||E(d))&&3==(d=(d=E(d)?d:d.parentNode).nextSibling||d).nodeType&&(c=0);(E(u.parentNode)||E(u))&&3==(u=(u=E(u)?u:u.parentNode).previousSibling||u).nodeType&&(h=u.length);if(n[0].inline){if(t.collapsed){if(s=C(d,c,!0)){d=s.container;c=s.offset}if(s=C(u,h)){u=s.container;h=s.offset}}if((r=m(u,h)).node){for(;r.node&&0===r.offset&&r.node.previousSibling;)r=m(r.node.previousSibling);r.node&&r.offset>0&&3===r.node.nodeType&&" "===r.node.nodeValue.charAt(r.offset-1)&&r.offset>1&&(u=r.node).splitText(r.offset-1)}}if(n[0].inline||n[0].block_expand){n[0].inline&&3==d.nodeType&&0!==c||(d=p(!0));n[0].inline&&3==u.nodeType&&h!==u.nodeValue.length||(u=p())}if(n[0].selector&&n[0].expand!==_&&!n[0].inline){d=b(d,"previousSibling");u=b(u,"nextSibling")}if(n[0].block||n[0].selector){d=S(d,"previousSibling");u=S(u,"nextSibling");if(n[0].block){g(d)||(d=p(!0));g(u)||(u=p())}}if(1==d.nodeType){c=v(d);d=d.parentNode}if(1==u.nodeType){h=v(u)+1;u=u.parentNode}return{startContainer:d,startOffset:c,endContainer:u,endOffset:h}}function j(e,t,n,i){var o,r,s;if(!F(n,e)&&!function(e,t){return t.links&&"A"==e.tagName}(n,e))return _;if("all"!=e.remove){A(e.styles,(function(o,r){o=W($(o,t),r);if("number"==typeof r){r=o;i=0}(e.remove_similar||!i||G(U(i,r),o))&&f.setStyle(n,r,"");s=1}));if(s&&""===f.getAttrib(n,"style")){n.removeAttribute("style");n.removeAttribute("data-mce-style")}A(e.attributes,(function(e,o){var r;e=$(e,t);if("number"==typeof o){o=e;i=0}if(!i||G(f.getAttrib(i,o),e)){if("class"==o&&(e=f.getAttrib(n,o))){r="";A(e.split(/\s+/),(function(e){/mce\-\w+/.test(e)&&(r+=(r?" ":"")+e)}));if(r){f.setAttrib(n,o,r);return}}"class"==o&&n.removeAttribute("className");b.test(o)&&n.removeAttribute("data-mce-"+o);n.removeAttribute(o)}}));A(e.classes,(function(e){e=$(e,t);i&&!f.hasClass(i,e)||f.removeClass(n,e)}));r=f.getAttribs(n);for(o=0;o<r.length;o++)if(0!==r[o].nodeName.indexOf("_"))return _}if("none"!=e.remove){(function(e,t){var n,i=e.parentNode;function o(e,t,n){return!(e=K(e,t,n))||"BR"==e.nodeName||g(e)}if(t.block)if(y)i==f.getRoot()&&(t.list_block&&G(e,t.list_block)||A(w(e.childNodes),(function(e){if(m(y,e.nodeName.toLowerCase()))if(n)n.appendChild(e);else{n=V(e,y);f.setAttribs(n,a.settings.forced_root_block_attrs)}else n=0})));else if(g(e)&&!g(i)){o(e,_)||o(e.firstChild,S,1)||e.insertBefore(f.create("br"),e.firstChild);o(e,S)||o(e.lastChild,_,1)||e.appendChild(f.create("br"))}if(t.selector&&t.inline&&!G(t.inline,e))return;f.remove(e,1)})(n,e);return S}}function K(e,t,n){if(e){t=t?"nextSibling":"previousSibling";for(e=n?e:e[t];e;e=e[t])if(1==e.nodeType||!z(e))return e}}function Y(e,t){var n,o,r=new i(f);function a(e,t){for(n=e;n;n=n[t]){if(3==n.nodeType&&0!==n.nodeValue.length)return e;if(1==n.nodeType&&!E(n))return n}return e}if(e&&t){e=a(e,"previousSibling");t=a(t,"nextSibling");if(r.compare(e,t)){for(n=e.nextSibling;n&&n!=t;){o=n;n=n.nextSibling;e.appendChild(o)}f.remove(t);A(w(t.childNodes),(function(t){e.appendChild(t)}));return e}}return t}function J(t,n){var i,o,r;i=t[n?"startContainer":"endContainer"];o=t[n?"startOffset":"endOffset"];if(1==i.nodeType){r=i.childNodes.length-1;!n&&o&&o--;i=i.childNodes[o>r?r:o]}3===i.nodeType&&n&&o>=i.nodeValue.length&&(i=new e(i,a.getBody()).next()||i);3!==i.nodeType||n||0!==o||(i=new e(i,a.getBody()).prev()||i);return i}function X(t,n,i,o){var r="_mce_caret",s=a.settings.caret_debug;function l(e){var t=f.create("span",{id:r,"data-mce-bogus":!0,style:s?"color:red":""});e&&t.appendChild(a.getDoc().createTextNode(C));return t}function u(e,t){for(;e;){if(3===e.nodeType&&e.nodeValue!==C||e.childNodes.length>1)return!1;t&&1===e.nodeType&&t.push(e);e=e.firstChild}return!0}function m(e){for(;e;){if(e.id===r)return e;e=e.parentNode}}function g(t){var n;if(t)for(t=(n=new e(t,t)).current();t;t=n.next())if(3===t.nodeType)return t}function y(e,t){var n,i;if(e){i=h.getRng(!0);if(u(e)){if(!1!==t){i.setStartBefore(e);i.setEndBefore(e)}f.remove(e)}else{if((n=g(e)).nodeValue.charAt(0)===C){n.deleteData(0,1);i.startContainer==n&&i.startOffset>0&&i.setStart(n,i.startOffset-1);i.endContainer==n&&i.endOffset>0&&i.setEnd(n,i.endOffset-1)}f.remove(e,1)}h.setRng(i)}else if(!(e=m(h.getStart())))for(;e=f.get(r);)y(e,!1)}function v(){var e;(e=m(h.getStart()))&&!f.isEmpty(e)&&x(e,(function(e){1!=e.nodeType||e.id===r||f.isEmpty(e)||f.setAttrib(e,"data-mce-bogus",null)}),"childNodes")}if(!a._hasCaretEvents){c=function(){var e,t=[];if(u(m(h.getStart()),t)){e=t.length;for(;e--;)f.setAttrib(t[e],"data-mce-bogus","1")}};d=function(e){var t=e.keyCode;y();(8==t&&h.isCollapsed()||37==t||39==t)&&y(m(h.getStart()));v()};a.on("SetContent",(function(e){e.selection&&v()}));a._hasCaretEvents=!0}"apply"==t?function(){var e,t,o,r,a,s,d;r=(e=h.getRng(!0)).startOffset;d=(s=e.startContainer).nodeValue;(t=m(h.getStart()))&&(o=g(t));if(d&&r>0&&r<d.length&&/\w/.test(d.charAt(r))&&/\w/.test(d.charAt(r-1))){a=h.getBookmark();e.collapse(!0);e=q(e,k(n));e=p.split(e);O(n,i,e);h.moveToBookmark(a)}else{if(t&&o.nodeValue===C)O(n,i,t);else{o=(t=l(!0)).firstChild;e.insertNode(t);r=1;O(n,i,t)}h.setCursorLocation(o,r)}}():function(){var e,t,r,a,s,d,c,u,m=h.getRng(!0),g=[];e=m.startContainer;t=m.startOffset;s=e;if(3==e.nodeType){t!=e.nodeValue.length&&(a=!0);s=s.parentNode}for(;s;){if(P(s,n,i,o)){d=s;break}s.nextSibling&&(a=!0);g.push(s);s=s.parentNode}if(!d)return;if(a){r=h.getBookmark();m.collapse(!0);m=q(m,k(n),!0);m=p.split(m);L(n,i,m);h.moveToBookmark(r)}else{s=u=l();for(c=g.length-1;c>=0;c--){s.appendChild(f.clone(g[c],!1));s=s.firstChild}s.appendChild(f.doc.createTextNode(C));s=s.firstChild;var y=f.getParent(d,T);y&&f.isEmpty(y)?d.parentNode.replaceChild(u,d):f.insertAfter(u,d);h.setCursorLocation(s,1);f.isEmpty(d)&&f.remove(d)}}()}function Q(t){var n,i,o,r,a,s=t.startContainer,l=t.startOffset;if(3==s.nodeType&&l>=s.nodeValue.length){l=v(s);s=s.parentNode;n=!0}if(1==s.nodeType){s=(r=s.childNodes)[Math.min(l,r.length-1)];i=new e(s,f.getParent(s,f.isBlock));(l>r.length-1||n)&&i.next();for(o=i.current();o;o=i.next())if(3==o.nodeType&&!z(o)){a=f.create("a",{"data-mce-bogus":"all"},C);o.parentNode.insertBefore(a,o);t.setStart(o,0);h.setRng(t);f.remove(a);return}}}}}));i("tinymce/UndoManager",["tinymce/util/VK","tinymce/Env","tinymce/util/Tools","tinymce/html/SaxParser"],(function(e,t,n,i){var o,r=n.trim;o=new RegExp(["<span[^>]+data-mce-bogus[^>]+>[​\ufeff]+<\\/span>",'\\s?data-mce-selected="[^"]+"'].join("|"),"gi");return function(e){var n,a,s=this,l=0,d=[],c=0;function u(){var t,n,a,s,l,d=e.getContent({format:"raw",no_events:1}),c=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,u=e.schema;d=d.replace(o,"");l=u.getShortEndedElements();for(;s=c.exec(d);){n=c.lastIndex;a=s[0].length;t=l[s[1]]?n:i.findEndTag(u,d,n);d=d.substring(0,n-a)+d.substring(t);c.lastIndex=n-a}return r(d)}function f(e){s.typing=!1;s.add({},e)}e.on("init",(function(){s.add()}));e.on("BeforeExecCommand",(function(e){var t=e.command;"Undo"!=t&&"Redo"!=t&&"mceRepaint"!=t&&s.beforeChange()}));e.on("ExecCommand",(function(e){var t=e.command;"Undo"!=t&&"Redo"!=t&&"mceRepaint"!=t&&f(e)}));e.on("ObjectResizeStart",(function(){s.beforeChange()}));e.on("SaveContent ObjectResized blur",f);e.on("DragEnd",f);e.on("KeyUp",(function(n){var i=n.keyCode;if(i>=33&&i<=36||i>=37&&i<=40||45==i||13==i||n.ctrlKey){f();e.nodeChanged()}(46==i||8==i||t.mac&&(91==i||93==i))&&e.nodeChanged();if(a&&s.typing){if(!e.isDirty()){e.isNotDirty=!d[0]||u()==d[0].content;e.isNotDirty||e.fire("change",{level:d[0],
lastLevel:null})}e.fire("TypingUndo");a=!1;e.nodeChanged()}}));e.on("KeyDown",(function(e){var t=e.keyCode;if(t>=33&&t<=36||t>=37&&t<=40||45==t){s.typing&&f(e);return}var n=e.ctrlKey&&!e.altKey||e.metaKey;if((t<16||t>20)&&224!=t&&91!=t&&!s.typing&&!n){s.beforeChange();s.typing=!0;s.add({},e);a=!0}}));e.on("MouseDown",(function(e){s.typing&&f(e)}));e.addShortcut("meta+z","","Undo");e.addShortcut("meta+y,meta+shift+z","","Redo");e.on("AddUndo Undo Redo ClearUndos",(function(t){t.isDefaultPrevented()||e.nodeChanged()}));return s={data:d,typing:!1,beforeChange:function(){c||(n=e.selection.getBookmark(2,!0))},add:function(t,i){var o,r,a=e.settings;(t=t||{}).content=u();if(c||e.removed)return null;r=d[l];if(e.fire("BeforeAddUndo",{level:t,lastLevel:r,originalEvent:i}).isDefaultPrevented())return null;if(r&&r.content==t.content)return null;d[l]&&(d[l].beforeBookmark=n);if(a.custom_undo_redo_levels&&d.length>a.custom_undo_redo_levels){for(o=0;o<d.length-1;o++)d[o]=d[o+1];d.length--;l=d.length}t.bookmark=e.selection.getBookmark(2,!0);l<d.length-1&&(d.length=l+1);d.push(t);l=d.length-1;var s={level:t,lastLevel:r,originalEvent:i};e.fire("AddUndo",s);if(l>0){e.isNotDirty=!1;e.fire("change",s)}return t},undo:function(){var t;if(s.typing){s.add();s.typing=!1}if(l>0){t=d[--l];0===l&&(e.isNotDirty=!0);e.setContent(t.content,{format:"raw"});e.selection.moveToBookmark(t.beforeBookmark);e.fire("undo",{level:t})}return t},redo:function(){var t;if(l<d.length-1){t=d[++l];e.setContent(t.content,{format:"raw"});e.selection.moveToBookmark(t.bookmark);e.fire("redo",{level:t})}return t},clear:function(){d=[];l=0;s.typing=!1;e.fire("ClearUndos")},hasUndo:function(){return l>0||s.typing&&d[0]&&u()!=d[0].content},hasRedo:function(){return l<d.length-1&&!this.typing},transact:function(e){s.beforeChange();try{c++;e()}finally{c--}s.add()}}}}));i("tinymce/EnterKey",["tinymce/dom/TreeWalker","tinymce/dom/RangeUtils","tinymce/Env"],(function(e,t,n){var i=n.ie&&n.ie<11;return function(o){var r=o.dom,a=o.selection,s=o.settings,l=o.undoManager,d=o.schema,c=d.getNonEmptyElements(),u=d.getMoveCaretBeforeOnEnterElements();o.on("keydown",(function(f){13==f.keyCode&&!1!==function(f){var h,p,m,g,y,v,C,b,_,S,N,E,A,w,x;function T(e){return e&&r.isBlock(e)&&!/^(TD|TH|CAPTION|FORM)$/.test(e.nodeName)&&!/^(fixed|absolute)/i.test(e.style.position)&&"true"!==r.getContentEditable(e)}function I(e){var t;if(r.isBlock(e)){t=a.getRng();e.appendChild(r.create("span",null," "));a.select(e);e.lastChild.outerHTML="";a.setRng(t)}}function D(t){var i,o,s,l,d=t;if(!t)return;n.ie&&n.ie<9&&v&&v.firstChild&&v.firstChild==v.lastChild&&"BR"==v.firstChild.tagName&&r.remove(v.firstChild);if(/^(LI|DT|DD)$/.test(t.nodeName)){var c=function(e){for(;e;){if(1==e.nodeType||3==e.nodeType&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}}(t.firstChild);c&&/^(UL|OL|DL)$/.test(c.nodeName)&&t.insertBefore(r.doc.createTextNode(" "),t.firstChild)}s=r.createRng();n.ie||t.normalize();if(t.hasChildNodes()){i=new e(t,t);for(;o=i.current();){if(3==o.nodeType){s.setStart(o,0);s.setEnd(o,0);break}if(u[o.nodeName.toLowerCase()]){s.setStartBefore(o);s.setEndBefore(o);break}d=o;o=i.next()}if(!o){s.setStart(d,0);s.setEnd(d,0)}}else if("BR"==t.nodeName)if(t.nextSibling&&r.isBlock(t.nextSibling)){if(!C||C<9){l=r.create("br");t.parentNode.insertBefore(l,t)}s.setStartBefore(t);s.setEndBefore(t)}else{s.setStartAfter(t);s.setEndAfter(t)}else{s.setStart(t,0);s.setEnd(t,0)}a.setRng(s);r.remove(l);a.scrollIntoView(t)}function k(e){var t=s.forced_root_block;t&&t.toLowerCase()===e.tagName.toLowerCase()&&r.setAttribs(e,s.forced_root_block_attrs)}function M(e){var t,n,o,a=g,l=d.getTextInlineElements();e||"TABLE"==E?k(t=r.create(e||w)):t=v.cloneNode(!1);o=t;if(!1!==s.keep_styles)do{if(l[a.nodeName]){if("_mce_caret"==a.id)continue;n=a.cloneNode(!1);r.setAttrib(n,"id","");if(t.hasChildNodes()){n.appendChild(t.firstChild);t.appendChild(n)}else{o=n;t.appendChild(n)}}}while(a=a.parentNode);i||(o.innerHTML='<br data-mce-bogus="1">');return t}function R(t){var n,i,o;if(3==g.nodeType&&(t?y>0:y<g.nodeValue.length))return!1;if(g.parentNode==v&&x&&!t)return!0;if(t&&1==g.nodeType&&g==v.firstChild)return!0;if("TABLE"===g.nodeName||g.previousSibling&&"TABLE"==g.previousSibling.nodeName)return x&&!t||!x&&t;n=new e(g,v);3==g.nodeType&&(t&&0===y?n.prev():t||y!=g.nodeValue.length||n.next());for(;i=n.current();){if(1===i.nodeType){if(!i.getAttribute("data-mce-bogus")){o=i.nodeName.toLowerCase();if(c[o]&&"br"!==o)return!1}}else if(3===i.nodeType&&!/^[ \t\r\n]*$/.test(i.nodeValue))return!1;t?n.prev():n.next()}return!0}function H(){o.execCommand("InsertLineBreak",!1,f)}h=a.getRng(!0);if(f.isDefaultPrevented())return;if(!h.collapsed){o.execCommand("Delete");return}new t(r).normalize(h);g=h.startContainer;y=h.startOffset;w=(w=(s.force_p_newlines?"p":"")||s.forced_root_block)?w.toUpperCase():"";C=r.doc.documentMode;b=f.shiftKey;if(1==g.nodeType&&g.hasChildNodes()){x=y>g.childNodes.length-1;g=g.childNodes[Math.min(y,g.childNodes.length-1)]||g;y=x&&3==g.nodeType?g.nodeValue.length:0}if(!(m=function(e){var t,n,i=r.getRoot();t=e;for(;t!==i&&"false"!==r.getContentEditable(t);){"true"===r.getContentEditable(t)&&(n=t);t=t.parentNode}return t!==i?n:i}(g)))return;l.beforeChange();if(!r.isBlock(m)&&m!=r.getRoot()){w&&!b||H();return}(w&&!b||!w&&b)&&(g=function(e,t){var n,i,a,s,l,c,u=w||"P";i=r.getParent(e,r.isBlock);c=o.getBody().nodeName.toLowerCase();if(!i||!T(i)){if(!(i=i||m).hasChildNodes()){k(n=r.create(u));i.appendChild(n);h.setStart(n,0);h.setEnd(n,0);return n}s=e;for(;s.parentNode!=i;)s=s.parentNode;for(;s&&!r.isBlock(s);){a=s;s=s.previousSibling}if(a&&d.isValidChild(c,u.toLowerCase())){k(n=r.create(u));a.parentNode.insertBefore(n,a);s=a;for(;s&&!r.isBlock(s);){l=s.nextSibling;n.appendChild(s);s=l}h.setStart(e,t);h.setEnd(e,t)}}return e}(g,y));v=r.getParent(g,r.isBlock);N=v?r.getParent(v.parentNode,r.isBlock):null;E=v?v.nodeName.toUpperCase():"";if("LI"==(A=N?N.nodeName.toUpperCase():"")&&!f.ctrlKey){v=N;E=A}if(/^(LI|DT|DD)$/.test(E)){if(!w&&b){H();return}if(r.isEmpty(v)){(function(){function e(e){for(var t=N[e?"firstChild":"lastChild"];t&&1!=t.nodeType;)t=t[e?"nextSibling":"previousSibling"];return t===v}function t(){var e=N.parentNode;if(/^(LI|DT|DD)$/.test(e.nodeName))return e;return N}var n=N.parentNode.nodeName;/^(OL|UL|LI)$/.test(n)&&(w="LI");_=w?M(w):r.create("BR");if(e(!0)&&e())"LI"==n?r.insertAfter(_,t()):r.replace(_,N);else if(e(!0))if("LI"==n){r.insertAfter(_,t());_.appendChild(r.doc.createTextNode(" "));_.appendChild(N)}else N.parentNode.insertBefore(_,N);else if(e()){r.insertAfter(_,t());I(_)}else{N=t();(p=h.cloneRange()).setStartAfter(v);p.setEndAfter(N);S=p.extractContents();if("LI"==w&&"LI"==S.firstChild.nodeName){_=S.firstChild;r.insertAfter(S,N)}else{r.insertAfter(S,N);r.insertAfter(_,N)}}r.remove(v);D(_);l.add()})();return}}if("PRE"==E&&!1!==s.br_in_pre){if(!b){H();return}}else if(!w&&!b&&"LI"!=E||w&&b){H();return}if(w&&v===o.getBody())return;w=w||"P";if(R()){_=/^(H[1-6]|PRE|FIGURE)$/.test(E)&&"HGROUP"!=A?M(w):M();s.end_container_on_empty_block&&T(N)&&r.isEmpty(v)?_=r.split(N,v):r.insertAfter(_,v);D(_)}else if(R(!0)){I(_=v.parentNode.insertBefore(M(),v));D(v)}else{(p=h.cloneRange()).setEndAfter(v);(function(e){do{3===e.nodeType&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,""));e=e.firstChild}while(e)})(S=p.extractContents());_=S.firstChild;r.insertAfter(S,v);(function(e){var t,n=e,i=[];if(!n)return;for(;n=n.firstChild;){if(r.isBlock(n))return;1!=n.nodeType||c[n.nodeName.toLowerCase()]||i.push(n)}t=i.length;for(;t--;)(!(n=i[t]).hasChildNodes()||n.firstChild==n.lastChild&&""===n.firstChild.nodeValue||"A"==n.nodeName&&" "===(n.innerText||n.textContent))&&r.remove(n)})(_);(function(e){var t;if(!i){e.normalize();(t=e.lastChild)&&!/^(left|right)$/gi.test(r.getStyle(t,"float",!0))||r.add(e,"br")}})(v);D(_)}r.setAttrib(_,"id","");o.fire("NewBlock",{newBlock:_});l.add()}(f)&&f.preventDefault()}))}}));i("tinymce/ForceBlocks",[],(function(){return function(e){var t=e.settings,n=e.dom,i=e.selection,o=e.schema,r=o.getBlockElements();t.forced_root_block&&e.on("NodeChange",(function(){var a,s,l,d,c,u,f,h,p,m,g,y,v=i.getStart(),C=e.getBody(),b=-16777215
;y=t.forced_root_block;if(!v||1!==v.nodeType||!y)return;for(;v&&v!=C;){if(r[v.nodeName])return;v=v.parentNode}if((a=i.getRng()).setStart){s=a.startContainer;l=a.startOffset;d=a.endContainer;c=a.endOffset;try{p=e.getDoc().activeElement===C}catch(e){}}else{if(a.item){v=a.item(0);(a=e.getDoc().body.createTextRange()).moveToElementText(v)}p=a.parentElement().ownerDocument===e.getDoc();(m=a.duplicate()).collapse(!0);l=-1*m.move("character",b);if(!m.collapsed){(m=a.duplicate()).collapse(!1);c=-1*m.move("character",b)-l}}v=C.firstChild;g=C.nodeName.toLowerCase();for(;v;)if((3===v.nodeType||1==v.nodeType&&!r[v.nodeName])&&o.isValidChild(g,y.toLowerCase())){if(3===v.nodeType&&0===v.nodeValue.length){f=v;v=v.nextSibling;n.remove(f);continue}if(!u){u=n.create(y,e.settings.forced_root_block_attrs);v.parentNode.insertBefore(u,v);h=!0}f=v;v=v.nextSibling;u.appendChild(f)}else{u=null;v=v.nextSibling}if(h&&p){if(a.setStart){a.setStart(s,l);a.setEnd(d,c);i.setRng(a)}else try{(a=e.getDoc().body.createTextRange()).moveToElementText(C);a.collapse(!0);a.moveStart("character",l);c>0&&a.moveEnd("character",c);a.select()}catch(e){}e.nodeChanged()}}))}}));i("tinymce/EditorCommands",["tinymce/html/Serializer","tinymce/Env","tinymce/util/Tools","tinymce/dom/ElementUtils","tinymce/dom/RangeUtils","tinymce/dom/TreeWalker"],(function(e,n,i,o,r,a){var s=i.each,l=i.extend,d=i.map,c=i.inArray,u=i.explode,f=n.gecko,h=n.ie,p=n.ie&&n.ie<11,m=!0,g=!1;return function(i){var y,v,C,b,_={state:{},exec:{},value:{}},S=i.settings;i.on("PreInit",(function(){y=i.dom;v=i.selection;S=i.settings;C=i.formatter}));function N(e,t,n,o){var r,a,d=0;/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(e)||o&&o.skip_focus||i.focus();o=l({},o);if((o=i.fire("BeforeExecCommand",{command:e,ui:t,value:n})).isDefaultPrevented())return!1;a=e.toLowerCase();if(r=_.exec[a]){r(a,t,n);i.fire("ExecCommand",{command:e,ui:t,value:n});return!0}s(i.plugins,(function(o){if(o.execCommand&&o.execCommand(e,t,n)){i.fire("ExecCommand",{command:e,ui:t,value:n});d=!0;return!1}}));if(d)return d;if(i.theme&&i.theme.execCommand&&i.theme.execCommand(e,t,n)){i.fire("ExecCommand",{command:e,ui:t,value:n});return!0}try{d=i.getDoc().execCommand(e,t,n)}catch(e){}if(d){i.fire("ExecCommand",{command:e,ui:t,value:n});return!0}return!1}function E(e){var t;if(i._isHidden())return;e=e.toLowerCase();if(t=_.state[e])return t(e);try{return i.getDoc().queryCommandState(e)}catch(e){}return!1}function A(e,t){t=t||"exec";s(e,(function(e,n){s(n.toLowerCase().split(","),(function(n){_[t][n]=e}))}))}l(this,{execCommand:N,queryCommandState:E,queryCommandValue:function(e){var t;if(i._isHidden())return;e=e.toLowerCase();if(t=_.value[e])return t(e);try{return i.getDoc().queryCommandValue(e)}catch(e){}},queryCommandSupported:function(e){e=e.toLowerCase();if(_.exec[e])return!0;try{return i.getDoc().queryCommandSupported(e)}catch(e){}return!1},addCommands:A,addCommand:function(e,t,n){e=e.toLowerCase();_.exec[e]=function(e,o,r,a){return t.call(n||i,o,r,a)}},addQueryStateHandler:function(e,t,n){e=e.toLowerCase();_.state[e]=function(){return t.call(n||i)}},addQueryValueHandler:function(e,t,n){e=e.toLowerCase();_.value[e]=function(){return t.call(n||i)}},hasCustomCommand:function(e){e=e.toLowerCase();return!!_.exec[e]}});function w(e,n,o){n===t&&(n=g);o===t&&(o=null);return i.getDoc().execCommand(e,n,o)}function x(e){return C.match(e)}function T(e,n){C.toggle(e,n?{value:n}:t);i.nodeChanged()}function I(e){b=v.getBookmark(e)}function D(){v.moveToBookmark(b)}A({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){i.undoManager.add()},"Cut,Copy,Paste":function(e){var t,o=i.getDoc();try{w(e)}catch(e){t=m}if(t||!o.queryCommandSupported(e)){var r=i.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");n.mac&&(r=r.replace(/Ctrl\+/g,"⌘+"));i.windowManager.alert(r)}},unlink:function(){if(v.isCollapsed()){var e=v.getNode();"A"==e.tagName&&i.dom.remove(e,!0);return}C.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){var t=e.substring(7);"full"==t&&(t="justify");s("left,center,right,justify".split(","),(function(e){t!=e&&C.remove("align"+e)}));T("align"+t);N("mceRepaint")},"InsertUnorderedList,InsertOrderedList":function(e){var t,i;w(e);if(t=y.getParent(v.getNode(),"ol,ul")){i=t.parentNode;if(/^(H[1-6]|P|ADDRESS|PRE)$/.test(i.nodeName)){I();y.split(i,t);D()}}for(var o=t||y.getParent(v.getNode(),y.isBlock),r=new a(o,o.parentNode);o=r.next();)if(1==o.nodeType&&o.hasAttribute("data-mce-style")){var s=o.getAttribute("data-mce-style");s&&s!==o.getAttribute("style")&&o.setAttribute("style",s)}if(n.ie>0&&(t=t||v.getNode().querySelector("ol,ul")))for(var l=t.getElementsByTagName("li"),d=0;d<l.length;d++){var c=l[d].querySelector("div, p");c&&(l[d].innerHTML=c.innerHTML)}},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){T(e)},"ForeColor,HiliteColor,FontName":function(e,t,n){T(e,n)},FontSize:function(e,t,n){var i,o;if(n>=1&&n<=7){o=u(S.font_size_style_values);n=(i=u(S.font_size_classes))?i[n-1]||n:o[n-1]||n}T(e,n)},RemoveFormat:function(e){C.remove(e)},mceBlockQuote:function(){T("blockquote")},FormatBlock:function(e,t,n){return T(n||"p")},mceCleanup:function(){var e=v.getBookmark();i.setContent(i.getContent({cleanup:m}),{cleanup:m});v.moveToBookmark(e)},mceRemoveNode:function(e,t,n){var o=n||v.getNode();if(o!=i.getBody()){I();i.dom.remove(o,m);D()}},mceSelectNodeDepth:function(e,t,n){var o=0;y.getParent(v.getNode(),(function(e){if(1==e.nodeType&&o++==n){v.select(e);return g}}),i.getBody())},mceSelectNode:function(e,t,n){v.select(n)},mceInsertContent:function(t,n,r){var a,l,d,c,u,f,p,m,g,C,b,_,S=i.schema.getTextInlineElements();if("string"!=typeof r){_=r.merge;r=r.content}/^ | $/.test(r)&&(r=function(e){var t,n,i;t=v.getRng(!0);n=t.startContainer;i=t.startOffset;function o(e){return n[e]&&3==n[e].nodeType}if(3==n.nodeType){i>0?e=e.replace(/^&nbsp;/," "):o("previousSibling")||(e=e.replace(/^ /,"&nbsp;"));i<n.length?e=e.replace(/&nbsp;(<br>|)$/," "):o("nextSibling")||(e=e.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;"))}return e}(r));a=i.parser;l=new e({},i.schema);b='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;</span>';f={content:r,format:"html",selection:!0};i.fire("BeforeSetContent",f);-1==(r=f.content).indexOf("{$caret}")&&(r+="{$caret}");r=r.replace(/\{\$caret\}/,b);var N=i.selection.savedSelection;if(N&&N.node&&N.hasOwnProperty("start")&&N.hasOwnProperty("end")){var E=document.createRange();E.setStart(N.node,N.start);E.setEnd(N.node,N.end);var A=document.getSelection();A.removeAllRanges();A.addRange(E)}var w=(m=v.getRng()).startContainer||(m.parentElement?m.parentElement():null),x=i.getBody();if(w===x&&v.isCollapsed()&&y.isBlock(x.firstChild)&&y.isEmpty(x.firstChild)){(m=y.createRng()).setStart(x.firstChild,0);m.setEnd(x.firstChild,0);v.setRng(m)}if(!v.isCollapsed()){i.getDoc().execCommand("Delete",!1,null);(function(){var e,t,n;t=(e=v.getRng(!0)).startContainer;n=e.startOffset;if(3==t.nodeType&&e.collapsed)if(" "===t.data[n]){t.deleteData(n,1);/[\u00a0| ]$/.test(r)||(r+=" ")}else if(" "===t.data[n-1]){t.deleteData(n-1,1);/[\u00a0| ]$/.test(r)||(r=" "+r)}})()}var T={context:(d=v.getNode()).nodeName.toLowerCase()};(function(e){if(_)for(g=e.firstChild;g;g=g.walk(!0))S[g.name]&&g.attr("data-mce-new","true")})(u=a.parse(r,T));if("mce_marker"==(g=u.lastChild).attr("id")){p=g;for(g=g.prev;g;g=g.walk(!0))if(3==g.type||!y.isBlock(g.name)){i.schema.isValidChild(g.parent.name,"span")&&g.parent.insert(p,g,"br"===g.name);break}}if(T.invalid){v.setContent(b);d=v.getNode();c=i.getBody();9==d.nodeType?d=g=c:g=d;for(;g!==c;){d=g;g=g.parentNode}r=d==c?c.innerHTML:y.getOuterHTML(d);r=l.serialize(a.parse(r.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,(function(){return l.serialize(u)}))));d==c?y.setHTML(c,r):y.setOuterHTML(d,r)}else{r=l.serialize(u);g=d.firstChild;C=d.lastChild;!g||g===C&&"BR"===g.nodeName?y.setHTML(d,r):v.setContent(r)}(function(){if(_){var e=i.getBody(),t=new o(y);s(y.select("*[data-mce-new]"),(function(n){n.removeAttribute("data-mce-new")
;for(var i=n.parentNode;i&&i!=e;i=i.parentNode)t.compare(i,n)&&y.remove(n,!0)}))}})();p=y.get("mce_marker");v.scrollIntoView(p);m=y.createRng();if((g=p.previousSibling)&&3==g.nodeType){m.setStart(g,g.nodeValue.length);if(!h&&(C=p.nextSibling)&&3==C.nodeType){g.appendData(C.data);C.parentNode.removeChild(C)}}else{m.setStartBefore(p);m.setEndBefore(p)}y.remove(p);v.setRng(m);i.fire("SetContent",f);i.addVisual()},mceInsertRawHTML:function(e,t,n){v.setContent("tiny_mce_marker");i.setContent(i.getContent().replace(/tiny_mce_marker/g,(function(){return n})))},mceToggleFormat:function(e,t,n){T(n)},mceSetContent:function(e,t,n){i.setContent(n)},"Indent,Outdent":function(e){var t,n,o;t=S.indentation;n=/[a-z%]+$/i.exec(t);t=parseInt(t,10);if(E("InsertUnorderedList")||E("InsertOrderedList"))w(e);else{S.forced_root_block||y.getParent(v.getNode(),y.isBlock)||C.apply("div");s(v.getSelectedBlocks(),(function(r){if("LI"!=r.nodeName){var a=i.getParam("indent_use_margin",!1)?"margin":"padding";a+="rtl"==y.getStyle(r,"direction",!0)?"Right":"Left";if("outdent"==e){o=Math.max(0,parseInt(r.style[a]||0,10)-t);y.setStyle(r,a,o?o+n:"")}else{o=parseInt(r.style[a]||0,10)+t+n;y.setStyle(r,a,o)}}}))}},mceRepaint:function(){if(f)try{I(m);v.getSel()&&v.getSel().selectAllChildren(i.getBody());v.collapse(m);D()}catch(e){}},InsertHorizontalRule:function(){i.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){i.hasVisual=!i.hasVisual;i.addVisual()},mceReplaceContent:function(e,t,n){i.execCommand("mceInsertContent",!1,n.replace(/\{\$selection\}/g,v.getContent({format:"text"})))},mceInsertLink:function(e,t,n){var i;"string"==typeof n&&(n={href:n});i=y.getParent(v.getNode(),"a");n.href=n.href.replace(" ","%20");i&&n.href||C.remove("link");n.href&&C.apply("link",n,i)},selectAll:function(){var e,t,n,o=i.getBody(),r=[];if(v.getRng().setStart){e=y.createRng();t=o.ownerDocument.createNodeIterator(o,NodeFilter.SHOW_TEXT,(function(){return NodeFilter.FILTER_ACCEPT}),!1);for(;n=t.nextNode();)r[r.length?1:0]=n;if(r.length){e.setStartBefore(r[0]);e.setEndAfter(r[r.length-1])}else{e.setStart(o,0);e.setEnd(o,o.childNodes.length)}v.setRng(e)}else if(!(e=v.getRng()).item){e.moveToElementText(o);e.select()}},delete:function(){w("Delete");var e=i.getBody();if(y.isEmpty(e)){i.setContent("");e.firstChild&&y.isBlock(e.firstChild)?i.selection.setCursorLocation(e.firstChild,0):i.selection.setCursorLocation(e,0)}},mceNewDocument:function(){i.setContent("")},InsertLineBreak:function(e,t,n){var o,s,l,d=n,c=v.getRng(!0);new r(y).normalize(c);var u=c.startOffset,f=c.startContainer;if(1==f.nodeType&&f.hasChildNodes()){var h=u>f.childNodes.length-1;f=f.childNodes[Math.min(u,f.childNodes.length-1)]||f;u=h&&3==f.nodeType?f.nodeValue.length:0}var g=y.getParent(f,y.isBlock),C=g?g.nodeName.toUpperCase():"",b=g?y.getParent(g.parentNode,y.isBlock):null,_=b?b.nodeName.toUpperCase():"",S=d&&d.ctrlKey;if("LI"==_&&!S){g=b;C=_}if(f&&3==f.nodeType&&u>=f.nodeValue.length&&!p&&!function(){for(var e,t=new a(f,g),n=i.schema.getNonEmptyElements();e=t.next();)if(n[e.nodeName.toLowerCase()]||e.length>0)return!0}()){o=y.create("br");c.insertNode(o);c.setStartAfter(o);c.setEndAfter(o);s=!0}o=y.create("br");c.insertNode(o);var N=y.doc.documentMode;p&&"PRE"==C&&(!N||N<8)&&o.parentNode.insertBefore(y.doc.createTextNode("\r"),o);l=y.create("span",{},"&nbsp;");o.parentNode.insertBefore(l,o);v.scrollIntoView(l);y.remove(l);if(s){c.setStartBefore(o);c.setEndBefore(o)}else{c.setStartAfter(o);c.setEndAfter(o)}v.setRng(c);i.undoManager.add();return m}});A({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){var t="align"+e.substring(7),n=v.isCollapsed()?[y.getParent(v.getNode(),y.isBlock)]:v.getSelectedBlocks(),i=d(n,(function(e){return!!C.matchNode(e,t)}));return-1!==c(i,m)},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return x(e)},mceBlockQuote:function(){return x("blockquote")},Outdent:function(){var e;if(S.inline_styles){if((e=y.getParent(v.getStart(),y.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return m;if((e=y.getParent(v.getEnd(),y.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return m}return E("InsertUnorderedList")||E("InsertOrderedList")||!S.inline_styles&&!!y.getParent(v.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(e){var t=y.getParent(v.getNode(),"ul,ol");return t&&("insertunorderedlist"===e&&"UL"===t.tagName||"insertorderedlist"===e&&"OL"===t.tagName)}},"state");A({"FontSize,FontName":function(e){var t,n=0;(t=y.getParent(v.getNode(),"span"))&&(n="fontsize"==e?t.style.fontSize:t.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase());return n}},"value");A({Undo:function(){i.undoManager.undo()},Redo:function(){i.undoManager.redo()}})}}));i("tinymce/util/URI",["tinymce/util/Tools"],(function(e){var t=e.each,n=e.trim,i="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),o={ftp:21,http:80,https:443,mailto:25};function r(e,o){var a,s,l=this;e=n(e);a=(o=l.settings=o||{}).base_uri;if(/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e)){l.source=e;return}var d=0===e.indexOf("//");0!==e.indexOf("/")||d||(e=(a&&a.protocol||"http")+"://mce_host"+e);if(!/^[\w\-]*:?\/\//.test(e)){s=o.base_uri?o.base_uri.path:new r(location.href).directory;if(""===o.base_uri.protocol)e="//mce_host"+l.toAbsPath(s,e);else{e=/([^#?]*)([#?]?.*)/.exec(e);e=(a&&a.protocol||"http")+"://mce_host"+l.toAbsPath(s,e[1])+e[2]}}e=e.replace(/@@/g,"(mce_at)");e=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e);t(i,(function(t,n){var i=e[n];i&&(i=i.replace(/\(mce_at\)/g,"@@"));l[t]=i}));if(a){l.protocol||(l.protocol=a.protocol);l.userInfo||(l.userInfo=a.userInfo);l.port||"mce_host"!==l.host||(l.port=a.port);l.host&&"mce_host"!==l.host||(l.host=a.host);l.source=""}d&&(l.protocol="")}r.prototype={setPath:function(e){var t=this;e=/^(.*?)\/?(\w+)?$/.exec(e);t.path=e[0];t.directory=e[1];t.file=e[2];t.source="";t.getURI()},toRelative:function(e){var t,n=this;if("./"===e)return e;if("mce_host"!=(e=new r(e,{base_uri:n})).host&&n.host!=e.host&&e.host||n.port!=e.port||n.protocol!=e.protocol&&""!==e.protocol)return e.getURI();var i=n.getURI(),o=e.getURI();if(i==o||"/"==i.charAt(i.length-1)&&i.substr(0,i.length-1)==o)return i;t=n.toRelPath(n.path,e.path);e.query&&(t+="?"+e.query);e.anchor&&(t+="#"+e.anchor);return t},toAbsolute:function(e,t){return(e=new r(e,{base_uri:this})).getURI(t&&this.isSameOrigin(e))},isSameOrigin:function(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;var t=o[this.protocol];if(t&&(this.port||t)==(e.port||t))return!0}return!1},toRelPath:function(e,t){var n,i,o,r=0,a="";e=(e=e.substring(0,e.lastIndexOf("/"))).split("/");n=t.split("/");if(e.length>=n.length)for(i=0,o=e.length;i<o;i++)if(i>=n.length||e[i]!=n[i]){r=i+1;break}if(e.length<n.length)for(i=0,o=n.length;i<o;i++)if(i>=e.length||e[i]!=n[i]){r=i+1;break}if(1===r)return t;for(i=0,o=e.length-(r-1);i<o;i++)a+="../";for(i=r-1,o=n.length;i<o;i++)a+=i!=r-1?"/"+n[i]:n[i];return a},toAbsPath:function(e,n){var i,o,r,a=0,s=[];o=/\/$/.test(n)?"/":"";e=e.split("/");n=n.split("/");t(e,(function(e){e&&s.push(e)}));e=s;for(i=n.length-1,s=[];i>=0;i--){if(0===n[i].length||"."===n[i])continue;if(".."===n[i]){a++;continue}if(a>0){a--;continue}s.push(n[i])}0!==(r=(i=e.length-a)<=0?s.reverse().join("/"):e.slice(0,i).join("/")+"/"+s.reverse().join("/")).indexOf("/")&&(r="/"+r);o&&r.lastIndexOf("/")!==r.length-1&&(r+=o);return r},getURI:function(e){var t,n=this;if(!n.source||e){t="";if(!e){n.protocol?t+=n.protocol+"://":t+="//";n.userInfo&&(t+=n.userInfo+"@");n.host&&(t+=n.host);n.port&&(t+=":"+n.port)}n.path&&(t+=n.path);n.query&&(t+="?"+n.query);n.anchor&&(t+="#"+n.anchor);n.source=t}return n.source}};return r}));i("tinymce/util/Class",["tinymce/util/Tools"],(function(e){var t,n,i=e.each,o=e.extend;function r(){}r.extend=t=function(e){var r,a,s,l=this.prototype;function d(){var e,t,i,o=this;if(!n){o.init&&o.init.apply(o,arguments);if(t=o.Mixins){e=t.length
;for(;e--;)(i=t[e]).init&&i.init.apply(o,arguments)}}}function c(){return this}function u(e,t){return function(){var n,i=this,o=i._super;i._super=l[e];n=t.apply(i,arguments);i._super=o;return n}}n=!0;r=new this;n=!1;if(e.Mixins){i(e.Mixins,(function(t){for(var n in t)"init"!==n&&(e[n]=t[n])}));l.Mixins&&(e.Mixins=l.Mixins.concat(e.Mixins))}e.Methods&&i(e.Methods.split(","),(function(t){e[t]=c}));e.Properties&&i(e.Properties.split(","),(function(t){var n="_"+t;e[t]=function(e){var t=this;if(undefined!==e){t[n]=e;return t}return t[n]}}));e.Statics&&i(e.Statics,(function(e,t){d[t]=e}));e.Defaults&&l.Defaults&&(e.Defaults=o({},l.Defaults,e.Defaults));for(a in e)"function"==typeof(s=e[a])&&l[a]?r[a]=u(a,s):r[a]=s;d.prototype=r;d.constructor=d;d.extend=t;return d};return r}));i("tinymce/util/EventDispatcher",["tinymce/util/Tools"],(function(e){var t=e.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchend"," ");function n(t){var n,i,o=this,r={};function a(){return!1}function s(){return!0}n=(t=t||{}).scope||o;i=t.toggleEvent||a;function l(t,n,s,l){var d,c,u;!1===n&&(n=a);if(n){n={func:n};l&&e.extend(n,l);u=(c=t.toLowerCase().split(" ")).length;for(;u--;){t=c[u];if(!(d=r[t])){d=r[t]=[];i(t,!0)}s?d.unshift(n):d.push(n)}}return o}function d(e,t){var n,a,s,l,d;if(e){n=(l=e.toLowerCase().split(" ")).length;for(;n--;){e=l[n];a=r[e];if(!e){for(s in r){i(s,!1);delete r[s]}return o}if(a){if(t){d=a.length;for(;d--;)if(a[d].func===t){a=a.slice(0,d).concat(a.slice(d+1));r[e]=a}}else a.length=0;if(!a.length){i(e,!1);delete r[e]}}}}else{for(e in r)i(e,!1);r={}}return o}o.fire=function(e,i){var o,l,c,u;e=e.toLowerCase();(i=i||{}).type=e;i.target||(i.target=n);if(!i.preventDefault){i.preventDefault=function(){i.isDefaultPrevented=s};i.stopPropagation=function(){i.isPropagationStopped=s};i.stopImmediatePropagation=function(){i.isImmediatePropagationStopped=s};i.isDefaultPrevented=a;i.isPropagationStopped=a;i.isImmediatePropagationStopped=a}t.beforeFire&&t.beforeFire(i);if(o=r[e])for(l=0,c=o.length;l<c;l++){(u=o[l]).once&&d(e,u.func);if(i.isImmediatePropagationStopped()){i.stopPropagation();return i}if(!1===u.func.call(n,i)){i.preventDefault();return i}}return i};o.on=l;o.off=d;o.once=function(e,t,n){return l(e,t,n,{once:!0})};o.has=function(e){e=e.toLowerCase();return!(!r[e]||0===r[e].length)}}n.isNative=function(e){return!!t[e.toLowerCase()]};return n}));i("tinymce/ui/Selector",["tinymce/util/Class"],(function(e){var t,n=/^([\w\\*]+)?(?:#([\w\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i,i=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,o=/^\s*|\s*$/g,r=e.extend({init:function(e){var t=this.match;function r(e,i,r){var s;function l(e){e&&i.push(e)}l(function(e){if(e){e=e.toLowerCase();return function(t){return"*"===e||t.type===e}}}((s=n.exec(e.replace(o,"")))[1]));l(function(e){if(e)return function(t){return t._name===e}}(s[2]));l(function(e){if(e){e=e.split(".");return function(t){for(var n=e.length;n--;)if(!t.hasClass(e[n]))return!1;return!0}}}(s[3]));l(function(e,t,n){if(e)return function(i){var o=i[e]?i[e]():"";return t?"="===t?o===n:"*="===t?o.indexOf(n)>=0:"~="===t?(" "+o+" ").indexOf(" "+n+" ")>=0:"!="===t?o!=n:"^="===t?0===o.indexOf(n):"$="===t&&o.substr(o.length-n.length)===n:!!n}}(s[4],s[5],s[6]));l(function(e){var n;if(e){if((e=/(?:not\((.+)\))|(.+)/i.exec(e))[1]){n=a(e[1],[]);return function(e){return!t(e,n)}}e=e[2];return function(t,n,i){return"first"===e?0===n:"last"===e?n===i-1:"even"===e?n%2==0:"odd"===e?n%2==1:!!t[e]&&t[e]()}}}(s[7]));i.psuedo=!!s[7];i.direct=r;return i}function a(e,t){var n,o,s,l=[];do{i.exec("");if(o=i.exec(e)){e=o[3];l.push(o[1]);if(o[2]){n=o[3];break}}}while(o);n&&a(n,t);e=[];for(s=0;s<l.length;s++)">"!=l[s]&&e.push(r(l[s],[],">"===l[s-1]));t.push(e);return t}this._selectors=a(e,[])},match:function(e,t){var n,i,o,r,a,s,l,d,c,u,f,h,p;for(n=0,i=(t=t||this._selectors).length;n<i;n++){p=e;h=0;for(o=(r=(a=t[n]).length)-1;o>=0;o--){d=a[o];for(;p;){if(d.psuedo){c=u=(f=p.parent().items()).length;for(;c--&&f[c]!==p;);}for(s=0,l=d.length;s<l;s++)if(!d[s](p,c,u)){s=l+1;break}if(s===l){h++;break}if(o===r-1)break;p=p.parent()}}if(h===r)return!0}return!1},find:function(e){var n,i,o=[],a=this._selectors;function s(e,t,n){var i,r,a,l,d,c=t[n];for(i=0,r=e.length;i<r;i++){d=e[i];for(a=0,l=c.length;a<l;a++)if(!c[a](d,i,r)){a=l+1;break}if(a===l)n==t.length-1?o.push(d):d.items&&s(d.items(),t,n+1);else if(c.direct)return;d.items&&s(d.items(),t,n)}}if(e.items){for(n=0,i=a.length;n<i;n++)s(e.items(),a[n],0);i>1&&(o=function(e){for(var t,n=[],i=e.length;i--;)if(!(t=e[i]).__checked){n.push(t);t.__checked=1}i=n.length;for(;i--;)delete n[i].__checked;return n}(o))}t||(t=r.Collection);return new t(o)}});return r}));i("tinymce/ui/Collection",["tinymce/util/Tools","tinymce/ui/Selector","tinymce/util/Class"],(function(e,t,n){var i,o,r=Array.prototype.push,a=Array.prototype.slice;o={length:0,init:function(e){e&&this.add(e)},add:function(t){var n=this;e.isArray(t)?r.apply(n,t):t instanceof i?n.add(t.toArray()):r.call(n,t);return n},set:function(e){var t,n=this,i=n.length;n.length=0;n.add(e);for(t=n.length;t<i;t++)delete n[t];return n},filter:function(e){var n,o,r,a,s=[];if("string"==typeof e){e=new t(e);a=function(t){return e.match(t)}}else a=e;for(n=0,o=this.length;n<o;n++)a(r=this[n])&&s.push(r);return new i(s)},slice:function(){return new i(a.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},each:function(t){e.each(this,t);return this},toArray:function(){return e.toArray(this)},indexOf:function(e){for(var t=this.length;t--&&this[t]!==e;);return t},reverse:function(){return new i(e.toArray(this).reverse())},hasClass:function(e){return!!this[0]&&this[0].hasClass(e)},prop:function(e,t){var n,i=this;if(undefined!==t){i.each((function(n){n[e]&&n[e](t)}));return i}if((n=i[0])&&n[e])return n[e]()},exec:function(t){var n=e.toArray(arguments).slice(1);this.each((function(e){e[t]&&e[t].apply(e,n)}));return this},remove:function(){for(var e=this.length;e--;)this[e].remove();return this}};e.each("fire on off show hide addClass removeClass append prepend before after reflow".split(" "),(function(t){o[t]=function(){var n=e.toArray(arguments);this.each((function(e){t in e&&e[t].apply(e,n)}));return this}}));e.each("text name disabled active selected checked visible parent value data".split(" "),(function(e){o[e]=function(t){return this.prop(e,t)}}));i=n.extend(o);t.Collection=i;return i}));i("tinymce/ui/DomUtils",["tinymce/util/Tools","tinymce/dom/DOMUtils"],(function(e,t){var n=0;return{id:function(){return"mceu_"+n++},createFragment:function(e){return t.DOM.createFragment(e)},getWindowSize:function(){return t.DOM.getViewPort()},getSize:function(e){var t,n;if(e.getBoundingClientRect){var i=e.getBoundingClientRect();t=Math.max(i.width||i.right-i.left,e.offsetWidth);n=Math.max(i.height||i.bottom-i.bottom,e.offsetHeight)}else{t=e.offsetWidth;n=e.offsetHeight}return{width:t,height:n}},getPos:function(e,n){return t.DOM.getPos(e,n)},getViewPort:function(e){return t.DOM.getViewPort(e)},get:function(e){return document.getElementById(e)},addClass:function(e,n){return t.DOM.addClass(e,n)},removeClass:function(e,n){return t.DOM.removeClass(e,n)},hasClass:function(e,n){return t.DOM.hasClass(e,n)},toggleClass:function(e,n,i){return t.DOM.toggleClass(e,n,i)},css:function(e,n,i){return t.DOM.setStyle(e,n,i)},getRuntimeStyle:function(e,n){return t.DOM.getStyle(e,n,!0)},on:function(e,n,i,o){return t.DOM.bind(e,n,i,o)},off:function(e,n,i){return t.DOM.unbind(e,n,i)},fire:function(e,n,i){return t.DOM.fire(e,n,i)},innerHtml:function(e,n){t.DOM.setHTML(e,n)}}}));i("tinymce/ui/Control",["tinymce/util/Class","tinymce/util/Tools","tinymce/util/EventDispatcher","tinymce/ui/Collection","tinymce/ui/DomUtils"],(function(e,t,n,i,o){
var r="onmousewheel"in document,a="mce-";function s(e){e._eventDispatcher||(e._eventDispatcher=new n({scope:e,toggleEvent:function(t,i){if(i&&n.isNative(t)){e._nativeEvents||(e._nativeEvents={});e._nativeEvents[t]=!0;e._rendered&&e.bindPendingEvents()}}}));return e._eventDispatcher}var l=e.extend({Statics:{classPrefix:a},isRtl:function(){return l.rtl},classPrefix:a,init:function(e){var n,i,r=this;r.settings=e=t.extend({},r.Defaults,e);r._id=e.id||o.id();r._text=r._name="";r._width=r._height=0;r._aria={role:e.role};this._elmCache={};if(n=e.classes){(n=n.split(" ")).map={};i=n.length;for(;i--;)n.map[n[i]]=!0}r._classes=n||[];r.visible(!0);t.each("title text width height name classes visible disabled active value".split(" "),(function(t){var n,i=e[t];i!==n?r[t](i):r["_"+t]===n&&(r["_"+t]=!1)}));r.on("click",(function(){if(r.disabled())return!1}));e.classes&&t.each(e.classes.split(" "),(function(e){r.addClass(e)}));r.settings=e;r._borderBox=r.parseBox(e.border);r._paddingBox=r.parseBox(e.padding);r._marginBox=r.parseBox(e.margin);e.hidden&&r.hide()},Properties:"parent,title,text,width,height,disabled,active,name,value",Methods:"renderHtml",getContainerElm:function(){return document.body},getParentCtrl:function(e){for(var t,n=this.getRoot().controlIdLookup;e&&n&&!(t=n[e.id]);)e=e.parentNode;return t},parseBox:function(e){var t;if(!e)return;if("number"==typeof e)return{top:e=e||0,left:e,bottom:e,right:e};if(1===(t=(e=e.split(" ")).length))e[1]=e[2]=e[3]=e[0];else if(2===t){e[2]=e[0];e[3]=e[1]}else 3===t&&(e[3]=e[1]);return{top:parseInt(e[0],10)||0,right:parseInt(e[1],10)||0,bottom:parseInt(e[2],10)||0,left:parseInt(e[3],10)||0}},borderBox:function(){return this._borderBox},paddingBox:function(){return this._paddingBox},marginBox:function(){return this._marginBox},measureBox:function(e,t){function n(t){var n=parseFloat(function(t){var n=document.defaultView;if(n){t=t.replace(/[A-Z]/g,(function(e){return"-"+e}));return n.getComputedStyle(e,null).getPropertyValue(t)}return e.currentStyle[t]}(t),10);return isNaN(n)?0:n}return{top:n(t+"TopWidth"),right:n(t+"RightWidth"),bottom:n(t+"BottomWidth"),left:n(t+"LeftWidth")}},initLayoutRect:function(){var e,t,n,i,r,a,s,l,d,c,u=this,f=u.settings,h=u.getEl();e=u._borderBox=u._borderBox||u.measureBox(h,"border");u._paddingBox=u._paddingBox||u.measureBox(h,"padding");u._marginBox=u._marginBox||u.measureBox(h,"margin");c=o.getSize(h);l=f.minWidth;d=f.minHeight;r=l||c.width;a=d||c.height;n=f.width;i=f.height;s=void 0!==(s=f.autoResize)?s:!n&&!i;n=n||r;i=i||a;var p=e.left+e.right,m=e.top+e.bottom,g=f.maxWidth||65535,y=f.maxHeight||65535;u._layoutRect=t={x:f.x||0,y:f.y||0,w:n,h:i,deltaW:p,deltaH:m,contentW:n-p,contentH:i-m,innerW:n-p,innerH:i-m,startMinWidth:l||0,startMinHeight:d||0,minW:Math.min(r,g),minH:Math.min(a,y),maxW:g,maxH:y,autoResize:s,scrollW:0};u._lastLayoutRect={};return t},layoutRect:function(e){var t,n,i,o,r,a,s=this,d=s._layoutRect;d||(d=s.initLayoutRect());if(e){i=d.deltaW;o=d.deltaH;e.x!==r&&(d.x=e.x);e.y!==r&&(d.y=e.y);e.minW!==r&&(d.minW=e.minW);e.minH!==r&&(d.minH=e.minH);if((n=e.w)!==r){n=(n=n<d.minW?d.minW:n)>d.maxW?d.maxW:n;d.w=n;d.innerW=n-i}if((n=e.h)!==r){n=(n=n<d.minH?d.minH:n)>d.maxH?d.maxH:n;d.h=n;d.innerH=n-o}if((n=e.innerW)!==r){n=(n=n<d.minW-i?d.minW-i:n)>d.maxW-i?d.maxW-i:n;d.innerW=n;d.w=n+i}if((n=e.innerH)!==r){n=(n=n<d.minH-o?d.minH-o:n)>d.maxH-o?d.maxH-o:n;d.innerH=n;d.h=n+o}e.contentW!==r&&(d.contentW=e.contentW);e.contentH!==r&&(d.contentH=e.contentH);if((t=s._lastLayoutRect).x!==d.x||t.y!==d.y||t.w!==d.w||t.h!==d.h){if((a=l.repaintControls)&&a.map&&!a.map[s._id]){a.push(s);a.map[s._id]=!0}t.x=d.x;t.y=d.y;t.w=d.w;t.h=d.h}return s}return d},repaint:function(){var e,t,n,i,o,r,a=this,s=0,l=0;r=document.createRange?function(e){return e}:Math.round;e=a.getEl().style;n=a._layoutRect;o=a._lastRepaintRect||{};s=(i=a._borderBox).left+i.right;l=i.top+i.bottom;if(n.x!==o.x){e.left=r(n.x)+"px";o.x=n.x}if(n.y!==o.y){e.top=r(n.y)+"px";o.y=n.y}if(n.w!==o.w){e.width=r(n.w-s)+"px";o.w=n.w}if(n.h!==o.h){e.height=r(n.h-l)+"px";o.h=n.h}if(a._hasBody&&n.innerW!==o.innerW){(t=a.getEl("body").style).width=r(n.innerW)+"px";o.innerW=n.innerW}if(a._hasBody&&n.innerH!==o.innerH){(t=t||a.getEl("body").style).height=r(n.innerH)+"px";o.innerH=n.innerH}a._lastRepaintRect=o;a.fire("repaint",{},!1)},on:function(e,t){var n=this;s(n).on(e,function(e){var t,i;if("string"!=typeof e)return e;return function(o){t||n.parentsAndSelf().each((function(n){var o=n.settings.callbacks;if(o&&(t=o[e])){i=n;return!1}}));return t.call(i,o)}}(t));return n},off:function(e,t){s(this).off(e,t);return this},fire:function(e,t,n){var i=this;(t=t||{}).control||(t.control=i);t=s(i).fire(e,t);if(!1!==n&&i.parent)for(var o=i.parent();o&&!t.isPropagationStopped();){o.fire(e,t,!1);o=o.parent()}return t},hasEventListeners:function(e){return s(this).has(e)},parents:function(e){var t,n=new i;for(t=this.parent();t;t=t.parent())n.add(t);e&&(n=n.filter(e));return n},parentsAndSelf:function(e){return new i(this).add(this.parents(e))},next:function(){var e=this.parent().items();return e[e.indexOf(this)+1]},prev:function(){var e=this.parent().items();return e[e.indexOf(this)-1]},findCommonAncestor:function(e,t){for(var n;e;){n=t;for(;n&&e!=n;)n=n.parent();if(e==n)break;e=e.parent()}return e},hasClass:function(e,t){var n=this._classes[t||"control"];e=this.classPrefix+e;return n&&!!n.map[e]},addClass:function(e,t){var n,i,o=this;e=this.classPrefix+e;if(!(n=o._classes[t||"control"])){(n=[]).map={};o._classes[t||"control"]=n}if(!n.map[e]){n.map[e]=e;n.push(e);o._rendered&&(i=o.getEl(t))&&(i.className=n.join(" "))}return o},removeClass:function(e,t){var n,i,o,r=this;e=this.classPrefix+e;if((n=r._classes[t||"control"])&&n.map[e]){delete n.map[e];i=n.length;for(;i--;)n[i]===e&&n.splice(i,1)}r._rendered&&(o=r.getEl(t))&&(o.className=n.join(" "));return r},toggleClass:function(e,t,n){var i=this;t?i.addClass(e,n):i.removeClass(e,n);return i},classes:function(e){var t=this._classes[e||"control"];return t?t.join(" "):""},innerHtml:function(e){o.innerHtml(this.getEl(),e);return this},getEl:function(e){var t=e?this._id+"-"+e:this._id;this._elmCache[t]||(this._elmCache[t]=o.get(t));return this._elmCache[t]},visible:function(e){var t,n=this;if(void 0!==e){if(n._visible!==e){n._rendered&&(n.getEl().style.display=e?"":"none");n._visible=e;(t=n.parent())&&(t._lastRect=null);n.fire(e?"show":"hide")}return n}return n._visible},show:function(){return this.visible(!0)},hide:function(){return this.visible(!1)},focus:function(){try{this.getEl().focus()}catch(e){}return this},blur:function(){this.getEl().blur();return this},aria:function(e,t){var n=this,i=n.getEl(n.ariaTarget);if(void 0===t)return n._aria[e];n._aria[e]=t;n._rendered&&i.setAttribute("role"==e?e:"aria-"+e,t);return n},encode:function(e,t){!1!==t&&(e=this.translate(e));return(e||"").replace(/[&<>"]/g,(function(e){return"&#"+e.charCodeAt(0)+";"}))},translate:function(e){return l.translate?l.translate(e):e},before:function(e){var t=this,n=t.parent();n&&n.insert(e,n.items().indexOf(t),!0);return t},after:function(e){var t=this,n=t.parent();n&&n.insert(e,n.items().indexOf(t));return t},remove:function(){var e,t,n=this,i=n.getEl(),r=n.parent();if(n.items){var a=n.items().toArray();t=a.length;for(;t--;)a[t].remove()}if(r&&r.items){e=[];r.items().each((function(t){t!==n&&e.push(t)}));r.items().set(e);r._lastRect=null}n._eventsRoot&&n._eventsRoot==n&&o.off(i);var s=n.getRoot().controlIdLookup;s&&delete s[n._id];i&&i.parentNode&&i.parentNode.removeChild(i);n._rendered=!1;return n},renderBefore:function(e){var t=this;e.parentNode.insertBefore(o.createFragment(t.renderHtml()),e);t.postRender();return t},renderTo:function(e){var t=this;(e=e||t.getContainerElm()).appendChild(o.createFragment(t.renderHtml()));t.postRender();return t},postRender:function(){var e,t,n,i,r,a=this,s=a.settings;for(i in s)0===i.indexOf("on")&&a.on(i.substr(2),s[i]);if(a._eventsRoot){for(n=a.parent();!r&&n;n=n.parent())r=n._eventsRoot;if(r)for(i in r._nativeEvents)a._nativeEvents[i]=!0}a.bindPendingEvents();if(s.style&&(e=a.getEl())){e.setAttribute("style",s.style);e.style.cssText=s.style}a._visible||o.css(a.getEl(),"display","none")
;if(a.settings.border){t=a.borderBox();o.css(a.getEl(),{"border-top-width":t.top,"border-right-width":t.right,"border-bottom-width":t.bottom,"border-left-width":t.left})}var l=a.getRoot();l.controlIdLookup||(l.controlIdLookup={});l.controlIdLookup[a._id]=a;for(var d in a._aria)a.aria(d,a._aria[d]);a.fire("postrender",{},!1)},scrollIntoView:function(e){var t,n,i,o,r,a,s=this.getEl(),l=s.parentNode,d=function(e,t){var n,i,o=e;n=i=0;for(;o&&o!=t&&o.nodeType;){n+=o.offsetLeft||0;i+=o.offsetTop||0;o=o.offsetParent}return{x:n,y:i}}(s,l);t=d.x;n=d.y;i=s.offsetWidth;o=s.offsetHeight;r=l.clientWidth;a=l.clientHeight;if("end"==e){t-=r-i;n-=a-o}else if("center"==e){t-=r/2-i/2;n-=a/2-o/2}l.scrollLeft=t;l.scrollTop=n;return this},bindPendingEvents:function(){var e,t,n,i,a,s,l=this;function d(e){var t=l.getParentCtrl(e.target);t&&t.fire(e.type,e)}function c(){var e=i._lastHoverCtrl;if(e){e.fire("mouseleave",{target:e.getEl()});e.parents().each((function(e){e.fire("mouseleave",{target:e.getEl()})}));i._lastHoverCtrl=null}}function u(e){var t,n,o,r=l.getParentCtrl(e.target),a=i._lastHoverCtrl,s=0;if(r!==a){i._lastHoverCtrl=r;(n=r.parents().toArray().reverse()).push(r);if(a){(o=a.parents().toArray().reverse()).push(a);for(s=0;s<o.length&&n[s]===o[s];s++);for(t=o.length-1;t>=s;t--)(a=o[t]).fire("mouseleave",{target:a.getEl()})}for(t=s;t<n.length;t++)(r=n[t]).fire("mouseenter",{target:r.getEl()})}}function f(e){e.preventDefault();if("mousewheel"==e.type){e.deltaY=-1/40*e.wheelDelta;e.wheelDeltaX&&(e.deltaX=-1/40*e.wheelDeltaX)}else{e.deltaX=0;e.deltaY=e.detail}e=l.fire("wheel",e)}l._rendered=!0;if(a=l._nativeEvents){(n=l.parents().toArray()).unshift(l);for(e=0,t=n.length;!i&&e<t;e++)i=n[e]._eventsRoot;i||(i=n[n.length-1]||l);l._eventsRoot=i;for(t=e,e=0;e<t;e++)n[e]._eventsRoot=i;var h=i._delegates;h||(h=i._delegates={});for(s in a){if(!a)return!1;if("wheel"===s){r?o.on(l.getEl(),"mousewheel",f):o.on(l.getEl(),"DOMMouseScroll",f);continue}if("mouseenter"===s||"mouseleave"===s){if(!i._hasMouseEnter){o.on(i.getEl(),"mouseleave",c);o.on(i.getEl(),"mouseover",u);i._hasMouseEnter=1}}else if(!h[s]){o.on(i.getEl(),s,d);h[s]=!0}a[s]=!1}}},getRoot:function(){for(var e,t=this,n=[];t;){if(t.rootControl){e=t.rootControl;break}n.push(t);e=t;t=t.parent()}e||(e=this);for(var i=n.length;i--;)n[i].rootControl=e;return e},reflow:function(){this.repaint();return this}});return l}));i("tinymce/ui/Factory",[],(function(){var e,t={};return{add:function(e,n){t[e.toLowerCase()]=n},has:function(e){return!!t[e.toLowerCase()]},create:function(n,i){var o,r,a;if(!e){a=tinymce.ui;for(r in a)t[r.toLowerCase()]=a[r];e=!0}"string"==typeof n?(i=i||{}).type=n:n=(i=n).type;n=n.toLowerCase();if(!(o=t[n]))throw new Error("Could not find control by type: "+n);(o=new o(i)).type=n;return o}}}));i("tinymce/ui/KeyboardNavigation",[],(function(){return function(e){var t,n,i=e.root;try{t=document.activeElement}catch(e){t=document.body}n=i.getParentCtrl(t);function o(e){return(e=e||t)&&e.getAttribute("role")}function r(e){for(var n,i=e||t;i=i.parentNode;)if(n=o(i))return n}function a(e){if(t)return t.getAttribute("aria-"+e)}function s(e){var t=e.tagName.toUpperCase();return"INPUT"==t||"TEXTAREA"==t}function l(e){var t=[];(function e(n){if(1!=n.nodeType||"none"==n.style.display)return;(function(e){if(s(e)&&!e.hidden)return!0;if(/^(button|menuitem|checkbox|tab|menuitemcheckbox|option|gridcell)$/.test(o(e)))return!0;return!1})(n)&&t.push(n);n.classList.contains("mce-close")&&t.push(n);for(var i=0;i<n.childNodes.length;i++)e(n.childNodes[i])})(e||i.getEl());return t}function d(e){var t,i;(i=(e=e||n).parents().toArray()).unshift(e);for(var o=0;o<i.length&&!(t=i[o]).settings.ariaRoot;o++);return t}function c(e,t){e<0?e=t.length-1:e>=t.length&&(e=0);t[e]&&t[e].focus();return e}function u(e,n){var i=-1,o=d();n=n||l(o.getEl());for(var r=0;r<n.length;r++)n[r]===t&&(i=r);i+=e;o.lastAriaIndex=c(i,n)}function f(){"tablist"==r()?u(-1,l(t.parentNode)):n.parent().submenu?g():u(-1)}function h(){var e=o(),n=r();"tablist"==n?u(1,l(t.parentNode)):"menuitem"==e&&"menu"==n&&a("haspopup")?y():u(1)}function p(){u(-1)}function m(){var e=o(),t=r();"menuitem"==e&&"menubar"==t?y():"button"==e&&a("haspopup")?y({key:"down"}):u(1)}function g(){n.fire("cancel")}function y(e){e=e||{};n.fire("click",{target:t,aria:e})}i.on("keydown",(function(e){function i(e,n){if(s(t))return;!1!==n(e)&&e.preventDefault()}if(e.isDefaultPrevented())return;switch(e.keyCode){case 37:i(e,f);break;case 39:i(e,h);break;case 38:i(e,p);break;case 40:i(e,m);break;case 27:g();break;case 14:case 13:case 32:i(e,y);break;case 9:!1!==function(e){if("tablist"==r()){var t=l(n.getEl("body"))[0];t&&t.focus()}else u(e.shiftKey?-1:1)}(e)&&e.preventDefault()}}));i.on("focusin",(function(e){t=e.target;n=e.control}));return{focusFirst:function(e){var t=d(e),n=l(t.getEl());t.settings.ariaRemember&&"lastAriaIndex"in t?c(t.lastAriaIndex,n):c(0,n)}}}}));i("tinymce/ui/Container",["tinymce/ui/Control","tinymce/ui/Collection","tinymce/ui/Selector","tinymce/ui/Factory","tinymce/ui/KeyboardNavigation","tinymce/util/Tools","tinymce/ui/DomUtils"],(function(e,t,n,i,o,r,a){var s={};return e.extend({layout:"",innerClass:"container-inner",init:function(e){var n=this;n._super(e);e=n.settings;n._fixed=e.fixed;n._items=new t;n.isRtl()&&n.addClass("rtl");n.addClass("container");n.addClass("container-body","body");e.containerCls&&n.addClass(e.containerCls);n._layout=i.create((e.layout||n.layout)+"layout");n.settings.items&&n.add(n.settings.items);n._hasBody=!0},items:function(){return this._items},find:function(e){return(e=s[e]=s[e]||new n(e)).find(this)},add:function(e){var t=this;t.items().add(t.create(e)).parent(t);return t},focus:function(e){var t,n,i,o=this;if(e&&(n=o.keyboardNav||o.parents().eq(-1)[0].keyboardNav)){n.focusFirst(o);return}i=o.find("*");o.statusbar&&i.add(o.statusbar.items());i.each((function(e){if(e.settings.autofocus){t=null;return!1}e.canFocus&&(t=t||e)}));t&&t.focus();return o},replace:function(e,t){for(var n,i=this.items(),o=i.length;o--;)if(i[o]===e){i[o]=t;break}if(o>=0){(n=t.getEl())&&n.parentNode.removeChild(n);(n=e.getEl())&&n.parentNode.removeChild(n)}t.parent(this)},create:function(t){var n,o=this,a=[];r.isArray(t)||(t=[t]);r.each(t,(function(t){if(t){if(!(t instanceof e)){"string"==typeof t&&(t={type:t});n=r.extend({},o.settings.defaults,t);t.type=n.type=n.type||t.type||o.settings.defaultType||(n.defaults?n.defaults.type:null);t=i.create(n)}a.push(t)}}));return a},renderNew:function(){var e=this;e.items().each((function(t,n){var i,o;t.parent(e);if(!t._rendered){i=e.getEl("body");o=a.createFragment(t.renderHtml());i.hasChildNodes()&&n<=i.childNodes.length-1?i.insertBefore(o,i.childNodes[n]):i.appendChild(o);t.postRender()}}));e._layout.applyClasses(e);e._lastRect=null;return e},append:function(e){return this.add(e).renderNew()},prepend:function(e){var t=this;t.items().set(t.create(e).concat(t.items().toArray()));return t.renderNew()},insert:function(e,t,n){var i,o,r,a=this;e=a.create(e);i=a.items();!n&&t<i.length-1&&(t+=1);if(t>=0&&t<i.length){o=i.slice(0,t).toArray();r=i.slice(t).toArray();i.set(o.concat(e,r))}return a.renderNew()},fromJSON:function(e){for(var t in e)this.find("#"+t).value(e[t]);return this},toJSON:function(){var e={};this.find("*").each((function(t){var n=t.name(),i=t.value();n&&void 0!==i&&(e[n]=i)}));return e},preRender:function(){},renderHtml:function(){var e=this,t=e._layout,n=this.settings.role;e.preRender();t.preRender(e);return'<div id="'+e._id+'" class="'+e.classes()+'"'+(n?' role="'+this.settings.role+'"':"")+'><div id="'+e._id+'-body" class="'+e.classes("body")+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"},postRender:function(){var e,t=this;t.items().exec("postRender");t._super();t._layout.postRender(t);t._rendered=!0;t.settings.style&&a.css(t.getEl(),t.settings.style);if(t.settings.border){e=t.borderBox();a.css(t.getEl(),{"border-top-width":e.top,"border-right-width":e.right,"border-bottom-width":e.bottom,"border-left-width":e.left})}t.parent()||(t.keyboardNav=new o({root:t}));return t},initLayoutRect:function(){var e=this,t=e._super();e._layout.recalc(e);return t},recalc:function(){
var e=this,t=e._layoutRect,n=e._lastRect;if(!n||n.w!=t.w||n.h!=t.h){e._layout.recalc(e);t=e.layoutRect();e._lastRect={x:t.x,y:t.y,w:t.w,h:t.h};return!0}},reflow:function(){var t;if(this.visible()){e.repaintControls=[];e.repaintControls.map={};this.recalc();t=e.repaintControls.length;for(;t--;)e.repaintControls[t].repaint();"flow"!==this.settings.layout&&"stack"!==this.settings.layout&&this.repaint();e.repaintControls=[]}return this}})}));i("tinymce/ui/DragHelper",["tinymce/ui/DomUtils"],(function(e){return function(t,n){var i,o,r,a,s,l,d,c=document;n=n||{};function u(){return c.getElementById(n.handle||t)}r=function(t){var r,f,h=function(){var e,t,n,i,o,r,a,s,l=document,d=Math.max;e=l.documentElement;t=l.body;n=d(e.scrollWidth,t.scrollWidth);i=d(e.clientWidth,t.clientWidth);o=d(e.offsetWidth,t.offsetWidth);r=d(e.scrollHeight,t.scrollHeight);a=d(e.clientHeight,t.clientHeight);return{width:n<o?i:n,height:r<(s=d(e.offsetHeight,t.offsetHeight))?a:r}}();t.preventDefault();o=t.button;r=u();l=t.screenX;d=t.screenY;f=window.getComputedStyle?window.getComputedStyle(r,null).getPropertyValue("cursor"):r.runtimeStyle.cursor;i=c.createElement("div");e.css(i,{position:"absolute",top:0,left:0,width:h.width,height:h.height,zIndex:2147483647,opacity:1e-4,cursor:f});c.body.appendChild(i);e.on(c,"mousemove",s);e.on(c,"mouseup",a);n.start(t)};s=function(e){if(e.button!==o)return a(e);e.deltaX=e.screenX-l;e.deltaY=e.screenY-d;e.preventDefault();n.drag(e)};a=function(t){e.off(c,"mousemove",s);e.off(c,"mouseup",a);i.parentNode.removeChild(i);n.stop&&n.stop(t)};this.destroy=function(){e.off(u())};e.on(u(),"mousedown",r)}}));i("tinymce/ui/Scrollable",["tinymce/ui/DomUtils","tinymce/ui/DragHelper"],(function(e,t){return{init:function(){this.on("repaint",this.renderScroll)},renderScroll:function(){var n=this;function i(){var t,i,o;function r(o,r,a,s,l,d){var c,u,f,h,p,m,g,y,v;if(u=n.getEl("scroll"+o)){y=r.toLowerCase();v=a.toLowerCase();n.getEl("absend")&&e.css(n.getEl("absend"),y,n.layoutRect()[s]-1);if(!l){e.css(u,"display","none");return}e.css(u,"display","block");c=n.getEl("body");f=n.getEl("scroll"+o+"t");h=c["client"+a]-4;m=(h-=t&&i?u["client"+d]:0)/(p=c["scroll"+a]);(g={})[y]=c["offset"+r]+2;g[v]=h;e.css(u,g);(g={})[y]=c["scroll"+r]*m;g[v]=h*m;e.css(f,g)}}o=n.getEl("body");t=o.scrollWidth>o.clientWidth;i=o.scrollHeight>o.clientHeight;r("h","Left","Width","contentW",t,"Height");r("v","Top","Height","contentH",i,"Width")}if(n.settings.autoScroll){if(!n._hasScroll){n._hasScroll=!0;(function(){function i(i,o,r,a,s){var l,d=n._id+"-scroll"+i,c=n.classPrefix;n.getEl().appendChild(e.createFragment('<div id="'+d+'" class="'+c+"scrollbar "+c+"scrollbar-"+i+'"><div id="'+d+'t" class="'+c+'scrollbar-thumb"></div></div>'));n.draghelper=new t(d+"t",{start:function(){l=n.getEl("body")["scroll"+o];e.addClass(e.get(d),c+"active")},drag:function(e){var t,d,c,u,f=n.layoutRect();d=f.contentW>f.innerW;c=f.contentH>f.innerH;u=n.getEl("body")["client"+r]-4;t=(u-=d&&c?n.getEl("scroll"+i)["client"+s]:0)/n.getEl("body")["scroll"+r];n.getEl("body")["scroll"+o]=l+e["delta"+a]/t},stop:function(){e.removeClass(e.get(d),c+"active")}})}n.addClass("scroll");i("v","Top","Height","Y","Width");i("h","Left","Width","X","Height")})();n.on("wheel",(function(e){var t=n.getEl("body");t.scrollLeft+=10*(e.deltaX||0);t.scrollTop+=10*e.deltaY;i()}));e.on(n.getEl("body"),"scroll",i)}i()}}}}));i("tinymce/ui/Panel",["tinymce/ui/Container","tinymce/ui/Scrollable"],(function(e,t){return e.extend({Defaults:{layout:"fit",containerCls:"panel"},Mixins:[t],renderHtml:function(){var e=this,t=e._layout,n=e.settings.html;e.preRender();t.preRender(e);if(void 0===n)n='<div id="'+e._id+'-body" class="'+e.classes("body")+'">'+t.renderHtml(e)+"</div>";else{"function"==typeof n&&(n=n.call(e));e._hasBody=!1}return'<div id="'+e._id+'" class="'+e.classes()+'" hidefocus="1" tabindex="-1">'+(e._preBodyHtml||"")+n+"</div>"}})}));i("tinymce/ui/Movable",["tinymce/ui/DomUtils"],(function(e){function t(t,n,i){var o,r,a,s,l,d,c,u,f,h;f=e.getViewPort();a=(r=e.getPos(n)).x;s=r.y;if(t._fixed&&"static"==e.getRuntimeStyle(document.body,"position")){a-=f.x;s-=f.y}o=t.getEl();l=(h=e.getSize(o)).width;d=h.height;c=(h=e.getSize(n)).width;u=h.height;"b"===(i=(i||"").split(""))[0]&&(s+=u);"r"===i[1]&&(a+=c);"c"===i[0]&&(s+=Math.round(u/2));"c"===i[1]&&(a+=Math.round(c/2));"b"===i[3]&&(s-=d);"r"===i[4]&&(a-=l);"c"===i[3]&&(s-=Math.round(d/2));"c"===i[4]&&(a-=Math.round(l/2));return{x:a,y:s,w:l,h:d}}return{testMoveRel:function(n,i){for(var o=e.getViewPort(),r=0;r<i.length;r++){var a=t(this,n,i[r]);if(this._fixed){if(a.x>0&&a.x+a.w<o.w&&a.y>0&&a.y+a.h<o.h)return i[r]}else if(a.x>o.x&&a.x+a.w<o.w+o.x&&a.y>o.y&&a.y+a.h<o.h+o.y)return i[r]}return i[0]},moveRel:function(e,n){"string"!=typeof n&&(n=this.testMoveRel(e,n));var i=t(this,e,n);return this.moveTo(i.x,i.y)},moveBy:function(e,t){var n=this,i=n.layoutRect();n.moveTo(i.x+e,i.y+t);return n},moveTo:function(t,n){var i=this;function o(e,t,n){if(e<0)return 0;if(e+n>t)return(e=t-n)<0?0:e;return e}if(i.settings.constrainToViewport){var r=e.getViewPort(window),a=i.layoutRect();t=o(t,r.w+r.x,a.w);n=o(n,r.h+r.y,a.h)}if(i._rendered)i.layoutRect({x:t,y:n}).repaint();else{i.settings.x=t;i.settings.y=n}i.fire("move",{x:t,y:n});return i}}}));i("tinymce/ui/Resizable",["tinymce/ui/DomUtils"],(function(e){return{resizeToContent:function(){this._layoutRect.autoResize=!0;this._lastRect=null;this.reflow()},resizeTo:function(t,n){if(t<=1||n<=1){var i=e.getWindowSize();t=t<=1?t*i.w:t;n=n<=1?n*i.h:n}this._layoutRect.autoResize=!1;return this.layoutRect({minW:t,minH:n,w:t,h:n}).reflow()},resizeBy:function(e,t){var n=this.layoutRect();return this.resizeTo(n.w+e,n.h+t)}}}));i("tinymce/ui/FloatPanel",["tinymce/ui/Panel","tinymce/ui/Movable","tinymce/ui/Resizable","tinymce/ui/DomUtils"],(function(e,t,n,i){var o,r,a,s,l=[],d=[];function c(e){var t=i.getViewPort().y;function n(t,n){for(var i,o=0;o<l.length;o++)if(l[o]!=e){i=l[o].parent();for(;i&&(i=i.parent());)i==e&&l[o].fixed(t).moveBy(0,n).repaint()}}if(e.settings.autofix)if(e._fixed){if(e._autoFixY>t){e.fixed(!1).layoutRect({y:e._autoFixY}).repaint();n(!1,e._autoFixY-t)}}else{e._autoFixY=e.layoutRect().y;if(e._autoFixY<t){e.fixed(!0).layoutRect({y:0}).repaint();n(!0,t-e._autoFixY)}}}function u(e,t){var n,o,r=f.zIndex||65535;if(e)d.push(t);else{n=d.length;for(;n--;)d[n]===t&&d.splice(n,1)}if(d.length)for(n=0;n<d.length;n++){if(d[n].modal){r++;o=d[n]}d[n].getEl().style.zIndex=r;d[n].zIndex=r;r++}var a=document.getElementById(t.classPrefix+"modal-block");if(o)i.css(a,"z-index",o.zIndex-1);else if(a){a.parentNode.removeChild(a);s=!1}f.currentZIndex=r}var f=e.extend({Mixins:[t,n],init:function(e){var t=this;t._super(e);t._eventsRoot=t;t.addClass("floatpanel");if(e.autohide){(function(){function e(e,t){for(;e;){if(e==t)return!0;e=e.parent()}}if(!o){o=function(t){if(2==t.button)return;for(var n=l.length;n--;){var i=l[n],o=i.getParentCtrl(t.target);if(i.settings.autohide){if(o&&(e(o,i)||i.parent()===o))continue;(t=i.fire("autohide",{target:t.target})).isDefaultPrevented()||i.hide()}}};i.on(document,"click",o)}})();(function(){if(!a){var e=document.documentElement,t=e.clientWidth,n=e.clientHeight;a=function(){if(!document.all||t!=e.clientWidth||n!=e.clientHeight){t=e.clientWidth;n=e.clientHeight;f.hideAll()}};i.on(window,"resize",a)}})();l.push(t)}if(e.autofix){(function(){if(!r){r=function(){var e;e=l.length;for(;e--;)c(l[e])};i.on(window,"scroll",r)}})();t.on("move",(function(){c(this)}))}t.on("postrender show",(function(e){if(e.control==t){var n,o=t.classPrefix;if(t.modal&&!s){n=(n=i.createFragment('<div id="'+o+'modal-block" class="'+o+"reset "+o+'fade"></div>')).firstChild;t.getContainerElm().appendChild(n);setTimeout((function(){i.addClass(n,o+"in");i.addClass(t.getEl(),o+"in")}),0);s=!0}u(!0,t)}}));t.on("show",(function(){t.parents().each((function(e){if(e._fixed){t.fixed(!0);return!1}}))}));if(e.popover){t._preBodyHtml='<div class="'+t.classPrefix+'arrow"></div>';t.addClass("popover").addClass("bottom").addClass(t.isRtl()?"end":"start")}},fixed:function(e){var t=this;if(t._fixed!=e){if(t._rendered){var n=i.getViewPort();e?t.layoutRect().y-=n.y:t.layoutRect().y+=n.y}
t.toggleClass("fixed",e);t._fixed=e}return t},show:function(){var e,t=this,n=t._super();e=l.length;for(;e--&&l[e]!==t;);-1===e&&l.push(t);return n},hide:function(){h(this);u(!1,this);return this._super()},hideAll:function(){f.hideAll()},close:function(){var e=this;if(!e.fire("close").isDefaultPrevented()){e.remove();u(!1,e)}return e},remove:function(){h(this);this._super()},postRender:function(){var e=this;e.settings.bodyRole&&this.getEl("body").setAttribute("role",e.settings.bodyRole);return e._super()}});f.hideAll=function(){for(var e=l.length;e--;){var t=l[e];if(t&&t.settings.autohide){t.hide();l.splice(e,1)}}};function h(e){var t;t=l.length;for(;t--;)l[t]===e&&l.splice(t,1);t=d.length;for(;t--;)d[t]===e&&d.splice(t,1)}return f}));i("tinymce/ui/Window",["tinymce/ui/FloatPanel","tinymce/ui/Panel","tinymce/ui/DomUtils"],(function(e,t,n){return e.extend({modal:!0,Defaults:{layout:"flex",containerCls:"panel",role:"dialog",callbacks:{submit:function(){this.fire("submit",{data:this.toJSON()})},close:function(){this.close()}}},init:function(e){var n=this;n._super(e);n.isRtl()&&n.addClass("rtl");n.addClass("window");n._fixed=!0;if(e.buttons){n.statusbar=new t({layout:"flex",border:"1 0 0 0",spacing:3,padding:10,align:"center",pack:n.isRtl()?"start":"end",defaults:{type:"button"},items:e.buttons});n.statusbar.addClass("foot");n.statusbar.parent(n)}n.on("click",(function(e){-1!=e.target.className.indexOf(n.classPrefix+"close")&&n.close()}));n.on("cancel",(function(){n.close()}));n.aria("describedby",n.describedBy||n._id+"-none");n.aria("label",e.title);n._fullscreen=!1},recalc:function(){var e,t,i,o,r=this,a=r.statusbar;if(r._fullscreen){r.layoutRect(n.getWindowSize());r.layoutRect().contentH=r.layoutRect().innerH}r._super();e=r.layoutRect();if(r.settings.title&&!r._fullscreen&&(t=e.headerW)>e.w){i=e.x-Math.max(0,t/2);r.layoutRect({w:t,x:i});o=!0}if(a){a.layoutRect({w:r.layoutRect().innerW}).recalc();if((t=a.layoutRect().minW+e.deltaW)>e.w){i=e.x-Math.max(0,t-e.w);r.layoutRect({w:t,x:i});o=!0}}o&&r.recalc()},initLayoutRect:function(){var e,t=this,i=t._super(),o=0;if(t.settings.title&&!t._fullscreen){e=t.getEl("head");var r=n.getSize(e);i.headerW=r.width;i.headerH=r.height;o+=i.headerH}t.statusbar&&(o+=t.statusbar.layoutRect().h);i.deltaH+=o;i.minH+=o;i.h+=o;var a=n.getWindowSize();i.x=Math.max(0,a.w/2-i.w/2);i.y=Math.max(0,a.h/2-i.h/2);return i},renderHtml:function(){var e=this,t=e._layout,n=e._id,i=e.classPrefix,o=e.settings,r="",a="",s=o.html;e.preRender();t.preRender(e);o.title&&(r='<div id="'+n+'-head" class="'+i+'window-head"><h2 id="'+n+'-title" class="'+i+'title" tabindex="-1">'+e.encode(o.title)+'</h2><button type="button" id="'+n+'-close" class="'+i+'close" aria-label="'+o.insert_link_dialog_close_label+'">×</button><div id="'+n+'-dragh" class="'+i+'dragh"></div></div>');o.url&&(s='<iframe src="'+o.url+'" tabindex="-1"></iframe>');void 0===s&&(s=t.renderHtml(e));e.statusbar&&(a=e.statusbar.renderHtml());return'<div id="'+n+'" class="'+e.classes()+'" hidefocus="1"><div class="'+e.classPrefix+'reset">'+r+'<div id="'+n+'-body" class="'+e.classes("body")+'">'+s+"</div>"+a+"</div></div>"},fullscreen:function(e){var t,i,o=this,r=document.documentElement,a=o.classPrefix;if(e!=o._fullscreen){n.on(window,"resize",(function(){var e;if(o._fullscreen)if(t)o._timer||(o._timer=setTimeout((function(){var e=n.getWindowSize();o.moveTo(0,0).resizeTo(e.w,e.h);o._timer=0}),50));else{e=(new Date).getTime();var i=n.getWindowSize();o.moveTo(0,0).resizeTo(i.w,i.h);(new Date).getTime()-e>50&&(t=!0)}}));i=o.layoutRect();o._fullscreen=e;if(e){o._initial={x:i.x,y:i.y,w:i.w,h:i.h};o._borderBox=o.parseBox("0");o.getEl("head").style.display="none";i.deltaH-=i.headerH+2;n.addClass(r,a+"fullscreen");n.addClass(document.body,a+"fullscreen");o.addClass("fullscreen");var s=n.getWindowSize();o.moveTo(0,0).resizeTo(s.w,s.h)}else{o._borderBox=o.parseBox(o.settings.border);o.getEl("head").style.display="";i.deltaH+=i.headerH;n.removeClass(r,a+"fullscreen");n.removeClass(document.body,a+"fullscreen");o.removeClass("fullscreen");o.moveTo(o._initial.x,o._initial.y).resizeTo(o._initial.w,o._initial.h)}}return o.reflow()},postRender:function(){var e=this;setTimeout((function(){e.addClass("in")}),0);e._super();e.statusbar&&e.statusbar.postRender();e.focus();e.on("submit",(function(t){t.isDefaultPrevented()||e.close()}));document.getElementById(`${e._id}-close`)?.focus()},submit:function(){return this.fire("submit",{data:this.toJSON()})},remove:function(){var e=this,t=e.classPrefix;e._super();e.statusbar&&this.statusbar.remove();if(e._fullscreen){n.removeClass(document.documentElement,t+"fullscreen");n.removeClass(document.body,t+"fullscreen")}},getContentWindow:function(){var e=this.getEl().getElementsByTagName("iframe")[0];return e?e.contentWindow:null}})}));i("tinymce/ui/MessageBox",["tinymce/ui/Window"],(function(e){var t=e.extend({init:function(e){e={border:1,padding:20,layout:"flex",pack:"center",align:"center",containerCls:"panel",autoScroll:!0,buttons:{type:"button",text:"Ok",action:"ok"},items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200}};this._super(e)},Statics:{OK:1,OK_CANCEL:2,YES_NO:3,YES_NO_CANCEL:4,msgBox:function(n){var i,o=n.callback||function(){};function r(e,t,n){return{type:"button",text:e,subtype:n?"primary":"",onClick:function(e){e.control.parents()[1].close();o(t)}}}switch(n.buttons){case t.OK_CANCEL:i=[r("Ok",!0,!0),r("Cancel",!1)];break;case t.YES_NO:case t.YES_NO_CANCEL:i=[r("Yes",1,!0),r("No",0)];n.buttons==t.YES_NO_CANCEL&&i.push(r("Cancel",-1));break;default:i=[r("Ok",!0,!0)]}return new e({padding:20,x:n.x,y:n.y,minWidth:300,minHeight:100,layout:"flex",pack:"center",align:"center",buttons:i,title:n.title,role:"alertdialog",items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200,text:n.text},onPostRender:function(){this.aria("describedby",this.items()[0]._id)},onClose:n.onClose,onCancel:function(){o(!1)}}).renderTo(document.body).reflow()},alert:function(e,n){"string"==typeof e&&(e={text:e});e.callback=n;return t.msgBox(e)},confirm:function(e,n){"string"==typeof e&&(e={text:e});e.callback=n;e.buttons=t.OK_CANCEL;return t.msgBox(e)}}});return t}));i("tinymce/WindowManager",["tinymce/ui/Window","tinymce/ui/MessageBox"],(function(e,t){return function(n){var i=this,o=[];function r(){if(o.length)return o[o.length-1]}i.windows=o;n.on("remove",(function(){for(var e=o.length;e--;)o[e].close()}));i.open=function(t,i){var r;n.editorManager.setActive(n);t.title=t.title||" ";t.url=t.url||t.file;if(t.url){t.width=parseInt(t.width||320,10);t.height=parseInt(t.height||240,10)}t.body&&(t.items={defaults:t.defaults,type:t.bodyType||"form",items:t.body});t.url||t.buttons||(t.buttons=[{text:"Ok",subtype:"primary",onclick:function(){r.find("form")[0].submit()}},{text:"Cancel",onclick:function(){r.close()}}]);r=new e(t);o.push(r);r.on("close",(function(){for(var e=o.length;e--;)o[e]===r&&o.splice(e,1);o.length||n.focus()}));t.data&&r.on("postRender",(function(){this.find("*").each((function(e){var n=e.name();n in t.data&&e.value(t.data[n])}))}));r.features=t||{};r.params=i||{};1===o.length&&n.nodeChanged();return r.renderTo()};i.alert=function(e,i,o){t.alert(e,(function(){i?i.call(o||this):n.focus()}))};i.confirm=function(e,n,i){t.confirm(e,(function(e){n.call(i||this,e)}))};i.close=function(){r()&&r().close()};i.getParams=function(){return r()?r().params:null};i.setParams=function(e){r()&&(r().params=e)};i.getWindows=function(){return o}}}));i("tinymce/util/Quirks",["tinymce/util/VK","tinymce/dom/RangeUtils","tinymce/dom/TreeWalker","tinymce/html/Node","tinymce/html/Entities","tinymce/Env","tinymce/util/Tools"],(function(e,t,n,i,o,r,a){return function(s){var l=a.each,d=s.$,c=e.BACKSPACE,u=e.DELETE,f=s.dom,h=s.selection,p=s.settings,m=s.parser,g=s.serializer,y=r.gecko,v=r.ie,C=r.webkit,b="data:text/mce-internal,",_=v?"Text":"URL";function S(e,t){do{if(e.parentElement===t)return!0}while(e=e.parentElement);return!1}function N(e,t){try{s.getDoc().execCommand(e,!1,t)}catch(e){}}function E(){var e=s.getDoc().documentMode;return e||6}function A(e){return e.isDefaultPrevented()}function w(e){var t;if(e.dataTransfer){
s.selection.isCollapsed()&&"IMG"==e.target.tagName&&h.select(e.target);(t=s.selection.getContent()).length>0&&e.dataTransfer.setData(_,b+escape(t))}}function x(e){var t,n;e.dataTransfer&&(t=e.dataTransfer.getData(_))&&t.indexOf(b)>=0&&(n=unescape(t.substr(23)));return n}function T(e){s.queryCommandSupported("mceInsertClipboardContent")?s.execCommand("mceInsertClipboardContent",!1,{content:e}):s.execCommand("mceInsertContent",!1,e)}function I(){s.shortcuts.add("meta+a",null,"SelectAll")}function D(){s.on("keydown",(function(e){if(!A(e)&&e.keyCode===c){if(!s.getBody().getElementsByTagName("hr").length)return;if(h.isCollapsed()&&0===h.getRng(!0).startOffset){var t=h.getNode(),n=t.previousSibling;if("HR"==t.nodeName){f.remove(t);e.preventDefault();return}if(n&&n.nodeName&&"hr"===n.nodeName.toLowerCase()){f.remove(n);e.preventDefault()}}}}))}function k(){s.on("keydown",(function(e){if(!A(e)&&e.keyCode===c&&h.isCollapsed()&&0===h.getRng(!0).startOffset){var t=h.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase()){e.preventDefault();return!1}}}))}function M(){if(!s.inline){s.contentStyles.push("body {min-height: 150px}");s.on("click",(function(e){if("HTML"==e.target.nodeName){var t;t=s.selection.getRng();s.getBody().focus();s.selection.setRng(t);s.selection.normalize();s.nodeChanged()}}))}}s.on("keydown",(function(t){var n,i,o,r,a;if(A(t)||t.keyCode!=e.BACKSPACE)return;i=(n=h.getRng()).startContainer;o=n.startOffset;r=f.getRoot();a=i;if(!n.collapsed||0!==o)return;for(;a&&a.parentNode&&a.parentNode.firstChild==a&&a.parentNode!=r;)a=a.parentNode;if("BLOCKQUOTE"===a.tagName){s.formatter.toggle("blockquote",null,a);(n=f.createRng()).setStart(i,0);n.setEnd(i,0);h.setRng(n)}}));(function(){function e(e){var t=f.create("body"),n=e.cloneContents();t.appendChild(n);return h.serializer.serialize(t,{format:"html"})}s.on("keydown",(function(n){var i,o,r=n.keyCode;if(!A(n)&&(r==u||r==c)){i=s.selection.isCollapsed();o=s.getBody();if(i&&!f.isEmpty(o))return;if(!i&&!function(n){if(!n.setStart){if(n.item)return!1;var i=n.duplicate();i.moveToElementText(s.getBody());return t.compareRanges(n,i)}var o=e(n),r=f.createRng();r.selectNode(s.getBody());return o===e(r)}(s.selection.getRng()))return;n.preventDefault();s.setContent("");o.firstChild&&f.isBlock(o.firstChild)?s.selection.setCursorLocation(o.firstChild,0):s.selection.setCursorLocation(o,0);s.nodeChanged()}}))})();s.on("keyup focusin mouseup",(function(t){65==t.keyCode&&e.metaKeyPressed(t)||h.normalize()}),!0);if(C){(function(){var i,o,r=s.getDoc(),l=s.dom,f=s.selection,h=window.MutationObserver;if(!h){i=!0;h=function(){var e,t=[];function n(e){var n=e.relatedNode||e.target;t.push({target:n,addedNodes:[n]})}function i(e){var n=e.relatedNode||e.target;t.push({target:n,attributeName:e.attrName})}this.observe=function(t){(e=t).addEventListener("DOMSubtreeModified",n,!1);e.addEventListener("DOMNodeInsertedIntoDocument",n,!1);e.addEventListener("DOMNodeInserted",n,!1);e.addEventListener("DOMAttrModified",i,!1)};this.disconnect=function(){e.removeEventListener("DOMSubtreeModified",n,!1);e.removeEventListener("DOMNodeInsertedIntoDocument",n,!1);e.removeEventListener("DOMNodeInserted",n,!1);e.removeEventListener("DOMAttrModified",i,!1)};this.takeRecords=function(){return t}}}function p(e){var t=l.schema.getBlockElements(),n=s.getBody();if("BR"!=e.nodeName)return!1;for(;e!=n&&!t[e.nodeName];e=e.parentNode)if(e.nextSibling)return!1;return!0}function m(e,t,i){var o,r,a;a=l.schema.getNonEmptyElements();o=new n(i||e,e);for(;r=o[t?"next":"prev"]();){if(a[r.nodeName]&&!p(r))return r;if(3==r.nodeType&&r.data.length>0)return r}}function g(e){var n=f.getRng();n=function(e,n){var i,o,r,a,d,c;if(!e.collapsed)return e;d=e.startContainer;c=e.startOffset;if(3==d.nodeType)if(n){if(c<d.data.length)return e}else if(c>0)return e;i=t.getNode(e.startContainer,e.startOffset);r=l.getParent(i,l.isBlock);o=m(s.getBody(),n,i);a=l.getParent(o,l.isBlock);if(!i||!o)return e;if(r!=a)if(n){1==i.nodeType?"BR"==i.nodeName?e.setStartBefore(i):e.setStartAfter(i):e.setStart(i,i.data.length);1==o.nodeType?e.setEnd(o,0):e.setEndBefore(o)}else{1==o.nodeType?"BR"==o.nodeName?e.setStartBefore(o):e.setStartAfter(o):e.setStart(o,o.data.length);1==i.nodeType?e.setEnd(i,0):e.setEndBefore(i)}return e}(n,e);if(function(e){var n,i,o,r,a;if(e.collapsed)return;n=l.getParent(t.getNode(e.startContainer,e.startOffset),l.isBlock);i=l.getParent(t.getNode(e.endContainer,e.endOffset),l.isBlock);a=s.schema.getTextBlockElements();if(n==i)return;if(!a[n.nodeName]||!a[i.nodeName])return;if("false"===l.getContentEditable(n)||"false"===l.getContentEditable(i))return;e.deleteContents();o=m(n,!1);r=m(i,!0);l.isEmpty(i)||d(n).append(i.childNodes);d(i).remove();if(o)if(1==o.nodeType)if("BR"==o.nodeName){e.setStartBefore(o);e.setEndBefore(o)}else{e.setStartAfter(o);e.setEndAfter(o)}else{e.setStart(o,o.data.length);e.setEnd(o,o.data.length)}else if(r)if(1==r.nodeType){e.setStartBefore(r);e.setEndBefore(r)}else{e.setStart(r,0);e.setEnd(r,0)}f.setRng(e);return!0}(n))return!0}function y(e){var t,n,i;if(g(e))return;a.each(s.getBody().getElementsByTagName("*"),(function(e){"SPAN"==e.tagName&&e.setAttribute("mce-data-marked",1);!e.hasAttribute("data-mce-style")&&e.hasAttribute("style")&&s.dom.setAttrib(e,"style",s.dom.getAttrib(e,"style"))}));(t=new h((function(){}))).observe(s.getDoc(),{childList:!0,attributes:!0,subtree:!0,attributeFilter:["style"]});s.getDoc().execCommand(e?"ForwardDelete":"Delete",!1,null);n=s.selection.getRng();i=n.startContainer.parentNode;a.each(t.takeRecords(),(function(e){if(!l.isChildOf(e.target,s.getBody()))return;if("style"==e.attributeName){var t=e.target.getAttribute("data-mce-style");t?e.target.setAttribute("style",t):e.target.removeAttribute("style")}a.each(e.addedNodes,(function(e){if("SPAN"==e.nodeName&&!e.getAttribute("mce-data-marked")){var t,o;if(e==i){t=n.startOffset;o=e.firstChild}l.remove(e,!0);if(o){n.setStart(o,t);n.setEnd(o,t);s.selection.setRng(n)}}}))}));t.disconnect();a.each(s.dom.select("span[mce-data-marked]"),(function(e){e.removeAttribute("mce-data-marked")}))}s.on("keydown",(function(e){var t=e.keyCode==u,n=e.ctrlKey||e.metaKey;if(!A(e)&&(t||e.keyCode==c)){var i=s.selection.getRng(),o=i.startContainer,r=i.startOffset;if(!n&&i.collapsed&&3==o.nodeType&&(t?r<o.data.length:r>0))return;e.preventDefault();n&&s.selection.getSel().modify("extend",t?"forward":"backward",e.metaKey?"lineboundary":"word");y(t)}}));s.on("keypress",(function(t){if(!A(t)&&!f.isCollapsed()&&t.charCode&&!e.metaKeyPressed(t)){var n,i,o,r,a,c;n=s.selection.getRng();c=String.fromCharCode(t.charCode);t.preventDefault();i=d(n.startContainer).parents().filter((function(e,t){return!!s.schema.getTextInlineElements()[t.nodeName]}));y(!0);if((i=i.filter((function(e,t){return!d.contains(s.getBody(),t)}))).length){o=l.createFragment();i.each((function(e,t){t=t.cloneNode(!1);if(o.hasChildNodes()){t.appendChild(o.firstChild);o.appendChild(t)}else{a=t;o.appendChild(t)}o.appendChild(t)}));a.appendChild(s.getDoc().createTextNode(c));r=l.getParent(n.startContainer,l.isBlock);l.isEmpty(r)?d(r).empty().append(o):n.insertNode(o);n.setStart(a.firstChild,1);n.setEnd(a.firstChild,1);s.selection.setRng(n)}else s.selection.setContent(c)}}));s.addCommand("Delete",(function(){y()}));s.addCommand("ForwardDelete",(function(){y(!0)}));if(i)return;s.on("dragstart",(function(e){o=f.getRng();w(e)}));s.on("drop",(function(e){if(!A(e)){var n=x(e);if(n){e.preventDefault();window.setTimeout((function(){var i=t.getCaretRangeFromPoint(e.x,e.y,r);if(o){f.setRng(o);o=null}y();f.setRng(i);T(n)}),0)}}}));s.on("cut",(function(e){if(!A(e)&&e.clipboardData){e.preventDefault();e.clipboardData.clearData();e.clipboardData.setData("text/html",s.selection.getContent());e.clipboardData.setData("text/plain",s.selection.getContent({format:"text"}));y(!0)}}))})();(function(){if(!s.settings.content_editable){f.bind(s.getDoc(),"focusin",(function(){h.setRng(h.getRng())}));f.bind(s.getDoc(),"mousedown mouseup",(function(e){if(e.target==s.getDoc().documentElement){s.getBody().focus();"mousedown"==e.type?h.placeCaretAt(e.clientX,e.clientY):h.setRng(h.getRng())}}))}})();s.on("click",(function(e){
var t=e.target;if(S(t,s.bodyElement)){if(/^(IMG|HR)$/.test(t.nodeName)){e.preventDefault();h.getSel().setBaseAndExtent(t,0,t,1);s.nodeChanged()}if("A"==t.nodeName&&f.hasClass(t,"mce-item-anchor")){e.preventDefault();h.select(t)}}}));p.forced_root_block&&s.on("init",(function(){N("DefaultParagraphSeparator",p.forced_root_block)}));s.on("init",(function(){s.dom.bind(s.getBody(),"submit",(function(e){e.preventDefault()}))}));k();m.addNodeFilter("br",(function(e){for(var t=e.length;t--;)"Apple-interchange-newline"==e[t].attr("class")&&e[t].remove()}));s.on("touchstart",(function(e){var t,n,i,o;t=e.target;n=(new Date).getTime();if(!(o=e.changedTouches)||o.length>1)return;i=o[0];s.once("touchend",(function(e){var o,r=e.changedTouches[0];if((new Date).getTime()-n>500)return;if(Math.abs(i.clientX-r.clientX)>5)return;if(Math.abs(i.clientY-r.clientY)>5)return;o={target:t};l("pageX pageY clientX clientY screenX screenY".split(" "),(function(e){o[e]=r[e]}));if(!(o=s.fire("click",o)).isDefaultPrevented()){s.selection.placeCaretAt(r.clientX,r.clientY);s.nodeChanged()}}))}));if(r.iOS){s.inline||s.on("keydown",(function(){document.activeElement==document.body&&s.getWin().focus()}));M();(function(){s.on("click",(function(e){var t=e.target;if(S(t,s.bodyElement))do{if("A"===t.tagName){e.preventDefault();return}}while(t=t.parentNode)}));s.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")})()}else I()}if(v&&r.ie<11){D();document.body.setAttribute("role","application");(function(){if(E()>7)return;N("RespectVisibilityInDesign",!0);s.contentStyles.push(".mceHideBrInPre pre br {display: none}");f.addClass(s.getBody(),"mceHideBrInPre");m.addNodeFilter("pre",(function(e){for(var t,n,o,r,a=e.length;a--;){n=(t=e[a].getAll("br")).length;for(;n--;)(r=(o=t[n]).prev)&&3===r.type&&"\n"!=r.value.charAt(r.value-1)?r.value+="\n":o.parent.insert(new i("#text",3),o,!0).value="\n"}}));g.addNodeFilter("pre",(function(e){for(var t,n,i,o,r=e.length;r--;){n=(t=e[r].getAll("br")).length;for(;n--;)(o=(i=t[n]).prev)&&3==o.type&&(o.value=o.value.replace(/\r?\n$/,""))}}))})();f.bind(s.getBody(),"mouseup",(function(){var e,t=h.getNode();if("IMG"==t.nodeName){if(e=f.getStyle(t,"width")){f.setAttrib(t,"width",e.replace(/[^0-9%]+/g,""));f.setStyle(t,"width","")}if(e=f.getStyle(t,"height")){f.setAttrib(t,"height",e.replace(/[^0-9%]+/g,""));f.setStyle(t,"height","")}}}));s.on("keydown",(function(e){var t;if(!A(e)&&e.keyCode==c&&(t=s.getDoc().selection.createRange())&&t.item){e.preventDefault();s.undoManager.beforeChange();f.remove(t.item(0));s.undoManager.add()}}));(function(){var e;if(E()>=10){e="";l("p div h1 h2 h3 h4 h5 h6".split(" "),(function(t,n){e+=(n>0?",":"")+t+":empty"}));s.contentStyles.push(e+"{padding-right: 1px !important}")}})();(function(){if(E()<9){m.addNodeFilter("noscript",(function(e){for(var t,n,i=e.length;i--;)(n=(t=e[i]).firstChild)&&t.attr("data-mce-innertext",n.value)}));g.addNodeFilter("noscript",(function(e){for(var t,n,r,a=e.length;a--;){t=e[a];if(n=e[a].firstChild)n.value=o.decode(n.value);else if(r=t.attributes.map["data-mce-innertext"]){t.attr("data-mce-innertext",null);(n=new i("#text",3)).value=r;n.raw=!0;t.append(n)}}}))}})();(function(){var e,t,n,i=f.doc,o=i.body;function r(e,t){var n=o.createTextRange();try{n.moveToPoint(e,t)}catch(e){n=null}return n}function a(e){var n;if(e.button){if(n=r(e.x,e.y)){n.compareEndPoints("StartToStart",t)>0?n.setEndPoint("StartToStart",t):n.setEndPoint("EndToEnd",t);n.select()}}else s()}function s(){var n=i.selection.createRange();t&&!n.item&&0===n.compareEndPoints("StartToEnd",n)&&t.select();f.unbind(i,"mouseup",s);f.unbind(i,"mousemove",a);t=e=0}i.documentElement.unselectable=!0;f.bind(i,"mousedown contextmenu",(function(o){if("HTML"===o.target.nodeName){e&&s();if((n=i.documentElement).scrollHeight>n.clientHeight)return;e=1;if(t=r(o.x,o.y)){f.bind(i,"mouseup",s);f.bind(i,"mousemove",a);f.getRoot().focus();t.select()}}}))})()}if(r.ie>=11){M();s.inline||s.on("focus blur beforegetcontent",(function(){var e=s.dom.create("br");s.getBody().appendChild(e);e.parentNode.removeChild(e)}),!0);k()}if(r.ie){I();N("AutoUrlDetect",!1);(function(){s.on("dragstart",(function(e){w(e)}));s.on("drop",(function(e){if(!A(e)){var n=x(e);if(n){e.preventDefault();var i=t.getCaretRangeFromPoint(e.x,e.y,s.getDoc());h.setRng(i);T(n)}}}))})()}if(y){D();window.Range.prototype.getClientRects||s.on("mousedown",(function(e){if(!A(e)&&"HTML"===e.target.nodeName){var t=s.getBody();t.blur();setTimeout((function(){t.focus()}),0)}}));(function(){function e(){var e=f.getAttribs(h.getStart().cloneNode(!1));return function(){var t=h.getStart();if(t!==s.getBody()){f.setAttrib(t,"style",null);l(e,(function(e){t.setAttributeNode(e.cloneNode(!0))}))}}}function t(){return!h.isCollapsed()&&f.getParent(h.getStart(),f.isBlock)!=f.getParent(h.getEnd(),f.isBlock)}s.on("keypress",(function(n){var i;if(!A(n)&&(8==n.keyCode||46==n.keyCode)&&t()){i=e();s.getDoc().execCommand("delete",!1,null);i();n.preventDefault();return!1}}));f.bind(s.getDoc(),"cut",(function(n){var i;if(!A(n)&&t()){i=e();setTimeout((function(){i()}),0)}}))})();p.readonly||s.on("BeforeExecCommand MouseDown",(function(){s._refreshContentEditable();N("StyleWithCSS",!1);N("enableInlineTableEditing",!1);p.object_resizing||N("enableObjectResizing",!1)}));s.on("SetContent ExecCommand",(function(e){"setcontent"!=e.type&&"mceInsertLink"!==e.command||l(f.select(".mce-content-body a"),(function(e){var t=e.parentNode,n=f.getRoot();if(t.lastChild===e){for(;t&&!f.isBlock(t);){if(t.parentNode.lastChild!==t||t===n)return;t=t.parentNode}f.add(t,"br",{"data-mce-bogus":1})}}))}));s.on("Undo Redo SetContent",(function(e){e.initial||s.execCommand("mceRepaint")}));s.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}");r.mac&&s.on("keydown",(function(t){if(e.metaKeyPressed(t)&&(37==t.keyCode||39==t.keyCode)){t.preventDefault();s.selection.getSel().modify("move",37==t.keyCode?"backward":"forward","word")}}));k()}}}));i("tinymce/util/Observable",["tinymce/util/EventDispatcher"],(function(e){function t(t){t._eventDispatcher||(t._eventDispatcher=new e({scope:t,toggleEvent:function(n,i){e.isNative(n)&&t.toggleNativeEvent&&t.toggleNativeEvent(n,i)}}));return t._eventDispatcher}return{fire:function(e,n,i){var o=this;if(o.removed&&"remove"!==e)return n;n=t(o).fire(e,n,i);if(!1!==i&&o.parent)for(var r=o.parent();r&&!n.isPropagationStopped();){r.fire(e,n,!1);r=r.parent()}return n},on:function(e,n,i){return t(this).on(e,n,i)},off:function(e,n){return t(this).off(e,n)},once:function(e,n){return t(this).once(e,n)},hasEventListeners:function(e){return t(this).has(e)}}}));i("tinymce/EditorObservable",["tinymce/util/Observable","tinymce/dom/DOMUtils","tinymce/util/Tools"],(function(e,t,n){var i,o=t.DOM;function r(e,t){if("selectionchange"==t)return e.getDoc();if(!e.inline&&/^mouse|click|contextmenu|drop|dragover|dragend/.test(t))return e.getDoc().documentElement;if(e.settings.event_root){e.eventRoot||(e.eventRoot=o.select(e.settings.event_root)[0]);return e.eventRoot}return e.getBody()}function a(e,t){var n,a=r(e,t);e.delegates||(e.delegates={});if(e.delegates[t])return;if(e.settings.event_root){if(!i){i={};e.editorManager.on("removeEditor",(function(){var t;if(!e.editorManager.activeEditor&&i){for(t in i)e.dom.unbind(r(e,t));i=null}}))}if(i[t])return;n=function(n){for(var i=n.target,r=e.editorManager.editors,a=r.length;a--;){var s=r[a].getBody();(s===i||o.isChildOf(i,s))&&(r[a].hidden||r[a].fire(t,n))}};i[t]=n;o.bind(a,t,n)}else{n=function(n){e.hidden||e.fire(t,n)};o.bind(a,t,n);e.delegates[t]=n}}var s={bindPendingEventDelegates:function(){var e=this;n.each(e._pendingNativeEvents,(function(t){a(e,t)}))},toggleNativeEvent:function(e,t){var n=this;if(n.settings.readonly)return;if("focus"==e||"blur"==e)return;if(t)n.initialized?a(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e];else if(n.initialized){n.dom.unbind(r(n,e),e,n.delegates[e]);delete n.delegates[e]}},unbindAllNativeEvents:function(){var e,t=this;if(t.delegates){for(e in t.delegates)t.dom.unbind(r(t,e),e,t.delegates[e]);delete t.delegates}if(!t.inline){t.getBody().onload=null
;t.dom.unbind(t.getWin());t.dom.unbind(t.getDoc())}t.dom.unbind(t.getBody());t.dom.unbind(t.getContainer())}};return s=n.extend({},e,s)}));i("tinymce/Shortcuts",["tinymce/util/Tools","tinymce/Env"],(function(e,t){var n=e.each,i=e.explode,o={f9:120,f10:121,f11:122},r=e.makeMap("alt,ctrl,shift,meta,access");return function(a){var s={};function l(e,s,l,d){var c,u,f;f={func:l,scope:d||a,desc:a.translate(s)};n(i(e,"+"),(function(e){if(e in r)f[e]=!0;else if(/^[0-9]{2,}$/.test(e))f.keyCode=parseInt(e,10);else{f.charCode=e.charCodeAt(0);f.keyCode=o[e]||e.toUpperCase().charCodeAt(0)}}));c=[f.keyCode];for(u in r)f[u]?c.push(u):f[u]=!1;f.id=c.join(",");if(f.access){f.alt=!0;t.mac?f.ctrl=!0:f.shift=!0}if(f.meta)if(t.mac)f.meta=!0;else{f.ctrl=!0;f.meta=!1}return f}a.on("keyup keypress keydown",(function(e){(e.altKey||e.ctrlKey||e.metaKey)&&!e.isDefaultPrevented()&&n(s,(function(t){if(t.ctrl!=e.ctrlKey||t.meta!=e.metaKey)return;if(t.alt!=e.altKey||t.shift!=e.shiftKey)return;if(e.keyCode==t.keyCode||e.charCode&&e.charCode==t.charCode){e.preventDefault();"keydown"==e.type&&t.func.call(t.scope);return!0}}))}));this.add=function(t,o,r,d){var c;c=r;"string"==typeof r?r=function(){a.execCommand(c,!1,null)}:e.isArray(c)&&(r=function(){a.execCommand(c[0],c[1],c[2])});n(i(t.toLowerCase()),(function(e){var t=l(e,o,r,d);s[t.id]=t}));return!0};this.remove=function(e){var t=l(e);if(s[t.id]){delete s[t.id];return!0}return!1}}}));i("tinymce/Editor",["tinymce/dom/DOMUtils","tinymce/dom/DomQuery","tinymce/AddOnManager","tinymce/NodeChange","tinymce/html/Node","tinymce/dom/Serializer","tinymce/html/Serializer","tinymce/dom/Selection","tinymce/Formatter","tinymce/UndoManager","tinymce/EnterKey","tinymce/ForceBlocks","tinymce/EditorCommands","tinymce/util/URI","tinymce/dom/ScriptLoader","tinymce/dom/EventUtils","tinymce/WindowManager","tinymce/html/Schema","tinymce/html/DomParser","tinymce/util/Quirks","tinymce/Env","tinymce/util/Tools","tinymce/EditorObservable","tinymce/Shortcuts"],(function(e,n,i,o,r,a,s,l,d,c,u,f,h,p,m,g,y,v,C,b,_,S,N,E){var A=e.DOM,w=i.ThemeManager,x=i.PluginManager,T=S.extend,I=S.each,D=S.explode,k=S.inArray,M=S.trim,R=S.resolve,H=g.Event,O=_.gecko,L=_.ie;function P(e,t,o){var r,a,s=this;r=s.documentBaseUrl=o.documentBaseURL;a=o.baseURI;s.settings=t=T({id:e,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:r,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,padd_empty_editor:!0,render_ui:!0,indentation:"30px",inline_styles:!0,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",validate:!0,entity_encoding:"named",url_converter:s.convertURL,url_converter_scope:s,ie7_compat:!0},t);i.language=t.language||"en";i.languageLoad=t.language_load;i.baseURL=o.baseURL;s.id=t.id=e;s.isNotDirty=!0;s.plugins={};s.documentBaseURI=new p(t.document_base_url||r,{base_uri:a});s.baseURI=a;s.contentCSS=[];s.contentStyles=[];s.shortcuts=new E(s);s.loadedCSS={};s.editorCommands=new h(s);t.target&&(s.targetElm=t.target);s.suffix=o.suffix;s.editorManager=o;s.inline=t.inline;t.cache_suffix&&(_.cacheSuffix=t.cache_suffix.replace(/^[\?\&]+/,""));o.fire("SetupEditor",s);s.execCallback("setup",s);s.$=n.overrideDefaults((function(){return{context:s.inline?s.getBody():s.getDoc(),element:s.getBody()}}))}P.prototype={render:function(){var e=this,t=e.settings,n=e.id,i=e.suffix;if(!H.domLoaded){A.bind(window,"ready",(function t(){A.unbind(window,"ready",t);e.render()}));return}if(!e.getElement())return;if(!_.contentEditable)return;if(t.inline)e.inline=!0;else{e.orgVisibility=e.getElement().style.visibility;e.getElement().style.visibility="hidden"}var o=e.getElement().form||A.getParent(n,"form");if(o){e.formElement=o;if(t.hidden_input&&!/TEXTAREA|INPUT/i.test(e.getElement().nodeName)){A.insertAfter(A.create("input",{type:"hidden",name:n}),n);e.hasHiddenInput=!0}e.formEventDelegate=function(t){e.fire(t.type,t)};A.bind(o,"submit reset",e.formEventDelegate);e.on("reset",(function(){e.setContent(e.startContent,{format:"raw"})}));if(t.submit_patch&&!o.submit.nodeType&&!o.submit.length&&!o._mceOldSubmit){o._mceOldSubmit=o.submit;o.submit=function(){e.editorManager.triggerSave();e.isNotDirty=!0;return o._mceOldSubmit(o)}}}e.windowManager=new y(e);"xml"==t.encoding&&e.on("GetContent",(function(e){e.save&&(e.content=A.encode(e.content))}));t.add_form_submit_trigger&&e.on("submit",(function(){e.initialized&&e.save()}));if(t.add_unload_trigger){e._beforeUnload=function(){!e.initialized||e.destroyed||e.isHidden()||e.save({format:"raw",no_events:!0,set_dirty:!1})};e.editorManager.on("BeforeUnload",e._beforeUnload)}(function(){var n=m.ScriptLoader;t.language&&"en"!=t.language&&!t.language_url&&(t.language_url=e.editorManager.baseURL+"/langs/"+t.language+".js");t.language_url&&n.add(t.language_url);if(t.theme&&"function"!=typeof t.theme&&"-"!=t.theme.charAt(0)&&!w.urls[t.theme]){var o=t.theme_url;o=o?e.documentBaseURI.toAbsolute(o):"themes/"+t.theme+"/theme"+i+".js";w.load(t.theme,o)}S.isArray(t.plugins)&&(t.plugins=t.plugins.join(" "));I(t.external_plugins,(function(e,n){x.load(n,e);t.plugins+=" "+n}));I(t.plugins.split(/[ ,]/),(function(e){if((e=M(e))&&!x.urls[e])if("-"==e.charAt(0)){e=e.substr(1,e.length);var t=x.dependencies(e);I(t,(function(e){var t={prefix:"plugins/",resource:e,suffix:"/plugin"+i+".js"};e=x.createUrl(t,e);x.load(e.resource,e)}))}else x.load(e,{prefix:"plugins/",resource:e,suffix:"/plugin"+i+".js"})}));n.loadQueue((function(){e.removed||e.init()}))})()},init:function(){var e,t,n,i,o,r,a,s,l,d,c,u=this,f=u.settings,h=u.getElement(),p=[];this.editorManager.i18n.setCode(f.language);u.rtl=this.editorManager.i18n.rtl;u.editorManager.add(u);f.aria_label=f.aria_label||A.getAttrib(h,"aria-label",u.getLang("aria.rich_text_area"));if(f.theme)if("function"!=typeof f.theme){f.theme=f.theme.replace(/-/,"");r=w.get(f.theme);u.theme=new r(u,w.urls[f.theme]);u.theme.init&&u.theme.init(u,w.urls[f.theme]||u.documentBaseUrl.replace(/\/$/,""),u.$)}else u.theme=f.theme;I(f.plugins.replace(/\-/g,"").split(/[ ,]/),(function e(t){var n,i,o=x.get(t);n=x.urls[t]||u.documentBaseUrl.replace(/\/$/,"");t=M(t);if(o&&-1===k(p,t)){I(x.dependencies(t),(function(t){e(t)}));i=new o(u,n,u.$);u.plugins[t]=i;if(i.init){i.init(u,n);p.push(t)}}}));if(f.render_ui&&u.theme){u.orgDisplay=h.style.display;if("function"!=typeof f.theme){e=f.width||h.style.width||h.offsetWidth;t=f.height||h.style.height||h.offsetHeight;n=f.min_height||100;(d=/^[0-9\.]+(|px)$/i).test(""+e)&&(e=Math.max(parseInt(e,10),100));d.test(""+t)&&(t=Math.max(parseInt(t,10),n));o=u.theme.renderUI({targetNode:h,width:e,height:t,deltaWidth:f.delta_width,deltaHeight:f.delta_height});f.content_editable||(t=(o.iframeHeight||t)+("number"==typeof t?o.deltaHeight||0:""))<n&&(t=n)}else{(o=f.theme(u,h)).editorContainer.nodeType&&(o.editorContainer=o.editorContainer.id=o.editorContainer.id||u.id+"_parent");o.iframeContainer.nodeType&&(o.iframeContainer=o.iframeContainer.id=o.iframeContainer.id||u.id+"_iframecontainer");t=o.iframeHeight||h.offsetHeight}u.editorContainer=o.editorContainer}f.content_css&&I(D(f.content_css),(function(e){u.contentCSS.push(u.documentBaseURI.toAbsolute(e))}));f.content_style&&u.contentStyles.push(f.content_style);if(f.content_editable){h=i=o=null;return u.initContentBody()}u.iframeHTML=f.doctype+"<html><head>";f.document_base_url!=u.documentBaseUrl&&(u.iframeHTML+='<base href="'+u.documentBaseURI.getURI()+'" />');!_.caretAfter&&f.ie7_compat&&(u.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />')
;u.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';for(c=0;c<u.contentCSS.length;c++){var m=u.contentCSS[c];u.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+S._addCacheSuffix(m)+'" />';u.loadedCSS[m]=!0}-1!=(s=f.body_id||"tinymce").indexOf("=")&&(s=(s=u.getParam("body_id","","hash"))[u.id]||s);-1!=(l=f.body_class||"").indexOf("=")&&(l=(l=u.getParam("body_class","","hash"))[u.id]||"");f.content_security_policy&&(u.iframeHTML+='<meta http-equiv="Content-Security-Policy" content="'+f.content_security_policy+'" />');u.iframeHTML+='</head><body id="'+s+'" class="mce-content-body '+l+'" data-id="'+u.id+'"><br></body></html>';var g='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinymce.get("'+u.id+'");document.write(ed.iframeHTML);document.close();ed.initContentBody(true);})()';document.domain!=location.hostname&&(a=g);var y=A.create("iframe",{id:u.id+"_ifr",frameBorder:"0",allowTransparency:"true",title:u.getKeyboardInstructions(),style:{width:"100%",height:t,display:"block"}});y.onload=function(){y.onload=null;u.fire("load")};A.setAttrib(y,"src",a||'javascript:""');u.contentAreaContainer=o.iframeContainer;u.iframeElement=y;i=A.add(o.iframeContainer,y);if(L)try{u.getDoc()}catch(e){i.src=a=g}if(o.editorContainer){A.get(o.editorContainer).style.display=u.orgDisplay;u.hidden=A.isHidden(o.editorContainer)}u.getElement().style.display="none";A.setAttrib(u.id,"aria-hidden",!0);a||u.initContentBody();h=i=o=null},initContentBody:function(t){var n,i,s=this,h=s.settings,p=s.getElement(),m=s.getDoc();h.inline||(s.getElement().style.visibility=s.orgVisibility);if(!t&&!h.content_editable){m.open();m.write(s.iframeHTML);m.close()}if(h.content_editable){s.on("remove",(function(){var e=this.getBody();A.removeClass(e,"mce-content-body");A.removeClass(e,"mce-edit-focus");A.setAttrib(e,"contentEditable",null)}));A.addClass(p,"mce-content-body");s.contentDocument=m=h.content_document||document;s.contentWindow=h.content_window||window;s.bodyElement=p;h.content_document=h.content_window=null;h.root_name=p.nodeName.toLowerCase()}(n=s.getBody()).disabled=!0;if(!h.readonly){s.inline&&"static"==A.getStyle(n,"position",!0)&&(n.style.position="relative");n.contentEditable=s.getParam("content_editable_state",!0)}n.disabled=!1;s.schema=new v(h);s.dom=new e(m,{keep_values:!0,url_converter:s.convertURL,url_converter_scope:s,hex_colors:h.force_hex_style_colors,class_filter:h.class_filter,update_styles:!0,root_element:s.inline?s.getBody():null,collect:h.content_editable,schema:s.schema,onSetAttrib:function(e){s.fire("SetAttrib",e)}});s.parser=new C(h,s.schema);s.parser.addAttributeFilter("src,href,style,tabindex",(function(e,t){for(var n,i,o,r=e.length,a=s.dom;r--;){i=(n=e[r]).attr(t);o="data-mce-"+t;if(!n.attributes.map[o])if("style"===t){(i=a.serializeStyle(a.parseStyle(i),n.name)).length||(i=null);n.attr(o,i);n.attr(t,i)}else if("tabindex"===t){n.attr(o,i);n.attr(t,null)}else n.attr(o,s.convertURL(i,t,n.name))}}));s.parser.addNodeFilter("script",(function(e){for(var t,n=e.length;n--;)(t=e[n]).attr("type","mce-"+(t.attr("type")||"no/type"))}));s.parser.addNodeFilter("#cdata",(function(e){for(var t,n=e.length;n--;){(t=e[n]).type=8;t.name="#comment";t.value="[CDATA["+t.value+"]]"}}));s.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",(function(e){for(var t,n=e.length,i=s.schema.getNonEmptyElements();n--;)(t=e[n]).isEmpty(i)&&(t.append(new r("br",1)).shortEnded=!0)}));s.serializer=new a(h,s);s.selection=new l(s.dom,s.getWin(),s.serializer,s);s.formatter=new d(s);s.undoManager=new c(s);s.forceBlocks=new f(s);s.enterKey=new u(s);s._nodeChangeDispatcher=new o(s);s.fire("PreInit");if(!h.browser_spellcheck&&!h.gecko_spellcheck){m.body.spellcheck=!1;A.setAttrib(n,"spellcheck","false")}s.fire("PostRender");s.quirks=new b(s);h.directionality&&(n.dir=h.directionality);h.nowrap&&(n.style.whiteSpace="nowrap");h.protect&&s.on("BeforeSetContent",(function(e){I(h.protect,(function(t){e.content=e.content.replace(t,(function(e){return"\x3c!--mce:protected "+escape(e)+"--\x3e"}))}))}));s.on("SetContent",(function(){s.addVisual(s.getBody())}));h.padd_empty_editor&&s.on("PostProcess",(function(e){e.content=e.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")}));s.load({initial:!0,format:"html"});s.startContent=s.getContent({format:"raw"});s.initialized=!0;s.bindPendingEventDelegates();s.fire("init");s.focus(!0);s.nodeChanged({initial:!0});s.execCallback("init_instance_callback",s);if(s.contentStyles.length>0){i="";I(s.contentStyles,(function(e){i+=e+"\r\n"}));s.dom.addStyle(i)}I(s.contentCSS,(function(e){if(!s.loadedCSS[e]){s.dom.loadCSS(e);s.loadedCSS[e]=!0}}));h.auto_focus&&setTimeout((function(){var e;(e=!0===h.auto_focus?s:s.editorManager.get(h.auto_focus)).focus()}),100);p=m=n=null},getKeyboardInstructions:function(){var e="";this.settings.menubar&&(e+="Press ALT-F9 for menu. ");e+="Press ALT-F10 for toolbar. To navigate from the toolbar to the text input select an option in the toolbar or press Esc key.";return this.editorManager.translate(e)},focus:function(e){var t,n,i,o=this,r=o.selection,a=o.settings.content_editable,s=o.getDoc();if(!e){(t=r.getRng()).item&&(n=t.item(0));o._refreshContentEditable();if(!a){_.opera||o.getBody().focus();o.getWin().focus()}if(O||a){if((i=o.getBody()).setActive)try{i.setActive()}catch(e){i.focus()}else i.focus();a&&r.normalize()}if(n&&n.ownerDocument==s){(t=s.body.createControlRange()).addElement(n);t.select()}}o.editorManager.setActive(o)},execCallback:function(e){var t,n=this,i=n.settings[e];if(!i)return;if(n.callbackLookup&&(t=n.callbackLookup[e])){i=t.func;t=t.scope}if("string"==typeof i){t=(t=i.replace(/\.\w+$/,""))?R(t):0;i=R(i);n.callbackLookup=n.callbackLookup||{};n.callbackLookup[e]={func:i,scope:t}}return i.apply(t||n,Array.prototype.slice.call(arguments,1))},translate:function(e){var t=this.settings.language||"en",n=this.editorManager.i18n;if(!e)return"";return n.data[t+"."+e]||e.replace(/\{\#([^\}]+)\}/g,(function(e,i){return n.data[t+"."+i]||"{#"+i+"}"}))},getLang:function(e,n){return this.editorManager.i18n.data[(this.settings.language||"en")+"."+e]||(n!==t?n:"{#"+e+"}")},getParam:function(e,t,n){var i,o=e in this.settings?this.settings[e]:t;if("hash"===n){i={};"string"==typeof o?I(o.indexOf("=")>0?o.split(/[;,](?![^=;,]*(?:[;,]|$))/):o.split(","),(function(e){(e=e.split("=")).length>1?i[M(e[0])]=M(e[1]):i[M(e[0])]=M(e)})):i=o;return i}return o},nodeChanged:function(e){this._nodeChangeDispatcher.nodeChanged(e)},addButton:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)});t.text||t.icon||(t.icon=e);n.buttons=n.buttons||{};t.tooltip=t.tooltip||t.title;n.buttons[e]=t},addMenuItem:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)});n.menuItems=n.menuItems||{};n.menuItems[e]=t},addCommand:function(e,t,n){this.editorCommands.addCommand(e,t,n)},addQueryStateHandler:function(e,t,n){this.editorCommands.addQueryStateHandler(e,t,n)},addQueryValueHandler:function(e,t,n){this.editorCommands.addQueryValueHandler(e,t,n)},addShortcut:function(e,t,n,i){this.shortcuts.add(e,t,n,i)},execCommand:function(e,t,n,i){return this.editorCommands.execCommand(e,t,n,i)},queryCommandState:function(e){return this.editorCommands.queryCommandState(e)},queryCommandValue:function(e){return this.editorCommands.queryCommandValue(e)},queryCommandSupported:function(e){return this.editorCommands.queryCommandSupported(e)},show:function(){var e=this;if(e.hidden){e.hidden=!1;if(e.inline)e.getBody().contentEditable=!0;else{A.show(e.getContainer());A.hide(e.id)}e.load();e.fire("show")}},hide:function(){var e=this,t=e.getDoc();if(!e.hidden){L&&t&&!e.inline&&t.execCommand("SelectAll");e.save();if(e.inline){e.getBody().contentEditable=!1;e==e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)}else{A.hide(e.getContainer());A.setStyle(e.id,"display",e.orgDisplay)}e.hidden=!0;e.fire("hide")}},isHidden:function(){return!!this.hidden},setProgressState:function(e,t){this.fire("ProgressState",{state:e,time:t})},load:function(e){var n,i=this,o=i.getElement();if(o){(e=e||{}).load=!0
;n=i.setContent(o.value!==t?o.value:o.innerHTML,e);e.element=o;e.no_events||i.fire("LoadContent",e);e.element=o=null;return n}},save:function(e){var t,n,i=this,o=i.getElement();if(!o||!i.initialized)return;(e=e||{}).save=!0;e.element=o;t=e.content=i.getContent(e);e.no_events||i.fire("SaveContent",e);t=e.content;if(/TEXTAREA|INPUT/i.test(o.nodeName))o.value=t;else{i.inline||(o.innerHTML=t);(n=A.getParent(i.id,"form"))&&I(n.elements,(function(e){if(e.name==i.id){e.value=t;return!1}}))}e.element=o=null;!1!==e.set_dirty&&(i.isNotDirty=!0);return t},setContent:function(e,t){var n,i=this,o=i.getBody();(t=t||{}).format=t.format||"html";t.set=!0;t.content=e;t.no_events||i.fire("BeforeSetContent",t);if(0===(e=t.content).length||/^\s+$/.test(e)){if((n=i.settings.forced_root_block)&&i.schema.isValidChild(o.nodeName.toLowerCase(),n.toLowerCase())){e=L&&L<11?"":'<br data-mce-bogus="1">';e=i.dom.createHTML(n,i.settings.forced_root_block_attrs,e)}else L||(e='<br data-mce-bogus="1">');i.dom.setHTML(o,e);i.fire("SetContent",t)}else{"raw"!==t.format&&(e=new s({},i.schema).serialize(i.parser.parse(e,{isRootContent:!0})));t.content=M(e);i.dom.setHTML(o,t.content);t.no_events||i.fire("SetContent",t)}return t.content},getContent:function(e){var t,n=this,i=n.getBody();(e=e||{}).format=e.format||"html";e.get=!0;e.getInner=!0;e.no_events||n.fire("BeforeGetContent",e);t="raw"==e.format?i.innerHTML:"text"==e.format?i.innerText||i.textContent:n.serializer.serialize(i,e);"text"!=e.format?e.content=M(t):e.content=t;e.no_events||n.fire("GetContent",e);return e.content},insertContent:function(e,t){t&&(e=T({content:e},t));this.execCommand("mceInsertContent",!1,e)},isDirty:function(){return!this.isNotDirty},getContainer:function(){var e=this;e.container||(e.container=A.get(e.editorContainer||e.id+"_parent"));return e.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){this.targetElm||(this.targetElm=A.get(this.id));return this.targetElm},getWin:function(){var e,t=this;t.contentWindow||(e=t.iframeElement)&&(t.contentWindow=e.contentWindow);return t.contentWindow},getDoc:function(){var e,t=this;t.contentDocument||(e=t.getWin())&&(t.contentDocument=e.document);return t.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(e,t,n){var i=this,o=i.settings;if(o.urlconverter_callback)return i.execCallback("urlconverter_callback",e,n,!0,t);if(!o.convert_urls||n&&"LINK"==n.nodeName||0===e.indexOf("file:")||0===e.length)return e;if(o.relative_urls)return i.documentBaseURI.toRelative(e);return e=i.documentBaseURI.toAbsolute(e,o.remove_script_host)},addVisual:function(e){var n,i=this,o=i.settings,r=i.dom;e=e||i.getBody();i.hasVisual===t&&(i.hasVisual=o.visual);I(r.select("table,a",e),(function(e){var t;switch(e.nodeName){case"TABLE":n=o.visual_table_class||"mce-item-table";(t=r.getAttrib(e,"border"))&&"0"!=t||!i.hasVisual?r.removeClass(e,n):r.addClass(e,n);return;case"A":if(!r.getAttrib(e,"href",!1)){t=r.getAttrib(e,"name")||e.id;n=o.visual_anchor_class||"mce-item-anchor";t&&i.hasVisual?r.addClass(e,n):r.removeClass(e,n)}return}}));i.fire("VisualAid",{element:e,hasVisual:i.hasVisual})},remove:function(){var e=this;if(!e.removed){e.save();e.removed=1;e.unbindAllNativeEvents();e.hasHiddenInput&&A.remove(e.getElement().nextSibling);if(!e.inline){L&&L<10&&e.getDoc().execCommand("SelectAll",!1,null);A.setStyle(e.id,"display",e.orgDisplay);e.getBody().onload=null}e.fire("remove");e.editorManager.remove(e);A.remove(e.getContainer());e.destroy()}},destroy:function(e){var t,n=this;if(n.destroyed)return;if(!e&&!n.removed){n.remove();return}if(!e){n.editorManager.off("beforeunload",n._beforeUnload);n.theme&&n.theme.destroy&&n.theme.destroy();n.selection.destroy();n.dom.destroy()}if(t=n.formElement){if(t._mceOldSubmit){t.submit=t._mceOldSubmit;t._mceOldSubmit=null}A.unbind(t,"submit reset",n.formEventDelegate)}n.contentAreaContainer=n.formElement=n.container=n.editorContainer=null;n.bodyElement=n.contentDocument=n.contentWindow=null;n.iframeElement=n.targetElm=null;n.selection&&(n.selection=n.selection.win=n.selection.dom=n.selection.dom.doc=null);n.destroyed=1},_refreshContentEditable:function(){var e,t;if(this._isHidden()){(t=(e=this.getBody()).parentNode).removeChild(e);t.appendChild(e);e.focus()}},_isHidden:function(){var e;if(!O)return 0;return!(e=this.selection.getSel())||!e.rangeCount||0===e.rangeCount}};T(P.prototype,N);return P}));i("tinymce/util/I18n",[],(function(){var e={},t="en";return{setCode:function(e){if(e){t=e;this.rtl=!!this.data[e]&&"rtl"===this.data[e]._dir}},getCode:function(){return t},rtl:!1,add:function(t,n){var i=e[t];i||(e[t]=i={});for(var o in n)i[o]=n[o];this.setCode(t)},translate:function(n){var i;(i=e[t])||(i={});if(void 0===n)return n;if("string"!=typeof n&&n.raw)return n.raw;if(n.push){var o=n.slice(1);n=(i[n[0]]||n[0]).replace(/\{([0-9]+)\}/g,(function(e,t){return o[t]}))}return(i[n]||n).replace(/{context:\w+}$/,"")},data:e}}));i("tinymce/FocusManager",["tinymce/dom/DOMUtils","tinymce/Env"],(function(e,t){var n,i,o,r=e.DOM;function a(e){function s(){try{return document.activeElement}catch(e){return document.body}}function l(e){return!!r.getParent(e,a.isEditorUIElement)}e.on("AddEditor",(function(a){var d=a.editor;d.on("init",(function(){if(d.inline||t.ie){"onbeforedeactivate"in document&&t.ie<9?d.dom.bind(d.getBody(),"beforedeactivate",(function(e){if(e.target!=d.getBody())return;try{d.lastRng=d.selection.getRng()}catch(e){}})):d.on("nodechange mouseup keyup",(function(e){var t=s();if("nodechange"==e.type&&e.selectionChange)return;t&&t.id==d.id+"_ifr"&&(t=d.getBody());d.dom.isChildOf(t,d.getBody())&&(d.lastRng=d.selection.getRng())}));if(t.webkit&&!n){n=function(){var t=e.activeEditor;if(t&&t.selection){var n=t.selection.getRng();n&&!n.collapsed&&(d.lastRng=n)}};r.bind(document,"selectionchange",n)}}}));d.on("setcontent",(function(){d.lastRng=null}));d.on("mousedown",(function(){d.selection.lastFocusBookmark=null}));d.on("focusin",(function(){var t=e.focusedEditor;if(d.selection.lastFocusBookmark){d.selection.setRng(function(e,t){var n;if(t.startContainer){(n=e.getDoc().createRange()).setStart(t.startContainer,t.startOffset);n.setEnd(t.endContainer,t.endOffset)}else n=t;return n}(d,d.selection.lastFocusBookmark));d.selection.lastFocusBookmark=null}if(t!=d){t&&t.fire("blur",{focusedEditor:d});e.setActive(d);e.focusedEditor=d;d.fire("focus",{blurredEditor:t});d.focus(!0)}d.lastRng=null}));d.on("focusout",(function(){window.setTimeout((function(){var t=e.focusedEditor;if(!l(s())&&t==d){d.fire("blur",{focusedEditor:null});e.focusedEditor=null;d.selection&&(d.selection.lastFocusBookmark=null)}}),0)}));if(!i){i=function(t){var n=e.activeEditor;if(n&&t.target.ownerDocument==document){n.selection&&t.target!=n.getBody()&&(n.selection.lastFocusBookmark=function(e,t){if(t&&t.startContainer){if(!e.isChildOf(t.startContainer,e.getRoot())||!e.isChildOf(t.endContainer,e.getRoot()))return;return{startContainer:t.startContainer,startOffset:t.startOffset,endContainer:t.endContainer,endOffset:t.endOffset}}return t}(n.dom,n.lastRng));if(t.target!=document.body&&!l(t.target)&&e.focusedEditor==n){n.fire("blur",{focusedEditor:null});e.focusedEditor=null}}};r.bind(document,"focusin",i)}if(d.inline&&!o){o=function(t){var n=e.activeEditor;if(n.inline&&!n.dom.isChildOf(t.target,n.getBody())){var i=n.selection.getRng();i.collapsed||(n.lastRng=i)}};r.bind(document,"mouseup",o)}}));e.on("RemoveEditor",(function(t){e.focusedEditor==t.editor&&(e.focusedEditor=null);if(!e.activeEditor){r.unbind(document,"selectionchange",n);r.unbind(document,"focusin",i);r.unbind(document,"mouseup",o);n=i=o=null}}))}a.isEditorUIElement=function(e){return-1!==e.className.toString().indexOf("mce-")};return a}));i("tinymce/EditorManager",["tinymce/Editor","tinymce/dom/DomQuery","tinymce/dom/DOMUtils","tinymce/util/URI","tinymce/Env","tinymce/util/Tools","tinymce/util/Observable","tinymce/util/I18n","tinymce/FocusManager"],(function(e,t,n,i,o,r,a,s,l){var d,c,u=n.DOM,f=r.explode,h=r.each,p=r.extend,m=0;function g(e){var t,n=c.editors;delete n[e.id];for(var i=0;i<n.length;i++)if(n[i]==e){n.splice(i,1);t=!0;break}
c.activeEditor==e&&(c.activeEditor=n[0]);c.focusedEditor==e&&(c.focusedEditor=null);return t}c={$:t,majorVersion:"4",minorVersion:"1.9",releaseDate:"2015-03-10",editors:[],i18n:s,activeEditor:null,setup:function(){var e,t,n,o,r=this,a="";t=document.location.href;if(/^[^:]+:\/\/\/?[^\/]+\//.test(t)){t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,"");/[\/\\]$/.test(t)||(t+="/")}if(n=window.tinymce||window.tinyMCEPreInit){e=n.base||n.baseURL;a=n.suffix}else{for(var s=document.getElementsByTagName("script"),d=0;d<s.length;d++){o=s[d].src;if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(o)){-1!=o.indexOf(".min")&&(a=".min");e=o.substring(0,o.lastIndexOf("/"));break}}if(!e&&document.currentScript){-1!=(o=document.currentScript.src).indexOf(".min")&&(a=".min");e=o.substring(0,o.lastIndexOf("/"))}}r.baseURL=new i(t).toAbsolute(e);r.documentBaseURL=t;r.baseURI=new i(r.baseURL);r.suffix=a;r.focusManager=new l(r)},init:function(t){var n=this,i=[];function o(e){var t=e.id;if(!t){t=(t=e.name)&&!u.get(t)?e.name:u.uniqueId();e.setAttribute("id",t)}return t}function r(t,o,r){if(!function(e){if(e&&!(e.getContainer()||e.getBody()).parentNode){g(e);e.unbindAllNativeEvents();e.destroy(!0);e=null}return e}(n.get(t))){var a=new e(t,o,n);a.targetElm=a.targetElm||r;i.push(a);a.render()}}function a(e){var i=t[e];if(!i)return;return i.apply(n,Array.prototype.slice.call(arguments,2))}function s(e,t){return t.constructor===RegExp?t.test(e.className):u.hasClass(e,t)}n.settings=t;u.bind(window,"ready",(function e(){var n,l;u.unbind(window,"ready",e);a("onpageload");if(t.types){h(t.types,(function(e){h(u.select(e.selector),(function(n){r(o(n),p({},t,e),n)}))}));return}if(t.selector){h(u.select(t.selector),(function(e){r(o(e),t,e)}));return}t.target&&r(o(t.target),t);switch(t.mode){case"exact":(n=t.elements||"").length>0&&h(f(n),(function(e){var n;(n=u.get(e))?r(e,t,n):h(document.forms,(function(n){h(n.elements,(function(n){if(n.name===e){e="mce_editor_"+m++;u.setAttrib(n,"id",e);r(e,t,n)}}))}))}));break;case"textareas":case"specific_textareas":h(u.select("textarea"),(function(e){if(t.editor_deselector&&s(e,t.editor_deselector))return;t.editor_selector&&!s(e,t.editor_selector)||r(o(e),t,e)}))}if(t.oninit){n=l=0;h(i,(function(e){l++;e.initialized?n++:e.on("init",(function(){++n==l&&a("oninit")}));n==l&&a("oninit")}))}}))},get:function(e){if(!arguments.length)return this.editors;return e in this.editors?this.editors[e]:null},add:function(e){var t=this,n=t.editors;n[e.id]=e;n.push(e);t.activeEditor=e;t.fire("AddEditor",{editor:e});if(!d){d=function(){t.fire("BeforeUnload")};u.bind(window,"beforeunload",d)}return e},createEditor:function(t,n){return this.add(new e(t,n,this))},remove:function(e){var t,n,i=this,o=i.editors;if(!e){for(t=o.length-1;t>=0;t--)i.remove(o[t]);return}if("string"==typeof e){e=e.selector||e;h(u.select(e),(function(e){(n=o[e.id])&&i.remove(n)}));return}if(!o[(n=e).id])return null;g(n)&&i.fire("RemoveEditor",{editor:n});o.length||u.unbind(window,"beforeunload",d);n.remove();return n},execCommand:function(t,n,i){var o=this,r=o.get(i);switch(t){case"mceAddEditor":o.get(i)||new e(i,o.settings,o).render();return!0;case"mceRemoveEditor":r&&r.remove();return!0;case"mceToggleEditor":if(!r){o.execCommand("mceAddEditor",0,i);return!0}r.isHidden()?r.show():r.hide();return!0}if(o.activeEditor)return o.activeEditor.execCommand(t,n,i);return!1},triggerSave:function(){h(this.editors,(function(e){e.save()}))},addI18n:function(e,t){s.add(e,t)},translate:function(e){return s.translate(e)},setActive:function(e){var t=this.activeEditor;if(this.activeEditor!=e){t&&t.fire("deactivate",{relatedTarget:e});e.fire("activate",{relatedTarget:t})}this.activeEditor=e}};p(c,a);c.setup();window.tinymce=window.tinyMCE=c;return c}));i("tinymce/LegacyInput",["tinymce/EditorManager","tinymce/util/Tools"],(function(e,t){var n=t.each,i=t.explode;e.on("AddEditor",(function(e){var t=e.editor;t.on("preInit",(function(){var e,o,r,a=t.settings;function s(e,t){n(t,(function(t,n){t&&r.setStyle(e,n,t)}));r.rename(e,"span")}if(a.inline_styles){o=i(a.font_size_legacy_values);e={font:function(e,t){s(t,{backgroundColor:t.style.backgroundColor,color:t.color,fontFamily:t.face,fontSize:o[parseInt(t.size,10)-1]})},u:function(e,n){"html4"===t.settings.schema&&s(n,{textDecoration:"underline"})},strike:function(e,t){s(t,{textDecoration:"line-through"})}};t.on("PreProcess SetContent",(function(i){r=t.dom;a.convert_fonts_to_spans&&n(r.select("font,u,strike",i.node),(function(t){e[t.nodeName.toLowerCase()](r,t)}))}))}}))}))}));i("tinymce/util/XHR",["tinymce/util/Observable","tinymce/util/Tools"],(function(e,t){var n={send:function(e){var t,i=0;function o(){if(!e.async||4==t.readyState||i++>1e4){e.success&&i<1e4&&200==t.status?e.success.call(e.success_scope,""+t.responseText,t,e):e.error&&e.error.call(e.error_scope,i>1e4?"TIMED_OUT":"GENERAL",t,e);t=null}else setTimeout(o,10)}e.scope=e.scope||this;e.success_scope=e.success_scope||e.scope;e.error_scope=e.error_scope||e.scope;e.async=!1!==e.async;e.data=e.data||"";if(t=new XMLHttpRequest){t.overrideMimeType&&t.overrideMimeType(e.content_type);t.open(e.type||(e.data?"POST":"GET"),e.url,e.async);e.crossDomain&&(t.withCredentials=!0);e.content_type&&t.setRequestHeader("Content-Type",e.content_type);t.setRequestHeader("X-Requested-With","XMLHttpRequest");(t=n.fire("beforeSend",{xhr:t,settings:e}).xhr).send(e.data);if(!e.async)return o();setTimeout(o,10)}}};t.extend(n,e);return n}));i("tinymce/util/JSON",[],(function(){return{serialize:function e(t,n){var i,o,r,a;n=n||'"';if(null===t)return"null";if("string"==(r=typeof t)){o="\bb\tt\nn\ff\rr\"\"''\\\\";return n+t.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,(function(e,t){if('"'===n&&"'"===e)return e;if((i=o.indexOf(t))+1)return"\\"+o.charAt(i+1);e=t.charCodeAt().toString(16);return"\\u"+"0000".substring(e.length)+e}))+n}if("object"==r){if(t.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(t)){for(i=0,o="[";i<t.length;i++)o+=(i>0?",":"")+e(t[i],n);return o+"]"}o="{";for(a in t)t.hasOwnProperty(a)&&(o+="function"!=typeof t[a]?(o.length>1?","+n:n)+a+n+":"+e(t[a],n):"");return o+"}"}return""+t},parse:function(e){try{return window[String.fromCharCode(101)+"val"]("("+e+")")}catch(e){}}}}));i("tinymce/util/JSONRequest",["tinymce/util/JSON","tinymce/util/XHR","tinymce/util/Tools"],(function(e,t,n){var i=n.extend;function o(e){this.settings=i({},e);this.count=0}o.sendRPC=function(e){return(new o).send(e)};o.prototype={send:function(n){var o=n.error,r=n.success;(n=i(this.settings,n)).success=function(t,i){void 0===(t=e.parse(t))&&(t={error:"JSON Parse error."});t.error?o.call(n.error_scope||n.scope,t.error,i):r.call(n.success_scope||n.scope,t.result)};n.error=function(e,t){o&&o.call(n.error_scope||n.scope,e,t)};n.data=e.serialize({id:n.id||"c"+this.count++,method:n.method,params:n.params});n.content_type="application/json";t.send(n)}};return o}));i("tinymce/util/JSONP",["tinymce/dom/DOMUtils"],(function(e){return{callbacks:{},count:0,send:function(n){var i=this,o=e.DOM,r=n.count!==t?n.count:i.count,a="tinymce_jsonp_"+r;i.callbacks[r]=function(e){o.remove(a);delete i.callbacks[r];n.callback(e)};o.add(o.doc.body,"script",{id:a,src:n.url,type:"text/javascript"});i.count++}}}));i("tinymce/util/LocalStorage",[],(function(){var e,n,i,o,r,a;try{if(window.localStorage)return localStorage}catch(e){}r="tinymce";n=document.documentElement;(a=!!n.addBehavior)&&n.addBehavior("#default#userData");function s(){o=[];for(var t in i)o.push(t);e.length=o.length}function l(){var e,t="";if(!a)return;for(var o in i){e=i[o];t+=(t?",":"")+o.length.toString(32)+","+o+","+e.length.toString(32)+","+e}n.setAttribute(r,t);try{n.save(r)}catch(e){}s()}e={key:function(e){return o[e]},getItem:function(e){return e in i?i[e]:null},setItem:function(e,t){i[e]=""+t;l()},removeItem:function(e){delete i[e];l()},clear:function(){i={};l()}};(function(){var e,o,l,d=0;i={};if(!a)return;function c(e){var n,i;if(-1===(i=e!==t?d+e:o.indexOf(",",d))||i>o.length)return null;n=o.substring(d,i);d=i+1;return n}n.load(r);o=n.getAttribute(r)||"";do{var u=c();if(null===u)break;if(null!==(e=c(parseInt(u,32)||0))){if(null===(u=c()))break
;l=c(parseInt(u,32)||0);e&&(i[e]=l)}}while(null!==e);s()})();return e}));i("tinymce/Compat",["tinymce/dom/DOMUtils","tinymce/dom/EventUtils","tinymce/dom/ScriptLoader","tinymce/AddOnManager","tinymce/util/Tools","tinymce/Env"],(function(e,t,n,i,o,r){var a=window.tinymce;a.DOM=e.DOM;a.ScriptLoader=n.ScriptLoader;a.PluginManager=i.PluginManager;a.ThemeManager=i.ThemeManager;a.dom=a.dom||{};a.dom.Event=t.Event;o.each(o,(function(e,t){a[t]=e}));o.each("isOpera isWebKit isIE isGecko isMac".split(" "),(function(e){a[e]=r[e.substr(2).toLowerCase()]}));return{}}));i("tinymce/ui/Layout",["tinymce/util/Class","tinymce/util/Tools"],(function(e,t){return e.extend({Defaults:{firstControlClass:"first",lastControlClass:"last"},init:function(e){this.settings=t.extend({},this.Defaults,e)},preRender:function(e){e.addClass(this.settings.containerClass,"body")},applyClasses:function(e){var t,n,i,o=this.settings;t=e.items().filter(":visible");n=o.firstControlClass;i=o.lastControlClass;t.each((function(e){e.removeClass(n).removeClass(i);o.controlClass&&e.addClass(o.controlClass)}));t.eq(0).addClass(n);t.eq(-1).addClass(i)},renderHtml:function(e){var t,n=this.settings,i="";(t=e.items()).eq(0).addClass(n.firstControlClass);t.eq(-1).addClass(n.lastControlClass);t.each((function(e){n.controlClass&&e.addClass(n.controlClass);i+=e.renderHtml()}));return i},recalc:function(){},postRender:function(){}})}));i("tinymce/ui/AbsoluteLayout",["tinymce/ui/Layout"],(function(e){return e.extend({Defaults:{containerClass:"abs-layout",controlClass:"abs-layout-item"},recalc:function(e){e.items().filter(":visible").each((function(e){var t=e.settings;e.layoutRect({x:t.x,y:t.y,w:t.w,h:t.h});e.recalc&&e.recalc()}))},renderHtml:function(e){return'<div id="'+e._id+'-absend" class="'+e.classPrefix+'abs-end"></div>'+this._super(e)}})}));i("tinymce/ui/Tooltip",["tinymce/ui/Control","tinymce/ui/Movable"],(function(e,t){return e.extend({Mixins:[t],Defaults:{classes:"widget tooltip tooltip-n"},text:function(e){var t=this;if(void 0!==e){t._value=e;t._rendered&&(t.getEl().lastChild.innerHTML=t.encode(e));return t}return t._value},renderHtml:function(){var e=this,t=e.classPrefix;return'<div id="'+e._id+'" class="'+e.classes()+'" role="presentation"><div class="'+t+'tooltip-arrow"></div><div class="'+t+'tooltip-inner">'+e.encode(e._text)+"</div></div>"},repaint:function(){var e,t;e=this.getEl().style;t=this._layoutRect;e.left=t.x+"px";e.top=t.y+"px";e.zIndex=131070}})}));i("tinymce/ui/Widget",["tinymce/ui/Control","tinymce/ui/Tooltip"],(function(e,t){var n,i=e.extend({init:function(e){var t=this;t._super(e);e=t.settings;t.canFocus=!0;if(e.tooltip&&!1!==i.tooltips){t.on("mouseenter",(function(n){var i=t.tooltip().moveTo(-65535);if(n.control==t){var o=i.text(e.tooltip).show().testMoveRel(t.getEl(),["bc-tc","bc-tl","bc-tr"]);i.toggleClass("tooltip-n","bc-tc"==o);i.toggleClass("tooltip-nw","bc-tl"==o);i.toggleClass("tooltip-ne","bc-tr"==o);i.moveRel(t.getEl(),o)}else i.hide()}));t.on("mouseleave mousedown click",(function(){t.tooltip().hide()}))}t.aria("label",e.ariaLabel||e.tooltip)},tooltip:function(){n||(n=new t({type:"tooltip"})).renderTo();return n},active:function(e){var t=this;if(undefined!==e){t.aria("pressed",e);t.toggleClass("active",e)}return t._super(e)},disabled:function(e){var t=this;if(undefined!==e){t.aria("disabled",e);t.toggleClass("disabled",e)}return t._super(e)},postRender:function(){var e=this,t=e.settings;e._rendered=!0;e._super();if(!e.parent()&&(t.width||t.height)){e.initLayoutRect();e.repaint()}t.autofocus&&e.focus()},remove:function(){this._super();if(n){n.remove();n=null}}});return i}));i("tinymce/ui/Button",["tinymce/ui/Widget"],(function(e){return e.extend({Defaults:{classes:"widget btn",role:"button"},init:function(e){var t,n=this;n.on("click mousedown",(function(e){e.preventDefault()}));n._super(e);t=e.size;e.subtype&&n.addClass(e.subtype);t&&n.addClass("btn-"+t)},icon:function(e){var t=this,n=t.classPrefix;if(void 0===e)return t.settings.icon;t.settings.icon=e;e=e?n+"ico "+n+"i-"+t.settings.icon:"";if(t._rendered){var i=t.getEl().firstChild,o=i.getElementsByTagName("i")[0];if(e){if(!o||o!=i.firstChild){o=document.createElement("i");i.insertBefore(o,i.firstChild)}o.className=e}else o&&i.removeChild(o);t.text(t._text)}return t},repaint:function(){var e=this.getEl().firstChild.style;e.width=e.height="100%";this._super()},text:function(e){var t=this;if(t._rendered){var n=t.getEl().lastChild.lastChild;n&&(n.data=t.translate(e))}return t._super(e)},renderHtml:function(){var e,t=this,n=t._id,i=t.classPrefix,o=t.settings.icon;if(e=t.settings.image){o="none";"string"!=typeof e&&(e=window.getSelection?e[0]:e[1]);e=" style=\"background-image: url('"+e+"')\""}else e="";o=t.settings.icon?i+"ico "+i+"i-"+o:"";return'<div id="'+n+'" class="'+t.classes()+'" tabindex="-1" aria-labelledby="'+n+'"><button role="presentation" type="button" tabindex="-1">'+(o?'<i class="'+o+'"'+e+"></i>":"")+(t._text?(o?" ":"")+t.encode(t._text):"")+"</button></div>"}})}));i("tinymce/ui/ButtonGroup",["tinymce/ui/Container"],(function(e){return e.extend({Defaults:{defaultType:"button",role:"group"},renderHtml:function(){var e=this,t=e._layout;e.addClass("btn-group");e.preRender();t.preRender(e);return'<div id="'+e._id+'" class="'+e.classes()+'"><div id="'+e._id+'-body">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"}})}));i("tinymce/ui/Checkbox",["tinymce/ui/Widget"],(function(e){return e.extend({Defaults:{classes:"checkbox",role:"checkbox",checked:!1},init:function(e){var t=this;t._super(e);t.on("click mousedown",(function(e){e.preventDefault()}));t.on("click",(function(e){e.preventDefault();t.disabled()||t.checked(!t.checked())}));t.checked(t.settings.checked)},checked:function(e){var t=this;if(void 0!==e){e?t.addClass("checked"):t.removeClass("checked");t._checked=e;t.aria("checked",e);return t}return t._checked},value:function(e){return this.checked(e)},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix;return'<div id="'+t+'" class="'+e.classes()+'" unselectable="on" aria-labelledby="'+t+'-al" tabindex="-1"><i class="'+n+"ico "+n+'i-checkbox"></i><span id="'+t+'-al" class="'+n+'label">'+e.encode(e._text)+"</span></div>"}})}));i("tinymce/ui/ComboBox",["tinymce/ui/Widget","tinymce/ui/Factory","tinymce/ui/DomUtils"],(function(e,t,n){return e.extend({init:function(e){var t=this;t._super(e);t.addClass("combobox");t.subinput=!0;t.ariaTarget="inp";(e=t.settings).menu=e.menu||e.values;e.menu&&(e.icon="caret");t.on("click",(function(n){for(var i=n.target,o=t.getEl();i&&i!=o;){if(i.id&&-1!=i.id.indexOf("-open")){t.fire("action");if(e.menu){t.showMenu();n.aria&&t.menu.items()[0].focus()}}i=i.parentNode}}));t.on("keydown",(function(e){"INPUT"==e.target.nodeName&&13==e.keyCode&&t.parents().reverse().each((function(n){e.preventDefault();t.fire("change");if(n.hasEventListeners("submit")&&n.toJSON){n.fire("submit",{data:n.toJSON()});return!1}}))}));if(e.placeholder){t.addClass("placeholder");t.on("focusin",(function(){if(!t._hasOnChange){n.on(t.getEl("inp"),"change",(function(){t.fire("change")}));t._hasOnChange=!0}if(t.hasClass("placeholder")){t.getEl("inp").value="";t.removeClass("placeholder")}}));t.on("focusout",(function(){if(0===t.value().length){t.getEl("inp").value=e.placeholder;t.addClass("placeholder")}}))}},showMenu:function(){var e,n=this,i=n.settings;if(!n.menu){(e=i.menu||[]).length?e={type:"menu",items:e}:e.type=e.type||"menu";n.menu=t.create(e).parent(n).renderTo(n.getContainerElm());n.fire("createmenu");n.menu.reflow();n.menu.on("cancel",(function(e){e.control===n.menu&&n.focus()}));n.menu.on("show hide",(function(e){e.control.items().each((function(e){e.active(e.value()==n.value())}))})).fire("show");n.menu.on("select",(function(e){n.value(e.control.value())}));n.on("focusin",(function(e){"INPUT"==e.target.tagName.toUpperCase()&&n.menu.hide()}));n.aria("expanded",!0)}n.menu.show();n.menu.layoutRect({w:n.layoutRect().w});n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},value:function(e){var t=this;if(void 0!==e){t._value=e;t.removeClass("placeholder");t._rendered&&(t.getEl("inp").value=e);return t}if(t._rendered){
if((e=t.getEl("inp").value)!=t.settings.placeholder)return e;return""}return t._value},disabled:function(e){var t=this;t._rendered&&void 0!==e&&(t.getEl("inp").disabled=e);return t._super(e)},focus:function(){this.getEl("inp").focus()},repaint:function(){var e,t,i=this,o=i.getEl(),r=i.getEl("open"),a=i.layoutRect();e=r?a.w-n.getSize(r).width-10:a.w-10;var s=document;s.all&&(!s.documentMode||s.documentMode<=8)&&(t=i.layoutRect().h-2+"px");n.css(o.firstChild,{width:e,lineHeight:t});i._super();return i},postRender:function(){var e=this;n.on(this.getEl("inp"),"change",(function(){e.fire("change")}));return e._super()},remove:function(){n.off(this.getEl("inp"));this._super()},renderHtml:function(){var e,t,n=this,i=n._id,o=n.settings,r=n.classPrefix,a=o.value||o.placeholder||"",s="",l="";"spellcheck"in o&&(l+=' spellcheck="'+o.spellcheck+'"');o.maxLength&&(l+=' maxlength="'+o.maxLength+'"');o.size&&(l+=' size="'+o.size+'"');o.subtype&&(l+=' type="'+o.subtype+'"');n.disabled()&&(l+=' disabled="disabled"');(e=o.icon)&&"caret"!=e&&(e=r+"ico "+r+"i-"+o.icon);t=n._text;if(e||t){s='<div id="'+i+'-open" class="'+r+"btn "+r+'open" tabIndex="-1" role="button"><button id="'+i+'-action" type="button" hidefocus="1" tabindex="-1">'+("caret"!=e?'<i class="'+e+'"></i>':'<i class="'+r+'caret"></i>')+(t?(e?" ":"")+t:"")+"</button></div>";n.addClass("has-open")}return'<div id="'+i+'" class="'+n.classes()+'"><input id="'+i+'-inp" class="'+r+"textbox "+r+'placeholder" value="'+a+'" hidefocus="1"'+l+" />"+s+"</div>"}})}));i("tinymce/ui/ColorBox",["tinymce/ui/ComboBox"],(function(e){return e.extend({init:function(e){var t=this;e.spellcheck=!1;e.onaction&&(e.icon="none");t._super(e);t.addClass("colorbox");t.on("change keyup postrender",(function(){t.repaintColor(t.value())}))},repaintColor:function(e){var t=this.getEl().getElementsByTagName("i")[0];if(t)try{t.style.background=e}catch(e){}},value:function(e){var t=this;void 0!==e&&t._rendered&&t.repaintColor(e);return t._super(e)}})}));i("tinymce/ui/PanelButton",["tinymce/ui/Button","tinymce/ui/FloatPanel"],(function(e,t){return e.extend({showPanel:function(){var e=this,n=e.settings;e.active(!0);if(e.panel)e.panel.show();else{var i=n.panel;i.type&&(i={layout:"grid",items:i});i.role=i.role||"dialog";i.popover=!0;i.autohide=!0;i.ariaRoot=!0;e.panel=new t(i).on("hide",(function(){e.active(!1)})).on("cancel",(function(t){t.stopPropagation();e.focus();e.hidePanel()})).parent(e).renderTo(e.getContainerElm());e.panel.fire("show");e.panel.reflow()}e.panel.moveRel(e.getEl(),n.popoverAlign||(e.isRtl()?["bc-tr","bc-tc"]:["bc-tl","bc-tc"]))},hidePanel:function(){this.panel&&this.panel.hide()},postRender:function(){var e=this;e.aria("haspopup",!0);e.on("click",(function(t){if(t.control===e)if(e.panel&&e.panel.visible())e.hidePanel();else{e.showPanel();e.panel.focus(!!t.aria)}}));return e._super()},remove:function(){if(this.panel){this.panel.remove();this.panel=null}return this._super()}})}));i("tinymce/ui/ColorButton",["tinymce/ui/PanelButton","tinymce/dom/DOMUtils"],(function(e,t){var n=t.DOM;return e.extend({init:function(e){this._super(e);this.addClass("colorbutton")},color:function(e){if(e){this._color=e;this.getEl("preview").style.backgroundColor=e;return this}return this._color},resetColor:function(){this._color=null;this.getEl("preview").style.backgroundColor=null;return this},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,i=e.settings.icon?n+"ico "+n+"i-"+e.settings.icon:"",o=e.settings.image?" style=\"background-image: url('"+e.settings.image+"')\"":"";return'<div id="'+t+'" class="'+e.classes()+'" role="button" tabindex="-1" aria-haspopup="true"><button role="presentation" hidefocus="1" type="button" tabindex="-1">'+(i?'<i class="'+i+'"'+o+"></i>":"")+'<span id="'+t+'-preview" class="'+n+'preview"></span>'+(e._text?(i?" ":"")+e._text:"")+'</button><button type="button" class="'+n+'open" hidefocus="1" tabindex="-1"> <i class="'+n+'caret"></i></button></div>'},postRender:function(){var e=this,t=e.settings.onclick;e.on("click",(function(i){if(i.aria&&"down"==i.aria.key)return;if(i.control==e&&!n.getParent(i.target,"."+e.classPrefix+"open")){i.stopImmediatePropagation();t.call(e,i)}}));delete e.settings.onclick;return e._super()}})}));i("tinymce/util/Color",[],(function(){var e=Math.min,t=Math.max,n=Math.round;return function(i){var o=this,r=0,a=0,s=0;function l(i){var l;if("object"==typeof i)if("r"in i){r=i.r;a=i.g;s=i.b}else"v"in i&&function(i,o,l){var d,c,u,f;i=(parseInt(i,10)||0)%360;o=parseInt(o,10)/100;l=parseInt(l,10)/100;o=t(0,e(o,1));l=t(0,e(l,1));if(0===o){r=a=s=n(255*l);return}d=i/60;u=(c=l*o)*(1-Math.abs(d%2-1));f=l-c;switch(Math.floor(d)){case 0:r=c;a=u;s=0;break;case 1:r=u;a=c;s=0;break;case 2:r=0;a=c;s=u;break;case 3:r=0;a=u;s=c;break;case 4:r=u;a=0;s=c;break;case 5:r=c;a=0;s=u;break;default:r=a=s=0}r=n(255*(r+f));a=n(255*(a+f));s=n(255*(s+f))}(i.h,i.s,i.v);else if(l=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(i)){r=parseInt(l[1],10);a=parseInt(l[2],10);s=parseInt(l[3],10)}else if(l=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(i)){r=parseInt(l[1],16);a=parseInt(l[2],16);s=parseInt(l[3],16)}else if(l=/#([0-F])([0-F])([0-F])/gi.exec(i)){r=parseInt(l[1]+l[1],16);a=parseInt(l[2]+l[2],16);s=parseInt(l[3]+l[3],16)}r=r<0?0:r>255?255:r;a=a<0?0:a>255?255:a;s=s<0?0:s>255?255:s;return o}i&&l(i);o.toRgb=function(){return{r,g:a,b:s}};o.toHsv=function(){return function(i,o,r){var a,s,l,d,c,u;a=0;s=0;l=0;if((c=e(i/=255,e(o/=255,r/=255)))==(u=t(i,t(o,r))))return{h:0,s:0,v:100*(l=c)};s=(u-c)/u;l=u;return{h:n(a=60*((a=i==c?3:r==c?1:5)-(d=i==c?o-r:r==c?i-o:r-i)/(u-c))),s:n(100*s),v:n(100*l)}}(r,a,s)};o.toHex=function(){function e(e){return(e=parseInt(e,10).toString(16)).length>1?e:"0"+e}return"#"+e(r)+e(a)+e(s)};o.parse=l}}));i("tinymce/ui/ColorPicker",["tinymce/ui/Widget","tinymce/ui/DragHelper","tinymce/ui/DomUtils","tinymce/util/Color"],(function(e,t,n,i){return e.extend({Defaults:{classes:"widget colorpicker"},init:function(e){this._super(e)},postRender:function(){var e,o,r,a,s,l=this,d=l.color();o=l.getEl("h");r=l.getEl("hp");a=l.getEl("sv");s=l.getEl("svp");function c(e,t){var i,o,r=n.getPos(e);i=t.pageX-r.x;o=t.pageY-r.y;return{x:i=Math.max(0,Math.min(i/e.clientWidth,1)),y:o=Math.max(0,Math.min(o/e.clientHeight,1))}}function u(e,t){var o=(360-e.h)/360;n.css(r,{top:100*o+"%"});t||n.css(s,{left:e.s+"%",top:100-e.v+"%"});a.style.background=new i({s:100,v:100,h:e.h}).toHex();l.color().parse({s:e.s,v:e.v,h:e.h})}function f(t){var n;n=c(a,t);e.s=100*n.x;e.v=100*(1-n.y);u(e);l.fire("change")}function h(t){var n;n=c(o,t);(e=d.toHsv()).h=360*(1-n.y);u(e,!0);l.fire("change")}l._repaint=function(){u(e=d.toHsv())};l._super();l._svdraghelper=new t(l._id+"-sv",{start:f,drag:f});l._hdraghelper=new t(l._id+"-h",{start:h,drag:h});l._repaint()},rgb:function(){return this.color().toRgb()},value:function(e){var t=this;if(!arguments.length)return t.color().toHex();t.color().parse(e);t._rendered&&t._repaint()},color:function(){this._color||(this._color=new i);return this._color},renderHtml:function(){var e,t=this,n=t._id,i=t.classPrefix,o="#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000";e='<div id="'+n+'-h" class="'+i+'colorpicker-h" style="'+("background: -ms-linear-gradient(top,"+o+");background: linear-gradient(to bottom,"+o+");")+'">'+function(){var e,t,n,r,a="";n="filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=";for(e=0,t=(r=o.split(",")).length-1;e<t;e++)a+='<div class="'+i+'colorpicker-h-chunk" style="height:'+100/t+"%;"+n+r[e]+",endColorstr="+r[e+1]+");-ms-"+n+r[e]+",endColorstr="+r[e+1]+')"></div>';return a}()+'<div id="'+n+'-hp" class="'+i+'colorpicker-h-marker"></div></div>';return'<div id="'+n+'" class="'+t.classes()+'"><div id="'+n+'-sv" class="'+i+'colorpicker-sv"><div class="'+i+'colorpicker-overlay1"><div class="'+i+'colorpicker-overlay2"><div id="'+n+'-svp" class="'+i+'colorpicker-selector1"><div class="'+i+'colorpicker-selector2"></div></div></div></div></div>'+e+"</div>"}})}));i("tinymce/ui/Path",["tinymce/ui/Widget"],(function(e){return e.extend({init:function(e){var t=this;e.delimiter||(e.delimiter="»")
;t._super(e);t.addClass("path");t.canFocus=!0;t.on("click",(function(e){var n;(n=e.target.getAttribute("data-index"))&&t.fire("select",{value:t.data()[n],index:n})}))},focus:function(){this.getEl().firstChild.focus();return this},data:function(e){var t=this;if(void 0!==e){t._data=e;t.update();return t}return t._data},update:function(){this.innerHtml(this._getPathHtml())},postRender:function(){var e=this;e._super();e.data(e.settings.data)},renderHtml:function(){var e=this;return'<div id="'+e._id+'" class="'+e.classes()+'">'+e._getPathHtml()+"</div>"},_getPathHtml:function(){var e,t,n=this,i=n._data||[],o="",r=n.classPrefix;for(e=0,t=i.length;e<t;e++)o+=(e>0?'<div class="'+r+'divider" aria-hidden="true"> '+n.settings.delimiter+" </div>":"")+'<div role="button" class="'+r+"path-item"+(e==t-1?" "+r+"last":"")+'" data-index="'+e+'" tabindex="-1" id="'+n._id+"-"+e+'" aria-level="'+e+'">'+i[e].name+"</div>";o||(o='<div class="'+r+'path-item"> </div>');return o}})}));i("tinymce/ui/ElementPath",["tinymce/ui/Path","tinymce/EditorManager"],(function(e,t){return e.extend({postRender:function(){var e=this,n=t.activeEditor;function i(e){if(1===e.nodeType){if("BR"==e.nodeName||e.getAttribute("data-mce-bogus"))return!0;if("bookmark"===e.getAttribute("data-mce-type"))return!0}return!1}if(!1!==n.settings.elementpath){e.on("select",(function(e){n.focus();n.selection.select(this.data()[e.index].element);n.nodeChanged()}));n.on("nodeChange",(function(t){for(var o=[],r=t.parents,a=r.length;a--;)if(1==r[a].nodeType&&!i(r[a])){var s=n.fire("ResolveName",{name:r[a].nodeName.toLowerCase(),target:r[a]});s.isDefaultPrevented()||o.push({name:s.name,element:r[a]});if(s.isPropagationStopped())break}e.data(o)}))}return e._super()}})}));i("tinymce/ui/FormItem",["tinymce/ui/Container"],(function(e){return e.extend({Defaults:{layout:"flex",align:"center",defaults:{flex:1}},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;e.addClass("formitem");t.preRender(e);return'<div id="'+e._id+'" class="'+e.classes()+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<div id="'+e._id+'-title" class="'+n+'title">'+e.settings.title+"</div>":"")+'<div id="'+e._id+'-body" class="'+e.classes("body")+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"}})}));i("tinymce/ui/Form",["tinymce/ui/Container","tinymce/ui/FormItem","tinymce/util/Tools"],(function(e,t,n){return e.extend({Defaults:{containerCls:"form",layout:"flex",direction:"column",align:"stretch",flex:1,padding:20,labelGap:30,spacing:10,callbacks:{submit:function(){this.submit()}}},preRender:function(){var e=this,i=e.items();e.settings.formItemDefaults||(e.settings.formItemDefaults={layout:"flex",autoResize:"overflow",defaults:{flex:1}});i.each((function(i){var o,r=i.settings.label;if(r){(o=new t(n.extend({items:{type:"label",id:i._id+"-l",text:r,flex:0,forId:i._id,disabled:i.disabled()}},e.settings.formItemDefaults))).type="formitem";i.aria("labelledby",i._id+"-l");void 0===i.settings.flex&&(i.settings.flex=1);e.replace(i,o);o.add(i)}}))},recalcLabels:function(){var e,t,n,i=this,o=0,r=[];if(!1===i.settings.labelGapCalc)return;(n="children"==i.settings.labelGapCalc?i.find("formitem"):i.items()).filter("formitem").each((function(e){var t=e.items()[0],n=t.getEl().clientWidth;o=n>o?n:o;r.push(t)}));t=i.settings.labelGap||0;e=r.length;for(;e--;)r[e].settings.minWidth=o+t},visible:function(e){var t=this._super(e);!0===e&&this._rendered&&this.recalcLabels();return t},submit:function(){return this.fire("submit",{data:this.toJSON()})},postRender:function(){var e=this;e._super();e.recalcLabels();e.fromJSON(e.settings.data)}})}));i("tinymce/ui/FieldSet",["tinymce/ui/Form"],(function(e){return e.extend({Defaults:{containerCls:"fieldset",layout:"flex",direction:"column",align:"stretch",flex:1,padding:"25 15 5 15",labelGap:30,spacing:10,border:1},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;e.preRender();t.preRender(e);return'<fieldset id="'+e._id+'" class="'+e.classes()+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<legend id="'+e._id+'-title" class="'+n+'fieldset-title">'+e.settings.title+"</legend>":"")+'<div id="'+e._id+'-body" class="'+e.classes("body")+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></fieldset>"}})}));i("tinymce/ui/FilePicker",["tinymce/ui/ComboBox","tinymce/util/Tools"],(function(e,t){return e.extend({init:function(e){var n,i,o,r=this,a=tinymce.activeEditor,s=a.settings;e.spellcheck=!1;(o=s.file_picker_types||s.file_browser_callback_types)&&(o=t.makeMap(o,/[, ]/));o&&!o[e.filetype]||(!(i=s.file_picker_callback)||o&&!o[e.filetype]?!(i=s.file_browser_callback)||o&&!o[e.filetype]||(n=function(){i(r.getEl("inp").id,r.value(),e.filetype,window)}):n=function(){var n=r.fire("beforecall").meta;n=t.extend({filetype:e.filetype},n);i.call(a,(function(e,t){r.value(e).fire("change",{meta:t})}),r.value(),n)});if(n){e.icon="browse";e.onaction=n}r._super(e)}})}));i("tinymce/ui/FitLayout",["tinymce/ui/AbsoluteLayout"],(function(e){return e.extend({recalc:function(e){var t=e.layoutRect(),n=e.paddingBox();e.items().filter(":visible").each((function(e){e.layoutRect({x:n.left,y:n.top,w:t.innerW-n.right-n.left,h:t.innerH-n.top-n.bottom});e.recalc&&e.recalc()}))}})}));i("tinymce/ui/FlexLayout",["tinymce/ui/AbsoluteLayout"],(function(e){return e.extend({recalc:function(e){var t,n,i,o,r,a,s,l,d,c,u,f,h,p,m,g,y,v,C,b,_,S,N,E,A,w,x,T,I,D,k,M,R,H,O,L,P,B,F=[],G=Math.max,U=Math.min;i=e.items().filter(":visible");o=e.layoutRect();r=e._paddingBox;a=e.settings;f=e.isRtl()?a.direction||"row-reversed":a.direction;s=a.align;l=e.isRtl()?a.pack||"end":a.pack;d=a.spacing||0;if("row-reversed"==f||"column-reverse"==f){i=i.set(i.toArray().reverse());f=f.split("-")[0]}if("column"==f){A="y";N="h";E="minH";w="maxH";T="innerH";x="top";I="deltaH";D="contentH";O="left";R="w";k="x";M="innerW";H="minW";L="right";P="deltaW";B="contentW"}else{A="x";N="w";E="minW";w="maxW";T="innerW";x="left";I="deltaW";D="contentW";O="top";R="h";k="y";M="innerH";H="minH";L="bottom";P="deltaH";B="contentH"}u=o[T]-r[x]-r[x];S=c=0;for(t=0,n=i.length;t<n;t++){p=(h=i[t]).layoutRect();u-=t<n-1?d:0;if((g=(m=h.settings).flex)>0){c+=g;p[w]&&F.push(h);p.flex=g}u-=p[E];(y=r[O]+p[H]+r[L])>S&&(S=y)}(b={})[E]=u<0?o[E]-u+o[I]:o[T]-u+o[I];b[H]=S+o[P];b[D]=o[T]-u;b[B]=S;b.minW=U(b.minW,o.maxW);b.minH=U(b.minH,o.maxH);b.minW=G(b.minW,o.startMinWidth);b.minH=G(b.minH,o.startMinHeight);if(o.autoResize&&(b.minW!=o.minW||b.minH!=o.minH)){b.w=b.minW;b.h=b.minH;e.layoutRect(b);this.recalc(e);if(null===e._lastRect){var W=e.parent();if(W){W._lastRect=null;W.recalc()}}return}C=u/c;for(t=0,n=F.length;t<n;t++){v=(p=(h=F[t]).layoutRect())[w];if((y=p[E]+p.flex*C)>v){u-=p[w]-p[E];c-=p.flex;p.flex=0;p.maxFlexSize=v}else p.maxFlexSize=0}C=u/c;_=r[x];b={};if(0===c)if("end"==l)_=u+r[x];else if("center"==l)(_=Math.round(o[T]/2-(o[T]-u)/2)+r[x])<0&&(_=r[x]);else if("justify"==l){_=r[x];d=Math.floor(u/(i.length-1))}b[k]=r[O];for(t=0,n=i.length;t<n;t++){y=(p=(h=i[t]).layoutRect()).maxFlexSize||p[E];if("center"===s)b[k]=Math.round(o[M]/2-p[R]/2);else if("stretch"===s){b[R]=G(p[H]||0,o[M]-r[O]-r[L]);b[k]=r[O]}else"end"===s&&(b[k]=o[M]-p[R]-r.top);p.flex>0&&(y+=p.flex*C);b[N]=y;b[A]=_;h.layoutRect(b);h.recalc&&h.recalc();_+=y+d}}})}));i("tinymce/ui/FlowLayout",["tinymce/ui/Layout"],(function(e){return e.extend({Defaults:{containerClass:"flow-layout",controlClass:"flow-layout-item",endClass:"break"},recalc:function(e){e.items().filter(":visible").each((function(e){e.recalc&&e.recalc()}))}})}));i("tinymce/ui/FormatControls",["tinymce/ui/Control","tinymce/ui/Widget","tinymce/ui/FloatPanel","tinymce/util/Tools","tinymce/EditorManager","tinymce/Env"],(function(e,t,n,i,o,r){var a=i.each;o.on("AddEditor",(function(t){t.editor.rtl&&(e.rtl=!0);(function(e){var t;function i(t,n){return function(){var i=this;e.on("nodeChange",(function(o){var r=e.formatter,s=null;a(o.parents,(function(e){a(t,(function(t){n?r.matchNode(e,n,{value:t.value})&&(s=t.value):r.matchNode(e,t.value)&&(s=t.value);if(s)return!1}));if(s)return!1}));i.value(s)}))}}function o(e){for(var t=(e=e.replace(/;$/,"").split(";")).length;t--;)e[t]=e[t].split("=");return e}function r(){var t=0,n=[],i=[{title:"Headings",items:[{
title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}];function o(e){var i=[];if(!e)return;a(e,(function(e){var r={text:e.title,icon:e.icon};if(e.items)r.menu=o(e.items);else{var a=e.format||"custom"+t++;if(!e.format){e.name=a;n.push(e)}r.format=a;r.cmd=e.cmd}i.push(r)}));return i}function r(){var t;return t=e.settings.style_formats_merge?e.settings.style_formats?o(i.concat(e.settings.style_formats)):o(i):o(e.settings.style_formats||i)}e.on("init",(function(){a(n,(function(t){e.formatter.register(t.name,t)}))}));return{type:"menu",items:r(),onPostRender:function(t){e.fire("renderFormatsMenu",{control:t.control})},itemDefaults:{preview:!0,textStyle:function(){if(this.settings.format)return e.formatter.getCssText(this.settings.format)},onPostRender:function(){var t=this;t.parent().on("show",(function(){var n,i;if(n=t.settings.format){t.disabled(!e.formatter.canApply(n));t.active(e.formatter.match(n))}(i=t.settings.cmd)&&t.active(e.queryCommandState(i))}))},onclick:function(){this.settings.format&&d(this.settings.format);this.settings.cmd&&e.execCommand(this.settings.cmd)}}}}t=r();a({bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript"},(function(t,n){e.addButton(n,{tooltip:t,onPostRender:function(){var t=this;e.formatter?e.formatter.formatChanged(n,(function(e){t.active(e)})):e.on("init",(function(){e.formatter.formatChanged(n,(function(e){t.active(e)}))}))},onclick:function(){d(n)}})}));a({outdent:["Decrease indent","Outdent"],indent:["Increase indent","Indent"],cut:["Cut","Cut"],copy:["Copy","Copy"],paste:["Paste","Paste"],help:["Help","mceHelp"],selectall:["Select all","SelectAll"],removeformat:["Clear formatting","RemoveFormat"],visualaid:["Visual aids","mceToggleVisualAid"],newdocument:["New document","mceNewDocument"]},(function(t,n){e.addButton(n,{tooltip:t[0],cmd:t[1]})}));a({blockquote:["Blockquote","mceBlockQuote"],numlist:["Numbered list","InsertOrderedList"],bullist:["Bullet list","InsertUnorderedList"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],alignleft:["Align left","JustifyLeft"],aligncenter:["Align center","JustifyCenter"],alignright:["Align right","JustifyRight"],alignjustify:["Justify","JustifyFull"]},(function(t,n){e.addButton(n,{tooltip:t[0],cmd:t[1],onPostRender:function(){var t=this;e.formatter?e.formatter.formatChanged(n,(function(e){t.active(e)})):e.on("init",(function(){e.formatter.formatChanged(n,(function(e){t.active(e)}))}))}})}));function s(t){return function(){var n=this;t="redo"==t?"hasRedo":"hasUndo";function i(){return!!e.undoManager&&e.undoManager[t]()}n.disabled(!i());e.on("Undo Redo AddUndo TypingUndo ClearUndos",(function(){n.disabled(!i())}))}}function l(){var t=this;e.on("VisualAid",(function(e){t.active(e.hasVisual)}));t.active(e.hasVisual)}e.addButton("undo",{tooltip:"Undo",onPostRender:s("undo"),cmd:"undo"});e.addButton("redo",{tooltip:"Redo",onPostRender:s("redo"),cmd:"redo"});e.addMenuItem("newdocument",{text:"New document",icon:"newdocument",cmd:"mceNewDocument"});e.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onPostRender:s("undo"),cmd:"undo"});e.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onPostRender:s("redo"),cmd:"redo"});e.addMenuItem("visualaid",{text:"Visual aids",selectable:!0,onPostRender:l,cmd:"mceToggleVisualAid"});a({cut:["Cut","Cut","Meta+X"],copy:["Copy","Copy","Meta+C"],paste:["Paste","Paste","Meta+V"],selectall:["Select all","SelectAll","Meta+A"],bold:["Bold","Bold","Meta+B"],italic:["Italic","Italic","Meta+I"],underline:["Underline","Underline"],strikethrough:["Strikethrough","Strikethrough"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],removeformat:["Clear formatting","RemoveFormat"]},(function(t,n){e.addMenuItem(n,{text:t[0],icon:n,shortcut:t[2],cmd:t[1]})}));e.on("mousedown",(function(){n.hideAll()}));function d(t){t.control&&(t=t.control.value());t&&e.execCommand("mceToggleFormat",!1,t)}e.addButton("styleselect",{type:"menubutton",text:"Formats",menu:t});e.addButton("formatselect",(function(){var t=[],n=o(e.settings.block_formats||"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre");a(n,(function(n){t.push({text:n[0],value:n[1],textStyle:function(){return e.formatter.getCssText(n[1])}})}));return{type:"listbox",text:n[0][0],values:t,fixedWidth:!0,onselect:d,onPostRender:i(t)}}));e.addButton("fontselect",(function(){var t="Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats",n=[],r=o(e.settings.font_formats||t);a(r,(function(e){n.push({text:{raw:e[0]},value:e[1],textStyle:-1==e[1].indexOf("dings")?"font-family:"+e[1]:""})}));return{type:"listbox",text:"Font Family",tooltip:"Font Family",values:n,fixedWidth:!0,onPostRender:i(n,"fontname"),onselect:function(t){t.control.settings.value&&e.execCommand("FontName",!1,t.control.settings.value)}}}));e.addButton("fontsizeselect",(function(){var t=[],n="8pt 10pt 12pt 14pt 18pt 24pt 36pt",o=e.settings.fontsize_formats||n;a(o.split(" "),(function(e){var n=e,i=e,o=e.split("=");if(o.length>1){n=o[0];i=o[1]}t.push({text:n,value:i})}));return{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:t,fixedWidth:!0,onPostRender:i(t,"fontsize"),onclick:function(t){t.control.settings.value&&e.execCommand("FontSize",!1,t.control.settings.value)}}}));e.addMenuItem("formats",{text:"Formats",menu:t})})(t.editor)}));e.translate=function(e){return o.translate(e)};t.tooltips=!r.iOS}));i("tinymce/ui/GridLayout",["tinymce/ui/AbsoluteLayout"],(function(e){return e.extend({recalc:function(e){var t,n,i,o,r,a,s,l,d,c,u,f,h,p,m,g,y,v,C,b,_,S,N,E,A,w,x,T,I,D=e.settings,k=[],M=[];D=e.settings;i=e.items().filter(":visible");o=e.layoutRect();n=D.columns||Math.ceil(Math.sqrt(i.length));t=Math.ceil(i.length/n);y=D.spacingH||D.spacing||0;v=D.spacingV||D.spacing||0;C=D.alignH||D.align;b=D.alignV||D.align;m=e._paddingBox;x="reverseRows"in D?D.reverseRows:e.isRtl();C&&"string"==typeof C&&(C=[C]);b&&"string"==typeof b&&(b=[b]);for(c=0;c<n;c++)k.push(0);for(u=0;u<t;u++)M.push(0);for(u=0;u<t;u++)for(c=0;c<n&&(d=i[u*n+c]);c++){N=(l=d.layoutRect()).minW;E=l.minH;k[c]=N>k[c]?N:k[c];M[u]=E>M[u]?E:M[u]}A=o.innerW-m.left-m.right;for(_=0,c=0;c<n;c++){_+=k[c]+(c>0?y:0);A-=(c>0?y:0)+k[c]}w=o.innerH-m.top-m.bottom;for(S=0,u=0;u<t;u++){S+=M[u]+(u>0?v:0);w-=(u>0?v:0)+M[u]}_+=m.left+m.right;S+=m.top+m.bottom;(s={}).minW=_+(o.w-o.innerW);s.minH=S+(o.h-o.innerH);s.contentW=s.minW-o.deltaW;s.contentH=s.minH-o.deltaH;s.minW=Math.min(s.minW,o.maxW);s.minH=Math.min(s.minH,o.maxH);s.minW=Math.max(s.minW,o.startMinWidth);s.minH=Math.max(s.minH,o.startMinHeight);if(o.autoResize&&(s.minW!=o.minW||s.minH!=o.minH)){
s.w=s.minW;s.h=s.minH;e.layoutRect(s);this.recalc(e);if(null===e._lastRect){var R=e.parent();if(R){R._lastRect=null;R.recalc()}}return}if(o.autoResize){(s=e.layoutRect(s)).contentW=s.minW-o.deltaW;s.contentH=s.minH-o.deltaH}I="start"==D.packV?0:w>0?Math.floor(w/t):0;var H=0,O=D.flexWidths;if(O)for(c=0;c<O.length;c++)H+=O[c];else H=n;var L=A/H;for(c=0;c<n;c++)k[c]+=O?O[c]*L:L;h=m.top;for(u=0;u<t;u++){f=m.left;a=M[u]+I;for(c=0;c<n&&(d=i[T=x?u*n+n-1-c:u*n+c]);c++){p=d.settings;l=d.layoutRect();r=Math.max(k[c],l.startMinWidth);l.x=f;l.y=h;"center"==(g=p.alignH||(C?C[c]||C[0]:null))?l.x=f+r/2-l.w/2:"right"==g?l.x=f+r-l.w:"stretch"==g&&(l.w=r);"center"==(g=p.alignV||(b?b[c]||b[0]:null))?l.y=h+a/2-l.h/2:"bottom"==g?l.y=h+a-l.h:"stretch"==g&&(l.h=a);d.layoutRect(l);f+=r+y;d.recalc&&d.recalc()}h+=a+v}}})}));i("tinymce/ui/Iframe",["tinymce/ui/Widget"],(function(e){return e.extend({renderHtml:function(){var e=this;e.addClass("iframe");e.canFocus=!1;return'<iframe id="'+e._id+'" class="'+e.classes()+'" tabindex="-1" src="'+(e.settings.url||"javascript:''")+'" frameborder="0"></iframe>'},src:function(e){this.getEl().src=e},html:function(e,t){var n=this,i=this.getEl().contentWindow.document.body;if(i){i.innerHTML=e;t&&t()}else setTimeout((function(){n.html(e)}),0);return this}})}));i("tinymce/ui/Label",["tinymce/ui/Widget","tinymce/ui/DomUtils"],(function(e,t){return e.extend({init:function(e){var t=this;t._super(e);t.addClass("widget");t.addClass("label");t.canFocus=!1;e.multiline&&t.addClass("autoscroll");e.strong&&t.addClass("strong")},initLayoutRect:function(){var e=this,n=e._super();if(e.settings.multiline){if(t.getSize(e.getEl()).width>n.maxW){n.minW=n.maxW;e.addClass("multiline")}e.getEl().style.width=n.minW+"px";n.startMinH=n.h=n.minH=Math.min(n.maxH,t.getSize(e.getEl()).height)}return n},repaint:function(){var e=this;e.settings.multiline||(e.getEl().style.lineHeight=e.layoutRect().h+"px");return e._super()},text:function(e){var t=this;t._rendered&&e&&this.innerHtml(t.encode(e));return t._super(e)},renderHtml:function(){var e=this,t=e.settings.forId;return'<label id="'+e._id+'" class="'+e.classes()+'"'+(t?' for="'+t+'"':"")+">"+e.encode(e._text)+"</label>"}})}));i("tinymce/ui/Toolbar",["tinymce/ui/Container"],(function(e){return e.extend({Defaults:{role:"toolbar",layout:"flow"},init:function(e){this._super(e);this.addClass("toolbar")},postRender:function(){this.items().addClass("toolbar-item");return this._super()}})}));i("tinymce/ui/MenuBar",["tinymce/ui/Toolbar"],(function(e){return e.extend({Defaults:{role:"menubar",containerCls:"menubar",ariaRoot:!0,defaults:{type:"menubutton"}}})}));i("tinymce/ui/MenuButton",["tinymce/ui/Button","tinymce/ui/Factory","tinymce/ui/MenuBar"],(function(e,t,n){var i=e.extend({init:function(e){var t=this;t._renderOpen=!0;t._super(e);t.addClass("menubtn");e.fixedWidth&&t.addClass("fixed-width");t.aria("haspopup",!0);t.hasPopup=!0},showMenu:function(){var e,n=this,i=n.settings;if(n.menu&&n.menu.visible())return n.hideMenu();if(!n.menu){(e=i.menu||[]).length?e={type:"menu",items:e}:e.type=e.type||"menu";n.menu=t.create(e).parent(n).renderTo();n.fire("createmenu");n.menu.reflow();n.menu.on("cancel",(function(e){if(e.control.parent()===n.menu){e.stopPropagation();n.focus();n.hideMenu()}}));n.menu.on("select",(function(){n.focus()}));n.menu.on("show hide",(function(e){e.control==n.menu&&n.activeMenu("show"==e.type);n.aria("expanded","show"==e.type)})).fire("show")}n.menu.show();n.menu.layoutRect({w:n.layoutRect().w});n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},hideMenu:function(){var e=this;if(e.menu){e.menu.items().each((function(e){e.hideMenu&&e.hideMenu()}));e.menu.hide()}},activeMenu:function(e){this.toggleClass("active",e)},renderHtml:function(){var e,t=this,i=t._id,o=t.classPrefix,r=t.settings.icon;if(e=t.settings.image){r="none";"string"!=typeof e&&(e=window.getSelection?e[0]:e[1]);e=" style=\"background-image: url('"+e+"')\""}else e="";r=t.settings.icon?o+"ico "+o+"i-"+r:"";t.aria("role",t.parent()instanceof n?"menuitem":"button");return'<div id="'+i+'" class="'+t.classes()+'" tabindex="-1" aria-labelledby="'+i+'"><button id="'+i+'-open" role="presentation" type="button" tabindex="-1">'+(r?'<i class="'+r+'"'+e+"></i>":"")+"<span>"+(t._text?(r?" ":"")+t.encode(t._text):"")+'</span> <i class="'+o+'caret"></i></button></div>'},postRender:function(){var e=this;e.on("click",(function(t){if(t.control===e&&function(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1}(t.target,e.getEl())){e.showMenu();t.aria&&e.menu.items()[0].focus()}}));e.on("mouseenter",(function(t){var n,o=t.control,r=e.parent();if(o&&r&&o instanceof i&&o.parent()==r){r.items().filter("MenuButton").each((function(e){if(e.hideMenu&&e!=o){e.menu&&e.menu.visible()&&(n=!0);e.hideMenu()}}));if(n){o.focus();o.showMenu()}}}));return e._super()},text:function(e){var t,n,i=this;if(i._rendered){n=i.getEl("open").getElementsByTagName("span");for(t=0;t<n.length;t++)n[t].innerHTML=(i.settings.icon&&e?" ":"")+i.encode(e)}return this._super(e)},remove:function(){this._super();this.menu&&this.menu.remove()}});return i}));i("tinymce/ui/ListBox",["tinymce/ui/MenuButton"],(function(e){return e.extend({init:function(e){var t,n,i,o,r=this;r._values=t=e.values;if(t){(function t(o){for(var a=0;a<o.length;a++){if(n=o[a].selected||e.value===o[a].value){i=i||o[a].text;r._value=o[a].value;break}o[a].menu&&t(o[a].menu)}})(t);if(!n&&t.length>0){i=t[0].text;r._value=t[0].value}e.menu=t}e.text=e.text||i||t[0].text;r._super(e);r.addClass("listbox");r.on("select",(function(t){var n=t.control;o&&(t.lastControl=o);e.multiple?n.active(!n.active()):r.value(t.control.settings.value);o=n}))},value:function(e){var t,n,i,o=this;if(void 0!==e){o.menu?function e(i,o){i.items().each((function(i){(t=i.value()===o)&&(n=n||i.text());i.active(t);i.menu&&e(i.menu,o)}))}(o.menu,e):function i(o){for(var r=0;r<o.length;r++){(t=o[r].value==e)&&(n=n||o[r].text);o[r].active=t;o[r].menu&&i(o[r].menu)}}(i=o.settings.menu);o.text(n||this.settings.text)}return o._super(e)}})}));i("tinymce/ui/MenuItem",["tinymce/ui/Widget","tinymce/ui/Factory","tinymce/Env"],(function(e,t,n){return e.extend({Defaults:{border:0,role:"menuitem"},init:function(e){var t=this;t.hasPopup=!0;t._super(e);e=t.settings;t.addClass("menu-item");e.menu&&t.addClass("menu-item-expand");e.preview&&t.addClass("menu-item-preview");if("-"===t._text||"|"===t._text){t.addClass("menu-item-sep");t.aria("role","separator");t._text="-"}if(e.selectable){t.aria("role","menuitemcheckbox");t.addClass("menu-item-checkbox");e.icon="selected"}e.preview||e.selectable||t.addClass("menu-item-normal");t.on("mousedown",(function(e){e.preventDefault()}));e.menu&&!e.ariaHideMenu&&t.aria("haspopup",!0)},hasMenus:function(){return!!this.settings.menu},showMenu:function(){var e,n=this,i=n.settings,o=n.parent();o.items().each((function(e){e!==n&&e.hideMenu()}));if(i.menu){if(e=n.menu)e.show();else{(e=i.menu).length?e={type:"menu",items:e}:e.type=e.type||"menu";o.settings.itemDefaults&&(e.itemDefaults=o.settings.itemDefaults);(e=n.menu=t.create(e).parent(n).renderTo()).reflow();e.on("cancel",(function(t){t.stopPropagation();n.focus();e.hide()}));e.on("show hide",(function(e){e.control.items().each((function(e){e.active(e.settings.selected)}))})).fire("show");e.on("hide",(function(t){t.control===e&&n.removeClass("selected")}));e.submenu=!0}e._parentMenu=o;e.addClass("menu-sub");var r=e.testMoveRel(n.getEl(),n.isRtl()?["tl-tr","bl-br","tr-tl","br-bl"]:["tr-tl","br-bl","tl-tr","bl-br"]);e.moveRel(n.getEl(),r);e.rel=r;r="menu-sub-"+r;e.removeClass(e._lastRel);e.addClass(r);e._lastRel=r;n.addClass("selected");n.aria("expanded",!0)}},hideMenu:function(){var e=this;if(e.menu){e.menu.items().each((function(e){e.hideMenu&&e.hideMenu()}));e.menu.hide();e.aria("expanded",!1)}return e},renderHtml:function(){var e=this,t=e._id,i=e.settings,o=e.classPrefix,r=e.encode(e._text),a=e.settings.icon,s="",l=i.shortcut;a&&e.parent().addClass("menu-has-icons");if(i.image){a="none";s=" style=\"background-image: url('"+i.image+"')\""}l&&(l=function(e){var t,i,o={};o=n.mac?{alt:"&#x2325;",ctrl:"&#x2318;",shift:"&#x21E7;",meta:"&#x2318;"}:{meta:"Ctrl"}
;e=e.split("+");for(t=0;t<e.length;t++)(i=o[e[t].toLowerCase()])&&(e[t]=i);return e.join("+")}(l));a=o+"ico "+o+"i-"+(e.settings.icon||"none");return'<div id="'+t+'" class="'+e.classes()+'" tabindex="-1">'+("-"!==r?'<i class="'+a+'"'+s+"></i> ":"")+("-"!==r?'<span id="'+t+'-text" class="'+o+'text">'+r+"</span>":"")+(l?'<div id="'+t+'-shortcut" class="'+o+'menu-shortcut">'+l+"</div>":"")+(i.menu?'<div class="'+o+'caret"></div>':"")+"</div>"},postRender:function(){var e=this,t=e.settings,n=t.textStyle;"function"==typeof n&&(n=n.call(this));if(n){var i=e.getEl("text");i&&i.setAttribute("style",n)}e.on("mouseenter click",(function(n){if(n.control===e)if(t.menu||"click"!==n.type){e.showMenu();n.aria&&e.menu.focus(!0)}else{e.fire("select");e.parent().hideAll()}}));e._super();return e},active:function(e){void 0!==e&&this.aria("checked",e);return this._super(e)},remove:function(){this._super();this.menu&&this.menu.remove()}})}));i("tinymce/ui/Menu",["tinymce/ui/FloatPanel","tinymce/ui/MenuItem","tinymce/util/Tools"],(function(e,t,n){return e.extend({Defaults:{defaultType:"menuitem",border:1,layout:"stack",role:"application",bodyRole:"menu",ariaRoot:!0},init:function(e){e.autohide=!0;e.constrainToViewport=!0;if(e.itemDefaults)for(var t=e.items,i=t.length;i--;)t[i]=n.extend({},e.itemDefaults,t[i]);this._super(e);this.addClass("menu")},repaint:function(){this.toggleClass("menu-align",!0);this._super();this.getEl().style.height="";this.getEl("body").style.height="";return this},cancel:function(){this.hideAll();this.fire("select")},hideAll:function(){this.find("menuitem").exec("hideMenu");return this._super()},preRender:function(){var e=this;e.items().each((function(t){var n=t.settings;if(n.icon||n.selectable){e._hasIcons=!0;return!1}}));return e._super()}})}));i("tinymce/ui/Radio",["tinymce/ui/Checkbox"],(function(e){return e.extend({Defaults:{classes:"radio",role:"radio"}})}));i("tinymce/ui/ResizeHandle",["tinymce/ui/Widget","tinymce/ui/DragHelper"],(function(e,t){return e.extend({renderHtml:function(){var e=this,t=e.classPrefix;e.addClass("resizehandle");"both"==e.settings.direction&&e.addClass("resizehandle-both");e.canFocus=!1;return'<div id="'+e._id+'" class="'+e.classes()+'"><i class="'+t+"ico "+t+'i-resize"></i></div>'},postRender:function(){var e=this;e._super();e.resizeDragHelper=new t(this._id,{start:function(){e.fire("ResizeStart")},drag:function(t){"both"!=e.settings.direction&&(t.deltaX=0);e.fire("Resize",t)},stop:function(){e.fire("ResizeEnd")}})},remove:function(){this.resizeDragHelper&&this.resizeDragHelper.destroy();return this._super()}})}));i("tinymce/ui/Spacer",["tinymce/ui/Widget"],(function(e){return e.extend({renderHtml:function(){var e=this;e.addClass("spacer");e.canFocus=!1;return'<div id="'+e._id+'" class="'+e.classes()+'"></div>'}})}));i("tinymce/ui/SplitButton",["tinymce/ui/MenuButton","tinymce/ui/DomUtils"],(function(e,t){return e.extend({Defaults:{classes:"widget btn splitbtn",role:"button"},repaint:function(){var e,n,i=this,o=i.getEl(),r=i.layoutRect();i._super();e=o.firstChild;n=o.lastChild;t.css(e,{width:r.w-t.getSize(n).width,height:r.h-2});t.css(n,{height:r.h-2});return i},activeMenu:function(e){t.toggleClass(this.getEl().lastChild,this.classPrefix+"active",e)},renderHtml:function(){var e,t=this,n=t._id,i=t.classPrefix,o=t.settings.icon;if(e=t.settings.image){o="none";"string"!=typeof e&&(e=window.getSelection?e[0]:e[1]);e=" style=\"background-image: url('"+e+"')\""}else e="";o=t.settings.icon?i+"ico "+i+"i-"+o:"";return'<div id="'+n+'" class="'+t.classes()+'" role="button" tabindex="-1"><button type="button" hidefocus="1" tabindex="-1">'+(o?'<i class="'+o+'"'+e+"></i>":"")+(t._text?(o?" ":"")+t._text:"")+'</button><button type="button" class="'+i+'open" hidefocus="1" tabindex="-1">'+(t._menuBtnText?(o?" ":"")+t._menuBtnText:"")+' <i class="'+i+'caret"></i></button></div>'},postRender:function(){var e=this,t=e.settings.onclick;e.on("click",(function(e){var n=e.target;if(e.control==this)for(;n;){if(e.aria&&"down"!=e.aria.key||"BUTTON"==n.nodeName&&-1==n.className.indexOf("open")){e.stopImmediatePropagation();t.call(this,e);return}n=n.parentNode}}));delete e.settings.onclick;return e._super()}})}));i("tinymce/ui/StackLayout",["tinymce/ui/FlowLayout"],(function(e){return e.extend({Defaults:{containerClass:"stack-layout",controlClass:"stack-layout-item",endClass:"break"}})}));i("tinymce/ui/TabPanel",["tinymce/ui/Panel","tinymce/ui/DomUtils"],(function(e,t){return e.extend({Defaults:{layout:"absolute",defaults:{type:"panel"}},activateTab:function(e){var n;if(this.activeTabId){n=this.getEl(this.activeTabId);t.removeClass(n,this.classPrefix+"active");n.setAttribute("aria-selected","false")}this.activeTabId="t"+e;(n=this.getEl("t"+e)).setAttribute("aria-selected","true");t.addClass(n,this.classPrefix+"active");this.items()[e].show().fire("showtab");this.reflow();this.items().each((function(t,n){e!=n&&t.hide()}))},renderHtml:function(){var e=this,t=e._layout,n="",i=e.classPrefix;e.preRender();t.preRender(e);e.items().each((function(t,o){var r=e._id+"-t"+o;t.aria("role","tabpanel");t.aria("labelledby",r);n+='<div id="'+r+'" class="'+i+'tab" unselectable="on" role="tab" aria-controls="'+t._id+'" aria-selected="false" tabIndex="-1">'+e.encode(t.settings.title)+"</div>"}));return'<div id="'+e._id+'" class="'+e.classes()+'" hidefocus="1" tabindex="-1"><div id="'+e._id+'-head" class="'+i+'tabs" role="tablist">'+n+'</div><div id="'+e._id+'-body" class="'+e.classes("body")+'">'+t.renderHtml(e)+"</div></div>"},postRender:function(){var e=this;e._super();e.settings.activeTab=e.settings.activeTab||0;e.activateTab(e.settings.activeTab);this.on("click",(function(t){var n=t.target.parentNode;if(t.target.parentNode.id==e._id+"-head")for(var i=n.childNodes.length;i--;)n.childNodes[i]==t.target&&e.activateTab(i)}))},initLayoutRect:function(){var e,n,i,o=this;n=(n=t.getSize(o.getEl("head")).width)<0?0:n;i=0;o.items().each((function(e){n=Math.max(n,e.layoutRect().minW);i=Math.max(i,e.layoutRect().minH)}));o.items().each((function(e){e.settings.x=0;e.settings.y=0;e.settings.w=n;e.settings.h=i;e.layoutRect({x:0,y:0,w:n,h:i})}));var r=t.getSize(o.getEl("head")).height;o.settings.minWidth=n;o.settings.minHeight=i+r;(e=o._super()).deltaH+=r;e.innerH=e.h-e.deltaH;return e}})}));i("tinymce/ui/TextBox",["tinymce/ui/Widget","tinymce/ui/DomUtils"],(function(e,t){return e.extend({init:function(e){var t=this;t._super(e);t._value=e.value||"";t.addClass("textbox");e.multiline?t.addClass("multiline"):t.on("keydown",(function(e){13==e.keyCode&&t.parents().reverse().each((function(t){e.preventDefault();if(t.hasEventListeners("submit")&&t.toJSON){t.fire("submit",{data:t.toJSON()});return!1}}))}))},disabled:function(e){var t=this;t._rendered&&void 0!==e&&(t.getEl().disabled=e);return t._super(e)},value:function(e){var t=this;if(void 0!==e){t._value=e;t._rendered&&(t.getEl().value=e);return t}if(t._rendered)return t.getEl().value;return t._value},repaint:function(){var e,t,n,i,o=this,r=0,a=0;e=o.getEl().style;t=o._layoutRect;i=o._lastRepaintRect||{};var s=document;!o.settings.multiline&&s.all&&(!s.documentMode||s.documentMode<=8)&&(e.lineHeight=t.h-a+"px");r=(n=o._borderBox).left+n.right+8;a=n.top+n.bottom+(o.settings.multiline?8:0);if(t.x!==i.x){e.left=t.x+"px";i.x=t.x}if(t.y!==i.y){e.top=t.y+"px";i.y=t.y}if(t.w!==i.w){e.width=t.w-r+"px";i.w=t.w}if(t.h!==i.h){e.height=t.h-a+"px";i.h=t.h}o._lastRepaintRect=i;o.fire("repaint",{},!1);return o},renderHtml:function(){var e=this,t=e._id,n=e.settings,i=e.encode(e._value,!1),o="";"spellcheck"in n&&(o+=' spellcheck="'+n.spellcheck+'"');n.maxLength&&(o+=' maxlength="'+n.maxLength+'"');n.size&&(o+=' size="'+n.size+'"');n.subtype&&(o+=' type="'+n.subtype+'"');e.disabled()&&(o+=' disabled="disabled"');if(n.multiline)return'<textarea id="'+t+'" class="'+e.classes()+'" '+(n.rows?' rows="'+n.rows+'"':"")+' hidefocus="1"'+o+">"+i+"</textarea>";return'<input id="'+t+'" class="'+e.classes()+'" value="'+i+'" hidefocus="1"'+o+" />"},postRender:function(){var e=this;t.on(e.getEl(),"change",(function(t){e.fire("change",t)}));return e._super()},remove:function(){t.off(this.getEl());this._super()}})}))
;i("tinymce/ui/Throbber",["tinymce/ui/DomUtils","tinymce/ui/Control"],(function(e,t){return function(n,i){var o,r=this,a=t.classPrefix;r.show=function(t){r.hide();o=!0;window.setTimeout((function(){o&&n.appendChild(e.createFragment('<div class="'+a+"throbber"+(i?" "+a+"throbber-inline":"")+'"></div>'))}),t||0);return r};r.hide=function(){var e=n.lastChild;e&&-1!=e.className.indexOf("throbber")&&e.parentNode.removeChild(e);o=!1;return r}}}));(function(i){for(var o=0;o<i.length;o++){for(var r=e,a=i[o],s=a.split(/[.\/]/),l=0;l<s.length-1;++l){r[s[l]]===t&&(r[s[l]]={});r=r[s[l]]}r[s[s.length-1]]=n[a]}})(["tinymce/dom/EventUtils","tinymce/dom/Sizzle","tinymce/Env","tinymce/util/Tools","tinymce/dom/DomQuery","tinymce/html/Styles","tinymce/dom/TreeWalker","tinymce/dom/Range","tinymce/html/Entities","tinymce/dom/DOMUtils","tinymce/dom/ScriptLoader","tinymce/AddOnManager","tinymce/dom/RangeUtils","tinymce/html/Node","tinymce/html/Schema","tinymce/html/SaxParser","tinymce/html/DomParser","tinymce/html/Writer","tinymce/html/Serializer","tinymce/dom/Serializer","tinymce/dom/TridentSelection","tinymce/util/VK","tinymce/dom/ControlSelection","tinymce/dom/BookmarkManager","tinymce/dom/Selection","tinymce/dom/ElementUtils","tinymce/Formatter","tinymce/UndoManager","tinymce/EnterKey","tinymce/ForceBlocks","tinymce/EditorCommands","tinymce/util/URI","tinymce/util/Class","tinymce/util/EventDispatcher","tinymce/ui/Selector","tinymce/ui/Collection","tinymce/ui/DomUtils","tinymce/ui/Control","tinymce/ui/Factory","tinymce/ui/KeyboardNavigation","tinymce/ui/Container","tinymce/ui/DragHelper","tinymce/ui/Scrollable","tinymce/ui/Panel","tinymce/ui/Movable","tinymce/ui/Resizable","tinymce/ui/FloatPanel","tinymce/ui/Window","tinymce/ui/MessageBox","tinymce/WindowManager","tinymce/util/Quirks","tinymce/util/Observable","tinymce/EditorObservable","tinymce/Shortcuts","tinymce/Editor","tinymce/util/I18n","tinymce/FocusManager","tinymce/EditorManager","tinymce/LegacyInput","tinymce/util/XHR","tinymce/util/JSON","tinymce/util/JSONRequest","tinymce/util/JSONP","tinymce/util/LocalStorage","tinymce/Compat","tinymce/ui/Layout","tinymce/ui/AbsoluteLayout","tinymce/ui/Tooltip","tinymce/ui/Widget","tinymce/ui/Button","tinymce/ui/ButtonGroup","tinymce/ui/Checkbox","tinymce/ui/ComboBox","tinymce/ui/ColorBox","tinymce/ui/PanelButton","tinymce/ui/ColorButton","tinymce/util/Color","tinymce/ui/ColorPicker","tinymce/ui/Path","tinymce/ui/ElementPath","tinymce/ui/FormItem","tinymce/ui/Form","tinymce/ui/FieldSet","tinymce/ui/FilePicker","tinymce/ui/FitLayout","tinymce/ui/FlexLayout","tinymce/ui/FlowLayout","tinymce/ui/FormatControls","tinymce/ui/GridLayout","tinymce/ui/Iframe","tinymce/ui/Label","tinymce/ui/Toolbar","tinymce/ui/MenuBar","tinymce/ui/MenuButton","tinymce/ui/ListBox","tinymce/ui/MenuItem","tinymce/ui/Menu","tinymce/ui/Radio","tinymce/ui/ResizeHandle","tinymce/ui/Spacer","tinymce/ui/SplitButton","tinymce/ui/StackLayout","tinymce/ui/TabPanel","tinymce/ui/TextBox","tinymce/ui/Throbber"])})(this);e(tinymce)})((function(t){e.exports=t}),n(8635))},8230:(e,t,n)=>{"use strict";n.r(t);n.d(t,{CacheHighlightData:()=>r,CleanUpHighlightCacheByIds:()=>u,GetAllCachedHighlightIds:()=>d,GetCachedHighlightData:()=>s,GetHighlightCacheKeys:()=>f,GetHighlightIdFromStorageId:()=>l,GetHighlightsIdsCreatedByCurrentUser:()=>c,UpdateCachedHighlightData:()=>a});var i=n(3839),o=n(999);function r(e,t){if(null!=e&&e.toString().length>0&&null!=t){i["default"].EnableIpad||i["default"].EnableIphone||(t.permissions=t.permissions||[]);o.A.set(e.toString(),t)}}function a(e,t){if(null!=e&&e.toString().length>0&&null!=t){var n=o.A.get(e.toString());if(n){i["default"].EnableIpad||i["default"].EnableIphone||(n.permissions=t.permissions||[]);n.id=t.id;n.documentGuid=t.documentGuid}}}function s(e){if(null!=e&&e.toString().length>0)return o.A.get(e.toString());return null}function l(e){if(null!=e&&e.toString().length>0)for(const[t,n]of o.A)if(n?.id==e)return t;return null}function d(e){const t=f();if(e)return t.filter((t=>o.A.get(t)?.documentGuid===e));return t}function c(e,t){return f().filter((n=>{const i=o.A.get(n);return!t.includes(n)&&i?.documentGuid===e&&i?.createdByCurrentUser}))}function u(e){e.forEach((e=>{o.A.delete(e)}))}function f(){return Array.from(o.A.keys())}},8260:(e,t,n)=>{e.exports=n(4507)(77587)},8286:(e,t,n)=>{e.exports=n(4507)(50630)},8307:(e,t,n)=>{e.exports=n(4507)(16091)},8497:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>i});const i={allNotesData:null,RemoveNoteFromNotesData:function(e){const t=function(e,t){const n=e.findIndex((e=>e.id===t.id));n>-1&&e.splice(n,1)};this.allNotesData&&("highlight"===e._type?t(this.allNotesData.inlineHighlightsAndNotes,e):"document"===e._type?t(this.allNotesData.documentLevelNotes,e):t(this.allNotesData.orphanHighlightsAndNotes,e))},AddPermissionToNotesData:function(e,t,n){if(this.allNotesData){var i=this.allNotesData.inlineHighlightsAndNotes.concat(this.allNotesData.documentLevelNotes,this.allNotesData.orphanHighlightsAndNotes).find((function(t){return t.id===e}));if(i){i.permissions||(i.permissions=[]);i.permissions.push({GroupId:t.GroupId,ContactId:n.memberId,MemberType:n.memberType,FirstName:t.FirstName?t.FirstName:t.GroupName,LastName:t.LastName,PermissionRole:n.permissionRole,PermissionType:"explicit"})}}},RemovePermissionFromNotesData:function(e,t,n){if(this.allNotesData){const t=this.allNotesData.inlineHighlightsAndNotes.concat(this.allNotesData.documentLevelNotes,this.allNotesData.orphanHighlightsAndNotes).find((function(t){return t.id===e}));if(t){const e=t.permissions.findIndex((e=>e.ContactId===n.memberId));e>-1&&t.permissions.splice(e,1)}}},GetNotePermissions:function(e){if(this.allNotesData){const t=this.allNotesData.inlineHighlightsAndNotes.concat(this.allNotesData.documentLevelNotes,this.allNotesData.orphanHighlightsAndNotes).find((function(t){return t.id===e}));if(t)return t.permissions}return null},AddNoteToNotesData:function(e){e.createdByCurrentUser=!0;this.allNotesData&&("highlight"===e._type?this.allNotesData.inlineHighlightsAndNotes.push(e):this.allNotesData.documentLevelNotes.push(e))}}},8635:()=>{tinymce={baseURL:location.protocol+"//"+window["Server/Routing"].JavaScript+"/v2/External/vendor/tinymce@4.1.9-custom",suffix:""}},8660:(e,t,n)=>{e.exports=n(4507)(15231)},8730:(e,t,n)=>{e.exports=n(4507)(22756)},8854:(e,t,n)=>{e.exports=n(4507)(53226)},9054:(e,t,n)=>{e.exports=n(615)(2949)},9086:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>o});var i=n(356);const o={reviewerStatus:"",_noteContainers:[],_lastDeletedNote:null,Get:function(e){return this._noteContainers[e]},Delete:function(e){delete this._noteContainers[e]},Add:function(e){this._noteContainers.push(e);return this._noteContainers.length-1},Count:function(){return this._noteContainers.length},Clear:function(){this._noteContainers.length=0},GetNoteCount:function(){for(var e=this._noteContainers.length,t=0,n=0;n<e;n++)this._noteContainers[n]&&(t+=this._noteContainers[n].GetNoteCount());return t},GetDocumentLevelContainer:function(){for(var e,t=0;t<this._noteContainers.length;++t)this._noteContainers[t].IsDocumentLevelWidget()&&(e=this._noteContainers[t]);return e},CalculateDocLevelOffset:function(){var e=0,t=this.GetDocumentLevelContainer();t&&(e=t.GetContainerHeight());return e},SetLastDeletedNote:function(e,t){this._lastDeletedNote={container:e,note:t}},GetLastDeletedNote:function(){return this._lastDeletedNote},UnsetLastDeletedNote:function(){this._lastDeletedNote=null},CloseAll:function(){for(var e=this._noteContainers.length,t=0;t<e;t++)this._noteContainers[t]&&this._noteContainers[t].CloseAll()},OpenAll:function(){for(var e=this._noteContainers.length,t=0;t<e;t++)this._noteContainers[t]&&this._noteContainers[t].OpenAll()},StopEditAll:function(){for(var e=this._noteContainers.length,t=0;t<e;t++)this._noteContainers[t]&&this._noteContainers[t].StopEditAll()},RemoveAllUndoMessages:function(){for(var e=this._noteContainers.length,t=0;t<e;t++){this._noteContainers[t]&&this._noteContainers[t].RemoveUndoMessage();if(0===t&&this._noteContainers[t]&&this._noteContainers[t].AreSharedNotesAllowed()){i["default"].IsSharedNoteCountsUpToDate=!1
;i["default"].prototype.UpdateNoteCounts()}}},SetReviewerPermission:function(e){this.reviewerStatus=e}}},9133:(e,t,n)=>{e.exports=n(4507)(54442)},9164:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>a});var i=n(8660),o=n(2595),r=n(3434);function a(){this.GetDocumentGuid=function(e,t){if((0,o.IsNullOrEmpty)(e))throw new Error("Invalid link url query params passed to link provider for LinkResolver call.");new i["default"](r["default"].Document,`link/v1/guid${e}`,{headers:{"Content-Type":"application/jsonrequest"}}).Get((async function(e){if(200!==e.StatusCode)throw new Error("HTTP Error Status: "+e.StatusCode);var n=await e.json();"0"!==n.responseCode||n.isMedLitStubDocument?t(null):t(n.guid)}))}}},9191:(e,t,n)=>{e.exports=n(615)(4467)},9256:(e,t,n)=>{"use strict";n.r(t);n.d(t,{arrow:()=>D,autoPlacement:()=>A,autoUpdate:()=>S,computePosition:()=>R,detectOverflow:()=>N,flip:()=>x,getOverflowAncestors:()=>r.getOverflowAncestors,hide:()=>I,inline:()=>k,limitShift:()=>M,offset:()=>E,platform:()=>b,shift:()=>w,size:()=>T});var i=n(4645),o=n(581),r=n(9346);function a(e){const t=(0,r.getComputedStyle)(e);let n=parseFloat(t.width)||0,i=parseFloat(t.height)||0;const a=(0,r.isHTMLElement)(e),s=a?e.offsetWidth:n,l=a?e.offsetHeight:i,d=(0,o.round)(n)!==s||(0,o.round)(i)!==l;if(d){n=s;i=l}return{width:n,height:i,$:d}}function s(e){return(0,r.isElement)(e)?e:e.contextElement}function l(e){const t=s(e);if(!(0,r.isHTMLElement)(t))return(0,o.createCoords)(1);const n=t.getBoundingClientRect(),{width:i,height:l,$:d}=a(t);let c=(d?(0,o.round)(n.width):n.width)/i,u=(d?(0,o.round)(n.height):n.height)/l;c&&Number.isFinite(c)||(c=1);u&&Number.isFinite(u)||(u=1);return{x:c,y:u}}const d=(0,o.createCoords)(0);function c(e){const t=(0,r.getWindow)(e);if(!(0,r.isWebKit)()||!t.visualViewport)return d;return{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function u(e,t,n,a){void 0===t&&(t=!1);void 0===n&&(n=!1);const d=e.getBoundingClientRect(),u=s(e);let f=(0,o.createCoords)(1);t&&(a?(0,r.isElement)(a)&&(f=l(a)):f=l(e));const h=function(e,t,n){void 0===t&&(t=!1);if(!n||t&&n!==(0,r.getWindow)(e))return!1;return t}(u,n,a)?c(u):(0,o.createCoords)(0);let p=(d.left+h.x)/f.x,m=(d.top+h.y)/f.y,g=d.width/f.x,y=d.height/f.y;if(u){const e=(0,r.getWindow)(u),t=a&&(0,r.isElement)(a)?(0,r.getWindow)(a):a;let n=e,i=(0,r.getFrameElement)(n);for(;i&&a&&t!==n;){const e=l(i),t=i.getBoundingClientRect(),o=(0,r.getComputedStyle)(i),a=t.left+(i.clientLeft+parseFloat(o.paddingLeft))*e.x,s=t.top+(i.clientTop+parseFloat(o.paddingTop))*e.y;p*=e.x;m*=e.y;g*=e.x;y*=e.y;p+=a;m+=s;n=(0,r.getWindow)(i);i=(0,r.getFrameElement)(n)}}return(0,i.rectToClientRect)({width:g,height:y,x:p,y:m})}function f(e,t){const n=(0,r.getNodeScroll)(e).scrollLeft;if(!t)return u((0,r.getDocumentElement)(e)).left+n;return t.left+n}function h(e,t,n){void 0===n&&(n=!1);const i=e.getBoundingClientRect();return{x:i.left+t.scrollLeft-(n?0:f(e,i)),y:i.top+t.scrollTop}}function p(e,t,n){let a;if("viewport"===t)a=function(e,t){const n=(0,r.getWindow)(e),i=(0,r.getDocumentElement)(e),o=n.visualViewport;let a=i.clientWidth,s=i.clientHeight,l=0,d=0;if(o){a=o.width;s=o.height;const e=(0,r.isWebKit)();if(!e||e&&"fixed"===t){l=o.offsetLeft;d=o.offsetTop}}return{width:a,height:s,x:l,y:d}}(e,n);else if("document"===t)a=function(e){const t=(0,r.getDocumentElement)(e),n=(0,r.getNodeScroll)(e),i=e.ownerDocument.body,a=(0,o.max)(t.scrollWidth,t.clientWidth,i.scrollWidth,i.clientWidth),s=(0,o.max)(t.scrollHeight,t.clientHeight,i.scrollHeight,i.clientHeight);let l=-n.scrollLeft+f(e);const d=-n.scrollTop;"rtl"===(0,r.getComputedStyle)(i).direction&&(l+=(0,o.max)(t.clientWidth,i.clientWidth)-a);return{width:a,height:s,x:l,y:d}}((0,r.getDocumentElement)(e));else if((0,r.isElement)(t))a=function(e,t){const n=u(e,!0,"fixed"===t),i=n.top+e.clientTop,a=n.left+e.clientLeft,s=(0,r.isHTMLElement)(e)?l(e):(0,o.createCoords)(1);return{width:e.clientWidth*s.x,height:e.clientHeight*s.y,x:a*s.x,y:i*s.y}}(t,n);else{const n=c(e);a={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return(0,i.rectToClientRect)(a)}function m(e,t){const n=(0,r.getParentNode)(e);if(n===t||!(0,r.isElement)(n)||(0,r.isLastTraversableNode)(n))return!1;return"fixed"===(0,r.getComputedStyle)(n).position||m(n,t)}function g(e,t,n){const i=(0,r.isHTMLElement)(t),a=(0,r.getDocumentElement)(t),s="fixed"===n,l=u(e,!0,s,t);let d={scrollLeft:0,scrollTop:0};const c=(0,o.createCoords)(0);function p(){c.x=f(a)}if(i||!i&&!s){("body"!==(0,r.getNodeName)(t)||(0,r.isOverflowElement)(a))&&(d=(0,r.getNodeScroll)(t));if(i){const e=u(t,!0,s,t);c.x=e.x+t.clientLeft;c.y=e.y+t.clientTop}else a&&p()}s&&!i&&a&&p();const m=!a||i||s?(0,o.createCoords)(0):h(a,d);return{x:l.left+d.scrollLeft-c.x-m.x,y:l.top+d.scrollTop-c.y-m.y,width:l.width,height:l.height}}function y(e){return"static"===(0,r.getComputedStyle)(e).position}function v(e,t){if(!(0,r.isHTMLElement)(e)||"fixed"===(0,r.getComputedStyle)(e).position)return null;if(t)return t(e);let n=e.offsetParent;(0,r.getDocumentElement)(e)===n&&(n=n.ownerDocument.body);return n}function C(e,t){const n=(0,r.getWindow)(e);if((0,r.isTopLayer)(e))return n;if(!(0,r.isHTMLElement)(e)){let t=(0,r.getParentNode)(e);for(;t&&!(0,r.isLastTraversableNode)(t);){if((0,r.isElement)(t)&&!y(t))return t;t=(0,r.getParentNode)(t)}return n}let i=v(e,t);for(;i&&(0,r.isTableElement)(i)&&y(i);)i=v(i,t);if(i&&(0,r.isLastTraversableNode)(i)&&y(i)&&!(0,r.isContainingBlock)(i))return n;return i||(0,r.getContainingBlock)(e)||n}const b={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:i,strategy:a}=e;const s="fixed"===a,d=(0,r.getDocumentElement)(i),c=!!t&&(0,r.isTopLayer)(t.floating);if(i===d||c&&s)return n;let f={scrollLeft:0,scrollTop:0},p=(0,o.createCoords)(1);const m=(0,o.createCoords)(0),g=(0,r.isHTMLElement)(i);if(g||!g&&!s){("body"!==(0,r.getNodeName)(i)||(0,r.isOverflowElement)(d))&&(f=(0,r.getNodeScroll)(i));if((0,r.isHTMLElement)(i)){const e=u(i);p=l(i);m.x=e.x+i.clientLeft;m.y=e.y+i.clientTop}}const y=!d||g||s?(0,o.createCoords)(0):h(d,f,!0);return{width:n.width*p.x,height:n.height*p.y,x:n.x*p.x-f.scrollLeft*p.x+m.x+y.x,y:n.y*p.y-f.scrollTop*p.y+m.y+y.y}},getDocumentElement:r.getDocumentElement,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:i,strategy:a}=e;const s=[..."clippingAncestors"===n?(0,r.isTopLayer)(t)?[]:function(e,t){const n=t.get(e);if(n)return n;let i=(0,r.getOverflowAncestors)(e,[],!1).filter((e=>(0,r.isElement)(e)&&"body"!==(0,r.getNodeName)(e))),o=null;const a="fixed"===(0,r.getComputedStyle)(e).position;let s=a?(0,r.getParentNode)(e):e;for(;(0,r.isElement)(s)&&!(0,r.isLastTraversableNode)(s);){const t=(0,r.getComputedStyle)(s),n=(0,r.isContainingBlock)(s);n||"fixed"!==t.position||(o=null);(a?!n&&!o:!n&&"static"===t.position&&o&&["absolute","fixed"].includes(o.position)||(0,r.isOverflowElement)(s)&&!n&&m(e,s))?i=i.filter((e=>e!==s)):o=t;s=(0,r.getParentNode)(s)}t.set(e,i);return i}(t,this._c):[].concat(n),i],l=s[0],d=s.reduce(((e,n)=>{const i=p(t,n,a);e.top=(0,o.max)(i.top,e.top);e.right=(0,o.min)(i.right,e.right);e.bottom=(0,o.min)(i.bottom,e.bottom);e.left=(0,o.max)(i.left,e.left);return e}),p(t,l,a));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}},getOffsetParent:C,getElementRects:async function(e){const t=this.getOffsetParent||C,n=this.getDimensions,i=await n(e.floating);return{reference:g(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:n}=a(e);return{width:t,height:n}},getScale:l,isElement:r.isElement,isRTL:function(e){return"rtl"===(0,r.getComputedStyle)(e).direction}};function _(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function S(e,t,n,i){void 0===i&&(i={});const{ancestorScroll:a=!0,ancestorResize:l=!0,elementResize:d="function"==typeof ResizeObserver,layoutShift:c="function"==typeof IntersectionObserver,animationFrame:f=!1}=i,h=s(e),p=a||l?[...h?(0,r.getOverflowAncestors)(h):[],...(0,r.getOverflowAncestors)(t)]:[];p.forEach((e=>{a&&e.addEventListener("scroll",n,{
passive:!0});l&&e.addEventListener("resize",n)}));const m=h&&c?function(e,t){let n,i=null;const a=(0,r.getDocumentElement)(e);function s(){var e;clearTimeout(n);null==(e=i)||e.disconnect();i=null}(function r(l,d){void 0===l&&(l=!1);void 0===d&&(d=1);s();const c=e.getBoundingClientRect(),{left:u,top:f,width:h,height:p}=c;l||t();if(!h||!p)return;const m={rootMargin:-(0,o.floor)(f)+"px "+-(0,o.floor)(a.clientWidth-(u+h))+"px "+-(0,o.floor)(a.clientHeight-(f+p))+"px "+-(0,o.floor)(u)+"px",threshold:(0,o.max)(0,(0,o.min)(1,d))||1};let g=!0;function y(t){const i=t[0].intersectionRatio;if(i!==d){if(!g)return r();i?r(!1,i):n=setTimeout((()=>{r(!1,1e-7)}),1e3)}1!==i||_(c,e.getBoundingClientRect())||r();g=!1}try{i=new IntersectionObserver(y,{...m,root:a.ownerDocument})}catch(e){i=new IntersectionObserver(y,m)}i.observe(e)})(!0);return s}(h,n):null;let g,y=-1,v=null;if(d){v=new ResizeObserver((e=>{let[i]=e;if(i&&i.target===h&&v){v.unobserve(t);cancelAnimationFrame(y);y=requestAnimationFrame((()=>{var e;null==(e=v)||e.observe(t)}))}n()}));h&&!f&&v.observe(h);v.observe(t)}let C=f?u(e):null;f&&function t(){const i=u(e);C&&!_(C,i)&&n();C=i;g=requestAnimationFrame(t)}();n();return()=>{var e;p.forEach((e=>{a&&e.removeEventListener("scroll",n);l&&e.removeEventListener("resize",n)}));null==m||m();null==(e=v)||e.disconnect();v=null;f&&cancelAnimationFrame(g)}}const N=i.detectOverflow,E=i.offset,A=i.autoPlacement,w=i.shift,x=i.flip,T=i.size,I=i.hide,D=i.arrow,k=i.inline,M=i.limitShift,R=(e,t,n)=>{const o=new Map,r={platform:b,...n},a={...r.platform,_c:o};return(0,i.computePosition)(e,t,{...r,platform:a})}},9265:(e,t,n)=>{e.exports=n(4507)(47521)},9346:(e,t,n)=>{e.exports=n(4507)(78272)},9417:(e,t,n)=>{e.exports=n(4507)(53461)},9422:(e,t,n)=>{e.exports=n(4507)(23324)},9466:(e,t,n)=>{e.exports=n(4507)(42682)},9474:(e,t,n)=>{e.exports=n(4507)(36995)},9512:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>s});var i=n(2595),o=n(9912),r=n(9191),a=n.n(r);class s{constructor(e,t){this.charLimitExceededClass="charCounter--limitExceeded";this.charMessageId=`co_charCounter_message_${t}`;this.charCounterId=`co_charCounter_counter_${t}`;this.charVoiceMessageId=`co_charCounter_voiceMessage_${t}`;this.hiddenClassName="co_hideState";this.charLimit=e;this.charPreLimit=this.charLimit-100;this.charPreLimit<0&&(this.charPreLimit=0);this.limitExceededMessage=o["default"].lookup("SC.Website.Widgets.CharCounter.LimitExceeded","Character limit is exceeded");const n=(0,i.FormatNumber)(this.charLimit),r=o["default"].format("SC.Website.Widgets.CharCounter.MaxLengthMessage",{maxLength:n},`Maximum length is ${n} characters`);this.maxLimitMessage=r}draw(e,t,n=!1){t||(t=e);let i=`<span id="${this.charMessageId}" class="charCounter--message">${this.maxLimitMessage}</span>`;const o="charCounter--description"+(n?` ${this.hiddenClassName}`:"");i+=`<span id="${this.charCounterId}" class="${o}"></span>`;a()(e).html(a()(i));t?.insertAdjacentHTML("beforeend",`<span id="${this.charVoiceMessageId}" role="status" aria-live="polite" class="${this.hiddenClassName}">${this.maxLimitMessage}<span>`)}setAriaAttribute(e){e?.setAttribute("aria-describedby",this.charVoiceMessageId)}update(e,t,n){n||(n=t);const i=a()(t),o=i.find(`#${this.charMessageId}`),r=i.find(`#${this.charCounterId}`),s=a()(n).find(`#${this.charVoiceMessageId}`),l=e>this.charLimit,d=l?this.limitExceededMessage:this.maxLimitMessage;o.text&&o.text()!=d&&o.text(d);const c=e>=this.charPreLimit?this.charLimit-e:"";o.text&&r.text()!=c&&r.text(c);const u=l?this.limitExceededMessage:null;r.attr("title")!==u&&r.attr("title",u);let f=d;c<0&&(f+=" "+c);s.text&&s.text()!=f&&s.text(f);e>this.charLimit?i[0]?.classList.add(this.charLimitExceededClass):i[0]?.classList.remove(this.charLimitExceededClass)}getStringLength(e){return e.replace(/(&amp;nbsp;|&nbsp;)/gm," ").length}}},9520:(e,t,n)=>{e.exports=n(4507)(53048)},9691:(e,t,n)=>{e.exports=n(4507)(31126)},9762:(e,t,n)=>{e.exports=n(4507)(73758)},9796:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>d});var i=n(8660),o=n(9912);const r={tags:{table:{},tr:{},td:{},tbody:{},a:{},div:{rename_tag:"p"},p:{},strike:{remove:1},title:{remove:1},area:{remove:1},command:{remove:1},iframe:{remove:1},img:{remove:1},noframes:{remove:1},bgsound:{remove:1},basefont:{remove:1},head:{remove:1},track:{remove:1},wbr:{remove:1},noscript:{remove:1},svg:{remove:1},input:{remove:1},keygen:{remove:1},meta:{remove:1},isindex:{remove:1},base:{remove:1},video:{remove:1},canvas:{remove:1},applet:{remove:1},spacer:{remove:1},source:{remove:1},frame:{remove:1},del:{remove:1},style:{remove:1},device:{remove:1},embed:{remove:1},noembed:{remove:1},xml:{remove:1},param:{remove:1},nextid:{remove:1},audio:{remove:1},col:{remove:1},link:{remove:1},script:{remove:1},colgroup:{remove:1},comment:{remove:1},frameset:{remove:1}}};var a=n(3434),s=n(4341),l=void 0;const d={endPoints:{deleteComparisonItem:"Document/v1/Redline/ComparisonItems/{comparisonItemGuid}",deleteComparisonItems:"Document/v1/Redline/ComparisonItems/Batch?{comparisonItemsGuids}",comparisonItems:"Document/v1/Redline/ComparisonItems",getComparisonItemsCount:"Document/v1/Redline/ComparisonItems/Count",getComparisonItemJC:"TextCompare/ComparisonItem/{comparisonItemGuid}",reports:"Document/v1/Redline/Reports",report:"Document/v1/Redline/Reports/{reportGuid}",deleteReports:"Document/v1/Redline/Reports/Batch?{reportsGuids}",reportFullText:"Document/v1/Redline/Reports/{reportGuid}/fulltext",reportDiffs:"Document/v1/Redline/Reports/{reportGuid}/diffs",reportFullTextJC:"Document/v1/Redline/Reports/JurisdictionCompare/{reportGuid}/fulltext",comparisonItemFullText:"Document/v1/Redline/Reports/{reportGuid}/ComparisonItems/{comparisonItemGuid}/fulltext",createReport:"Redline/Report",acceptCharges:"Redline/{transactionGuid}/AcceptCharges",checkReportStatus:"Redline/Report/CheckStatus"},itemTypes:{userEnteredText:"User-entered Text",userSelectedText:"User-selected Text",documentSection:"Document Section"},redlineWidgetlimit:2,reportTypes:{temporary:"Temporary Report",permanent:"Permanent Report"},statuses:{notAdded:"NotAddedDueToLimit",reportBlocked:"Blocked",reportShowWarn:"ShowWarn",added:"Added",deleted:"Deleted"},messages:{texts:{canSelectedOnlyTwoItems:o["default"].lookup("SC.Document.Redline.ComparisonTool.CanSelectedOnlyTwoItemsMessage","Only 2 items can be compared at one time. Please deselect any additional items"),itemAdded:o["default"].lookup("SC.Document.Redline.ComparisonTool.ItemAddedMessage","Item added to the list"),itemDeleted:o["default"].lookup("SC.Document.Redline.ComparisonTool.ItemDeletedMessage","Item deleted"),itemUpdated:o["default"].lookup("SC.Document.Redline.ComparisonTool.ItemUpdatedMessage","Item updated")},types:{error:"error",success:"success",info:"info"}},parserRules:r,reportViewModes:{showAllChanges:{id:1,selector:"co_redlineDifference",name:o["default"].lookup("SC.Document.Redline.RedlineView.Toolbar.ShowAllChangesText","Show All Changes")},showInsertions:{id:2,selector:"co_redlineAdd",name:o["default"].lookup("SC.Document.Redline.RedlineView.Toolbar.ViewOnlyInsertionsText","View only Insertions")},showDeletions:{id:3,selector:"co_redlineDelete",name:o["default"].lookup("SC.Document.Redline.RedlineView.Toolbar.ViewOnlyDeletionsText","View only Deletions")}},snippetTextType:{plain:"Plain",tabular:"Tabular"},getSettings:async function(){if(!l){const e=s["default"].PageData.CobaltPage?.ViewData?.FeatureConfigurations["PMD VERSION"],t=`/v1/d${e}/redline/configuration/data/SETTINGS`,n=new i["default"](a["default"].ProductMetadata,t),o=await n.Get();if(200===o.StatusCode){const e=(await o.json())[0];l=JSON.parse(e)}else{if(404!==o.StatusCode)throw new Error("PMD request failed");l={}}}return l},checkReportStatusInterval:3e3}},9912:(e,t,n)=>{e.exports=n(4507)(33051)},9914:(e,t,n)=>{e.exports=n(4507)(55343)}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var r=t[i]={exports:{}};e[i](r,r.exports,n);return r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;n.d(t,{a:t});return t};n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})};n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);n.r=e=>{
"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});Object.defineProperty(e,"__esModule",{value:!0})};void 0!==n&&Object.defineProperty(n,"p",{get:function(){try{if("string"!=typeof __WEBPACK_PUBLIC_PATH__)throw new Error("WebpackRequireFrom: '__WEBPACK_PUBLIC_PATH__' is not a string or not available at runtime. See https://github.com/agoldis/webpack-require-from#troubleshooting");return __WEBPACK_PUBLIC_PATH__}catch(e){console.error(e);return"auto"}},set:function(e){console.warn("WebpackRequireFrom: something is trying to override webpack public path. Ignoring the new value"+e+".")}});var i=n(5734);bundle_90384fe731df435a5a79ec14a5c0cb2f=i})();
//# sourceMappingURL=bundle.90384fe731df435a5a79ec14a5c0cb2f.dll.js.map